{"version":3,"file":"dropdown-group.js","sourceRoot":"","sources":["../../../../src/components/dropdown-group/dropdown-group.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Prop,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport { Scale, SelectionMode } from \"../interfaces\";\nimport { RequestedItem } from \"./interfaces\";\nimport { createObserver } from \"../../utils/observers\";\nimport { CSS } from \"../dropdown-item/resources\";\n\n/**\n * @slot - A slot for adding `calcite-dropdown-item`s.\n */\n@Component({\n  tag: \"calcite-dropdown-group\",\n  styleUrl: \"dropdown-group.scss\",\n  shadow: {\n    delegatesFocus: true,\n  },\n})\nexport class DropdownGroup {\n  //--------------------------------------------------------------------------\n  //\n  //  Public Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /** Specifies and displays a group title. */\n  @Prop({ reflect: true }) groupTitle: string;\n\n  /**\n   * Specifies the size of the component inherited from the parent `calcite-dropdown`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  /**\n   * Specifies the selection mode of the component, where:\n   *\n   * `\"multiple\"` allows any number of selections,\n   *\n   * `\"single\"` allows only one selection, and\n   *\n   * `\"none\"` does not allow any selections.\n   */\n  @Prop({ reflect: true }) selectionMode: Extract<\"none\" | \"single\" | \"multiple\", SelectionMode> =\n    \"single\";\n\n  @Watch(\"selectionMode\")\n  handlePropsChange(): void {\n    this.updateItems();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalDropdownItemChange: EventEmitter<RequestedItem>;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.updateItems();\n    this.mutationObserver?.observe(this.el, { childList: true });\n  }\n\n  componentWillLoad(): void {\n    this.groupPosition = this.getGroupPosition();\n  }\n\n  disconnectedCallback(): void {\n    this.mutationObserver?.disconnect();\n  }\n\n  render(): VNode {\n    const groupTitle = this.groupTitle ? (\n      <span aria-hidden=\"true\" class=\"dropdown-title\">\n        {this.groupTitle}\n      </span>\n    ) : null;\n\n    const dropdownSeparator =\n      this.groupPosition > 0 ? <div class=\"dropdown-separator\" role=\"separator\" /> : null;\n\n    return (\n      <Host aria-label={this.groupTitle} role=\"group\">\n        <div\n          class={{\n            [CSS.container]: true,\n            [`${CSS.container}--${this.scale}`]: true,\n          }}\n        >\n          {dropdownSeparator}\n          {groupTitle}\n          <slot />\n        </div>\n      </Host>\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"calciteInternalDropdownItemSelect\")\n  updateActiveItemOnChange(event: CustomEvent): void {\n    this.requestedDropdownGroup = event.detail.requestedDropdownGroup;\n    this.requestedDropdownItem = event.detail.requestedDropdownItem;\n    this.calciteInternalDropdownItemChange.emit({\n      requestedDropdownGroup: this.requestedDropdownGroup,\n      requestedDropdownItem: this.requestedDropdownItem,\n    });\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteDropdownGroupElement;\n\n  /** position of group within a dropdown */\n  private groupPosition: number;\n\n  /** the requested group */\n  private requestedDropdownGroup: HTMLCalciteDropdownGroupElement;\n\n  /** the requested item */\n  private requestedDropdownItem: HTMLCalciteDropdownItemElement;\n\n  private updateItems = (): void => {\n    Array.from(this.el.querySelectorAll(\"calcite-dropdown-item\")).forEach(\n      (item) => (item.selectionMode = this.selectionMode),\n    );\n  };\n\n  mutationObserver = createObserver(\"mutation\", () => this.updateItems());\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  private getGroupPosition(): number {\n    return Array.prototype.indexOf.call(\n      this.el.parentElement.querySelectorAll(\"calcite-dropdown-group\"),\n      this.el,\n    );\n  }\n}\n"]}