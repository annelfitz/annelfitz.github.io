{"version":3,"file":"link.js","sourceRoot":"","sources":["../../../../src/components/link/link.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, h, Host, Listen, Method, Prop, VNode } from \"@stencil/core\";\nimport { focusElement, getElementDir } from \"../../utils/dom\";\nimport {\n  connectInteractive,\n  disconnectInteractive,\n  InteractiveComponent,\n  InteractiveContainer,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\nimport {\n  componentFocusable,\n  LoadableComponent,\n  setComponentLoaded,\n  setUpLoadableComponent,\n} from \"../../utils/loadable\";\nimport { CSS_UTILITY } from \"../../utils/resources\";\nimport { FlipContext } from \"../interfaces\";\n\n/** Any attributes placed on <calcite-link> component will propagate to the rendered child */\n/** Passing a 'href' will render an anchor link, instead of a span. Role will be set to link, or link, depending on this. */\n/** It is the consumers responsibility to add aria information, rel, target, for links, and any link attributes for form submission */\n\n/** @slot - A slot for adding text. */\n@Component({\n  tag: \"calcite-link\",\n  styleUrl: \"link.scss\",\n  shadow: true,\n})\nexport class Link implements InteractiveComponent, LoadableComponent {\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /** When `true`, interaction is prevented and the component is displayed with lower opacity. */\n  @Prop({ reflect: true }) disabled = false;\n\n  /**\n   * Prompts the user to save the linked URL instead of navigating to it. Can be used with or without a value:\n   * Without a value, the browser will suggest a filename/extension\n   * See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-download.\n   */\n  @Prop({ reflect: true }) download: string | boolean = false;\n\n  /** Specifies the URL of the linked resource, which can be set as an absolute or relative path. */\n  @Prop({ reflect: true }) href: string;\n\n  /** Specifies an icon to display at the end of the component. */\n  @Prop({ reflect: true }) iconEnd: string;\n\n  /** Displays the `iconStart` and/or `iconEnd` as flipped when the element direction is right-to-left (`\"rtl\"`). */\n  @Prop({ reflect: true }) iconFlipRtl: FlipContext;\n\n  /** Specifies an icon to display at the start of the component. */\n  @Prop({ reflect: true }) iconStart: string;\n\n  /** Specifies the relationship to the linked document defined in `href`. */\n  @Prop() rel: string;\n\n  /** Specifies the frame or window to open the linked document. */\n  @Prop() target: string;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    connectInteractive(this);\n  }\n\n  componentWillLoad(): void {\n    setUpLoadableComponent(this);\n  }\n\n  componentDidLoad(): void {\n    setComponentLoaded(this);\n  }\n\n  componentDidRender(): void {\n    updateHostInteraction(this);\n  }\n\n  disconnectedCallback(): void {\n    disconnectInteractive(this);\n  }\n\n  render(): VNode {\n    const { download, el } = this;\n    const dir = getElementDir(el);\n    const childElType = this.href ? \"a\" : \"span\";\n    const iconStartEl = (\n      <calcite-icon\n        class=\"calcite-link--icon icon-start\"\n        flipRtl={this.iconFlipRtl === \"start\" || this.iconFlipRtl === \"both\"}\n        icon={this.iconStart}\n        scale=\"s\"\n      />\n    );\n\n    const iconEndEl = (\n      <calcite-icon\n        class=\"calcite-link--icon icon-end\"\n        flipRtl={this.iconFlipRtl === \"end\" || this.iconFlipRtl === \"both\"}\n        icon={this.iconEnd}\n        scale=\"s\"\n      />\n    );\n\n    const Tag = childElType;\n    const role = childElType === \"span\" ? \"link\" : null;\n    const tabIndex = childElType === \"span\" ? 0 : null;\n\n    return (\n      <Host role=\"presentation\">\n        <InteractiveContainer disabled={this.disabled}>\n          <Tag\n            class={{ [CSS_UTILITY.rtl]: dir === \"rtl\" }}\n            /*\n          When the 'download' property of type 'boolean | string' is set to true, the value is \"\".\n          This works around that issue for now.\n          */\n            download={Tag === \"a\" && (download === \"\" || download) ? download : null}\n            href={Tag === \"a\" && this.href}\n            onClick={this.childElClickHandler}\n            rel={Tag === \"a\" && this.rel}\n            role={role}\n            tabIndex={tabIndex}\n            target={Tag === \"a\" && this.target}\n            // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n            ref={this.storeTagRef}\n          >\n            {this.iconStart ? iconStartEl : null}\n            <slot />\n            {this.iconEnd ? iconEndEl : null}\n          </Tag>\n        </InteractiveContainer>\n      </Host>\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"click\")\n  clickHandler(event: PointerEvent): void {\n    if (this.disabled) {\n      return;\n    }\n\n    // forwards the click() to the internal link for non user-initiated events\n    if (!event.isTrusted) {\n      this.childEl.click();\n    }\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /** Sets focus on the component. */\n  @Method()\n  async setFocus(): Promise<void> {\n    await componentFocusable(this);\n\n    focusElement(this.childEl);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteLinkElement;\n\n  /** the rendered child element */\n  private childEl: HTMLAnchorElement | HTMLSpanElement;\n\n  private childElClickHandler = (event: PointerEvent): void => {\n    if (!event.isTrusted) {\n      // click was invoked internally, we stop it here\n      event.stopPropagation();\n    }\n  };\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  private storeTagRef = (el: Link[\"childEl\"]): void => {\n    this.childEl = el;\n  };\n}\n"]}