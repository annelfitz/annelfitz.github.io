{"version":3,"file":"combobox.js","sourceRoot":"","sources":["../../../../src/components/combobox/combobox.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport { debounce } from \"lodash-es\";\nimport { filter } from \"../../utils/filter\";\n\nimport {\n  getElementWidth,\n  getTextWidth,\n  isPrimaryPointerButton,\n  toAriaBoolean,\n} from \"../../utils/dom\";\nimport {\n  connectFloatingUI,\n  defaultMenuPlacement,\n  disconnectFloatingUI,\n  EffectivePlacement,\n  filterComputedPlacements,\n  FloatingCSS,\n  FloatingUIComponent,\n  LogicalPlacement,\n  OverlayPositioning,\n  reposition,\n} from \"../../utils/floating-ui\";\nimport {\n  afterConnectDefaultValueSet,\n  connectForm,\n  disconnectForm,\n  FormComponent,\n  HiddenFormInputSlot,\n  submitForm,\n} from \"../../utils/form\";\nimport { guid } from \"../../utils/guid\";\nimport {\n  connectInteractive,\n  disconnectInteractive,\n  InteractiveComponent,\n  InteractiveContainer,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\nimport { connectLabel, disconnectLabel, getLabelText, LabelableComponent } from \"../../utils/label\";\nimport {\n  componentFocusable,\n  componentLoaded,\n  LoadableComponent,\n  setComponentLoaded,\n  setUpLoadableComponent,\n} from \"../../utils/loadable\";\nimport { connectLocalized, disconnectLocalized } from \"../../utils/locale\";\nimport { createObserver } from \"../../utils/observers\";\nimport { onToggleOpenCloseComponent, OpenCloseComponent } from \"../../utils/openCloseComponent\";\nimport {\n  connectMessages,\n  disconnectMessages,\n  setUpMessages,\n  T9nComponent,\n  updateMessages,\n} from \"../../utils/t9n\";\nimport { Scale, SelectionMode, Status } from \"../interfaces\";\nimport { ComboboxMessages } from \"./assets/combobox/t9n\";\nimport { ComboboxChildElement, SelectionDisplay } from \"./interfaces\";\nimport { ComboboxChildSelector, ComboboxItem, ComboboxItemGroup, CSS } from \"./resources\";\nimport { getItemAncestors, getItemChildren, hasActiveChildren, isSingleLike } from \"./utils\";\nimport { XButton, CSS as XButtonCSS } from \"../functional/XButton\";\nimport { getIconScale } from \"../../utils/component\";\nimport { calciteSize48 } from \"@esri/calcite-design-tokens/dist/es6/core.js\";\nimport { Validation } from \"../functional/Validation\";\n\ninterface ItemData {\n  label: string;\n  value: string;\n}\n\nconst isGroup = (el: ComboboxChildElement): el is HTMLCalciteComboboxItemGroupElement =>\n  el.tagName === ComboboxItemGroup;\n\nconst itemUidPrefix = \"combobox-item-\";\nconst chipUidPrefix = \"combobox-chip-\";\nconst labelUidPrefix = \"combobox-label-\";\nconst listboxUidPrefix = \"combobox-listbox-\";\nconst inputUidPrefix = \"combobox-input-\";\n\n/**\n * @slot - A slot for adding `calcite-combobox-item`s.\n */\n@Component({\n  tag: \"calcite-combobox\",\n  styleUrl: \"combobox.scss\",\n  shadow: true,\n  assetsDirs: [\"assets\"],\n})\nexport class Combobox\n  implements\n    LabelableComponent,\n    FormComponent,\n    InteractiveComponent,\n    OpenCloseComponent,\n    FloatingUIComponent,\n    T9nComponent,\n    LoadableComponent\n{\n  //--------------------------------------------------------------------------\n  //\n  //  Public Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * When `true`, the value-clearing will be disabled.\n   */\n  @Prop({ reflect: true }) clearDisabled = false;\n\n  /**\n   * When `selectionMode` is `\"ancestors\"` or `\"multiple\"`, specifies the display of multiple `calcite-combobox-item` selections, where:\n   *\n   * `\"all\"` displays all selections with individual `calcite-chip`s,\n   *\n   * `\"fit\"` displays individual `calcite-chip`s that scale to the component's size, including a non-closable `calcite-chip`, which provides the number of additional `calcite-combobox-item` selections not visually displayed, and\n   *\n   * `\"single\"` displays one `calcite-chip` with the total number of selections.\n   */\n  @Prop({ reflect: true }) selectionDisplay: SelectionDisplay = \"all\";\n\n  /**When `true`, displays and positions the component. */\n  @Prop({ reflect: true, mutable: true }) open = false;\n\n  @Watch(\"open\")\n  openHandler(): void {\n    onToggleOpenCloseComponent(this);\n\n    if (this.disabled) {\n      this.open = false;\n      return;\n    }\n\n    this.setMaxScrollerHeight();\n  }\n\n  /** When `true`, interaction is prevented and the component is displayed with lower opacity. */\n  @Prop({ reflect: true }) disabled = false;\n\n  @Watch(\"disabled\")\n  handleDisabledChange(value: boolean): void {\n    if (!value) {\n      this.open = false;\n    }\n  }\n\n  /**\n   * The `id` of the form that will be associated with the component.\n   *\n   * When not set, the component will be associated with its ancestor form element, if any.\n   */\n  @Prop({ reflect: true }) form: string;\n\n  /** Accessible name for the component. */\n  @Prop() label!: string;\n\n  /** Specifies the placeholder text for the input. */\n  @Prop() placeholder: string;\n\n  /** Specifies the placeholder icon for the input. */\n  @Prop({ reflect: true }) placeholderIcon: string;\n\n  /** When `true`, the icon will be flipped when the element direction is right-to-left (`\"rtl\"`). */\n  @Prop({ reflect: true }) placeholderIconFlipRtl = false;\n\n  /** Specifies the maximum number of `calcite-combobox-item`s (including nested children) to display before displaying a scrollbar. */\n  @Prop({ reflect: true }) maxItems = 0;\n\n  @Watch(\"maxItems\")\n  maxItemsHandler(): void {\n    this.setMaxScrollerHeight();\n  }\n\n  /** Specifies the validation message to display under the component. */\n  @Prop() validationMessage: string;\n\n  /** Specifies the validation icon to display under the component. */\n  @Prop({ reflect: true }) validationIcon: string | boolean;\n\n  /**\n   * Specifies the name of the component.\n   *\n   * Required to pass the component's `value` on form submission.\n   */\n  @Prop({ reflect: true }) name: string;\n\n  /** When `true`, allows entry of custom values, which are not in the original set of items. */\n  @Prop({ reflect: true }) allowCustomValues: boolean;\n\n  /**\n   * Determines the type of positioning to use for the overlaid content.\n   *\n   * Using `\"absolute\"` will work for most cases. The component will be positioned inside of overflowing parent containers and will affect the container's layout.\n   *\n   * `\"fixed\"` should be used to escape an overflowing parent container, or when the reference element's `position` CSS property is `\"fixed\"`.\n   *\n   */\n  @Prop({ reflect: true }) overlayPositioning: OverlayPositioning = \"absolute\";\n\n  @Watch(\"overlayPositioning\")\n  overlayPositioningHandler(): void {\n    this.reposition(true);\n  }\n\n  /** When `true`, the component must have a value in order for the form to submit. */\n  @Prop({ reflect: true }) required = false;\n\n  /**\n   * Specifies the selection mode of the component, where:\n   *\n   * `\"multiple\"` allows any number of selections,\n   *\n   * `\"single\"` allows only one selection,\n   *\n   * `\"single-persist\"` allows one selection and prevents de-selection, and\n   *\n   * `\"ancestors\"` allows multiple selections, but shows ancestors of selected items as selected, with only deepest children shown in chips.\n   */\n  @Prop({ reflect: true }) selectionMode: Extract<\n    \"single\" | \"single-persist\" | \"ancestors\" | \"multiple\",\n    SelectionMode\n  > = \"multiple\";\n\n  /** Specifies the size of the component. */\n  @Prop({ reflect: true }) scale: Scale = \"m\";\n\n  /** Specifies the status of the input field, which determines message and icons. */\n  @Prop({ reflect: true }) status: Status = \"idle\";\n\n  @Watch(\"selectionMode\")\n  @Watch(\"scale\")\n  handlePropsChange(): void {\n    this.updateItems();\n  }\n\n  /** The component's value(s) from the selected `calcite-combobox-item`(s). */\n  @Prop({ mutable: true }) value: string | string[] = null;\n\n  @Watch(\"value\")\n  valueHandler(value: string | string[]): void {\n    if (!this.internalValueChangeFlag) {\n      const items = this.getItems();\n      if (Array.isArray(value)) {\n        items.forEach((item) => (item.selected = value.includes(item.value)));\n      } else if (value) {\n        items.forEach((item) => (item.selected = value === item.value));\n      } else {\n        items.forEach((item) => (item.selected = false));\n      }\n      this.updateItems();\n    }\n  }\n\n  /**\n   * Defines the available placements that can be used when a flip occurs.\n   */\n  @Prop() flipPlacements: EffectivePlacement[];\n\n  /**\n   * Made into a prop for testing purposes only\n   *\n   * @internal\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messages: ComboboxMessages;\n\n  /**\n   * Use this property to override individual strings used by the component.\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messageOverrides: Partial<ComboboxMessages>;\n\n  @Watch(\"messageOverrides\")\n  onMessagesChange(): void {\n    /*  wired up by t9n util */\n  }\n\n  @Watch(\"flipPlacements\")\n  flipPlacementsHandler(): void {\n    this.setFilteredPlacements();\n    this.reposition(true);\n  }\n\n  /**\n   * Specifies the component's selected items.\n   *\n   * @readonly\n   */\n  @Prop({ mutable: true }) selectedItems: HTMLCalciteComboboxItemElement[] = [];\n\n  @Watch(\"selectedItems\")\n  selectedItemsHandler(): void {\n    this.internalValueChangeFlag = true;\n    this.value = this.getValue();\n    this.internalValueChangeFlag = false;\n  }\n\n  /**\n   * Specifies the component's filtered items.\n   *\n   * @readonly\n   */\n  @Prop({ mutable: true }) filteredItems: HTMLCalciteComboboxItemElement[] = [];\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"pointerdown\", { target: \"document\" })\n  documentClickHandler(event: PointerEvent): void {\n    if (this.disabled || !isPrimaryPointerButton(event)) {\n      return;\n    }\n\n    const composedPath = event.composedPath();\n\n    if (composedPath.includes(this.el) || composedPath.includes(this.referenceEl)) {\n      return;\n    }\n\n    if (!this.allowCustomValues && this.textInput.value) {\n      this.clearInputValue();\n      this.filterItems(\"\");\n      this.updateActiveItemIndex(-1);\n    }\n\n    if (this.allowCustomValues && this.text.trim().length) {\n      this.addCustomChip(this.text);\n    }\n\n    this.open = false;\n  }\n\n  @Listen(\"calciteComboboxItemChange\")\n  calciteComboboxItemChangeHandler(event: CustomEvent<HTMLCalciteComboboxItemElement>): void {\n    if (this.ignoreSelectedEventsFlag) {\n      return;\n    }\n\n    const target = event.target as HTMLCalciteComboboxItemElement;\n    const newIndex = this.filteredItems.indexOf(target);\n    this.updateActiveItemIndex(newIndex);\n    this.toggleSelection(target, target.selected);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Updates the position of the component.\n   *\n   * @param delayed Reposition the component after a delay\n   * @returns Promise\n   */\n  @Method()\n  async reposition(delayed = false): Promise<void> {\n    const { floatingEl, referenceEl, placement, overlayPositioning, filteredFlipPlacements } = this;\n\n    return reposition(\n      this,\n      {\n        floatingEl,\n        referenceEl,\n        overlayPositioning,\n        placement,\n        flipPlacements: filteredFlipPlacements,\n        type: \"menu\",\n      },\n      delayed,\n    );\n  }\n\n  /** Sets focus on the component. */\n  @Method()\n  async setFocus(): Promise<void> {\n    await componentFocusable(this);\n\n    this.textInput?.focus();\n    this.activeChipIndex = -1;\n    this.activeItemIndex = -1;\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * Fires when the selected item(s) changes.\n   */\n  @Event({ cancelable: false }) calciteComboboxChange: EventEmitter<void>;\n\n  /** Fires when text is added to filter the options list. */\n  @Event({ cancelable: false }) calciteComboboxFilterChange: EventEmitter<void>;\n\n  /**\n   * Fires when a selected item in the component is closed via its `calcite-chip`.\n   */\n  @Event({ cancelable: false }) calciteComboboxChipClose: EventEmitter<void>;\n\n  /** Fires when the component is requested to be closed, and before the closing transition begins. */\n  @Event({ cancelable: false }) calciteComboboxBeforeClose: EventEmitter<void>;\n\n  /** Fires when the component is closed and animation is complete. */\n  @Event({ cancelable: false }) calciteComboboxClose: EventEmitter<void>;\n\n  /** Fires when the component is added to the DOM but not rendered, and before the opening transition begins. */\n  @Event({ cancelable: false }) calciteComboboxBeforeOpen: EventEmitter<void>;\n\n  /** Fires when the component is open and animation is complete. */\n  @Event({ cancelable: false }) calciteComboboxOpen: EventEmitter<void>;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    connectInteractive(this);\n    connectLocalized(this);\n    connectMessages(this);\n    connectLabel(this);\n    connectForm(this);\n\n    this.internalValueChangeFlag = true;\n    this.value = this.getValue();\n    this.internalValueChangeFlag = false;\n    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n\n    this.updateItems();\n    this.setFilteredPlacements();\n    this.reposition(true);\n\n    if (this.open) {\n      this.openHandler();\n      onToggleOpenCloseComponent(this);\n    }\n    connectFloatingUI(this, this.referenceEl, this.floatingEl);\n  }\n\n  async componentWillLoad(): Promise<void> {\n    setUpLoadableComponent(this);\n    this.updateItems();\n    await setUpMessages(this);\n  }\n\n  componentDidLoad(): void {\n    afterConnectDefaultValueSet(this, this.getValue());\n    this.reposition(true);\n    setComponentLoaded(this);\n  }\n\n  componentDidRender(): void {\n    if (this.el.offsetHeight !== this.inputHeight) {\n      this.reposition(true);\n      this.inputHeight = this.el.offsetHeight;\n    }\n\n    updateHostInteraction(this);\n  }\n\n  componentDidUpdate(): void {\n    this.refreshSelectionDisplay();\n  }\n\n  disconnectedCallback(): void {\n    this.mutationObserver?.disconnect();\n    this.resizeObserver?.disconnect();\n    disconnectInteractive(this);\n    disconnectLabel(this);\n    disconnectForm(this);\n    disconnectFloatingUI(this, this.referenceEl, this.floatingEl);\n    disconnectLocalized(this);\n    disconnectMessages(this);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  private allSelectedIndicatorChipEl: HTMLCalciteChipElement;\n\n  @Element() el: HTMLCalciteComboboxElement;\n\n  placement: LogicalPlacement = defaultMenuPlacement;\n\n  filteredFlipPlacements: EffectivePlacement[];\n\n  internalValueChangeFlag = false;\n\n  labelEl: HTMLCalciteLabelElement;\n\n  formEl: HTMLFormElement;\n\n  defaultValue: Combobox[\"value\"];\n\n  @State() items: HTMLCalciteComboboxItemElement[] = [];\n\n  @State() groupItems: HTMLCalciteComboboxItemGroupElement[] = [];\n\n  @State() needsIcon: boolean;\n\n  @State() activeItemIndex = -1;\n\n  @State() activeChipIndex = -1;\n\n  @State() activeDescendant = \"\";\n\n  @State() compactSelectionDisplay = false;\n\n  @State() selectedHiddenChipsCount = 0;\n\n  @State() selectedVisibleChipsCount = 0;\n\n  @State() text = \"\";\n\n  /** when search text is cleared, reset active to  */\n  @Watch(\"text\")\n  textHandler(): void {\n    this.updateActiveItemIndex(-1);\n  }\n\n  @State() effectiveLocale: string;\n\n  @Watch(\"effectiveLocale\")\n  effectiveLocaleChange(): void {\n    updateMessages(this, this.effectiveLocale);\n  }\n\n  @State() defaultMessages: ComboboxMessages;\n\n  textInput: HTMLInputElement = null;\n\n  data: ItemData[];\n\n  mutationObserver = createObserver(\"mutation\", () => this.updateItems());\n\n  private resizeObserver = createObserver(\"resize\", () => {\n    this.setMaxScrollerHeight();\n    this.refreshSelectionDisplay();\n  });\n\n  private guid = guid();\n\n  private inputHeight = 0;\n\n  private floatingEl: HTMLDivElement;\n\n  private referenceEl: HTMLDivElement;\n\n  private chipContainerEl: HTMLDivElement;\n\n  private listContainerEl: HTMLDivElement;\n\n  private ignoreSelectedEventsFlag = false;\n\n  private maxCompactBreakpoint: number;\n\n  openTransitionProp = \"opacity\";\n\n  private selectedIndicatorChipEl: HTMLCalciteChipElement;\n\n  transitionEl: HTMLDivElement;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  // --------------------------------------------------------------------------\n\n  private clearValue(): void {\n    this.ignoreSelectedEventsFlag = true;\n    this.items.forEach((el) => (el.selected = false));\n    this.ignoreSelectedEventsFlag = false;\n    this.selectedItems = [];\n    this.emitComboboxChange();\n    this.open = false;\n    this.updateActiveItemIndex(-1);\n    this.resetText();\n    this.filterItems(\"\");\n    this.setFocus();\n  }\n\n  private clearInputValue(): void {\n    this.textInput.value = \"\";\n    this.text = \"\";\n  }\n\n  setFilteredPlacements = (): void => {\n    const { el, flipPlacements } = this;\n\n    this.filteredFlipPlacements = flipPlacements\n      ? filterComputedPlacements(flipPlacements, el)\n      : null;\n  };\n\n  getValue = (): string | string[] => {\n    const items = this.selectedItems.map((item) => item?.value?.toString());\n    return items?.length ? (items.length > 1 ? items : items[0]) : \"\";\n  };\n\n  onLabelClick = (): void => {\n    this.setFocus();\n  };\n\n  private comboboxInViewport(): boolean {\n    const bounding = this.el.getBoundingClientRect();\n    return (\n      bounding.top >= 0 &&\n      bounding.left >= 0 &&\n      bounding.right <= (window.innerWidth || document.documentElement.clientWidth) &&\n      bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight)\n    );\n  }\n\n  private keyDownHandler = (event: KeyboardEvent): void => {\n    const { key } = event;\n\n    switch (key) {\n      case \"Tab\":\n        this.activeChipIndex = -1;\n        this.activeItemIndex = -1;\n        if (this.allowCustomValues && this.text) {\n          this.addCustomChip(this.text, true);\n          event.preventDefault();\n        } else if (this.open) {\n          this.open = false;\n          event.preventDefault();\n        } else if (!this.allowCustomValues && this.text) {\n          this.clearInputValue();\n          this.filterItems(\"\");\n          this.updateActiveItemIndex(-1);\n        }\n        break;\n      case \"ArrowLeft\":\n        this.previousChip();\n        event.preventDefault();\n        break;\n      case \"ArrowRight\":\n        this.nextChip();\n        event.preventDefault();\n        break;\n      case \"ArrowUp\":\n        event.preventDefault();\n        if (this.open) {\n          this.shiftActiveItemIndex(-1);\n        }\n\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \"ArrowDown\":\n        event.preventDefault();\n        if (this.open) {\n          this.shiftActiveItemIndex(1);\n        } else {\n          this.open = true;\n          this.ensureRecentSelectedItemIsActive();\n        }\n\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \" \":\n        if (!this.textInput.value) {\n          if (!this.open) {\n            this.open = true;\n            this.shiftActiveItemIndex(1);\n          }\n          event.preventDefault();\n        }\n        break;\n      case \"Home\":\n        if (!this.open) {\n          return;\n        }\n        event.preventDefault();\n        this.updateActiveItemIndex(0);\n        this.scrollToActiveItem();\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \"End\":\n        if (!this.open) {\n          return;\n        }\n        event.preventDefault();\n        this.updateActiveItemIndex(this.filteredItems.length - 1);\n        this.scrollToActiveItem();\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \"Escape\":\n        if (!this.clearDisabled && !this.open) {\n          this.clearValue();\n        }\n\n        this.open = false;\n        event.preventDefault();\n        break;\n      case \"Enter\":\n        if (this.activeItemIndex > -1) {\n          this.toggleSelection(this.filteredItems[this.activeItemIndex]);\n          event.preventDefault();\n        } else if (this.activeChipIndex > -1) {\n          this.removeActiveChip();\n          event.preventDefault();\n        } else if (this.allowCustomValues && this.text) {\n          this.addCustomChip(this.text, true);\n          event.preventDefault();\n        } else if (!event.defaultPrevented) {\n          if (submitForm(this)) {\n            event.preventDefault();\n          }\n        }\n        break;\n      case \"Delete\":\n      case \"Backspace\":\n        const notDeletable =\n          this.selectionDisplay === \"single\" ||\n          (this.selectionDisplay === \"fit\" && this.selectedHiddenChipsCount > 0);\n        if (notDeletable) {\n          return;\n        }\n        if (this.activeChipIndex > -1) {\n          event.preventDefault();\n          this.removeActiveChip();\n        } else if (!this.text && this.isMulti()) {\n          event.preventDefault();\n          this.removeLastChip();\n        }\n        break;\n    }\n  };\n\n  private toggleCloseEnd = (): void => {\n    this.open = false;\n    this.el.removeEventListener(\"calciteComboboxClose\", this.toggleCloseEnd);\n  };\n\n  private toggleOpenEnd = (): void => {\n    this.open = false;\n    this.el.removeEventListener(\"calciteComboboxOpen\", this.toggleOpenEnd);\n  };\n\n  onBeforeOpen(): void {\n    this.scrollToActiveItem();\n    this.calciteComboboxBeforeOpen.emit();\n  }\n\n  onOpen(): void {\n    this.calciteComboboxOpen.emit();\n  }\n\n  onBeforeClose(): void {\n    this.calciteComboboxBeforeClose.emit();\n  }\n\n  onClose(): void {\n    this.calciteComboboxClose.emit();\n  }\n\n  setMaxScrollerHeight = async (): Promise<void> => {\n    const { listContainerEl, open, referenceEl } = this;\n\n    if (!listContainerEl || !open) {\n      return;\n    }\n\n    await this.reposition(true);\n    const maxScrollerHeight = this.getMaxScrollerHeight();\n    listContainerEl.style.maxHeight = maxScrollerHeight > 0 ? `${maxScrollerHeight}px` : \"\";\n    listContainerEl.style.minWidth = `${referenceEl.clientWidth}px`;\n    await this.reposition(true);\n  };\n\n  calciteChipCloseHandler = (comboboxItem: HTMLCalciteComboboxItemElement): void => {\n    this.open = false;\n\n    const selection = this.items.find((item) => item === comboboxItem);\n\n    if (selection) {\n      this.toggleSelection(selection, false);\n    }\n\n    this.calciteComboboxChipClose.emit();\n  };\n\n  clickHandler = (event: MouseEvent): void => {\n    const composedPath = event.composedPath();\n\n    if (composedPath.some((node: HTMLElement) => node.tagName === \"CALCITE-CHIP\")) {\n      this.open = false;\n      event.preventDefault();\n      return;\n    }\n\n    if (composedPath.some((node: HTMLElement) => node.classList?.contains(XButtonCSS.button))) {\n      this.clearValue();\n      event.preventDefault();\n      return;\n    }\n\n    this.open = !this.open;\n    this.ensureRecentSelectedItemIsActive();\n  };\n\n  private ensureRecentSelectedItemIsActive(): void {\n    const { selectedItems } = this;\n    const targetIndex =\n      selectedItems.length === 0 ? 0 : this.items.indexOf(selectedItems[selectedItems.length - 1]);\n\n    this.updateActiveItemIndex(targetIndex);\n  }\n\n  private hideChip(chipEl: HTMLCalciteChipElement): void {\n    chipEl.classList.add(CSS.chipInvisible);\n  }\n\n  private showChip(chipEl: HTMLCalciteChipElement): void {\n    chipEl.classList.remove(CSS.chipInvisible);\n  }\n\n  private refreshChipDisplay({\n    chipEls,\n    availableHorizontalChipElSpace,\n    chipContainerElGap,\n  }): void {\n    chipEls.forEach((chipEl: HTMLCalciteChipElement) => {\n      if (!chipEl.selected) {\n        this.hideChip(chipEl);\n      } else {\n        const chipElWidth = getElementWidth(chipEl);\n        if (chipElWidth && chipElWidth < availableHorizontalChipElSpace) {\n          availableHorizontalChipElSpace -= chipElWidth + chipContainerElGap;\n          this.showChip(chipEl);\n          return;\n        }\n      }\n      this.hideChip(chipEl);\n    });\n  }\n\n  private refreshSelectionDisplay = async () => {\n    await componentLoaded(this);\n\n    if (isSingleLike(this.selectionMode)) {\n      return;\n    }\n\n    if (!this.textInput) {\n      return;\n    }\n\n    const {\n      allSelectedIndicatorChipEl,\n      chipContainerEl,\n      selectionDisplay,\n      placeholder,\n      selectedIndicatorChipEl,\n      textInput,\n    } = this;\n\n    const chipContainerElGap = parseInt(getComputedStyle(chipContainerEl).gap.replace(\"px\", \"\"));\n    const chipContainerElWidth = getElementWidth(chipContainerEl);\n    const { fontSize, fontFamily } = getComputedStyle(textInput);\n    const inputTextWidth = getTextWidth(placeholder, `${fontSize} ${fontFamily}`);\n    const inputWidth = (inputTextWidth || parseInt(calciteSize48)) + chipContainerElGap;\n    const allSelectedIndicatorChipElWidth = getElementWidth(allSelectedIndicatorChipEl);\n    const selectedIndicatorChipElWidth = getElementWidth(selectedIndicatorChipEl);\n    const largestSelectedIndicatorChipWidth = Math.max(\n      allSelectedIndicatorChipElWidth,\n      selectedIndicatorChipElWidth,\n    );\n\n    this.setCompactSelectionDisplay({\n      chipContainerElGap,\n      chipContainerElWidth,\n      inputWidth,\n      largestSelectedIndicatorChipWidth,\n    });\n\n    if (selectionDisplay === \"fit\") {\n      const chipEls = Array.from(this.el.shadowRoot.querySelectorAll(\"calcite-chip\")).filter(\n        (chipEl) => chipEl.closable,\n      );\n\n      const availableHorizontalChipElSpace = Math.round(\n        chipContainerElWidth -\n          ((this.selectedHiddenChipsCount > 0 ? selectedIndicatorChipElWidth : 0) +\n            chipContainerElGap +\n            inputWidth +\n            chipContainerElGap),\n      );\n\n      this.refreshChipDisplay({ availableHorizontalChipElSpace, chipContainerElGap, chipEls });\n      this.setVisibleAndHiddenChips(chipEls);\n    }\n  };\n\n  setFloatingEl = (el: HTMLDivElement): void => {\n    this.floatingEl = el;\n    connectFloatingUI(this, this.referenceEl, this.floatingEl);\n  };\n\n  private setCompactSelectionDisplay({\n    chipContainerElGap,\n    chipContainerElWidth,\n    inputWidth,\n    largestSelectedIndicatorChipWidth,\n  }): void {\n    const newCompactBreakpoint = Math.round(\n      largestSelectedIndicatorChipWidth + chipContainerElGap + inputWidth,\n    );\n    if (!this.maxCompactBreakpoint || this.maxCompactBreakpoint < newCompactBreakpoint) {\n      this.maxCompactBreakpoint = newCompactBreakpoint;\n    }\n    this.compactSelectionDisplay = chipContainerElWidth < this.maxCompactBreakpoint;\n  }\n\n  setContainerEl = (el: HTMLDivElement): void => {\n    this.resizeObserver.observe(el);\n    this.listContainerEl = el;\n    this.transitionEl = el;\n  };\n\n  setChipContainerEl = (el: HTMLDivElement): void => {\n    this.resizeObserver.observe(el);\n    this.chipContainerEl = el;\n  };\n\n  setReferenceEl = (el: HTMLDivElement): void => {\n    this.referenceEl = el;\n    connectFloatingUI(this, this.referenceEl, this.floatingEl);\n  };\n\n  setAllSelectedIndicatorChipEl = (el: HTMLCalciteChipElement): void => {\n    this.allSelectedIndicatorChipEl = el;\n  };\n\n  setSelectedIndicatorChipEl = (el: HTMLCalciteChipElement): void => {\n    this.selectedIndicatorChipEl = el;\n  };\n\n  private setVisibleAndHiddenChips(chipEls: HTMLCalciteChipElement[]): void {\n    let newSelectedVisibleChipsCount = 0;\n    chipEls.forEach((chipEl) => {\n      if (chipEl.selected && !chipEl.classList.contains(CSS.chipInvisible)) {\n        newSelectedVisibleChipsCount++;\n      }\n    });\n    if (newSelectedVisibleChipsCount !== this.selectedVisibleChipsCount) {\n      this.selectedVisibleChipsCount = newSelectedVisibleChipsCount;\n    }\n    const newSelectedHiddenChipsCount =\n      this.getSelectedItems().length - newSelectedVisibleChipsCount;\n    if (newSelectedHiddenChipsCount !== this.selectedHiddenChipsCount) {\n      this.selectedHiddenChipsCount = newSelectedHiddenChipsCount;\n    }\n  }\n\n  private getMaxScrollerHeight(): number {\n    const items = this.getItemsAndGroups().filter((item) => !item.hidden);\n\n    const { maxItems } = this;\n\n    let itemsToProcess = 0;\n    let maxScrollerHeight = 0;\n\n    if (items.length > maxItems) {\n      items.forEach((item) => {\n        if (itemsToProcess < maxItems && maxItems > 0) {\n          const height = this.calculateSingleItemHeight(item);\n          if (height > 0) {\n            maxScrollerHeight += height;\n            itemsToProcess++;\n          }\n        }\n      });\n    }\n\n    return maxScrollerHeight;\n  }\n\n  private calculateSingleItemHeight(item: ComboboxChildElement): number {\n    if (!item) {\n      return;\n    }\n\n    let height = item.offsetHeight;\n    // if item has children items, don't count their height twice\n    const children = Array.from(item.querySelectorAll<ComboboxChildElement>(ComboboxChildSelector));\n    children\n      .map((child) => child?.offsetHeight)\n      .forEach((offsetHeight) => {\n        height -= offsetHeight;\n      });\n    return height;\n  }\n\n  inputHandler = (event: Event): void => {\n    const value = (event.target as HTMLInputElement).value;\n    this.text = value;\n    this.filterItems(value);\n    if (value) {\n      this.activeChipIndex = -1;\n    }\n  };\n\n  getItemsAndGroups(): ComboboxChildElement[] {\n    return [...this.groupItems, ...this.items];\n  }\n\n  private filterItems = (() => {\n    const find = (item: ComboboxChildElement, filteredData: ItemData[]) =>\n      item &&\n      filteredData.some(({ label, value }) =>\n        isGroup(item) ? label === item.label : value === item.value && label === item.textLabel,\n      );\n\n    return debounce((text: string): void => {\n      const filteredData = filter(this.data, text);\n      const itemsAndGroups = this.getItemsAndGroups();\n\n      itemsAndGroups.forEach((item) => {\n        const hidden = !find(item, filteredData);\n        item.hidden = hidden;\n        const [parent, grandparent] = item.ancestors;\n\n        if (find(parent, filteredData) || find(grandparent, filteredData)) {\n          item.hidden = false;\n        }\n\n        if (!hidden) {\n          item.ancestors.forEach((ancestor) => (ancestor.hidden = false));\n        }\n      });\n\n      this.filteredItems = this.getFilteredItems();\n      this.calciteComboboxFilterChange.emit();\n    }, 100);\n  })();\n\n  internalComboboxChangeEvent = (): void => {\n    this.calciteComboboxChange.emit();\n  };\n\n  private emitComboboxChange = debounce(this.internalComboboxChangeEvent, 0);\n\n  toggleSelection(item: HTMLCalciteComboboxItemElement, value = !item.selected): void {\n    if (\n      !item ||\n      (this.selectionMode === \"single-persist\" && item.selected && item.value === this.value)\n    ) {\n      return;\n    }\n\n    if (this.isMulti()) {\n      item.selected = value;\n      this.updateAncestors(item);\n      this.selectedItems = this.getSelectedItems();\n      this.emitComboboxChange();\n      this.resetText();\n      this.filterItems(\"\");\n    } else {\n      this.ignoreSelectedEventsFlag = true;\n      this.items.forEach((el) => (el.selected = el === item ? value : false));\n      this.ignoreSelectedEventsFlag = false;\n      this.selectedItems = this.getSelectedItems();\n      this.emitComboboxChange();\n\n      if (this.textInput) {\n        this.textInput.value = item.textLabel;\n      }\n      this.open = false;\n      this.updateActiveItemIndex(-1);\n      this.resetText();\n      this.filterItems(\"\");\n    }\n  }\n\n  updateAncestors(item: HTMLCalciteComboboxItemElement): void {\n    if (this.selectionMode !== \"ancestors\") {\n      return;\n    }\n    const ancestors = getItemAncestors(item);\n    const children = getItemChildren(item);\n    if (item.selected) {\n      ancestors.forEach((el) => {\n        (el as HTMLCalciteComboboxItemElement).selected = true;\n      });\n    } else {\n      children.forEach((el) => (el.selected = false));\n      [...ancestors].forEach((el) => {\n        if (!hasActiveChildren(el)) {\n          el.selected = false;\n        }\n      });\n    }\n  }\n\n  getFilteredItems(): HTMLCalciteComboboxItemElement[] {\n    return this.items.filter((item) => !item.hidden);\n  }\n\n  private getSelectedItems = (): HTMLCalciteComboboxItemElement[] => {\n    if (!this.isMulti()) {\n      const match = this.items.find(({ selected }) => selected);\n      return match ? [match] : [];\n    }\n\n    return (\n      this.items\n        .filter(\n          (item) =>\n            item.selected && (this.selectionMode !== \"ancestors\" || !hasActiveChildren(item)),\n        )\n        /** Preserve order of entered tags */\n        .sort((a, b) => {\n          const aIdx = this.selectedItems.indexOf(a);\n          const bIdx = this.selectedItems.indexOf(b);\n          if (aIdx > -1 && bIdx > -1) {\n            return aIdx - bIdx;\n          }\n          return bIdx - aIdx;\n        })\n    );\n  };\n\n  private updateItems = (): void => {\n    this.items = this.getItems();\n    this.groupItems = this.getGroupItems();\n    this.data = this.getData();\n    this.selectedItems = this.getSelectedItems();\n    this.filteredItems = this.getFilteredItems();\n    this.needsIcon = this.getNeedsIcon();\n\n    this.items.forEach((item) => {\n      item.selectionMode = this.selectionMode;\n      item.scale = this.scale;\n    });\n\n    if (!this.allowCustomValues) {\n      this.setMaxScrollerHeight();\n    }\n\n    this.groupItems.forEach((groupItem, index, items) => {\n      if (index === 0) {\n        groupItem.afterEmptyGroup = false;\n      }\n\n      const nextGroupItem = items[index + 1];\n\n      if (nextGroupItem) {\n        nextGroupItem.afterEmptyGroup = groupItem.children.length === 0;\n      }\n    });\n  };\n\n  getData(): ItemData[] {\n    return this.items.map((item) => ({\n      filterDisabled: item.filterDisabled,\n      value: item.value,\n      label: item.textLabel,\n    }));\n  }\n\n  getNeedsIcon(): boolean {\n    return isSingleLike(this.selectionMode) && this.items.some((item) => item.icon);\n  }\n\n  resetText(): void {\n    if (this.textInput) {\n      this.textInput.value = \"\";\n    }\n    this.text = \"\";\n  }\n\n  getItems(): HTMLCalciteComboboxItemElement[] {\n    const items: HTMLCalciteComboboxItemElement[] = Array.from(\n      this.el.querySelectorAll(ComboboxItem),\n    );\n    return items.filter((item) => !item.disabled);\n  }\n\n  getGroupItems(): HTMLCalciteComboboxItemGroupElement[] {\n    return Array.from(this.el.querySelectorAll(ComboboxItemGroup));\n  }\n\n  addCustomChip(value: string, focus?: boolean): void {\n    const existingItem = this.items.find((el) => el.textLabel === value);\n    if (existingItem) {\n      this.toggleSelection(existingItem, true);\n    } else {\n      if (!this.isMulti()) {\n        this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);\n      }\n      const item = document.createElement(\"calcite-combobox-item\");\n      item.value = value;\n      item.textLabel = value;\n      item.selected = true;\n      this.el.appendChild(item);\n      this.resetText();\n      if (focus) {\n        this.setFocus();\n      }\n      this.updateItems();\n      this.filterItems(\"\");\n      this.emitComboboxChange();\n    }\n  }\n\n  removeActiveChip(): void {\n    this.toggleSelection(this.selectedItems[this.activeChipIndex], false);\n    this.setFocus();\n  }\n\n  removeLastChip(): void {\n    this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);\n    this.setFocus();\n  }\n\n  previousChip(): void {\n    if (this.text) {\n      return;\n    }\n    const length = this.selectedItems.length - 1;\n    const active = this.activeChipIndex;\n    this.activeChipIndex = active === -1 ? length : Math.max(active - 1, 0);\n    this.updateActiveItemIndex(-1);\n    this.focusChip();\n  }\n\n  nextChip(): void {\n    if (this.text || this.activeChipIndex === -1) {\n      return;\n    }\n    const last = this.selectedItems.length - 1;\n    const newIndex = this.activeChipIndex + 1;\n    if (newIndex > last) {\n      this.activeChipIndex = -1;\n      this.setFocus();\n    } else {\n      this.activeChipIndex = newIndex;\n      this.focusChip();\n    }\n    this.updateActiveItemIndex(-1);\n  }\n\n  focusChip(): void {\n    const guid = this.selectedItems[this.activeChipIndex]?.guid;\n\n    const chip = guid\n      ? this.referenceEl.querySelector<HTMLCalciteChipElement>(`#${chipUidPrefix}${guid}`)\n      : null;\n    chip?.setFocus();\n  }\n\n  private scrollToActiveItem = (): void => {\n    const activeItem = this.filteredItems[this.activeItemIndex];\n\n    if (!activeItem) {\n      return;\n    }\n\n    const height = this.calculateSingleItemHeight(activeItem);\n    const { offsetHeight, scrollTop } = this.listContainerEl;\n    if (offsetHeight + scrollTop < activeItem.offsetTop + height) {\n      this.listContainerEl.scrollTop = activeItem.offsetTop - offsetHeight + height;\n    } else if (activeItem.offsetTop < scrollTop) {\n      this.listContainerEl.scrollTop = activeItem.offsetTop;\n    }\n  };\n\n  shiftActiveItemIndex(delta: number): void {\n    const { length } = this.filteredItems;\n    const newIndex = (this.activeItemIndex + length + delta) % length;\n    this.updateActiveItemIndex(newIndex);\n    this.scrollToActiveItem();\n  }\n\n  updateActiveItemIndex(index: number): void {\n    this.activeItemIndex = index;\n    let activeDescendant: string = null;\n    this.filteredItems.forEach((el, i) => {\n      if (i === index) {\n        el.active = true;\n        activeDescendant = `${itemUidPrefix}${el.guid}`;\n      } else {\n        el.active = false;\n      }\n    });\n    this.activeDescendant = activeDescendant;\n    if (this.activeItemIndex > -1) {\n      this.activeChipIndex = -1;\n    }\n  }\n\n  private isAllSelected(): boolean {\n    return this.getItems().length === this.getSelectedItems().length;\n  }\n\n  isMulti(): boolean {\n    return !isSingleLike(this.selectionMode);\n  }\n\n  comboboxFocusHandler = (): void => {\n    if (this.disabled) {\n      return;\n    }\n\n    this.textInput?.focus();\n  };\n\n  //--------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  //--------------------------------------------------------------------------\n\n  renderChips(): VNode[] {\n    const { activeChipIndex, scale, selectionMode, messages } = this;\n    return this.selectedItems.map((item, i) => {\n      const chipClasses = {\n        chip: true,\n        \"chip--active\": activeChipIndex === i,\n      };\n      const ancestors = [...getItemAncestors(item)].reverse();\n      const pathLabel = [...ancestors, item].map((el) => el.textLabel);\n      const label = selectionMode !== \"ancestors\" ? item.textLabel : pathLabel.join(\" / \");\n      return (\n        <calcite-chip\n          class={chipClasses}\n          closable\n          icon={item.icon}\n          iconFlipRtl={item.iconFlipRtl}\n          id={item.guid ? `${chipUidPrefix}${item.guid}` : null}\n          key={item.textLabel}\n          messageOverrides={{ dismissLabel: messages.removeTag }}\n          onCalciteChipClose={() => this.calciteChipCloseHandler(item)}\n          scale={scale}\n          selected={item.selected}\n          title={label}\n          value={item.value}\n        >\n          {label}\n        </calcite-chip>\n      );\n    });\n  }\n\n  renderAllSelectedIndicatorChip(): VNode {\n    const {\n      compactSelectionDisplay,\n      scale,\n      selectedVisibleChipsCount,\n      setAllSelectedIndicatorChipEl,\n    } = this;\n    const label = this.messages.allSelected;\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: !(\n            this.isAllSelected() &&\n            !selectedVisibleChipsCount &&\n            !compactSelectionDisplay\n          ),\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={setAllSelectedIndicatorChipEl}\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  renderAllSelectedIndicatorChipCompact(): VNode {\n    const { compactSelectionDisplay, scale, selectedVisibleChipsCount } = this;\n    const label = this.messages.all || \"All\";\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: !(\n            this.isAllSelected() &&\n            !selectedVisibleChipsCount &&\n            compactSelectionDisplay\n          ),\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  renderSelectedIndicatorChip(): VNode {\n    const {\n      compactSelectionDisplay,\n      selectionDisplay,\n      getSelectedItems,\n      scale,\n      selectedHiddenChipsCount,\n      selectedVisibleChipsCount,\n      setSelectedIndicatorChipEl,\n    } = this;\n    let chipInvisible: boolean;\n    let label: string;\n\n    if (compactSelectionDisplay) {\n      chipInvisible = true;\n    } else {\n      if (selectionDisplay === \"single\") {\n        const selectedItemsCount = getSelectedItems().length;\n        if (this.isAllSelected()) {\n          chipInvisible = true;\n        } else if (selectedItemsCount > 0) {\n          chipInvisible = false;\n        } else {\n          chipInvisible = true;\n        }\n        label = `${selectedItemsCount} ${this.messages.selected}`;\n      } else if (selectionDisplay === \"fit\") {\n        chipInvisible = !!(\n          (this.isAllSelected() && selectedVisibleChipsCount === 0) ||\n          selectedHiddenChipsCount === 0\n        );\n        label =\n          selectedVisibleChipsCount > 0\n            ? `+${selectedHiddenChipsCount}`\n            : `${selectedHiddenChipsCount} ${this.messages.selected}`;\n      }\n    }\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: chipInvisible,\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={setSelectedIndicatorChipEl}\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  renderSelectedIndicatorChipCompact(): VNode {\n    const {\n      compactSelectionDisplay,\n      selectionDisplay,\n      getSelectedItems,\n      scale,\n      selectedHiddenChipsCount,\n    } = this;\n    let chipInvisible: boolean;\n    let label: string;\n\n    if (compactSelectionDisplay) {\n      const selectedItemsCount = getSelectedItems().length;\n      if (this.isAllSelected()) {\n        chipInvisible = true;\n      } else if (selectionDisplay === \"fit\") {\n        chipInvisible = !(selectedHiddenChipsCount > 0);\n        label = `${selectedHiddenChipsCount || 0}`;\n      } else if (selectionDisplay === \"single\") {\n        chipInvisible = !(selectedItemsCount > 0);\n        label = `${selectedItemsCount}`;\n      }\n    } else {\n      chipInvisible = true;\n    }\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: chipInvisible,\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  private get showingInlineIcon(): boolean {\n    const { placeholderIcon, selectionMode, selectedItems, open } = this;\n    const selectedItem = selectedItems[0];\n    const selectedIcon = selectedItem?.icon;\n    const singleSelectionMode = isSingleLike(selectionMode);\n\n    return !open && selectedItem\n      ? !!selectedIcon && singleSelectionMode\n      : !!placeholderIcon && (!selectedItem || singleSelectionMode);\n  }\n\n  private renderInput(): VNode {\n    const { guid, disabled, placeholder, selectionMode, selectedItems, open } = this;\n    const single = isSingleLike(selectionMode);\n    const selectedItem = selectedItems[0];\n    const showLabel = !open && single && !!selectedItem;\n\n    return (\n      <span\n        class={{\n          \"input-wrap\": true,\n          \"input-wrap--single\": single,\n        }}\n      >\n        {showLabel && (\n          <span\n            class={{\n              label: true,\n              \"label--icon\": !!selectedItem?.icon,\n            }}\n            key=\"label\"\n          >\n            {selectedItem.textLabel}\n          </span>\n        )}\n        <input\n          aria-activedescendant={this.activeDescendant}\n          aria-autocomplete=\"list\"\n          aria-controls={`${listboxUidPrefix}${guid}`}\n          aria-label={getLabelText(this)}\n          class={{\n            input: true,\n            \"input--single\": true,\n            \"input--transparent\": this.activeChipIndex > -1,\n            \"input--hidden\": showLabel,\n            \"input--icon\": this.showingInlineIcon && !!this.placeholderIcon,\n          }}\n          disabled={disabled}\n          id={`${inputUidPrefix}${guid}`}\n          key=\"input\"\n          onFocus={this.comboboxFocusHandler}\n          onInput={this.inputHandler}\n          placeholder={placeholder}\n          type=\"text\"\n          // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n          ref={(el) => (this.textInput = el as HTMLInputElement)}\n        />\n      </span>\n    );\n  }\n\n  renderListBoxOptions(): VNode[] {\n    return this.filteredItems.map((item) => (\n      <li\n        aria-selected={toAriaBoolean(item.selected)}\n        id={item.guid ? `${itemUidPrefix}${item.guid}` : null}\n        role=\"option\"\n        tabindex=\"-1\"\n      >\n        {item.textLabel}\n      </li>\n    ));\n  }\n\n  renderFloatingUIContainer(): VNode {\n    const { setFloatingEl, setContainerEl, open } = this;\n    const classes = {\n      [CSS.listContainer]: true,\n      [FloatingCSS.animation]: true,\n      [FloatingCSS.animationActive]: open,\n    };\n\n    return (\n      <div\n        aria-hidden=\"true\"\n        class={{\n          \"floating-ui-container\": true,\n          \"floating-ui-container--active\": open,\n        }}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={setFloatingEl}\n      >\n        <div\n          class={classes}\n          // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n          ref={setContainerEl}\n        >\n          <ul class={{ list: true, \"list--hide\": !open }}>\n            <slot />\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  renderSelectedOrPlaceholderIcon(): VNode {\n    const { selectedItems, placeholderIcon, placeholderIconFlipRtl } = this;\n    const selectedItem = selectedItems[0];\n    const selectedIcon = selectedItem?.icon;\n\n    return (\n      this.showingInlineIcon && (\n        <span class=\"icon-start\" key=\"selected-placeholder-icon\">\n          <calcite-icon\n            class=\"selected-icon\"\n            flipRtl={this.open && selectedItem ? selectedItem.iconFlipRtl : placeholderIconFlipRtl}\n            icon={!this.open && selectedItem ? selectedIcon : placeholderIcon}\n            scale={getIconScale(this.scale)}\n          />\n        </span>\n      )\n    );\n  }\n\n  renderChevronIcon(): VNode {\n    const { open } = this;\n    return (\n      <span class=\"icon-end\" key=\"chevron\">\n        <calcite-icon\n          icon={open ? \"chevron-up\" : \"chevron-down\"}\n          scale={getIconScale(this.scale)}\n        />\n      </span>\n    );\n  }\n\n  render(): VNode {\n    const { selectionDisplay, guid, label, open } = this;\n    const singleSelectionMode = isSingleLike(this.selectionMode);\n    const allSelectionDisplay = selectionDisplay === \"all\";\n    const singleSelectionDisplay = selectionDisplay === \"single\";\n    const fitSelectionDisplay = !singleSelectionMode && selectionDisplay === \"fit\";\n    const isClearable = !this.clearDisabled && this.value?.length > 0;\n    return (\n      <Host onClick={this.comboboxFocusHandler}>\n        <InteractiveContainer disabled={this.disabled}>\n          <div\n            aria-autocomplete=\"list\"\n            aria-controls={`${listboxUidPrefix}${guid}`}\n            aria-expanded={toAriaBoolean(open)}\n            aria-haspopup=\"listbox\"\n            aria-label={getLabelText(this)}\n            aria-live=\"polite\"\n            aria-owns={`${listboxUidPrefix}${guid}`}\n            class={{\n              wrapper: true,\n              \"wrapper--single\": singleSelectionMode || !this.selectedItems.length,\n              \"wrapper--active\": open,\n            }}\n            onClick={this.clickHandler}\n            onKeyDown={this.keyDownHandler}\n            role=\"combobox\"\n            // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n            ref={this.setReferenceEl}\n          >\n            {this.renderSelectedOrPlaceholderIcon()}\n            <div\n              class={{\n                \"grid-input\": true,\n                [CSS.selectionDisplayFit]: fitSelectionDisplay,\n                [CSS.selectionDisplaySingle]: singleSelectionDisplay,\n              }}\n              key=\"grid\"\n              ref={this.setChipContainerEl}\n            >\n              {!singleSelectionMode && !singleSelectionDisplay && this.renderChips()}\n              {!singleSelectionMode &&\n                !allSelectionDisplay && [\n                  this.renderSelectedIndicatorChip(),\n                  this.renderSelectedIndicatorChipCompact(),\n                  this.renderAllSelectedIndicatorChip(),\n                  this.renderAllSelectedIndicatorChipCompact(),\n                ]}\n              <label\n                class=\"screen-readers-only\"\n                htmlFor={`${inputUidPrefix}${guid}`}\n                id={`${labelUidPrefix}${guid}`}\n              >\n                {label}\n              </label>\n              {this.renderInput()}\n            </div>\n            {isClearable ? (\n              <XButton\n                disabled={this.disabled}\n                key=\"close-button\"\n                label={this.messages.clear}\n                scale={this.scale}\n              />\n            ) : null}\n            {this.renderChevronIcon()}\n          </div>\n          <ul\n            aria-labelledby={`${labelUidPrefix}${guid}`}\n            aria-multiselectable=\"true\"\n            class=\"screen-readers-only\"\n            id={`${listboxUidPrefix}${guid}`}\n            role=\"listbox\"\n            tabIndex={-1}\n          >\n            {this.renderListBoxOptions()}\n          </ul>\n          {this.renderFloatingUIContainer()}\n          <HiddenFormInputSlot component={this} />\n          {this.validationMessage && this.status === \"invalid\" ? (\n            <Validation\n              icon={this.validationIcon}\n              message={this.validationMessage}\n              scale={this.scale}\n              status={this.status}\n            />\n          ) : null}\n        </InteractiveContainer>\n      </Host>\n    );\n  }\n}\n"]}