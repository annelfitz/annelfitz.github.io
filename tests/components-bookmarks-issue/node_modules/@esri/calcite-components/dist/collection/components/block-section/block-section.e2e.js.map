{"version":3,"file":"block-section.e2e.js","sourceRoot":"","sources":["../../../../src/components/block-section/block-section.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { CSS } from \"./resources\";\nimport { accessible, defaults, focusable, hidden, reflects, renders, t9n } from \"../../tests/commonTests\";\nimport { E2EPage, newE2EPage } from \"@stencil/core/testing\";\nimport { html } from \"../../../support/formatting\";\n\ndescribe(\"calcite-block-section\", () => {\n  describe(\"renders\", () => {\n    renders(\"calcite-block-section\", { display: \"block\" });\n  });\n\n  describe(\"honors hidden attribute\", () => {\n    hidden(\"calcite-block-section\");\n  });\n\n  describe(\"reflects\", () => {\n    reflects(\"calcite-block-section\", [\n      {\n        propertyName: \"open\",\n        value: true,\n      },\n    ]);\n  });\n\n  describe(\"defaults\", () => {\n    defaults(\"calcite-block-section\", [\n      {\n        propertyName: \"open\",\n        defaultValue: false,\n      },\n      {\n        propertyName: \"toggleDisplay\",\n        defaultValue: \"button\",\n      },\n    ]);\n  });\n\n  describe(\"translation support\", () => {\n    t9n(\"calcite-block-section\");\n  });\n\n  describe(\"setFocus\", () => {\n    describe(\"focuses toggle switch\", () => {\n      focusable(\n        html`<calcite-block-section text=\"text\" toggle-display=\"switch\" open>\n          <div>some content</div>\n        </calcite-block-section>`,\n        {\n          shadowFocusTargetSelector: `.${CSS.toggle}`,\n        },\n      );\n    });\n\n    describe(\"focuses toggle button\", () => {\n      focusable(\n        html`<calcite-block-section text=\"text\" toggle-display=\"button\" open>\n          <div>some content</div>\n        </calcite-block-section>`,\n        {\n          shadowFocusTargetSelector: `.${CSS.toggle}`,\n        },\n      );\n    });\n  });\n\n  describe(\"toggle-display = 'switch'\", () => {\n    describe(\"accessible\", () => {\n      accessible(html`\n        <calcite-block-section text=\"text\" toggle-display=\"switch\" open>\n          <div>some content</div>\n        </calcite-block-section>\n      `);\n    });\n\n    describe(\"accessible: when closed\", () => {\n      accessible(html`\n        <calcite-block-section text=\"text\" toggle-display=\"switch\">\n          <div>some content</div>\n        </calcite-block-section>\n      `);\n    });\n\n    it(\"can display/hide content\", async () => {\n      const page = await newE2EPage({\n        html: `<calcite-block-section toggle-display=\"switch\"><div>some content</div></calcite-block-section>`,\n      });\n      await assertContentIsDisplayedAndHidden(page);\n    });\n\n    it(\"can be toggled\", async () => {\n      const page = await newE2EPage();\n      await page.setContent(html`<calcite-block-section text=\"text\" toggle-display=\"switch\"></calcite-block-section>`);\n      await assertToggleBehavior(page);\n    });\n\n    it(\"renders section text\", async () => {\n      const page = await newE2EPage({\n        html: `<calcite-block-section text=\"test text\" open toggle-display=\"switch\"></calcite-block-section>`,\n      });\n      const element = await page.find(`calcite-block-section >>> .${CSS.toggle}`);\n      expect(element.textContent).toBe(\"test text\");\n    });\n  });\n\n  describe(\"toggle-display = 'button' (default)\", () => {\n    describe(\"accessible\", () => {\n      describe(\"accessible: when open\", () => {\n        accessible(html`<calcite-block-section text=\"text\" open><div>some content</div></calcite-block-section>`);\n      });\n\n      describe(\"accessible: when closed\", () => {\n        accessible(html`<calcite-block-section text=\"text\"><div>some content</div></calcite-block-section>`);\n      });\n    });\n\n    it(\"can display/hide content\", async () => {\n      const page = await newE2EPage({ html: \"<calcite-block-section><div>some content</div></calcite-block-section>\" });\n      await assertContentIsDisplayedAndHidden(page);\n    });\n\n    it(\"can be toggled\", async () => {\n      const page = await newE2EPage();\n      await page.setContent(html`<calcite-block-section text=\"text\"></calcite-block-section>`);\n      await assertToggleBehavior(page);\n    });\n  });\n\n  describe(\"status = 'invalid'\", () => {\n    it(\"displays a status indicator when `status` is an accepted value\", async () => {\n      const page = await newE2EPage({\n        html: `<calcite-block-section status=\"invalid\"><div>content</div></calcite-block-section>`,\n      });\n      const statusIconEl = await page.find(`calcite-block-section >>> .${CSS.statusIcon}`);\n      expect(statusIconEl).not.toBeNull();\n    });\n  });\n\n  describe(\"status = 'foo'\", () => {\n    it(\"does not display a status indicator when `status` is not an accepted value\", async () => {\n      const page2 = await newE2EPage({\n        html: `<calcite-block-section status=\"foo\"><div>content</div></calcite-block-section>`,\n      });\n      const statusIconEl2 = await page2.find(`calcite-block-section >>> .${CSS.statusIcon}`);\n      await page2.waitForChanges();\n      expect(statusIconEl2).toBeNull();\n    });\n  });\n\n  async function assertContentIsDisplayedAndHidden(page: E2EPage): Promise<void> {\n    let element = await page.find(\"calcite-block-section\");\n    let content = await page.find(`calcite-block-section >>> .${CSS.content}`);\n\n    expect(await content.isVisible()).toBe(false);\n\n    element.setProperty(\"open\", true);\n    await page.waitForChanges();\n    element = await page.find(\"calcite-block-section[open]\");\n    content = await page.find(`calcite-block-section >>> .${CSS.content}`);\n\n    expect(element).toBeTruthy();\n    expect(await content.isVisible()).toBe(true);\n\n    element.setProperty(\"open\", false);\n    await page.waitForChanges();\n    element = await page.find(\"calcite-block-section[open]\");\n    content = await page.find(`calcite-block-section >>> .${CSS.content}`);\n\n    expect(element).toBeNull();\n    expect(await content.isVisible()).toBe(false);\n  }\n\n  async function assertToggleBehavior(page: E2EPage): Promise<void> {\n    const element = await page.find(\"calcite-block-section\");\n    const toggleSpy = await element.spyOnEvent(\"calciteBlockSectionToggle\");\n    const toggle = await page.find(`calcite-block-section >>> .${CSS.toggle}`);\n\n    expect(toggle.getAttribute(\"aria-expanded\")).toBe(\"false\");\n\n    await toggle.click();\n\n    expect(toggleSpy).toHaveReceivedEventTimes(1);\n    expect(await element.getProperty(\"open\")).toBe(true);\n    expect(toggle.getAttribute(\"aria-expanded\")).toBe(\"true\");\n\n    await toggle.click();\n\n    expect(toggleSpy).toHaveReceivedEventTimes(2);\n    expect(await element.getProperty(\"open\")).toBe(false);\n    expect(toggle.getAttribute(\"aria-expanded\")).toBe(\"false\");\n\n    const keyboardToggleEmitter =\n      toggle.tagName === \"CALCITE-ACTION\"\n        ? (\n            await page.evaluateHandle(() => {\n              // keyboard event needs to be dispatched from the action's button for it to trigger a click\n              // deep shadow piercing is based on https://github.com/puppeteer/puppeteer/issues/858#issuecomment-438540596\n              return document\n                .querySelector(\"calcite-block-section\")\n                .shadowRoot.querySelector(\"section > calcite-action\")\n                .shadowRoot.querySelector(\"button\");\n            })\n          ).asElement()\n        : toggle;\n\n    await keyboardToggleEmitter.press(\" \");\n    await page.waitForChanges();\n\n    expect(toggleSpy).toHaveReceivedEventTimes(3);\n    expect(await element.getProperty(\"open\")).toBe(true);\n    expect(toggle.getAttribute(\"aria-expanded\")).toBe(\"true\");\n\n    await keyboardToggleEmitter.press(\"Enter\");\n    await page.waitForChanges();\n\n    expect(toggleSpy).toHaveReceivedEventTimes(4);\n    expect(await element.getProperty(\"open\")).toBe(false);\n    expect(toggle.getAttribute(\"aria-expanded\")).toBe(\"false\");\n  }\n});\n"]}