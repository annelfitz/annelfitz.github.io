{"version":3,"file":"shared-list-logic.js","sourceRoot":"","sources":["../../../../src/components/pick-list/shared-list-logic.ts"],"names":[],"mappings":"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","sourcesContent":["import { debounce } from \"lodash-es\";\nimport { getRoundRobinIndex } from \"../../utils/array\";\nimport { focusElement, getSlotted } from \"../../utils/dom\";\nimport { SLOTS } from \"../pick-list-group/resources\";\nimport { ValueList } from \"../value-list/value-list\";\nimport { PickList } from \"./pick-list\";\n\ntype Lists = PickList | ValueList;\ntype ListItemElement<T> = T extends PickList ? HTMLCalcitePickListItemElement : HTMLCalciteValueListItemElement;\ntype List<T> = T extends PickList ? PickList : ValueList;\n\nexport type ListFocusId = \"filter\";\n\nexport function mutationObserverCallback<T extends Lists>(this: List<T>): void {\n  this.setUpItems();\n  this.setUpFilter();\n  this.deselectRemovedItems();\n}\n\nconst SUPPORTED_ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\"];\n\n// --------------------------------------------------------------------------\n//\n//  Lifecycle\n//\n// --------------------------------------------------------------------------\n\nexport function initialize<T extends Lists>(this: List<T>): void {\n  this.setUpItems();\n  this.setUpFilter();\n  this.emitCalciteListChange = debounce(internalCalciteListChangeEvent.bind(this), 0);\n  this.emitCalciteListFilter = debounce(internalCalciteListFilterEvent.bind(this), 0);\n}\n\nexport function initializeObserver<T extends Lists>(this: List<T>): void {\n  this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n}\n\nexport function cleanUpObserver<T extends Lists>(this: List<T>): void {\n  this.mutationObserver?.disconnect();\n}\n\n// --------------------------------------------------------------------------\n//\n//  Listeners\n//\n// --------------------------------------------------------------------------\n\nexport function calciteListItemChangeHandler<T extends Lists>(this: List<T>, event: CustomEvent): void {\n  const { selectedValues } = this;\n  const { item, value, selected, shiftPressed } = event.detail;\n\n  if (selected) {\n    if (this.multiple && shiftPressed) {\n      this.selectSiblings(item);\n    }\n\n    if (!this.multiple) {\n      this.deselectSiblingItems(item);\n    }\n\n    selectedValues.set(value, item);\n  } else {\n    selectedValues.delete(value);\n\n    if (this.multiple && shiftPressed) {\n      this.selectSiblings(item, true);\n    }\n  }\n\n  if (!this.multiple) {\n    toggleSingleSelectItemTabbing(item, selected);\n\n    if (selected) {\n      focusElement(item);\n    }\n  }\n\n  this.lastSelectedItem = item;\n  this.emitCalciteListChange();\n}\n\nexport function calciteInternalListItemValueChangeHandler<T extends Lists>(this: List<T>, event: CustomEvent): void {\n  const oldValue = event.detail.oldValue;\n  const selectedValues = this.selectedValues as Map<string, ListItemElement<T>>;\n\n  if (selectedValues.has(oldValue)) {\n    const item = selectedValues.get(oldValue);\n    selectedValues.delete(oldValue);\n    selectedValues.set(event.detail.newValue, item);\n  }\n  event.stopPropagation();\n}\n\n// --------------------------------------------------------------------------\n//\n//  Private Methods\n//\n// --------------------------------------------------------------------------\n\nfunction isValidNavigationKey(key: string): boolean {\n  return !!SUPPORTED_ARROW_KEYS.find((k) => k === key);\n}\n\nexport function calciteListFocusOutHandler<T extends Lists>(this: List<T>, event: FocusEvent): void {\n  const { el, items, multiple, selectedValues } = this;\n\n  if (multiple) {\n    return;\n  }\n\n  const focusedInside = el.contains(event.relatedTarget as Node | null);\n  if (focusedInside) {\n    return;\n  }\n\n  filterOutDisabled(items).forEach((item) => {\n    toggleSingleSelectItemTabbing(\n      item,\n      selectedValues.size === 0 ? item.contains(event.target as HTMLElement) || event.target === item : item.selected,\n    );\n  });\n}\n\nexport function keyDownHandler<T extends Lists>(this: List<T>, event: KeyboardEvent): void {\n  const { key, target } = event;\n\n  if (!isValidNavigationKey(key)) {\n    return;\n  }\n\n  const { items, multiple, selectionFollowsFocus } = this;\n  const { length: totalItems } = items;\n  const currentIndex = (items as ListItemElement<T>[]).indexOf(target as ListItemElement<T>);\n\n  if (!totalItems || currentIndex === -1) {\n    return;\n  }\n\n  event.preventDefault();\n\n  const index = moveItemIndex(this, target as ListItemElement<T>, key === \"ArrowUp\" ? \"up\" : \"down\");\n  const item = items[index];\n\n  items.forEach((i: HTMLCalcitePickListItemElement | HTMLCalciteValueListItemElement) =>\n    toggleSingleSelectItemTabbing(i, i === item),\n  );\n\n  if (!multiple && selectionFollowsFocus) {\n    item.selected = true;\n  }\n\n  focusElement(item);\n}\n\nexport function moveItemIndex<T extends Lists>(\n  list: List<T>,\n  item: ListItemElement<T>,\n  direction: \"up\" | \"down\",\n): number {\n  const { items } = list;\n  const { length: totalItems } = items;\n  const currentIndex = (items as ListItemElement<T>[]).indexOf(item);\n  const directionFactor = direction === \"up\" ? -1 : 1;\n  let moveOffset = 1;\n  let index = getRoundRobinIndex(currentIndex + directionFactor * moveOffset++, totalItems);\n  const firstMovedIndex = index;\n\n  while (items[index].disabled) {\n    index = getRoundRobinIndex(currentIndex + directionFactor * moveOffset++, totalItems);\n\n    if (index === firstMovedIndex) {\n      break;\n    }\n  }\n\n  return index;\n}\n\nexport function getItemIndex<T extends Lists>(list: List<T>, item: ListItemElement<T>): number {\n  const { items } = list;\n  return (items as ListItemElement<T>[]).indexOf(item);\n}\n\nfunction filterOutDisabled<T extends Lists>(items: ListItemElement<T>[]): ListItemElement<T>[] {\n  return items.filter((item) => !item.disabled);\n}\n\nexport function internalCalciteListFilterEvent<T extends Lists>(this: List<T>): void {\n  this.calciteListFilter.emit();\n}\n\nexport function internalCalciteListChangeEvent<T extends Lists>(this: List<T>): void {\n  this.calciteListChange.emit(this.selectedValues as any);\n}\n\nexport function removeItem<T extends Lists, U extends ListItemElement<T>>(this: List<T>, event: CustomEvent): void {\n  if (event.defaultPrevented) {\n    return;\n  }\n\n  const item = event.target as U;\n  const selectedValues = this.selectedValues as Map<string, U>;\n\n  if (item.parentElement.tagName === \"CALCITE-PICK-LIST-GROUP\" && item.slot === SLOTS.parentItem) {\n    item.parentElement.remove();\n    Array.from(item.parentElement.children).forEach((item: U) => selectedValues.delete(item.value));\n  } else {\n    item.remove();\n    selectedValues.delete(item.value);\n  }\n\n  this.emitCalciteListChange();\n}\n\nfunction toggleSingleSelectItemTabbing<T extends Lists>(item: ListItemElement<T>, selectable: boolean): void {\n  if (item.disabled) {\n    return;\n  }\n\n  // using attribute intentionally\n  if (selectable) {\n    item.removeAttribute(\"tabindex\");\n  } else {\n    item.setAttribute(\"tabindex\", \"-1\");\n  }\n}\n\nexport async function setFocus<T extends Lists>(this: List<T>, focusId: ListFocusId): Promise<void> {\n  if (this.filterEnabled && focusId === \"filter\") {\n    await focusElement(this.filterEl);\n    return;\n  }\n\n  const { items, multiple, selectionFollowsFocus } = this;\n\n  if (items.length === 0) {\n    return;\n  }\n\n  if (multiple) {\n    return filterOutDisabled(items)[0]?.setFocus();\n  }\n\n  const filtered = filterOutDisabled(items);\n  const focusTarget = filtered.find((item) => item.selected) || filtered[0];\n\n  if (selectionFollowsFocus && focusTarget) {\n    focusTarget.selected = true;\n  }\n\n  return focusTarget.setFocus();\n}\n\nexport function setUpItems<T extends Lists>(\n  this: List<T>,\n  tagName: T extends PickList ? \"calcite-pick-list-item\" : \"calcite-value-list-item\",\n): void {\n  (this.items as ListItemElement<T>[]) = Array.from(this.el.querySelectorAll<ListItemElement<T>>(tagName));\n  let hasSelected = false;\n\n  const { items } = this;\n\n  items.forEach((item) => {\n    item.icon = this.getIconType();\n    if (!this.multiple) {\n      item.deselectDisabled = true;\n      toggleSingleSelectItemTabbing(item, false);\n    }\n    if (item.selected) {\n      hasSelected = true;\n      toggleSingleSelectItemTabbing(item, true);\n      this.selectedValues.set(item.value, item);\n    }\n  });\n\n  const [first] = items;\n\n  if (!hasSelected && first && !first.disabled) {\n    toggleSingleSelectItemTabbing(first, true);\n  }\n}\n\nexport function setUpFilter<T extends Lists>(this: List<T>): void {\n  if (this.filterEnabled) {\n    this.dataForFilter = this.getItemData();\n  }\n}\n\nexport function deselectRemovedItems<T extends Lists>(this: List<T>): void {\n  const selectedValues = this.selectedValues as Map<string, ListItemElement<T>>;\n  const itemValues = this.items.map(({ value }) => value);\n\n  selectedValues.forEach((selectedItem) => {\n    if (!itemValues.includes(selectedItem.value)) {\n      this.selectedValues.delete(selectedItem.value);\n    }\n  });\n}\n\nexport function deselectSiblingItems<T extends Lists>(this: List<T>, item: ListItemElement<T>): void {\n  this.items.forEach((currentItem) => {\n    if (currentItem.value !== item.value) {\n      currentItem.toggleSelected(false);\n      if (this.selectedValues.has(currentItem.value)) {\n        this.selectedValues.delete(currentItem.value);\n      }\n    }\n  });\n}\n\nexport function selectSiblings<T extends Lists>(this: List<T>, item: ListItemElement<T>, deselect = false): void {\n  if (!this.lastSelectedItem) {\n    return;\n  }\n  const { items } = this;\n  const start = items.findIndex((currentItem) => {\n    return currentItem.value === this.lastSelectedItem.value;\n  });\n  const end = items.findIndex((currentItem) => {\n    return currentItem.value === item.value;\n  });\n  items.slice(Math.min(start, end), Math.max(start, end)).forEach((currentItem) => {\n    currentItem.toggleSelected(!deselect);\n    if (!deselect) {\n      this.selectedValues.set(currentItem.value, currentItem);\n    } else {\n      this.selectedValues.delete(currentItem.value);\n    }\n  });\n}\n\nlet groups: Set<HTMLCalcitePickListGroupElement>;\n\nexport function handleFilter<T extends Lists>(this: List<T>, emit = false): void {\n  const { filteredData, filterText } = this;\n\n  const values = filteredData.map((item: ItemData[number]) => item.value);\n  let hasSelectedMatch = false;\n\n  if (!groups) {\n    groups = new Set<HTMLCalcitePickListGroupElement>();\n  }\n\n  const matchedItems =\n    (this.items as ListItemElement<T>[])?.filter((item) => {\n      const parent = item.parentElement;\n      const grouped = parent.matches(\"calcite-pick-list-group\");\n\n      if (grouped) {\n        groups.add(parent as HTMLCalcitePickListGroupElement);\n      }\n\n      const matches = filterText ? values.includes(item.value) : true;\n\n      item.hidden = !matches;\n\n      if (!hasSelectedMatch) {\n        hasSelectedMatch = matches && item.selected;\n      }\n\n      return matches;\n    }) || [];\n\n  groups.forEach((group) => {\n    const hasAtLeastOneMatch = matchedItems.some((item) => group.contains(item));\n    group.hidden = !hasAtLeastOneMatch;\n\n    if (!hasAtLeastOneMatch) {\n      return;\n    }\n\n    const parentItem = getSlotted<ListItemElement<T>>(group, \"parent-item\");\n\n    if (parentItem) {\n      parentItem.hidden = false;\n\n      if (matchedItems.includes(parentItem)) {\n        Array.from(group.children as HTMLCollectionOf<HTMLCalcitePickListElement>).forEach(\n          (child) => (child.hidden = false),\n        );\n      }\n    }\n  });\n\n  groups.clear();\n\n  if (matchedItems.length > 0 && !hasSelectedMatch && !this.multiple) {\n    toggleSingleSelectItemTabbing(matchedItems[0], true);\n  }\n\n  this.setFilteredItems(matchedItems as any[]);\n\n  if (emit) {\n    this.emitCalciteListFilter();\n  }\n}\n\nexport function handleInitialFilter<T extends Lists>(this: List<T>): void {\n  const filteredItems = this.filterEl?.filteredItems as ItemData;\n\n  if (filteredItems) {\n    this.filteredData = filteredItems;\n  }\n\n  this.handleFilter();\n}\n\nexport function handleFilterEvent<T extends Lists>(this: List<T>, event: CustomEvent): void {\n  event.stopPropagation();\n  const { filteredItems, value } = event.currentTarget as HTMLCalciteFilterElement;\n\n  this.filterText = value;\n  this.filteredData = filteredItems as ItemData;\n\n  this.handleFilter(true);\n}\n\nexport type ItemData = {\n  label: string;\n  description: string;\n  metadata: Record<string, unknown>;\n  value: string;\n}[];\n\nexport function getItemData<T extends Lists>(this: List<T>): ItemData {\n  return (this.items as ListItemElement<T>[]).map((item) => ({\n    label: item.label,\n    description: item.description,\n    metadata: item.metadata,\n    value: item.value,\n  }));\n}\n"]}