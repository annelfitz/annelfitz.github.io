{"version":3,"file":"tip-manager.js","sourceRoot":"","sources":["../../../../src/components/tip-manager/tip-manager.tsx"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EACT,OAAO,EACP,KAAK,EAEL,CAAC,EACD,MAAM,EACN,IAAI,EACJ,KAAK,EAEL,KAAK,GACN,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAC/D,OAAO,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,MAAM,oBAAoB,CAAC;AAC3E,OAAO,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvD,OAAO,EACL,eAAe,EACf,kBAAkB,EAClB,aAAa,EACb,cAAc,GACf,MAAM,iBAAiB,CAAC;AACzB,OAAO,EAAE,OAAO,EAAgB,MAAM,uBAAuB,CAAC;AAE9D,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAEzC;;GAEG;AAOH,MAAM,OAAO,UAAU;;QAgErB,qBAAgB,GAAG,cAAc,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QA8FtE,mBAAc,GAAG,GAAS,EAAE;YAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,sBAAsB,CAAC,IAAI,EAAE,CAAC;QACrC,CAAC,CAAC;QAkBF,oBAAe,GAAG,GAAS,EAAE;YAC3B,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC,CAAC;QAEF,gBAAW,GAAG,GAAS,EAAE;YACvB,IAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC,CAAC;QAEF,6BAAwB,GAAG,CAAC,KAAoB,EAAQ,EAAE;YACxD,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,SAAS,EAAE;gBACnC,OAAO;aACR;YAED,QAAQ,KAAK,CAAC,GAAG,EAAE;gBACjB,KAAK,YAAY;oBACf,KAAK,CAAC,cAAc,EAAE,CAAC;oBACvB,IAAI,CAAC,OAAO,EAAE,CAAC;oBACf,MAAM;gBACR,KAAK,WAAW;oBACd,KAAK,CAAC,cAAc,EAAE,CAAC;oBACvB,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,MAAM;gBACR,KAAK,MAAM;oBACT,KAAK,CAAC,cAAc,EAAE,CAAC;oBACvB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;oBACvB,MAAM;gBACR,KAAK,KAAK;oBACR,KAAK,CAAC,cAAc,EAAE,CAAC;oBACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;oBACpC,MAAM;aACT;QACH,CAAC,CAAC;QAEF,sBAAiB,GAAG,CAAC,EAAkB,EAAQ,EAAE;YAC/C,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACtB,CAAC,CAAC;sBA7M+C,KAAK;;;;;;;;;;+BA6D3B,EAAE;;IA1D7B,mBAAmB;QACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IAsBD,gBAAgB;QACd,0BAA0B;IAC5B,CAAC;IAaD,qBAAqB;QACnB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAmBD,KAAK,CAAC,qBAAqB;QACzB,MAAM,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QACjD,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,6EAA6E;IAC7E,EAAE;IACF,aAAa;IACb,EAAE;IACF,6EAA6E;IAE7E,iBAAiB;QACf,gBAAgB,CAAC,IAAI,CAAC,CAAC;QACvB,eAAe,CAAC,IAAI,CAAC,CAAC;QACtB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,gBAAgB,EAAE,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IAC9E,CAAC;IAED,KAAK,CAAC,iBAAiB;QACrB,MAAM,aAAa,CAAC,IAAI,CAAC,CAAC;QAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,gBAAgB,EAAE,UAAU,EAAE,CAAC;QACpC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QAC1B,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;IAED,6EAA6E;IAC7E,EAAE;IACF,kBAAkB;IAClB,EAAE;IACF,6EAA6E;IAE7E,iDAAiD;IAEjD,KAAK,CAAC,OAAO;QACX,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC;QAC7B,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACzC,IAAI,CAAC,aAAa,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;IAC7D,CAAC;IAED,qDAAqD;IAErD,KAAK,CAAC,WAAW;QACf,IAAI,CAAC,SAAS,GAAG,YAAY,CAAC;QAC9B,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,aAAa,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;IACjE,CAAC;IAaD,6EAA6E;IAC7E,EAAE;IACF,mBAAmB;IACnB,EAAE;IACF,6EAA6E;IAE7E,SAAS;QACP,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACzB,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,EAAE;YACpB,OAAO;SACR;QACD,MAAM,WAAW,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAwB,uBAAuB,CAAC,CAAC;QAE1F,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjE,IAAI,CAAC,OAAO,CAAC,CAAC,GAA0B,EAAE,EAAE;YAC1C,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC;QAC3B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAOD,eAAe;QACb,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;YAC/B,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,KAAK,KAAK,CAAC;YAChD,GAAG,CAAC,QAAQ,GAAG,UAAU,CAAC;YAC1B,GAAG,CAAC,MAAM,GAAG,CAAC,UAAU,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gBAAgB;QACd,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAClD,MAAM,SAAS,GAAG,WAAW,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;YAC3D,IAAI,CAAC,UAAU,GAAG,SAAS,EAAE,UAAU,IAAI,IAAI,CAAC,QAAQ,EAAE,iBAAiB,CAAC;SAC7E;IACH,CAAC;IAuCD,6EAA6E;IAC7E,EAAE;IACF,kBAAkB;IAClB,EAAE;IACF,6EAA6E;IAE7E,gBAAgB;QACd,MAAM,GAAG,GAAG,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACnC,MAAM,EAAE,aAAa,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;QAEtD,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;QAChC,MAAM,aAAa,GAAG,QAAQ,CAAC,QAAQ,CAAC;QACxC,MAAM,eAAe,GAAG,QAAQ,CAAC,sBAAsB,CAAC;QAExD,OAAO,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CACvB,cAAQ,KAAK,EAAE,GAAG,CAAC,UAAU;YAC3B,sBACE,KAAK,EAAE,GAAG,CAAC,YAAY,EACvB,IAAI,EAAE,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,YAAY,EAC5D,OAAO,EAAE,IAAI,CAAC,eAAe,EAC7B,KAAK,EAAC,GAAG,EACT,IAAI,EAAE,aAAa,GACnB;YACF,YAAM,KAAK,EAAE,GAAG,CAAC,YAAY,IAAG,GAAG,eAAe,IAAI,aAAa,GAAG,CAAC,IAAI,KAAK,EAAE,CAAQ;YAC1F,sBACE,KAAK,EAAE,GAAG,CAAC,QAAQ,EACnB,IAAI,EAAE,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,EAC5D,OAAO,EAAE,IAAI,CAAC,WAAW,EACzB,KAAK,EAAC,GAAG,EACT,IAAI,EAAE,SAAS,GACf,CACK,CACV,CAAC,CAAC,CAAC,IAAI,CAAC;IACX,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,UAAU,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;QAE7F,MAAM,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC;QAElC,IAAI,KAAK,KAAK,CAAC,EAAE;YACf,OAAO,IAAI,CAAC;SACb;QAED,OAAO,CACL,8BACe,aAAa,CAAC,MAAM,CAAC,EAClC,KAAK,EAAE,GAAG,CAAC,SAAS,EACpB,MAAM,EAAE,MAAM,EACd,SAAS,EAAE,IAAI,CAAC,wBAAwB,EACxC,QAAQ,EAAE,CAAC;YACX,oKAAoK;YACpK,GAAG,EAAE,IAAI,CAAC,iBAAiB;YAE3B,cAAQ,KAAK,EAAE,GAAG,CAAC,MAAM;gBACvB,EAAC,OAAO,IAAC,KAAK,EAAE,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,YAAY,IAC7C,UAAU,CACH;gBACV,sBACE,KAAK,EAAE,GAAG,CAAC,KAAK,EAChB,OAAO,EAAE,IAAI,CAAC,cAAc,EAC5B,KAAK,EAAC,GAAG,EACT,IAAI,EAAE,UAAU;oBAEhB,oBAAc,IAAI,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,EAAC,GAAG,GAAG,CAC9B,CACV;YACT,WACE,KAAK,EAAE;oBACL,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,IAAI;oBACxB,CAAC,GAAG,CAAC,qBAAqB,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,KAAK,WAAW;oBACjE,CAAC,GAAG,CAAC,sBAAsB,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,KAAK,YAAY;iBACpE,EACD,GAAG,EAAE,aAAa,EAClB,QAAQ,EAAE,CAAC;gBAEX,eAAQ,CACJ;YACL,IAAI,CAAC,gBAAgB,EAAE,CAChB,CACX,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Method,\n  Prop,\n  State,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport { getElementDir, toAriaBoolean } from \"../../utils/dom\";\nimport { connectLocalized, disconnectLocalized } from \"../../utils/locale\";\nimport { createObserver } from \"../../utils/observers\";\nimport {\n  connectMessages,\n  disconnectMessages,\n  setUpMessages,\n  updateMessages,\n} from \"../../utils/t9n\";\nimport { Heading, HeadingLevel } from \"../functional/Heading\";\nimport { TipManagerMessages } from \"./assets/tip-manager/t9n\";\nimport { CSS, ICONS } from \"./resources\";\n\n/**\n * @slot - A slot for adding `calcite-tip`s.\n */\n@Component({\n  tag: \"calcite-tip-manager\",\n  styleUrl: \"tip-manager.scss\",\n  shadow: true,\n  assetsDirs: [\"assets\"],\n})\nexport class TipManager {\n  // --------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  // --------------------------------------------------------------------------\n  /**\n   * When `true`, does not display or position the component.\n   */\n  @Prop({ reflect: true, mutable: true }) closed = false;\n\n  @Watch(\"closed\")\n  closedChangeHandler(): void {\n    this.direction = null;\n  }\n\n  /**\n   * Specifies the number at which section headings should start.\n   */\n  @Prop({ reflect: true }) headingLevel: HeadingLevel;\n\n  /**\n   * Made into a prop for testing purposes only\n   *\n   * @internal\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messages: TipManagerMessages;\n\n  /**\n   * Use this property to override individual strings used by the component.\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messageOverrides: Partial<TipManagerMessages>;\n\n  @Watch(\"messageOverrides\")\n  onMessagesChange(): void {\n    /* wired up by t9n util */\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Properties\n  //\n  // --------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteTipManagerElement;\n\n  @State() selectedIndex: number;\n\n  @Watch(\"selectedIndex\")\n  selectedChangeHandler(): void {\n    this.showSelectedTip();\n    this.updateGroupTitle();\n  }\n\n  @State() tips: HTMLCalciteTipElement[];\n\n  @State() total: number;\n\n  @State() direction: \"advancing\" | \"retreating\";\n\n  @State() groupTitle: string;\n\n  mutationObserver = createObserver(\"mutation\", () => this.setUpTips());\n\n  container: HTMLDivElement;\n\n  @State() defaultMessages: TipManagerMessages;\n\n  @State() effectiveLocale = \"\";\n\n  @Watch(\"effectiveLocale\")\n  async effectiveLocaleChange(): Promise<void> {\n    await updateMessages(this, this.effectiveLocale);\n    this.updateGroupTitle();\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    connectLocalized(this);\n    connectMessages(this);\n    this.setUpTips();\n    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n  }\n\n  async componentWillLoad(): Promise<void> {\n    await setUpMessages(this);\n    this.updateGroupTitle();\n  }\n\n  disconnectedCallback(): void {\n    this.mutationObserver?.disconnect();\n    disconnectLocalized(this);\n    disconnectMessages(this);\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  // --------------------------------------------------------------------------\n\n  /** Selects the next `calcite-tip` to display. */\n  @Method()\n  async nextTip(): Promise<void> {\n    this.direction = \"advancing\";\n    const nextIndex = this.selectedIndex + 1;\n    this.selectedIndex = (nextIndex + this.total) % this.total;\n  }\n\n  /** Selects the previous `calcite-tip` to display. */\n  @Method()\n  async previousTip(): Promise<void> {\n    this.direction = \"retreating\";\n    const previousIndex = this.selectedIndex - 1;\n    this.selectedIndex = (previousIndex + this.total) % this.total;\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * Emits when the component has been closed.\n   */\n  @Event({ cancelable: false }) calciteTipManagerClose: EventEmitter<void>;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  // --------------------------------------------------------------------------\n\n  setUpTips(): void {\n    const tips = Array.from(this.el.querySelectorAll(\"calcite-tip\"));\n    this.total = tips.length;\n    if (this.total === 0) {\n      return;\n    }\n    const selectedTip = this.el.querySelector<HTMLCalciteTipElement>(\"calcite-tip[selected]\");\n\n    this.tips = tips;\n    this.selectedIndex = selectedTip ? tips.indexOf(selectedTip) : 0;\n\n    tips.forEach((tip: HTMLCalciteTipElement) => {\n      tip.closeDisabled = true;\n    });\n    this.showSelectedTip();\n  }\n\n  hideTipManager = (): void => {\n    this.closed = true;\n    this.calciteTipManagerClose.emit();\n  };\n\n  showSelectedTip(): void {\n    this.tips.forEach((tip, index) => {\n      const isSelected = this.selectedIndex === index;\n      tip.selected = isSelected;\n      tip.hidden = !isSelected;\n    });\n  }\n\n  updateGroupTitle(): void {\n    if (this.tips) {\n      const selectedTip = this.tips[this.selectedIndex];\n      const tipParent = selectedTip.closest(\"calcite-tip-group\");\n      this.groupTitle = tipParent?.groupTitle || this.messages?.defaultGroupTitle;\n    }\n  }\n\n  previousClicked = (): void => {\n    this.previousTip();\n  };\n\n  nextClicked = (): void => {\n    this.nextTip();\n  };\n\n  tipManagerKeyDownHandler = (event: KeyboardEvent): void => {\n    if (event.target !== this.container) {\n      return;\n    }\n\n    switch (event.key) {\n      case \"ArrowRight\":\n        event.preventDefault();\n        this.nextTip();\n        break;\n      case \"ArrowLeft\":\n        event.preventDefault();\n        this.previousTip();\n        break;\n      case \"Home\":\n        event.preventDefault();\n        this.selectedIndex = 0;\n        break;\n      case \"End\":\n        event.preventDefault();\n        this.selectedIndex = this.total - 1;\n        break;\n    }\n  };\n\n  storeContainerRef = (el: HTMLDivElement): void => {\n    this.container = el;\n  };\n\n  // --------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  // --------------------------------------------------------------------------\n\n  renderPagination(): VNode {\n    const dir = getElementDir(this.el);\n    const { selectedIndex, tips, total, messages } = this;\n\n    const nextLabel = messages.next;\n    const previousLabel = messages.previous;\n    const paginationLabel = messages.defaultPaginationLabel;\n\n    return tips.length > 1 ? (\n      <footer class={CSS.pagination}>\n        <calcite-action\n          class={CSS.pagePrevious}\n          icon={dir === \"ltr\" ? ICONS.chevronLeft : ICONS.chevronRight}\n          onClick={this.previousClicked}\n          scale=\"m\"\n          text={previousLabel}\n        />\n        <span class={CSS.pagePosition}>{`${paginationLabel} ${selectedIndex + 1}/${total}`}</span>\n        <calcite-action\n          class={CSS.pageNext}\n          icon={dir === \"ltr\" ? ICONS.chevronRight : ICONS.chevronLeft}\n          onClick={this.nextClicked}\n          scale=\"m\"\n          text={nextLabel}\n        />\n      </footer>\n    ) : null;\n  }\n\n  render(): VNode {\n    const { closed, direction, headingLevel, groupTitle, selectedIndex, messages, total } = this;\n\n    const closeLabel = messages.close;\n\n    if (total === 0) {\n      return null;\n    }\n\n    return (\n      <section\n        aria-hidden={toAriaBoolean(closed)}\n        class={CSS.container}\n        hidden={closed}\n        onKeyDown={this.tipManagerKeyDownHandler}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={this.storeContainerRef}\n      >\n        <header class={CSS.header}>\n          <Heading class={CSS.heading} level={headingLevel}>\n            {groupTitle}\n          </Heading>\n          <calcite-action\n            class={CSS.close}\n            onClick={this.hideTipManager}\n            scale=\"m\"\n            text={closeLabel}\n          >\n            <calcite-icon icon={ICONS.close} scale=\"m\" />\n          </calcite-action>\n        </header>\n        <div\n          class={{\n            [CSS.tipContainer]: true,\n            [CSS.tipContainerAdvancing]: !closed && direction === \"advancing\",\n            [CSS.tipContainerRetreating]: !closed && direction === \"retreating\",\n          }}\n          key={selectedIndex}\n          tabIndex={0}\n        >\n          <slot />\n        </div>\n        {this.renderPagination()}\n      </section>\n    );\n  }\n}\n"]}