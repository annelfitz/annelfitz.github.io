{"version":3,"file":"tree-item.e2e.js","sourceRoot":"","sources":["../../../../src/components/tree-item/tree-item.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { E2EPage, newE2EPage } from \"@stencil/core/testing\";\nimport { accessible, defaults, disabled, hidden, renders, slots } from \"../../tests/commonTests\";\nimport { html } from \"../../../support/formatting\";\nimport { SLOTS } from \"./resources\";\n\ndescribe(\"calcite-tree-item\", () => {\n  describe(\"renders\", () => {\n    renders(\"calcite-tree-item\", { visible: false, display: \"block\" });\n  });\n\n  describe(\"honors hidden attribute\", () => {\n    hidden(`<calcite-tree-item expanded></calcite-tree-item>`);\n  });\n\n  describe(\"accessible\", () => {\n    accessible(`<calcite-tree-item></calcite-tree-item>`);\n  });\n\n  describe(\"accessible: with nested children\", () => {\n    accessible(\n      html`<calcite-tree lines>\n        <calcite-tree-item>\n          <a href=\"#\">Child 2</a>\n          <calcite-tree slot=\"children\">\n            <calcite-tree-item>\n              <a href=\"http://www.esri.com\">Grandchild 1</a>\n            </calcite-tree-item>\n          </calcite-tree>\n        </calcite-tree-item>\n      </calcite-tree>`,\n    );\n  });\n\n  describe(\"defaults\", () => {\n    defaults(\"calcite-tree-item\", [\n      {\n        propertyName: \"selected\",\n        defaultValue: false,\n      },\n      {\n        propertyName: \"expanded\",\n        defaultValue: false,\n      },\n      {\n        propertyName: \"parentExpanded\",\n        defaultValue: false,\n      },\n      {\n        propertyName: \"depth\",\n        defaultValue: 0,\n      },\n      {\n        propertyName: \"hasChildren\",\n        defaultValue: false,\n      },\n      {\n        propertyName: \"indeterminate\",\n        defaultValue: false,\n      },\n    ]);\n  });\n\n  describe(\"slots\", () => {\n    slots(\"calcite-tree-item\", SLOTS);\n  });\n\n  describe(\"disabled within a tree\", () => {\n    let page: E2EPage;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(html`\n        <calcite-tree expanded>\n          <calcite-tree-item>😃</calcite-tree-item>\n        </calcite-tree>\n      `);\n      await page.waitForChanges();\n    });\n\n    disabled(() => ({ tag: \"calcite-tree-item\", page }));\n  });\n\n  it(\"should expand/collapse children when the icon is clicked, but not select/deselect group\", async () => {\n    const page = await newE2EPage();\n    await page.setContent(html`\n      <calcite-tree lines id=\"parentTree\" selection-mode=\"ancestors\">\n        <calcite-tree-item id=\"firstItem\">\n          <a href=\"#\">Child 2</a>\n\n          <calcite-tree slot=\"children\">\n            <calcite-tree-item>\n              <a href=\"http://www.esri.com\">Grandchild 1</a>\n            </calcite-tree-item>\n          </calcite-tree>\n        </calcite-tree-item>\n      </calcite-tree>\n    `);\n\n    const item = await page.find(\"calcite-tree-item\");\n    expect(item).not.toHaveAttribute(\"checked\");\n\n    const icon = await page.find('#firstItem >>> [data-test-id=\"icon\"]');\n    await icon.click();\n\n    const childContainer = await page.find('#firstItem >>> [data-test-id=\"calcite-tree-children\"]');\n    const isVisible = await childContainer.isVisible();\n    expect(isVisible).toBe(true);\n    expect(item).not.toHaveAttribute(\"checked\");\n  });\n\n  it(\"should allow starting expanded\", async () => {\n    const page = await newE2EPage();\n\n    await page.setContent(`<calcite-tree lines id=\"parentTree\">\n      <calcite-tree-item id=\"firstItem\" expanded>\n        <a href=\"#\">Child 2</a>\n\n        <calcite-tree slot=\"children\">\n          <calcite-tree-item>\n            <a href=\"#\" id=\"childLink\">Grandchild 1</a>\n          </calcite-tree-item>\n        </calcite-tree>\n      </calcite-tree-item>\n    </calcite-tree>`);\n\n    const child = await page.find(\"#childLink\");\n    const isVisible = await child.isVisible();\n    expect(isVisible).toBe(true);\n  });\n\n  it(\"should navigate when the link inside the tree item is clicked\", async () => {\n    const page = await newE2EPage();\n\n    await page.setContent(`<calcite-tree lines id=\"parentTree\">\n      <calcite-tree-item id=\"firstItem\">\n        <a href=\"#\">Child 1</a>\n      </calcite-tree-item>\n    </calcite-tree>`);\n\n    const anchor = await page.find(\"#firstItem a\");\n    await anchor.click();\n\n    await page.waitForChanges();\n    expect(page.url()).toContain(\"#\");\n  });\n\n  it(\"should navigate to the link url when the item but not the link is clicked\", async () => {\n    const page = await newE2EPage();\n\n    await page.setContent(`<calcite-tree lines id=\"parentTree\">\n      <calcite-tree-item id=\"firstItem\">\n        <a href=\"#\">Child 1</a>\n      </calcite-tree-item>\n    </calcite-tree>`);\n\n    const item = await page.find(\"#firstItem\");\n    await item.click();\n\n    await page.waitForChanges();\n    expect(page.url()).toContain(\"#\");\n  });\n\n  it(\"should navigate to the inner link when a child item is clicked and not the outer link\", async () => {\n    const page = await newE2EPage();\n\n    await page.setContent(`<calcite-tree lines id=\"parentTree\">\n      <calcite-tree-item expanded>\n        <a href=\"#outer\">Child 2</a>\n\n        <calcite-tree slot=\"children\">\n          <calcite-tree-item id=\"secondItem\">\n            <a href=\"#inner\">Grandchild 1</a>\n          </calcite-tree-item>\n        </calcite-tree>\n      </calcite-tree-item>\n    </calcite-tree>`);\n\n    await page.waitForChanges();\n\n    const hash = await page.evaluate(() => {\n      const item = document.getElementById(\"secondItem\");\n      item.click();\n      return window.location.hash;\n    });\n\n    expect(hash).toEqual(\"#inner\");\n  });\n\n  describe(\"when a tree-item has ancestors selection-mode and is selected\", () => {\n    it(\"should update its ancestor tree-items' indeterminate properties (ancestors are indeterminate)\", async () => {\n      const tree = html`\n        <calcite-tree selection-mode=\"ancestors\">\n          <calcite-tree-item expanded data-id=\"ancestor\">\n            <span>Fruits</span>\n            <calcite-tree slot=\"children\">\n              <calcite-tree-item>\n                <calcite-link href=\"#go\" tabindex=\"-1\">Bananas</calcite-link>\n              </calcite-tree-item>\n              <calcite-tree-item expanded data-id=\"ancestor\">\n                <span>Pears</span>\n                <calcite-tree slot=\"children\">\n                  <calcite-tree-item selected>\n                    <calcite-link href=\"#go\" tabindex=\"-1\">Anjou</calcite-link>\n                  </calcite-tree-item>\n                  <calcite-tree-item>\n                    <calcite-link href=\"#go\" tabindex=\"-1\">Bartlett</calcite-link>\n                  </calcite-tree-item>\n                </calcite-tree>\n              </calcite-tree-item>\n            </calcite-tree>\n          </calcite-tree-item>\n        </calcite-tree>\n      `;\n      const page = await newE2EPage();\n      await page.setContent(tree);\n      await page.waitForChanges();\n      const ancestors = await page.findAll(`calcite-tree-item[data-id=\"ancestor\"]`);\n\n      for (const node of ancestors) {\n        expect(await node.getProperty(\"indeterminate\")).toBe(true);\n        expect(await node.getProperty(\"selected\")).toBe(false);\n      }\n    });\n\n    it(\"should update its ancestor tree-items' indeterminate properties (ancestors are selected)\", async () => {\n      const tree = html`\n        <calcite-tree selection-mode=\"ancestors\">\n          <calcite-tree-item expanded data-id=\"ancestor\">\n            <span>Fruits</span>\n            <calcite-tree slot=\"children\">\n              <calcite-tree-item>\n                <calcite-link href=\"#go\" tabindex=\"-1\">Bananas</calcite-link>\n              </calcite-tree-item>\n              <calcite-tree-item expanded data-id=\"ancestor\">\n                <span>Pears</span>\n                <calcite-tree slot=\"children\">\n                  <calcite-tree-item selected>\n                    <calcite-link href=\"#go\" tabindex=\"-1\">Anjou</calcite-link>\n                  </calcite-tree-item>\n                  <calcite-tree-item selected>\n                    <calcite-link href=\"#go\" tabindex=\"-1\">Bartlett</calcite-link>\n                  </calcite-tree-item>\n                </calcite-tree>\n              </calcite-tree-item>\n            </calcite-tree>\n          </calcite-tree-item>\n        </calcite-tree>\n      `;\n      const page = await newE2EPage();\n      await page.setContent(tree);\n      await page.waitForChanges();\n      const [indeterminateAncestor, selectedAncestor] = await page.findAll(`calcite-tree-item[data-id=\"ancestor\"]`);\n\n      expect(await indeterminateAncestor.getProperty(\"indeterminate\")).toBe(true);\n      expect(await indeterminateAncestor.getProperty(\"selected\")).toBe(false);\n\n      expect(await selectedAncestor.getProperty(\"indeterminate\")).toBe(false);\n      expect(await selectedAncestor.getProperty(\"selected\")).toBe(true);\n    });\n  });\n\n  describe(\"when a parent tree-item is expanded and a new item is appended into it\", () => {\n    it(\"should render the visible, keyboard navigable item\", async () => {\n      const page = await newE2EPage();\n      await page.setContent(`<calcite-panel>\n        <calcite-button id='add-item-btn'>Add item to tree</calcite-button>\n        <calcite-tree>\n          <calcite-tree-item expanded><span>Element 1</span>\n            <calcite-tree slot='children' id='target-tree'>\n              <calcite-tree-item>Child 1</calcite-tree-item>\n            </calcite-tree>\n          </calcite-tree-item>\n          <calcite-tree-item>Element 2</calcite-tree-item>\n        </calcite-tree>\n      </calcite-panel>`);\n      await page.evaluate(() => {\n        const tree = document.querySelector(\"#target-tree\");\n        document.querySelector(\"#add-item-btn\").addEventListener(\"click\", () => {\n          const newItem = document.createElement(\"calcite-tree-item\");\n          newItem.id = \"newbie\";\n          newItem.appendChild(document.createTextNode(\"Child 2\"));\n          tree.appendChild(newItem);\n        });\n      });\n      const btn = await page.find(\"calcite-button\");\n      await btn.click();\n\n      const item = await page.find(\"#newbie\");\n      expect(item).toEqualAttribute(\"aria-hidden\", \"false\");\n      expect(item.tabIndex).toBe(0);\n    });\n  });\n\n  it(\"clicking on node-container, label, or checkbox selects/deselects, but does not expand/collapse children\", async () => {\n    const page = await newE2EPage();\n    await page.setContent(html`\n      <calcite-tree selection-mode=\"ancestors\" scale=\"m\">\n        <calcite-tree-item>\n          <span>Child 1</span>\n\n          <calcite-tree slot=\"children\">\n            <calcite-tree-item>\n              <span>Grandchild 1</span>\n              <calcite-tree slot=\"children\">\n                <calcite-tree-item>\n                  <span>Great Grandchild 1</span>\n                </calcite-tree-item>\n                <calcite-tree-item>\n                  <span>Great Grandchild 2</span>\n                </calcite-tree-item>\n                <calcite-tree-item>\n                  <span>Great Grandchild 3</span>\n                </calcite-tree-item>\n              </calcite-tree>\n            </calcite-tree-item>\n            <calcite-tree-item>\n              <span>Grandchild 2</span>\n            </calcite-tree-item>\n            <calcite-tree-item>\n              <span>Grandchild 3</span>\n            </calcite-tree-item>\n          </calcite-tree>\n        </calcite-tree-item>\n\n        <calcite-tree-item>\n          <span>Child 2</span>\n        </calcite-tree-item>\n        <calcite-tree-item>\n          <span>Child 3</span>\n        </calcite-tree-item>\n      </calcite-tree>\n    `);\n    const container = await page.find(\"calcite-tree-item >>> .node-container\");\n    const label = await container.find(\"label\");\n    const checkbox = await label.find(\"calcite-checkbox\");\n\n    const icon = await container.find(`[data-test-id=\"icon\"]`);\n    await icon.click();\n\n    const childContainer = await page.find(`calcite-tree-item >>> [data-test-id=\"calcite-tree-children\"]`);\n    const isVisible = await childContainer.isVisible();\n    expect(isVisible).toBe(true);\n\n    await container.click();\n    expect(checkbox).toHaveAttribute(\"checked\");\n    expect(isVisible).toBe(true);\n    await container.click();\n    expect(checkbox).not.toHaveAttribute(\"checked\");\n    expect(isVisible).toBe(true);\n\n    await label.click();\n    expect(checkbox).toHaveAttribute(\"checked\");\n    expect(isVisible).toBe(true);\n    await label.click();\n    expect(checkbox).not.toHaveAttribute(\"checked\");\n    expect(isVisible).toBe(true);\n\n    await checkbox.click();\n    expect(checkbox).toHaveAttribute(\"checked\");\n    expect(isVisible).toBe(true);\n    await checkbox.click();\n    expect(checkbox).not.toHaveAttribute(\"checked\");\n    expect(isVisible).toBe(true);\n  });\n\n  it(\"displaying an expanded item is visible\", async () => {\n    const page = await newE2EPage();\n    await page.setContent(html`\n      <calcite-tree id=\"root\" style=\"display:none;\">\n        <calcite-tree-item expanded\n          >parent\n          <calcite-tree slot=\"children\">\n            <calcite-tree-item id=\"child\">child</calcite-tree-item>\n          </calcite-tree>\n        </calcite-tree-item>\n      </calcite-tree>\n    `);\n\n    await page.$eval(\"#root\", (root: HTMLCalciteTreeElement) => (root.style.display = \"\"));\n    await page.waitForChanges();\n\n    const item = await page.$(\"#child\");\n    const itemBounds = await item.boundingBox();\n\n    expect(itemBounds.height).not.toBe(0);\n  });\n});\n"]}