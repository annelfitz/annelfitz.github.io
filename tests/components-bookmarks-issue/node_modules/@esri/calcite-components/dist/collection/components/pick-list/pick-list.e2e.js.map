{"version":3,"file":"pick-list.e2e.js","sourceRoot":"","sources":["../../../../src/components/pick-list/pick-list.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { E2EElement, E2EPage, newE2EPage } from \"@stencil/core/testing\";\nimport { html } from \"../../../support/formatting\";\nimport { accessible, defaults, hidden, renders } from \"../../tests/commonTests\";\nimport { CSS as PICK_LIST_GROUP_CSS } from \"../pick-list-group/resources\";\nimport { ICON_TYPES } from \"./resources\";\nimport {\n  disabling,\n  filterBehavior,\n  focusing,\n  itemRemoval,\n  keyboardNavigation,\n  selectionAndDeselection,\n} from \"./shared-list-tests\";\n\ndescribe(\"calcite-pick-list\", () => {\n  describe(\"defaults\", () => {\n    defaults(\"calcite-pick-list\", [\n      {\n        propertyName: \"headingLevel\",\n        defaultValue: undefined,\n      },\n    ]);\n  });\n\n  describe(\"renders\", () => {\n    renders(\"calcite-pick-list\", { display: \"flex\" });\n  });\n\n  describe(\"honors hidden attribute\", () => {\n    hidden(\"calcite-pick-list\");\n  });\n\n  // eslint-disable-next-line jest/no-disabled-tests\n  describe.skip(\"accessible\", () => {\n    accessible(html`\n      <calcite-pick-list>\n        <calcite-pick-list-item label=\"Sample\" value=\"one\"></calcite-pick-list-item>\n      </calcite-pick-list>\n    `);\n  });\n\n  describe(\"disabling\", () => {\n    disabling(\"pick\");\n  });\n\n  describe(\"Selection and Deselection\", () => {\n    selectionAndDeselection(\"pick\");\n  });\n\n  describe(\"Keyboard navigation\", () => {\n    keyboardNavigation(\"pick\");\n  });\n\n  describe(\"icon logic\", () => {\n    it(\"should be 'circle' when multi-select is disabled\", async () => {\n      const page = await newE2EPage();\n      await page.setContent(`<calcite-pick-list>\n        <calcite-pick-list-item value=\"one\"></calcite-pick-list-item>\n      </calcite-pick-list>`);\n\n      const item = await page.find(\"calcite-pick-list-item\");\n      const icon = await item.getProperty(\"icon\");\n      expect(icon).toBe(ICON_TYPES.circle);\n    });\n\n    it(\"should be 'square' when multi-select is enabled\", async () => {\n      const page = await newE2EPage();\n      await page.setContent(`<calcite-pick-list multiple>\n        <calcite-pick-list-item value=\"one\"></calcite-pick-list-item>\n      </calcite-pick-list>`);\n\n      const item = await page.find(\"calcite-pick-list-item\");\n      const icon = await item.getProperty(\"icon\");\n      expect(icon).toBe(ICON_TYPES.square);\n    });\n  });\n\n  describe(\"filter behavior (hide/show items)\", () => {\n    filterBehavior(\"pick\");\n\n    let page: E2EPage = null;\n    let groupOrParentItem: E2EElement;\n    let item1: E2EElement;\n    let item2: E2EElement;\n\n    async function assertGroupIsVisibleWhenChildMatches(\n      page: E2EPage,\n      groupOrParentItem: E2EElement,\n      item1: E2EElement,\n      item2: E2EElement,\n    ): Promise<void> {\n      const item1ValueLowercased = (await item1.getProperty(\"label\")).toLowerCase();\n\n      await page.evaluate(\n        (filterText) => {\n          const filterInput = (window as any).filterInput;\n          filterInput.value = filterText;\n          filterInput.dispatchEvent(new CustomEvent(\"calciteInputInput\"));\n        },\n        [item1ValueLowercased],\n      );\n\n      await item2.waitForNotVisible();\n\n      const parentVisible = await groupOrParentItem.isVisible();\n\n      expect(parentVisible).toBe(true);\n    }\n\n    describe(\"filtering with groups\", () => {\n      beforeEach(async () => {\n        page = await newE2EPage({\n          html: `<calcite-pick-list filter-enabled>\n          <calcite-pick-list-group group-title=\"Numbers\">\n            <calcite-pick-list-item value=\"1\" label=\"One\" description=\"uno\"></calcite-pick-list-item>\n            <calcite-pick-list-item value=\"2\" label=\"Two\" description=\"dos\"></calcite-pick-list-item>\n          </calcite-pick-list-group>\n        </calcite-pick-list>`,\n        });\n\n        groupOrParentItem = await page.find(`calcite-pick-list-group`);\n        item1 = await page.find(`calcite-pick-list-item[value=\"1\"]`);\n        item2 = await page.find(`calcite-pick-list-item[value=\"2\"]`);\n\n        item1.setProperty(\"metadata\", { category: \"first\" });\n        item2.setProperty(\"metadata\", { category: \"second\" });\n\n        await page.waitForChanges();\n        await page.evaluate(() => {\n          (window as any).filter = document\n            .querySelector(`calcite-pick-list`)\n            .shadowRoot.querySelector(\"calcite-filter\");\n\n          const filter = (window as any).filter;\n          (window as any).filterInput = filter.shadowRoot.querySelector(\"calcite-input\");\n        });\n      });\n\n      it(\"should show the group parent if a match is found in a child\", async () =>\n        await assertGroupIsVisibleWhenChildMatches(page, groupOrParentItem, item1, item2));\n    });\n\n    describe(\"filtering with groups (nested)\", () => {\n      beforeEach(async () => {\n        page = await newE2EPage({\n          html: `<calcite-pick-list filter-enabled>\n          <calcite-pick-list-group>\n            <calcite-pick-list-item slot=\"parent-item\" value=\"numbers\" label=\"Numbers\"></calcite-pick-list-item>\n            <calcite-pick-list-item value=\"1\" label=\"One\" description=\"uno\"></calcite-pick-list-item>\n            <calcite-pick-list-item value=\"2\" label=\"Two\" description=\"dos\"></calcite-pick-list-item>\n          </calcite-pick-list-group>\n        </calcite-pick-list>`,\n        });\n\n        groupOrParentItem = await page.find(`calcite-pick-list-item[slot=\"parent-item\"]`);\n        item1 = await page.find(`calcite-pick-list-item[value=\"1\"]`);\n        item2 = await page.find(`calcite-pick-list-item[value=\"2\"]`);\n\n        item1.setProperty(\"metadata\", { category: \"first\" });\n        item2.setProperty(\"metadata\", { category: \"second\" });\n\n        await page.waitForChanges();\n        await page.evaluate(() => {\n          (window as any).filter = document\n            .querySelector(`calcite-pick-list`)\n            .shadowRoot.querySelector(\"calcite-filter\");\n\n          const filter = (window as any).filter;\n          (window as any).filterInput = filter.shadowRoot.querySelector(\"calcite-input\");\n        });\n      });\n\n      it(\"should show the group parent if a match is found in a child\", async () =>\n        await assertGroupIsVisibleWhenChildMatches(page, groupOrParentItem, item1, item2));\n\n      it(\"should show the children of a group if the parent matches\", async () => {\n        await page.evaluate(() => {\n          const filterInput = (window as any).filterInput;\n          filterInput.value = \"numbers\";\n          filterInput.dispatchEvent(new CustomEvent(\"calciteInputInput\"));\n        });\n        await page.waitForTimeout(500);\n\n        const item1Visible = await item1.isVisible();\n        const item2Visible = await item2.isVisible();\n\n        expect(item1Visible).toBe(true);\n        expect(item2Visible).toBe(true);\n      });\n    });\n  });\n\n  describe(\"item removal\", () => {\n    itemRemoval(\"pick\");\n  });\n\n  describe(\"setFocus\", () => {\n    focusing(\"pick\");\n  });\n\n  it(\"should set headingLevel of tip\", async () => {\n    const page = await newE2EPage({\n      html: `<calcite-pick-list heading-level=\"1\">\n      <calcite-pick-list-group group-title=\"test\">\n        <calcite-pick-list-item value=\"1\" label=\"One\" description=\"uno\"></calcite-pick-list-item>\n        <calcite-pick-list-item value=\"2\" label=\"Two\" description=\"dos\"></calcite-pick-list-item>\n      </calcite-pick-list-group>\n    </calcite-pick-list>`,\n    });\n\n    await page.waitForChanges();\n\n    const pickList = await page.find(\"calcite-pick-list\");\n\n    expect(await pickList.getProperty(\"headingLevel\")).toEqual(1);\n\n    const heading = await page.find(`calcite-pick-list-group >>> .${PICK_LIST_GROUP_CSS.heading}`);\n\n    expect(heading.tagName).toEqual(\"H2\");\n  });\n});\n"]}