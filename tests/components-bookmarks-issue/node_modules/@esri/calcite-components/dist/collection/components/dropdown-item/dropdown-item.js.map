{"version":3,"file":"dropdown-item.js","sourceRoot":"","sources":["../../../../src/components/dropdown-item/dropdown-item.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  VNode,\n} from \"@stencil/core\";\nimport { toAriaBoolean } from \"../../utils/dom\";\nimport { ItemKeyboardEvent } from \"../dropdown/interfaces\";\nimport { RequestedItem } from \"../dropdown-group/interfaces\";\nimport { FlipContext, Scale, SelectionMode } from \"../interfaces\";\nimport { CSS } from \"./resources\";\nimport {\n  componentFocusable,\n  LoadableComponent,\n  setComponentLoaded,\n  setUpLoadableComponent,\n} from \"../../utils/loadable\";\nimport { getIconScale } from \"../../utils/component\";\nimport {\n  InteractiveComponent,\n  InteractiveContainer,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\n\n/**\n * @slot - A slot for adding text.\n */\n@Component({\n  tag: \"calcite-dropdown-item\",\n  styleUrl: \"dropdown-item.scss\",\n  shadow: true,\n})\nexport class DropdownItem implements InteractiveComponent, LoadableComponent {\n  //--------------------------------------------------------------------------\n  //\n  //  Public Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * When `true`, interaction is prevented and the component is displayed with lower opacity.\n   */\n  @Prop({ reflect: true }) disabled = false;\n\n  /**\n   *  Specifies the URL of the linked resource, which can be set as an absolute or relative path.\n   *\n   * Determines if the component will render as an anchor.\n   */\n  @Prop({ reflect: true }) href: string;\n\n  /** Displays the `iconStart` and/or `iconEnd` as flipped when the element direction is right-to-left (`\"rtl\"`). */\n  @Prop({ reflect: true }) iconFlipRtl: FlipContext;\n\n  /** Specifies an icon to display at the start of the component. */\n  @Prop({ reflect: true }) iconStart: string;\n\n  /** Specifies an icon to display at the end of the component. */\n  @Prop({ reflect: true }) iconEnd: string;\n\n  /** Accessible name for the component. */\n  @Prop() label: string;\n\n  /** Specifies the relationship to the linked document defined in `href`. */\n  @Prop({ reflect: true }) rel: string;\n\n  /** When `true`, the component is selected. */\n  @Prop({ reflect: true, mutable: true }) selected = false;\n\n  /** Specifies the frame or window to open the linked document. */\n  @Prop({ reflect: true }) target: string;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  /** Fires when the component is selected. */\n  @Event({ cancelable: false }) calciteDropdownItemSelect: EventEmitter<void>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalDropdownItemSelect: EventEmitter<RequestedItem>;\n\n  /** @internal */\n  @Event({ cancelable: false })\n  calciteInternalDropdownItemKeyEvent: EventEmitter<ItemKeyboardEvent>;\n\n  /** @internal */\n  @Event({ cancelable: false }) calciteInternalDropdownCloseRequest: EventEmitter<void>;\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /** Sets focus on the component. */\n  @Method()\n  async setFocus(): Promise<void> {\n    await componentFocusable(this);\n\n    this.el?.focus();\n  }\n\n  /**\n   * Specifies the selection mode inherited from `calcite-dropdown-group`, defaults to `single`:\n   * - `multiple` allows any number of selected items,\n   * - `single` allows only one selection (default),\n   * - `none` doesn't allow for any selection.\n   *\n   * @internal\n   */\n  @Prop() selectionMode: Extract<\"none\" | \"single\" | \"multiple\", SelectionMode> = \"single\";\n\n  /**\n   * Specifies the size of the component inherited from `calcite-dropdown`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  componentWillLoad(): void {\n    setUpLoadableComponent(this);\n    this.initialize();\n  }\n\n  componentDidLoad(): void {\n    setComponentLoaded(this);\n  }\n\n  connectedCallback(): void {\n    this.initialize();\n  }\n\n  componentDidRender(): void {\n    updateHostInteraction(this);\n  }\n\n  render(): VNode {\n    const { href, selectionMode, label, iconFlipRtl, scale } = this;\n\n    const iconStartEl = (\n      <calcite-icon\n        class={CSS.iconStart}\n        flipRtl={iconFlipRtl === \"start\" || iconFlipRtl === \"both\"}\n        icon={this.iconStart}\n        scale={getIconScale(this.scale)}\n      />\n    );\n    const contentNode = (\n      <span class={CSS.itemContent}>\n        <slot />\n      </span>\n    );\n    const iconEndEl = (\n      <calcite-icon\n        class={CSS.iconEnd}\n        flipRtl={iconFlipRtl === \"end\" || iconFlipRtl === \"both\"}\n        icon={this.iconEnd}\n        scale={getIconScale(this.scale)}\n      />\n    );\n\n    const slottedContent =\n      this.iconStart && this.iconEnd\n        ? [iconStartEl, contentNode, iconEndEl]\n        : this.iconStart\n          ? [iconStartEl, contentNode]\n          : this.iconEnd\n            ? [contentNode, iconEndEl]\n            : contentNode;\n\n    const contentEl = !href ? (\n      slottedContent\n    ) : (\n      <a\n        aria-label={label}\n        class={CSS.link}\n        href={href}\n        rel={this.rel}\n        tabIndex={-1}\n        target={this.target}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.childLink = el)}\n      >\n        {slottedContent}\n      </a>\n    );\n\n    const itemRole = href\n      ? null\n      : selectionMode === \"single\"\n        ? \"menuitemradio\"\n        : selectionMode === \"multiple\"\n          ? \"menuitemcheckbox\"\n          : \"menuitem\";\n\n    const itemAria = selectionMode !== \"none\" ? toAriaBoolean(this.selected) : null;\n    const { disabled } = this;\n\n    return (\n      <Host\n        aria-checked={itemAria}\n        aria-label={!href ? label : \"\"}\n        role={itemRole}\n        tabIndex={disabled ? -1 : 0}\n      >\n        <InteractiveContainer disabled={disabled}>\n          <div\n            class={{\n              [CSS.container]: true,\n              [CSS.containerLink]: !!href,\n              [`${CSS.container}--${scale}`]: true,\n              [CSS.containerMulti]: selectionMode === \"multiple\",\n              [CSS.containerSingle]: selectionMode === \"single\",\n              [CSS.containerNone]: selectionMode === \"none\",\n            }}\n          >\n            {selectionMode !== \"none\" ? (\n              <calcite-icon\n                class={CSS.icon}\n                icon={selectionMode === \"multiple\" ? \"check\" : \"bullet-point\"}\n                scale={getIconScale(this.scale)}\n              />\n            ) : null}\n            {contentEl}\n          </div>\n        </InteractiveContainer>\n      </Host>\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"click\") onClick(): void {\n    this.emitRequestedItem();\n  }\n\n  @Listen(\"keydown\")\n  keyDownHandler(event: KeyboardEvent): void {\n    switch (event.key) {\n      case \" \":\n      case \"Enter\":\n        this.emitRequestedItem();\n        if (this.href) {\n          this.childLink.click();\n        }\n        event.preventDefault();\n        break;\n      case \"Escape\":\n        this.calciteInternalDropdownCloseRequest.emit();\n        event.preventDefault();\n        break;\n      case \"Tab\":\n        this.calciteInternalDropdownItemKeyEvent.emit({ keyboardEvent: event });\n        break;\n      case \"ArrowUp\":\n      case \"ArrowDown\":\n      case \"Home\":\n      case \"End\":\n        event.preventDefault();\n        this.calciteInternalDropdownItemKeyEvent.emit({ keyboardEvent: event });\n        break;\n    }\n  }\n\n  @Listen(\"calciteInternalDropdownItemChange\", { target: \"body\" })\n  updateActiveItemOnChange(event: CustomEvent): void {\n    const parentEmittedChange = event.composedPath().includes(this.parentDropdownGroupEl);\n\n    if (parentEmittedChange) {\n      this.requestedDropdownGroup = event.detail.requestedDropdownGroup;\n      this.requestedDropdownItem = event.detail.requestedDropdownItem;\n      this.determineActiveItem();\n    }\n    event.stopPropagation();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteDropdownItemElement;\n\n  /** id of containing group */\n  private parentDropdownGroupEl: HTMLCalciteDropdownGroupElement;\n\n  /** requested group */\n  private requestedDropdownGroup: HTMLCalciteDropdownGroupElement;\n\n  /** requested item */\n  private requestedDropdownItem: HTMLCalciteDropdownItemElement;\n\n  /** if href is requested, track the rendered child link*/\n  private childLink: HTMLAnchorElement;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  private initialize(): void {\n    this.parentDropdownGroupEl = this.el.closest(\"calcite-dropdown-group\");\n    if (this.selectionMode === \"none\") {\n      this.selected = false;\n    }\n  }\n\n  private determineActiveItem(): void {\n    switch (this.selectionMode) {\n      case \"multiple\":\n        if (this.el === this.requestedDropdownItem) {\n          this.selected = !this.selected;\n        }\n        break;\n\n      case \"single\":\n        if (this.el === this.requestedDropdownItem) {\n          this.selected = true;\n        } else if (this.requestedDropdownGroup === this.parentDropdownGroupEl) {\n          this.selected = false;\n        }\n        break;\n\n      case \"none\":\n        this.selected = false;\n        break;\n    }\n  }\n\n  private emitRequestedItem(): void {\n    this.calciteDropdownItemSelect.emit();\n    this.calciteInternalDropdownItemSelect.emit({\n      requestedDropdownItem: this.el,\n      requestedDropdownGroup: this.parentDropdownGroupEl,\n    });\n  }\n}\n"]}