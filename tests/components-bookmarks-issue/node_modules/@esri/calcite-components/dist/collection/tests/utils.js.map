{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/tests/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import { E2EElement, E2EPage, newE2EPage } from \"@stencil/core/testing\";\nimport type { JSX } from \"../components\";\nimport { BoundingBox } from \"puppeteer\";\n\n/**\n * Util to help type global props for testing.\n */\nexport type GlobalTestProps<T> = T & Window & typeof globalThis;\n\ntype FilterPropsByPropertyName<T, PropName extends string> = {\n  [K in keyof T]: PropName extends keyof T[K] ? T[K] : never;\n};\n\n/**\n * Helper to extract a type by filtering the type by the property name.\n */\nexport type IntrinsicElementsWithProp<T extends string> = FilterPropsByPropertyName<\n  JSX.IntrinsicElements,\n  T\n>[keyof FilterPropsByPropertyName<JSX.IntrinsicElements, T>];\n\ntype DragAndDropSelector = string | SelectorOptions;\n\ntype PointerPosition = {\n  vertical?: \"bottom\" | \"center\" | \"top\";\n  horizontal?: \"left\" | \"center\" | \"right\";\n  offset?: [number, number];\n};\n\ninterface SelectorOptions {\n  element: string;\n  shadow?: string;\n  pointerPosition?: PointerPosition;\n}\n\ntype MouseInitEvent = Pick<\n  MouseEvent,\n  \"bubbles\" | \"cancelable\" | \"composed\" | \"screenX\" | \"screenY\" | \"clientX\" | \"clientY\"\n>;\n\n/**\n * Drag and drop utility based on https://github.com/puppeteer/puppeteer/issues/1366#issuecomment-615887204\n *\n * @param {E2EPage} page - the e2e page\n * @param {DragAndDropSelector} dragStartSelector - Selector for the drag's start\n * @param {DragAndDropSelector} dragEndSelector - Selector for the drag's end\n */\nexport async function dragAndDrop(\n  page: E2EPage,\n  dragStartSelector: DragAndDropSelector,\n  dragEndSelector: DragAndDropSelector,\n): Promise<void> {\n  async function getBounds(selector: DragAndDropSelector): Promise<BoundingBox> {\n    const elementHandle =\n      typeof selector === \"string\"\n        ? await page.waitForSelector(selector)\n        : await page.evaluateHandle(({ element, shadow }) => {\n            const target = document.querySelector(element);\n\n            return shadow ? target.shadowRoot.querySelector(shadow) : target;\n          }, selector);\n\n    return elementHandle.asElement().boundingBox();\n  }\n\n  async function createEventInitializer(selector: DragAndDropSelector): Promise<MouseInitEvent> {\n    const {\n      vertical: verticalPos,\n      horizontal: horizontalPos,\n      offset = [0, 0],\n    }: PointerPosition = typeof selector === \"string\" || !selector.pointerPosition\n      ? { vertical: \"center\" }\n      : selector.pointerPosition;\n    const { height, width, x, y } = await getBounds(selector);\n    const verticalOffset = verticalPos === \"top\" ? 0 : verticalPos === \"bottom\" ? height : height / 2;\n    const horizontalOffset = horizontalPos === \"left\" ? 0 : horizontalPos === \"right\" ? width : width / 2;\n\n    const eventX = x + horizontalOffset + offset[0];\n    const eventY = y + verticalOffset + offset[1];\n\n    return {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      screenX: eventX,\n      screenY: eventY,\n      clientX: eventX,\n      clientY: eventY,\n    };\n  }\n\n  async function browserContextFunction(\n    dragStartSelector: DragAndDropSelector,\n    dragEndSelector: DragAndDropSelector,\n    dragStartInitializer: MouseInitEvent,\n    dragEndInitializer: MouseInitEvent,\n  ): Promise<void> {\n    function getElement(selector: DragAndDropSelector): Element {\n      if (typeof selector === \"string\") {\n        return document.querySelector(selector);\n      }\n\n      const element = document.querySelector(selector.element);\n\n      return selector.shadow ? element.shadowRoot.querySelector(selector.shadow) : element;\n    }\n\n    const dragStart = getElement(dragStartSelector);\n    let dragEnd = getElement(dragEndSelector);\n\n    // if has child, put at the end.\n    dragEnd = dragEnd.lastElementChild || dragEnd;\n\n    dragStart.dispatchEvent(new PointerEvent(\"pointerdown\", dragStartInitializer));\n    dragStart.dispatchEvent(new DragEvent(\"dragstart\", dragStartInitializer));\n\n    await new Promise((resolve) => window.setTimeout(resolve, 2000));\n\n    dragEnd.dispatchEvent(new MouseEvent(\"dragenter\", dragEndInitializer));\n    dragStart.dispatchEvent(new DragEvent(\"dragend\", dragEndInitializer));\n  }\n\n  return page.evaluate(\n    browserContextFunction,\n    dragStartSelector,\n    dragEndSelector,\n    await createEventInitializer(dragStartSelector),\n    await createEventInitializer(dragEndSelector),\n  );\n}\n\n/**\n *\n * @param {E2EElement} input - the element to select text from\n * @returns {Promise<void>}\n */\nexport function selectText(input: E2EElement): Promise<void> {\n  // workaround for selecting text based on https://github.com/puppeteer/puppeteer/issues/1313#issuecomment-436932478\n  return input.click({ clickCount: 3 });\n}\n\n/**\n * Helper to get an E2EElement's x,y coordinates.\n *\n * @param {E2EPage} page - the e2e page\n * @param {string} elementSelector - the element selector\n * @param {string} shadowSelector - the shadowRoot selector\n * @deprecated Use `getElementRect` instead.\n */\nexport async function getElementXY(\n  page: E2EPage,\n  elementSelector: string,\n  shadowSelector?: string,\n): Promise<[number, number]> {\n  return page.evaluate(\n    ([elementSelector, shadowSelector]): [number, number] => {\n      const element = document.querySelector(elementSelector);\n      const measureTarget = shadowSelector ? element.shadowRoot.querySelector(shadowSelector) : element;\n      const { x, y } = measureTarget.getBoundingClientRect();\n\n      return [x, y];\n    },\n    [elementSelector, shadowSelector],\n  );\n}\n\n/**\n * Helper to get an E2EElement's DOMRect object.\n *\n * @param {E2EPage} page - the e2e page\n * @param {string} elementSelector - the element selector\n * @param {string} shadowSelector - the shadowRoot selector\n * @returns {Promise<DOMRect>} Promise with DOMRect object.\n */\nexport async function getElementRect(\n  page: E2EPage,\n  elementSelector: string,\n  shadowSelector?: string,\n): Promise<DOMRect> {\n  return page.evaluate(\n    ([elementSelector, shadowSelector]): DOMRect => {\n      const element = document.querySelector(elementSelector);\n      const measureTarget = shadowSelector ? element.shadowRoot.querySelector(shadowSelector) : element;\n      return measureTarget.getBoundingClientRect().toJSON();\n    },\n    [elementSelector, shadowSelector],\n  );\n}\n\n/**\n * This util helps visualize mouse movement when running tests in headful mode.\n * Note that this util should only be used for test debugging purposes and not be included in a test.\n * Based on https://github.com/puppeteer/puppeteer/issues/4378#issuecomment-499726973\n *\n * @example\n * import { visualizeMouseCursor } from \"../../tests/utils\";\n *\n * const page = await newE2EPage();\n * await page.setContent(`<calcite-tooltip>Content</calcite-tooltip>`);\n *\n * await visualizeMouseCursor(page);\n * await page.waitForChanges();\n *\n * @param {E2EPage} page - the e2e page\n */\nexport async function visualizeMouseCursor(page: E2EPage): Promise<void> {\n  await page.evaluate(() => {\n    const box = document.createElement(\"puppeteer-mouse-pointer\");\n    const styleElement = document.createElement(\"style\");\n    styleElement.innerHTML = `\n        puppeteer-mouse-pointer {\n          pointer-events: none;\n          position: absolute;\n          top: 0;\n          z-index: 10000;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          background: rgba(0,0,0,.4);\n          border: 1px solid white;\n          border-radius: 10px;\n          margin: -10px 0 0 -10px;\n          padding: 0;\n          transition: background .2s, border-radius .2s, border-color .2s;\n        }\n        puppeteer-mouse-pointer.button-1 {\n          transition: none;\n          background: rgba(0,0,0,0.9);\n        }\n        puppeteer-mouse-pointer.button-2 {\n          transition: none;\n          border-color: rgba(0,0,255,0.9);\n        }\n        puppeteer-mouse-pointer.button-3 {\n          transition: none;\n          border-radius: 4px;\n        }\n        puppeteer-mouse-pointer.button-4 {\n          transition: none;\n          border-color: rgba(255,0,0,0.9);\n        }\n        puppeteer-mouse-pointer.button-5 {\n          transition: none;\n          border-color: rgba(0,255,0,0.9);\n        }\n      `;\n    document.head.appendChild(styleElement);\n    document.body.appendChild(box);\n\n    document.addEventListener(\n      \"mousemove\",\n      (event) => {\n        box.style.left = event.pageX + \"px\";\n        box.style.top = event.pageY + \"px\";\n        updateButtons(event.buttons);\n      },\n      true,\n    );\n\n    document.addEventListener(\n      \"mousedown\",\n      (event) => {\n        updateButtons(event.buttons);\n        box.classList.add(\"button-\" + event.which);\n      },\n      true,\n    );\n\n    document.addEventListener(\n      \"mouseup\",\n      (event) => {\n        updateButtons(event.buttons);\n        box.classList.remove(\"button-\" + event.which);\n      },\n      true,\n    );\n\n    function updateButtons(buttons: number): void {\n      for (let i = 0; i < 5; i++) {\n        box.classList.toggle(\"button-\" + i, (buttons & (1 << i)) as unknown as boolean);\n      }\n    }\n  });\n}\n\n/**\n * Tells the browser that you wish to perform an animation.\n * https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\n *\n * @returns {Promise<void>}\n */\nexport async function waitForAnimationFrame(): Promise<void> {\n  return new Promise<void>((resolve) => requestAnimationFrame(() => resolve()));\n}\n\n/**\n * Creates an E2E page for tests that need to create and set up elements programmatically.\n *\n * @returns {Promise<E2EPage>} an e2e page\n */\nexport async function newProgrammaticE2EPage(): Promise<E2EPage> {\n  const page = await newE2EPage();\n  // we need to initialize the page with any component to ensure they are available in the browser context\n  await page.setContent(\"<calcite-icon></calcite-icon>\");\n  await page.evaluate(() => document.querySelector(\"calcite-icon\").remove());\n\n  return page;\n}\n\n/**\n * Sets CSS vars to skip animations/transitions.\n *\n * @example\n * import { skipAnimations } from \"../../tests/utils\";\n *\n * const page = await newE2EPage();\n * await page.setContent(`<calcite-tooltip>Content</calcite-tooltip>`);\n *\n * await skipAnimations(page);\n * await page.waitForChanges();\n *\n * @param page\n */\nexport async function skipAnimations(page: E2EPage): Promise<void> {\n  await page.addStyleTag({\n    // using 0.01 to ensure `openCloseComponent` utils work consistently\n    // this should be removed once https://github.com/Esri/calcite-design-system/issues/6604 is addressed\n    content: `:root { --calcite-duration-factor: 0.01; }`,\n  });\n}\n\ninterface MatchesFocusedElementOptions {\n  /**\n   * Set this to true when the focused element is expected to reside in the shadow DOM\n   */\n  shadowed: boolean;\n}\n\n/**\n * This util helps determine if a selector matches the currently focused element.\n *\n * @param page – the E2E page\n * @param selector – selector of element to match\n * @param options - options to customize the utility behavior\n */\nexport async function isElementFocused(\n  page: E2EPage,\n  selector: string,\n  options?: MatchesFocusedElementOptions,\n): Promise<boolean> {\n  const shadowed = options?.shadowed;\n\n  return page.evaluate(\n    (selector: string, shadowed: boolean): boolean => {\n      const targetDoc = shadowed ? document.activeElement?.shadowRoot : document;\n\n      return !!targetDoc?.activeElement?.matches(selector);\n    },\n    selector,\n    shadowed,\n  );\n}\n\ntype GetFocusedElementProp = {\n  /**\n   * Set to true to use the shadow root's active element instead of the light DOM's.\n   */\n  shadow: boolean;\n};\n\n/**\n * This helps get serializable properties from the focused element.\n *\n * @param {E2EPage} page - the E2E test page\n * @param {string} prop - the property to get from the focused element (note: must be serializable)\n * @param {GetFocusedElementProp} options – additional configuration options\n */\nexport async function getFocusedElementProp(\n  page: E2EPage,\n  prop: keyof HTMLElement,\n  options?: GetFocusedElementProp,\n): Promise<ReturnType<E2EPage[\"evaluate\"]>> {\n  return await page.evaluate(\n    (by: string, shadow: boolean) => {\n      const { activeElement } = document;\n      const target = shadow ? activeElement?.shadowRoot?.activeElement : activeElement;\n\n      return target?.[by];\n    },\n    prop,\n    options?.shadow,\n  );\n}\n\n/**\n * Custom integer matcher to use with object matchers.\n *\n * @see https://jasmine.github.io/tutorials/custom_argument_matchers\n */\nexport function toBeInteger(): any {\n  return {\n    asymmetricMatch(abc: string): boolean {\n      return Number.isInteger(abc);\n    },\n\n    jasmineToString(): string {\n      return `Expected value to be an integer.`;\n    },\n  };\n}\n\n/**\n * Custom number matcher to use with object matchers.\n *\n * @see https://jasmine.github.io/tutorials/custom_argument_matchers\n */\nexport function toBeNumber(): any {\n  return {\n    asymmetricMatch(expected: string): boolean {\n      return !isNaN(parseFloat(expected)) && isFinite(Number(expected));\n    },\n\n    jasmineToString(): string {\n      return `Expected value to be an number.`;\n    },\n  };\n}\n"]}