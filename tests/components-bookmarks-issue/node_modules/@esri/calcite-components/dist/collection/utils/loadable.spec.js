/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.6.0
 */
import { waitForAnimationFrame } from "../tests/utils";
import { componentLoaded, setComponentLoaded, setUpLoadableComponent } from "./loadable";
describe("loadable", () => {
    it("should honor loadable component lifecycle", async () => {
        const fakeComponent = {};
        const afterLoad = jest.fn();
        componentLoaded(fakeComponent)?.then(afterLoad);
        await waitForAnimationFrame();
        expect(afterLoad).not.toHaveBeenCalled();
        setUpLoadableComponent(fakeComponent);
        await waitForAnimationFrame();
        expect(afterLoad).not.toHaveBeenCalled();
        setComponentLoaded(fakeComponent);
        await waitForAnimationFrame();
        expect(afterLoad).not.toHaveBeenCalled();
        componentLoaded(fakeComponent).then(afterLoad);
        await waitForAnimationFrame();
        expect(afterLoad).toHaveBeenCalledTimes(1);
    });
});
//# sourceMappingURL=loadable.spec.js.map
