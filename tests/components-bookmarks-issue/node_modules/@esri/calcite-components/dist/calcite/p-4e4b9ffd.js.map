{"version":3,"names":["hexChar","shorthandHex","longhandHex","shorthandHexWithAlpha","longhandHexWithAlpha","alphaToOpacity","alpha","Number","toFixed","opacityToAlpha","opacity","isValidHex","hex","hasAlpha","isShorthandHex","isLonghandHex","evaluateHex","length","pattern","test","hexLength","hexPattern","normalizeHex","convertFromHexToHexa","toLowerCase","startsWith","rgbToHex","hexToRGB","isShorthand","hexify","color","hexa","r","g","b","rChars","numToHex","gChars","bChars","alphaChars","a","num","toString","padStart","normalizeAlpha","colorObject","normalized","normalizeColor","alphaColorObject","replace","first","second","third","fourth","split","parseInt","slice","isNaN","enumify","x","CSSColorMode","HEX","HEXA","RGB_CSS","RGBA_CSS","HSL_CSS","HSLA_CSS","ObjectColorMode","RGB","RGBA","HSL","HSLA","HSV","HSVA","parseMode","colorValue","hasChannels","channels","every","channel","colorEqual","value1","value2","rgb","array","alphaCompatible","mode","toAlphaMode","alphaMode","toNonAlphaMode","nonAlphaMode"],"sources":["src/components/color-picker/utils.ts"],"sourcesContent":["import { ColorValue, HSLA, HSVA, RGB, RGBA } from \"./interfaces\";\nimport Color from \"color\";\n\nexport const hexChar = /^[0-9A-F]$/i;\nconst shorthandHex = /^#[0-9A-F]{3}$/i;\nconst longhandHex = /^#[0-9A-F]{6}$/i;\nconst shorthandHexWithAlpha = /^#[0-9A-F]{4}$/i;\nconst longhandHexWithAlpha = /^#[0-9A-F]{8}$/i;\n\nexport const alphaToOpacity = (alpha: number): number => Number((alpha * 100).toFixed());\n\nexport const opacityToAlpha = (opacity: number): number => Number((opacity / 100).toFixed(2));\n\nexport function isValidHex(hex: string, hasAlpha = false): boolean {\n  return isShorthandHex(hex, hasAlpha) || isLonghandHex(hex, hasAlpha);\n}\n\nexport function canConvertToHexa(hex: string): boolean {\n  const validHex = isValidHex(hex, false);\n  const validHexa = isValidHex(hex, true);\n  return !validHexa && validHex;\n}\n\nfunction evaluateHex(hex: string, length: number, pattern: RegExp): boolean {\n  if (!hex) {\n    return false;\n  }\n\n  return hex.length === length && pattern.test(hex);\n}\n\nexport function isShorthandHex(hex: string, hasAlpha = false): boolean {\n  const hexLength = hasAlpha ? 5 : 4;\n  const hexPattern = hasAlpha ? shorthandHexWithAlpha : shorthandHex;\n\n  return evaluateHex(hex, hexLength, hexPattern);\n}\n\nexport function isLonghandHex(hex: string, hasAlpha = false): boolean {\n  const hexLength = hasAlpha ? 9 : 7;\n  const hexPattern = hasAlpha ? longhandHexWithAlpha : longhandHex;\n\n  return evaluateHex(hex, hexLength, hexPattern);\n}\n\nexport function normalizeHex(hex: string, hasAlpha = false, convertFromHexToHexa = false): string {\n  hex = hex.toLowerCase();\n\n  if (!hex.startsWith(\"#\")) {\n    hex = `#${hex}`;\n  }\n\n  if (isShorthandHex(hex, hasAlpha)) {\n    return rgbToHex(hexToRGB(hex, hasAlpha));\n  }\n\n  if (hasAlpha && convertFromHexToHexa && isValidHex(hex, false /* we only care about RGB hex for conversion */)) {\n    const isShorthand = isShorthandHex(hex, false);\n    return rgbToHex(hexToRGB(`${hex}${isShorthand ? \"f\" : \"ff\"}`, true));\n  }\n\n  return hex;\n}\n\nexport function hexify(color: Color, hasAlpha = false): string {\n  return hasAlpha ? color.hexa() : color.hex();\n}\n\nexport function rgbToHex(color: RGB | RGBA): string {\n  const { r, g, b } = color;\n\n  const rChars = numToHex(r);\n  const gChars = numToHex(g);\n  const bChars = numToHex(b);\n  const alphaChars = \"a\" in color ? numToHex(color.a * 255) : \"\";\n\n  return `#${rChars}${gChars}${bChars}${alphaChars}`.toLowerCase();\n}\n\nfunction numToHex(num: number): string {\n  return num.toString(16).padStart(2, \"0\");\n}\n\nexport function normalizeAlpha<T extends RGBA | HSVA | HSLA>(colorObject: ReturnType<Color[\"object\"]>): T {\n  const normalized = { ...colorObject, a: colorObject.alpha ?? 1 /* Color() will omit alpha if 1 */ };\n  delete normalized.alpha;\n\n  return normalized as T;\n}\n\nexport function normalizeColor(alphaColorObject: RGBA | HSVA | HSLA): ReturnType<Color[\"object\"]> {\n  const normalized = { ...alphaColorObject, alpha: alphaColorObject.a ?? 1 };\n  delete normalized.a;\n\n  return normalized;\n}\n\nexport function hexToRGB(hex: string, hasAlpha = false): RGB | RGBA {\n  if (!isValidHex(hex, hasAlpha)) {\n    return null;\n  }\n\n  hex = hex.replace(\"#\", \"\");\n\n  let r: number;\n  let g: number;\n  let b: number;\n  let a: number;\n  const isShorthand = hex.length === 3 || hex.length === 4;\n\n  if (isShorthand) {\n    const [first, second, third, fourth] = hex.split(\"\");\n\n    r = parseInt(`${first}${first}`, 16);\n    g = parseInt(`${second}${second}`, 16);\n    b = parseInt(`${third}${third}`, 16);\n    a = parseInt(`${fourth}${fourth}`, 16) / 255;\n  } else {\n    r = parseInt(hex.slice(0, 2), 16);\n    g = parseInt(hex.slice(2, 4), 16);\n    b = parseInt(hex.slice(4, 6), 16);\n    a = parseInt(hex.slice(6, 8), 16) / 255;\n  }\n\n  return isNaN(a) ? { r, g, b } : { r, g, b, a };\n}\n\n// these utils allow users to pass enum values as strings without having to access the enum\n// based on the approach suggested by https://github.com/microsoft/TypeScript/issues/17690#issuecomment-321365759,\nconst enumify = <T extends { [index: string]: U }, U extends string>(x: T) => x;\ntype Enumify<T> = T[keyof T];\n\nexport const CSSColorMode = enumify({\n  HEX: \"hex\",\n  HEXA: \"hexa\",\n  RGB_CSS: \"rgb-css\",\n  RGBA_CSS: \"rgba-css\",\n  HSL_CSS: \"hsl-css\",\n  HSLA_CSS: \"hsla-css\",\n});\ntype CSSColorMode = Enumify<typeof CSSColorMode>;\n\nexport const ObjectColorMode = enumify({\n  RGB: \"rgb\",\n  RGBA: \"rgba\",\n  HSL: \"hsl\",\n  HSLA: \"hsla\",\n  HSV: \"hsv\",\n  HSVA: \"hsva\",\n});\ntype ObjectColorMode = Enumify<typeof ObjectColorMode>;\n\nexport type SupportedMode = CSSColorMode | ObjectColorMode;\n\nexport type Format = \"auto\" | SupportedMode;\n\nexport function parseMode(colorValue: ColorValue): SupportedMode | null {\n  if (typeof colorValue === \"string\") {\n    if (colorValue.startsWith(\"#\")) {\n      const { length } = colorValue;\n\n      if (length === 4 || length === 7) {\n        return CSSColorMode.HEX;\n      }\n      if (length === 5 || length === 9) {\n        return CSSColorMode.HEXA;\n      }\n    }\n\n    if (colorValue.startsWith(\"rgba(\")) {\n      return CSSColorMode.RGBA_CSS;\n    }\n\n    if (colorValue.startsWith(\"rgb(\")) {\n      return CSSColorMode.RGB_CSS;\n    }\n\n    if (colorValue.startsWith(\"hsl(\")) {\n      return CSSColorMode.HSL_CSS;\n    }\n\n    if (colorValue.startsWith(\"hsla(\")) {\n      return CSSColorMode.HSLA_CSS;\n    }\n  }\n\n  if (typeof colorValue === \"object\") {\n    if (hasChannels(colorValue, \"r\", \"g\", \"b\")) {\n      return hasChannels(colorValue, \"a\") ? ObjectColorMode.RGBA : ObjectColorMode.RGB;\n    }\n\n    if (hasChannels(colorValue, \"h\", \"s\", \"l\")) {\n      return hasChannels(colorValue, \"a\") ? ObjectColorMode.HSLA : ObjectColorMode.HSL;\n    }\n\n    if (hasChannels(colorValue, \"h\", \"s\", \"v\")) {\n      return hasChannels(colorValue, \"a\") ? ObjectColorMode.HSVA : ObjectColorMode.HSV;\n    }\n  }\n\n  return null;\n}\n\nfunction hasChannels(colorObject: Exclude<ColorValue, string> | null, ...channels: string[]): boolean {\n  return channels.every((channel) => channel && colorObject && `${channel}` in colorObject);\n}\n\nexport function colorEqual(value1: Color | null, value2: Color | null): boolean {\n  return value1?.rgb().array().toString() === value2?.rgb().array().toString();\n}\n\nexport function alphaCompatible(mode: SupportedMode): boolean {\n  return (\n    mode === CSSColorMode.HEXA ||\n    mode === CSSColorMode.RGBA_CSS ||\n    mode === CSSColorMode.HSLA_CSS ||\n    mode === ObjectColorMode.RGBA ||\n    mode === ObjectColorMode.HSLA ||\n    mode === ObjectColorMode.HSVA\n  );\n}\n\nexport function toAlphaMode(mode: SupportedMode): SupportedMode {\n  const alphaMode =\n    mode === CSSColorMode.HEX\n      ? CSSColorMode.HEXA\n      : mode === CSSColorMode.RGB_CSS\n        ? CSSColorMode.RGBA_CSS\n        : mode === CSSColorMode.HSL_CSS\n          ? CSSColorMode.HSLA_CSS\n          : mode === ObjectColorMode.RGB\n            ? ObjectColorMode.RGBA\n            : mode === ObjectColorMode.HSL\n              ? ObjectColorMode.HSLA\n              : mode === ObjectColorMode.HSV\n                ? ObjectColorMode.HSVA\n                : mode;\n\n  return alphaMode;\n}\n\nexport function toNonAlphaMode(mode: SupportedMode): SupportedMode {\n  const nonAlphaMode =\n    mode === CSSColorMode.HEXA\n      ? CSSColorMode.HEX\n      : mode === CSSColorMode.RGBA_CSS\n        ? CSSColorMode.RGB_CSS\n        : mode === CSSColorMode.HSLA_CSS\n          ? CSSColorMode.HSL_CSS\n          : mode === ObjectColorMode.RGBA\n            ? ObjectColorMode.RGB\n            : mode === ObjectColorMode.HSLA\n              ? ObjectColorMode.HSL\n              : mode === ObjectColorMode.HSVA\n                ? ObjectColorMode.HSV\n                : mode;\n\n  return nonAlphaMode;\n}\n"],"mappings":"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"}