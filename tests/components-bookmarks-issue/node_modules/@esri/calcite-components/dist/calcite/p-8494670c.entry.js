/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.6.0
 */
import{r as t,c as e,h as i,H as s,g as a}from"./p-3999bac9.js";import{s as n,a as l}from"./p-73313776.js";import{u as c,s as o,c as r,d as h}from"./p-064166f7.js";import{n as d,c as f,d as p}from"./p-fdfa8afe.js";import{g as b}from"./p-0f59280e.js";import"./p-e76a753c.js";import"./p-8ddf02b9.js";import"./p-b3019266.js";import"./p-3bf8f072.js";import"./p-c7f2f9a6.js";const u={bordered:"bordered",striped:"striped",selectionArea:"selection-area",paginationArea:"pagination-area",container:"container",tableContainer:"table-container",tableFixed:"table--fixed",assistiveText:"assistive-text",selectionActions:"selection-actions"};const g={selectionActions:"selection-actions",tableHeader:"table-header",tableFooter:"table-footer"};const m=":host([scale=s]){--calcite-internal-table-cell-padding:0.25rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--2);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--3)}:host([scale=m]){--calcite-internal-table-cell-padding:0.5rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--1);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--2)}:host([scale=l]){--calcite-internal-table-cell-padding:1rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size-0);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--1)}:host{display:flex}.container{display:flex;block-size:100%;inline-size:100%;flex-direction:column}.table-container{overflow:auto;white-space:nowrap;border:1px solid var(--calcite-color-border-3)}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}table{inline-size:100%;border-collapse:collapse;overflow-x:scroll}.table--fixed{table-layout:fixed}.bordered ::slotted(calcite-table-row){--calcite-table-row-border-color:var(--calcite-color-border-3)}.striped ::slotted(calcite-table-row:nth-child(2n+1)){--calcite-table-row-background:var(--calcite-color-foreground-2)}.selection-actions{display:flex;flex-direction:row;margin-inline-start:auto}.selection-area{display:flex;flex-direction:row;align-items:center;padding-block:var(--calcite-internal-table-cell-padding)}.selection-area calcite-chip:last-of-type{margin-inline-end:0.5rem}.selection-area calcite-chip:last-of-type:not(:first-of-type){margin-inline-start:0.5rem}.selection-area calcite-button{margin-inline-end:1rem}.pagination-area{display:flex;inline-size:100%;flex-direction:row;justify-content:center;padding-block:var(--calcite-internal-table-cell-padding)}calcite-pagination{flex:1;justify-content:center}:host([hidden]){display:none}[hidden]{display:none}";const v=class{constructor(i){t(this,i);this.calciteTableSelect=e(this,"calciteTableSelect",6);this.calciteTablePageChange=e(this,"calciteTablePageChange",6);this.calciteInternalTableRowFocusChange=e(this,"calciteInternalTableRowFocusChange",6);this.getSlottedRows=t=>t?.assignedElements({flatten:true})?.filter((t=>t?.matches("calcite-table-row")));this.updateRows=()=>{const t=this.getSlottedRows(this.tableHeadSlotEl)||[];const e=this.getSlottedRows(this.tableBodySlotEl)||[];const i=this.getSlottedRows(this.tableFootSlotEl)||[];const s=[...t,...e,...i];t?.forEach((e=>{const i=t?.indexOf(e);e.rowType="head";e.positionSection=i;e.positionSectionLocalized=this.localizeNumber((i+1).toString())}));e?.forEach((t=>{const i=e?.indexOf(t);t.rowType="body";t.positionSection=i;t.positionSectionLocalized=this.localizeNumber((i+1).toString())}));i?.forEach((t=>{const e=i?.indexOf(t);t.rowType="foot";t.positionSection=e;t.positionSectionLocalized=this.localizeNumber((e+1).toString())}));s?.forEach((t=>{t.interactionMode=this.interactionMode;t.selectionMode=this.selectionMode;t.bodyRowCount=e?.length;t.positionAll=s?.indexOf(t);t.numbered=this.numbered;t.scale=this.scale;t.readCellContentsToAT=this.readCellContentsToAT;t.lastVisibleRow=s?.indexOf(t)===s.length-1}));const a=t[0]?.cellCount||t[0]?.querySelectorAll("calcite-table-header")?.length;this.colCount=a;this.headRows=t;this.bodyRows=e;this.footRows=i;this.allRows=s;this.updateSelectedItems();this.paginateRows()};this.handlePaginationChange=()=>{const t=this.paginationEl?.startItem;this.pageStartRow=t||1;this.calciteTablePageChange.emit();this.updateRows()};this.paginateRows=()=>{this.bodyRows?.forEach((t=>{const e=t.positionSection+1;const i=e>=this.pageStartRow&&e<this.pageStartRow+this.pageSize;t.hidden=this.pageSize>0&&!i&&!this.footRows.includes(t);t.lastVisibleRow=e===this.pageStartRow+this.pageSize-1||e===this.bodyRows.length}))};this.updateSelectedItems=t=>{const e=this.bodyRows?.filter((t=>t.selected));this.selectedItems=e;this.selectedCount=e?.length;this.allRows?.forEach((t=>{t.selectedRowCount=this.selectedCount;t.selectedRowCountLocalized=this.localizeNumber(this.selectedCount)}));if(t){this.calciteTableSelect.emit()}};this.handleDeselectAllRows=()=>{this.bodyRows?.forEach((t=>{t.selected=false}));this.updateSelectedItems(true)};this.setSelectedItems=t=>{this.bodyRows?.forEach((e=>{if(t?.rowType==="head"){e.selected=this.selectedCount!==this.bodyRows?.length}else{e.selected=t===e?!e.selected:this.selectionMode==="multiple"?e.selected:false}}));this.updateSelectedItems(true)};this.localizeNumber=t=>{d.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};return d.localize(t.toString())};this.bordered=false;this.caption=undefined;this.groupSeparator=false;this.interactionMode="interactive";this.layout="auto";this.numbered=false;this.numberingSystem=undefined;this.pageSize=0;this.scale="m";this.selectionMode="none";this.zebra=false;this.striped=false;this.selectedItems=[];this.messages=undefined;this.messageOverrides=undefined;this.colCount=0;this.pageStartRow=1;this.selectedCount=0;this.readCellContentsToAT=undefined;this.defaultMessages=undefined;this.effectiveLocale=""}handleNumberedChange(){this.updateRows()}onMessagesChange(){}effectiveLocaleChange(){c(this,this.effectiveLocale)}async componentWillLoad(){n(this);await o(this);this.readCellContentsToAT=/safari/i.test(b());this.updateRows()}componentDidLoad(){l(this)}connectedCallback(){f(this);r(this)}disconnectedCallback(){p(this);h(this)}calciteChipSelectListener(t){if(t.composedPath().includes(this.el)){this.setSelectedItems(t.target)}}calciteInternalTableRowFocusEvent(t){const e=t["detail"].cellPosition;const i=t["detail"].rowPosition;const s=t["detail"].destination;const a=t["detail"].lastCell;const n=this.bodyRows?.filter((t=>!t.hidden));const l=this.allRows?.filter((t=>!t.hidden));const c=this.headRows[this.headRows.length-1]?.positionAll;const o=n[0]?.positionAll;const r=n[n.length-1]?.positionAll;const h=this.footRows[0]?.positionAll;const d=l[l.length-1]?.positionAll;const f=s==="next"&&i===c;const p=s==="previous"&&i===h;const b=s==="previous"&&i===o;const u=s==="next"&&i===r;let g;switch(s){case"first":g=0;break;case"last":g=d;break;case"next":g=f?o:u?h:i+1;break;case"previous":g=p?r:b?c:i-1;break}const m=this.allRows?.find((t=>t.positionAll===g))?.cellCount;const v=e>m?m:e;if(g!==undefined){this.calciteInternalTableRowFocusChange.emit({cellPosition:v,rowPosition:g,destination:s,lastCell:a})}}renderSelectionArea(){const t=this.selectedItems?.filter((t=>t.hidden))?.length;const e=this.localizeNumber(t?.toString());const s=this.localizeNumber(this.selectedCount?.toString());const a=`${s} ${this.messages.selected}`;const n=`${e} ${this.messages.hiddenSelected}`;return i("div",{class:u.selectionArea},i("calcite-chip",{kind:this.selectedCount>0?"brand":"neutral",scale:this.scale,value:a},a),t>0&&i("calcite-chip",{icon:"hide-empty",scale:this.scale,title:n,value:n},e),this.selectedCount>0&&i("calcite-button",{"icon-start":"x",kind:"neutral",onClick:this.handleDeselectAllRows,round:true,scale:this.scale,title:`${this.messages.clear} ${a} ${this.messages.row}`},this.messages.clear),i("div",{class:u.selectionActions},i("slot",{name:g.selectionActions})))}renderPaginationArea(){return i("div",{class:u.paginationArea},i("calcite-pagination",{groupSeparator:this.groupSeparator,numberingSystem:this.numberingSystem,onCalcitePaginationChange:this.handlePaginationChange,pageSize:this.pageSize,scale:this.scale,startItem:1,totalItems:this.bodyRows?.length,ref:t=>this.paginationEl=t}))}renderTHead(){return i("thead",null,i("slot",{name:g.tableHeader,onSlotchange:this.updateRows,ref:t=>this.tableHeadSlotEl=t}))}renderTBody(){return i("tbody",null,i("slot",{onSlotchange:this.updateRows,ref:t=>this.tableBodySlotEl=t}))}renderTFoot(){return i("tfoot",null,i("slot",{name:g.tableFooter,onSlotchange:this.updateRows,ref:t=>this.tableFootSlotEl=t}))}render(){return i(s,null,i("div",{class:u.container},this.selectionMode!=="none"&&this.renderSelectionArea(),i("div",{class:{[u.bordered]:this.bordered,[u.striped]:this.striped||this.zebra,[u.tableContainer]:true}},i("table",{"aria-colcount":this.colCount,"aria-multiselectable":this.selectionMode==="multiple","aria-rowcount":this.allRows?.length,class:{[u.tableFixed]:this.layout==="fixed"},role:this.interactionMode==="interactive"?"grid":"table"},i("caption",{class:u.assistiveText},this.caption),this.renderTHead(),this.renderTBody(),this.renderTFoot())),this.pageSize>0&&this.renderPaginationArea()))}static get assetsDirs(){return["assets"]}get el(){return a(this)}static get watchers(){return{groupSeparator:["handleNumberedChange"],interactionMode:["handleNumberedChange"],numbered:["handleNumberedChange"],numberingSystem:["handleNumberedChange"],pageSize:["handleNumberedChange"],scale:["handleNumberedChange"],selectionMode:["handleNumberedChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}};v.style=m;export{v as calcite_table};
//# sourceMappingURL=p-8494670c.entry.js.map