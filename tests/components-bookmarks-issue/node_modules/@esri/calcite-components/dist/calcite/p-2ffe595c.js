/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.6.0
 */
import{g as t}from"./p-fee69745.js";import{d as s,e as i,t as e}from"./p-e76a753c.js";import{d as n}from"./p-af35f0c0.js";import{h as o,H as a}from"./p-3999bac9.js";import{I as c}from"./p-2f8ad978.js";const r={heading:"heading",container:"container",indented:"container--indented"};const l={parentItem:"parent-item"};function f(){this.setUpItems();this.setUpFilter();this.deselectRemovedItems()}const h=["ArrowUp","ArrowDown"];function u(){this.setUpItems();this.setUpFilter();this.emitCalciteListChange=n(y.bind(this),0);this.emitCalciteListFilter=n(k.bind(this),0)}function d(){this.mutationObserver?.observe(this.el,{childList:true,subtree:true})}function m(){this.mutationObserver?.disconnect()}function p(t){const{selectedValues:i}=this;const{item:e,value:n,selected:o,shiftPressed:a}=t.detail;if(o){if(this.multiple&&a){this.selectSiblings(e)}if(!this.multiple){this.deselectSiblingItems(e)}i.set(n,e)}else{i.delete(n);if(this.multiple&&a){this.selectSiblings(e,true)}}if(!this.multiple){C(e,o);if(o){s(e)}}this.lastSelectedItem=e;this.emitCalciteListChange()}function g(t){const s=t.detail.oldValue;const i=this.selectedValues;if(i.has(s)){const e=i.get(s);i.delete(s);i.set(t.detail.newValue,e)}t.stopPropagation()}function v(t){return!!h.find((s=>s===t))}function b(t){const{el:s,items:i,multiple:e,selectedValues:n}=this;if(e){return}const o=s.contains(t.relatedTarget);if(o){return}F(i).forEach((s=>{C(s,n.size===0?s.contains(t.target)||t.target===s:s.selected)}))}function w(t){const{key:i,target:e}=t;if(!v(i)){return}const{items:n,multiple:o,selectionFollowsFocus:a}=this;const{length:c}=n;const r=n.indexOf(e);if(!c||r===-1){return}t.preventDefault();const l=A(this,e,i==="ArrowUp"?"up":"down");const f=n[l];n.forEach((t=>C(t,t===f)));if(!o&&a){f.selected=true}s(f)}function A(s,i,e){const{items:n}=s;const{length:o}=n;const a=n.indexOf(i);const c=e==="up"?-1:1;let r=1;let l=t(a+c*r++,o);const f=l;while(n[l].disabled){l=t(a+c*r++,o);if(l===f){break}}return l}function x(t,s){const{items:i}=t;return i.indexOf(s)}function F(t){return t.filter((t=>!t.disabled))}function k(){this.calciteListFilter.emit()}function y(){this.calciteListChange.emit(this.selectedValues)}function E(t){if(t.defaultPrevented){return}const s=t.target;const i=this.selectedValues;if(s.parentElement.tagName==="CALCITE-PICK-LIST-GROUP"&&s.slot===l.parentItem){s.parentElement.remove();Array.from(s.parentElement.children).forEach((t=>i.delete(t.value)))}else{s.remove();i.delete(s.value)}this.emitCalciteListChange()}function C(t,s){if(t.disabled){return}if(s){t.removeAttribute("tabindex")}else{t.setAttribute("tabindex","-1")}}async function I(t){if(this.filterEnabled&&t==="filter"){await s(this.filterEl);return}const{items:i,multiple:e,selectionFollowsFocus:n}=this;if(i.length===0){return}if(e){return F(i)[0]?.setFocus()}const o=F(i);const a=o.find((t=>t.selected))||o[0];if(n&&a){a.selected=true}return a.setFocus()}function j(t){this.items=Array.from(this.el.querySelectorAll(t));let s=false;const{items:i}=this;i.forEach((t=>{t.icon=this.getIconType();if(!this.multiple){t.deselectDisabled=true;C(t,false)}if(t.selected){s=true;C(t,true);this.selectedValues.set(t.value,t)}}));const[e]=i;if(!s&&e&&!e.disabled){C(e,true)}}function S(){const t=this.selectedValues;const s=this.items.map((({value:t})=>t));t.forEach((t=>{if(!s.includes(t.value)){this.selectedValues.delete(t.value)}}))}function L(t){this.items.forEach((s=>{if(s.value!==t.value){s.toggleSelected(false);if(this.selectedValues.has(s.value)){this.selectedValues.delete(s.value)}}}))}function P(t,s=false){if(!this.lastSelectedItem){return}const{items:i}=this;const e=i.findIndex((t=>t.value===this.lastSelectedItem.value));const n=i.findIndex((s=>s.value===t.value));i.slice(Math.min(e,n),Math.max(e,n)).forEach((t=>{t.toggleSelected(!s);if(!s){this.selectedValues.set(t.value,t)}else{this.selectedValues.delete(t.value)}}))}let T;function D(t=false){const{filteredData:s,filterText:e}=this;const n=s.map((t=>t.value));let o=false;if(!T){T=new Set}const a=this.items?.filter((t=>{const s=t.parentElement;const i=s.matches("calcite-pick-list-group");if(i){T.add(s)}const a=e?n.includes(t.value):true;t.hidden=!a;if(!o){o=a&&t.selected}return a}))||[];T.forEach((t=>{const s=a.some((s=>t.contains(s)));t.hidden=!s;if(!s){return}const e=i(t,"parent-item");if(e){e.hidden=false;if(a.includes(e)){Array.from(t.children).forEach((t=>t.hidden=false))}}}));T.clear();if(a.length>0&&!o&&!this.multiple){C(a[0],true)}this.setFilteredItems(a);if(t){this.emitCalciteListFilter()}}function U(){const t=this.filterEl?.filteredItems;if(t){this.filteredData=t}this.handleFilter()}function q(t){t.stopPropagation();const{filteredItems:s,value:i}=t.currentTarget;this.filterText=i;this.filteredData=s;this.handleFilter(true)}function M(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}const V={sticky:"sticky-pos"};var G;(function(t){t["circle"]="circle";t["square"]="square";t["grip"]="grip"})(G||(G={}));const H={menuActions:"menu-actions"};const K=({props:{disabled:t,loading:s,filterEnabled:i,dataForFilter:n,handleFilterEvent:r,filterPlaceholder:l,filterText:f,setFilterEl:h,dragEnabled:u,storeAssistiveEl:d},...m})=>{const p=o("slot",null);return o(a,{"aria-busy":e(s),role:"menu",...m},o(c,{disabled:t},o("section",null,u?o("span",{"aria-live":"assertive",class:"assistive-text",ref:d}):null,o("header",{class:{[V.sticky]:true}},i?o("calcite-filter",{"aria-label":l,disabled:t,items:n,onCalciteFilterChange:r,placeholder:l,value:f,ref:h}):null,o("slot",{name:H.menuActions})),s?o("calcite-scrim",{loading:s}):null,p)))};const O={actions:"actions",actionsEnd:"actions--end",actionsStart:"actions--start",description:"description",handle:"handle",handleActivated:"handle--activated",highlight:"highlight",icon:"icon",iconDot:"icon-dot",label:"label",remove:"remove",title:"title",textContainer:"text-container"};const R={checked:"check",remove:"x"};const z={actionsEnd:"actions-end",actionsStart:"actions-start"};export{O as C,G as I,K as L,z as S,L as a,q as b,M as c,S as d,A as e,d as f,x as g,D as h,u as i,U as j,w as k,m as l,f as m,b as n,p as o,g as p,j as q,E as r,P as s,I as t,l as u,r as v,R as w};
//# sourceMappingURL=p-2ffe595c.js.map