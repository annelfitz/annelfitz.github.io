{"file":"tab-nav.js","mappings":"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","names":[],"sources":["src/components/tab-nav/resources.ts","src/components/tab-nav/tab-nav.scss?tag=calcite-tab-nav&encapsulation=shadow","src/components/tab-nav/tab-nav.tsx"],"sourcesContent":["export const CSS = {\n  container: \"tab-nav\",\n};\n",":host {\n  @apply relative flex;\n}\n\n.scale-s {\n  min-block-size: theme(\"spacing.6\");\n}\n\n.scale-m {\n  min-block-size: theme(\"spacing.8\");\n}\n\n.scale-l {\n  min-block-size: theme(\"spacing.11\");\n}\n\n:host([layout=\"center\"]:not([bordered])) {\n  // `tab-nav` in all scales in layout=\"center\" has a padding of 20px on both ends\n  padding-inline: theme(\"margin.5\");\n\n  //override margin-inline-end for the last child for tab-nav to implement the 20px padding on both ends instead\n  .tab-nav {\n    ::slotted(calcite-tab-title:last-child) {\n      margin-inline-end: theme(\"margin.0\");\n    }\n  }\n}\n\n:host(:not([bordered])) {\n  .scale-l {\n    ::slotted(calcite-tab-title) {\n      margin-inline-end: theme(\"margin.6\");\n    }\n  }\n  .scale-m {\n    ::slotted(calcite-tab-title) {\n      margin-inline-end: theme(\"margin.5\");\n    }\n  }\n  .scale-s {\n    ::slotted(calcite-tab-title) {\n      margin-inline-end: theme(\"margin.4\");\n    }\n  }\n}\n\n.tab-nav {\n  @apply flex\n    w-full\n    justify-start\n    overflow-auto;\n}\n\n// prevent indicator overflow in horizontal scrolling situations\n.tab-nav-active-indicator-container {\n  @apply absolute\n    inset-x-0\n    bottom-0\n    h-0.5\n    w-full\n    overflow-hidden;\n}\n\n.tab-nav-active-indicator {\n  @apply bg-brand\n    absolute\n    bottom-0\n    block\n    h-0.5\n    transition-all\n    ease-out;\n}\n\n:host([layout=\"center\"]) .tab-nav {\n  @apply justify-evenly;\n}\n\n:host .position-bottom .tab-nav-active-indicator {\n  inset-block-end: unset;\n  @apply top-0;\n}\n\n:host .position-bottom .tab-nav-active-indicator-container {\n  inset-block-end: unset;\n  @apply top-0;\n}\n\n:host([bordered]) .tab-nav-active-indicator-container {\n  inset-block-end: unset; // display active blue line above instead of below\n}\n\n:host([bordered]) .position-bottom .tab-nav-active-indicator-container {\n  inset-block-end: 0; // display active blue line below instead of above\n  inset-block-start: unset;\n}\n\n@media (forced-colors: active) {\n  .tab-nav-active-indicator {\n    background-color: highlight;\n  }\n}\n\n@include base-component();\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Prop,\n  State,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport {\n  filterDirectChildren,\n  focusElementInGroup,\n  FocusElementInGroupDestination,\n  getElementDir,\n} from \"../../utils/dom\";\nimport { createObserver } from \"../../utils/observers\";\nimport { Scale } from \"../interfaces\";\nimport { TabChangeEventDetail, TabCloseEventDetail } from \"../tab/interfaces\";\nimport { TabID, TabLayout, TabPosition } from \"../tabs/interfaces\";\nimport { CSS } from \"./resources\";\n\n/**\n * @slot - A slot for adding `calcite-tab-title`s.\n */\n@Component({\n  tag: \"calcite-tab-nav\",\n  styleUrl: \"tab-nav.scss\",\n  shadow: true,\n})\nexport class TabNav {\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Specifies the name when saving selected `calcite-tab` data to `localStorage`.\n   */\n  @Prop({ reflect: true }) storageId: string;\n\n  /**\n   * Specifies text to update multiple components to keep in sync if one changes.\n   */\n  @Prop({ reflect: true }) syncId: string;\n\n  /**\n   * Specifies the component's selected `calcite-tab-title`.\n   *\n   * @readonly\n   */\n  @Prop({ mutable: true }) selectedTitle: HTMLCalciteTabTitleElement = null;\n\n  /**\n   * Specifies the size of the component inherited from the parent `calcite-tabs`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  /**\n   * @internal\n   */\n  @Prop({ reflect: true, mutable: true }) layout: TabLayout = \"inline\";\n\n  /**\n   * Specifies the position of `calcite-tab-nav` and `calcite-tab-title` components in relation to, and is inherited from the parent `calcite-tabs`, defaults to `top`.\n   *\n   *  @internal\n   */\n  @Prop() position: TabPosition = \"bottom\";\n\n  /**\n   * @internal\n   */\n  @Prop({ reflect: true, mutable: true }) bordered = false;\n\n  /**\n   * @internal\n   */\n  @Prop({ mutable: true }) indicatorOffset: number;\n\n  /**\n   * @internal\n   */\n  @Prop({ mutable: true }) indicatorWidth: number;\n\n  @Watch(\"selectedTabId\")\n  async selectedTabIdChanged(): Promise<void> {\n    if (\n      localStorage &&\n      this.storageId &&\n      this.selectedTabId !== undefined &&\n      this.selectedTabId !== null\n    ) {\n      localStorage.setItem(`calcite-tab-nav-${this.storageId}`, JSON.stringify(this.selectedTabId));\n    }\n\n    this.calciteInternalTabChange.emit({\n      tab: this.selectedTabId,\n    });\n\n    this.selectedTitle = await this.getTabTitleById(this.selectedTabId);\n  }\n\n  @Watch(\"selectedTitle\")\n  selectedTitleChanged(): void {\n    this.updateOffsetPosition();\n    this.updateActiveWidth();\n    // reset the animation time on tab selection\n    this.activeIndicatorEl.style.transitionDuration = `${this.animationActiveDuration}s`;\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.parentTabsEl = this.el.closest(\"calcite-tabs\");\n    this.resizeObserver?.observe(this.el);\n  }\n\n  componentWillLoad(): void {\n    const storageKey = `calcite-tab-nav-${this.storageId}`;\n    if (localStorage && this.storageId && localStorage.getItem(storageKey)) {\n      const storedTab = JSON.parse(localStorage.getItem(storageKey));\n      this.selectedTabId = storedTab;\n    }\n  }\n\n  componentWillRender(): void {\n    const { parentTabsEl } = this;\n\n    this.layout = parentTabsEl?.layout;\n    this.bordered = parentTabsEl?.bordered;\n    // fix issue with active tab-title not lining up with blue indicator\n    if (this.selectedTitle) {\n      this.updateOffsetPosition();\n    }\n  }\n\n  componentDidRender(): void {\n    // if every tab title is active select the first tab.\n    if (\n      this.tabTitles.length &&\n      this.tabTitles.every((title) => !title.selected) &&\n      !this.selectedTabId\n    ) {\n      this.tabTitles[0].getTabIdentifier().then((tab) => {\n        this.calciteInternalTabChange.emit({\n          tab,\n        });\n      });\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.resizeObserver?.disconnect();\n  }\n\n  render(): VNode {\n    const dir = getElementDir(this.el);\n    const width = `${this.indicatorWidth}px`;\n    const offset = `${this.indicatorOffset}px`;\n    const indicatorStyle = dir !== \"rtl\" ? { width, left: offset } : { width, right: offset };\n    return (\n      <Host role=\"tablist\">\n        <div\n          class={{\n            [CSS.container]: true,\n            [`scale-${this.scale}`]: true,\n            [`position-${this.position}`]: true,\n          }}\n          onScroll={this.handleContainerScroll}\n          // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n          ref={(el: HTMLDivElement) => (this.tabNavEl = el)}\n        >\n          <slot />\n          <div\n            class=\"tab-nav-active-indicator-container\"\n            // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n            ref={(el) => (this.activeIndicatorContainerEl = el)}\n          >\n            <div\n              class=\"tab-nav-active-indicator\"\n              style={indicatorStyle}\n              // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n              ref={(el) => (this.activeIndicatorEl = el as HTMLElement)}\n            />\n          </div>\n        </div>\n      </Host>\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"calciteInternalTabsFocusPrevious\")\n  focusPreviousTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"previous\");\n  }\n\n  @Listen(\"calciteInternalTabsFocusNext\")\n  focusNextTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"next\");\n  }\n\n  @Listen(\"calciteInternalTabsFocusFirst\")\n  focusFirstTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"first\");\n  }\n\n  @Listen(\"calciteInternalTabsFocusLast\")\n  focusLastTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"last\");\n  }\n\n  @Listen(\"calciteInternalTabsActivate\")\n  internalActivateTabHandler(event: CustomEvent<TabChangeEventDetail>): void {\n    this.selectedTabId = event.detail.tab\n      ? event.detail.tab\n      : this.getIndexOfTabTitle(event.target as HTMLCalciteTabTitleElement);\n    event.stopPropagation();\n  }\n\n  @Listen(\"calciteTabsActivate\")\n  activateTabHandler(event: CustomEvent<void>): void {\n    this.calciteTabChange.emit();\n    event.stopPropagation();\n  }\n\n  @Listen(\"calciteInternalTabsClose\")\n  internalCloseTabHandler(event: CustomEvent<TabCloseEventDetail>): void {\n    const closedTabTitleEl = event.target as HTMLCalciteTabTitleElement;\n    this.handleTabTitleClose(closedTabTitleEl);\n    event.stopPropagation();\n  }\n\n  /**\n   * Check for active tabs on register and update selected\n   *\n   * @param event\n   */\n  @Listen(\"calciteInternalTabTitleRegister\")\n  updateTabTitles(event: CustomEvent<TabID>): void {\n    if ((event.target as HTMLCalciteTabTitleElement).selected) {\n      this.selectedTabId = event.detail;\n    }\n  }\n\n  @Listen(\"calciteInternalTabChange\", { target: \"body\" })\n  globalInternalTabChangeHandler(event: CustomEvent<TabChangeEventDetail>): void {\n    if (\n      this.syncId &&\n      event.target !== this.el &&\n      (event.target as HTMLCalciteTabNavElement).syncId === this.syncId &&\n      this.selectedTabId !== event.detail.tab\n    ) {\n      this.selectedTabId = event.detail.tab;\n    }\n    event.stopPropagation();\n  }\n\n  @Listen(\"calciteInternalTabIconChanged\")\n  iconStartChangeHandler(): void {\n    this.updateActiveWidth();\n    this.updateOffsetPosition();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Emits when the selected `calcite-tab` changes.\n   */\n  @Event({ cancelable: false }) calciteTabChange: EventEmitter<void>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabChange: EventEmitter<TabChangeEventDetail>;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteTabNavElement;\n\n  @State() selectedTabId: TabID;\n\n  parentTabsEl: HTMLCalciteTabsElement;\n\n  tabNavEl: HTMLDivElement;\n\n  activeIndicatorEl: HTMLElement;\n\n  activeIndicatorContainerEl: HTMLDivElement;\n\n  animationActiveDuration = 0.3;\n\n  resizeObserver = createObserver(\"resize\", () => {\n    if (!this.activeIndicatorEl) {\n      return;\n    }\n\n    // remove active indicator transition duration during resize to prevent wobble\n    this.activeIndicatorEl.style.transitionDuration = \"0s\";\n    this.updateActiveWidth();\n    this.updateOffsetPosition();\n  });\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  handleTabFocus = (\n    event: CustomEvent,\n    el: HTMLCalciteTabTitleElement,\n    destination: FocusElementInGroupDestination,\n  ): void => {\n    focusElementInGroup(this.enabledTabTitles, el, destination);\n\n    event.stopPropagation();\n  };\n\n  handleContainerScroll = (): void => {\n    // remove active indicator transition duration while container is scrolling to prevent wobble\n    this.activeIndicatorEl.style.transitionDuration = \"0s\";\n    this.updateOffsetPosition();\n  };\n\n  updateOffsetPosition(): void {\n    const dir = getElementDir(this.el);\n    const navWidth = this.activeIndicatorContainerEl?.offsetWidth;\n    const tabLeft = this.selectedTitle?.offsetLeft;\n    const tabWidth = this.selectedTitle?.offsetWidth;\n    const offsetRight = navWidth - (tabLeft + tabWidth);\n    this.indicatorOffset =\n      dir !== \"rtl\" ? tabLeft - this.tabNavEl?.scrollLeft : offsetRight + this.tabNavEl?.scrollLeft;\n  }\n\n  updateActiveWidth(): void {\n    this.indicatorWidth = this.selectedTitle?.offsetWidth;\n  }\n\n  getIndexOfTabTitle(el: HTMLCalciteTabTitleElement, tabTitles = this.tabTitles): number {\n    // In most cases, since these indexes correlate with tab contents, we want to consider all tab titles.\n    // However, when doing relative index operations, it makes sense to pass in this.enabledTabTitles as the 2nd arg.\n    return tabTitles.indexOf(el);\n  }\n\n  async getTabTitleById(id: TabID): Promise<HTMLCalciteTabTitleElement | null> {\n    return Promise.all(this.tabTitles.map((el) => el.getTabIdentifier())).then((ids) => {\n      return this.tabTitles[ids.indexOf(id)];\n    });\n  }\n\n  get tabTitles(): HTMLCalciteTabTitleElement[] {\n    return filterDirectChildren<HTMLCalciteTabTitleElement>(this.el, \"calcite-tab-title\");\n  }\n\n  get enabledTabTitles(): HTMLCalciteTabTitleElement[] {\n    return filterDirectChildren<HTMLCalciteTabTitleElement>(\n      this.el,\n      \"calcite-tab-title:not([disabled])\",\n    ).filter((tabTitle) => !tabTitle.closed);\n  }\n\n  private handleTabTitleClose(closedTabTitleEl: HTMLCalciteTabTitleElement): void {\n    const { tabTitles } = this;\n    const selectionModified = closedTabTitleEl.selected;\n\n    const visibleTabTitlesIndices = tabTitles.reduce(\n      (tabTitleIndices: number[], tabTitle, index) =>\n        !tabTitle.closed ? [...tabTitleIndices, index] : tabTitleIndices,\n      [],\n    );\n    const totalVisibleTabTitles = visibleTabTitlesIndices.length;\n\n    if (totalVisibleTabTitles === 1 && tabTitles[visibleTabTitlesIndices[0]].closable) {\n      tabTitles[visibleTabTitlesIndices[0]].closable = false;\n      this.selectedTabId = visibleTabTitlesIndices[0];\n\n      if (selectionModified) {\n        tabTitles[visibleTabTitlesIndices[0]].activateTab();\n      }\n    } else if (totalVisibleTabTitles > 1) {\n      const closedTabTitleIndex = tabTitles.findIndex((el) => el === closedTabTitleEl);\n      const nextTabTitleIndex = visibleTabTitlesIndices.find(\n        (value) => value > closedTabTitleIndex,\n      );\n\n      if (this.selectedTabId === closedTabTitleIndex) {\n        this.selectedTabId = nextTabTitleIndex ? nextTabTitleIndex : totalVisibleTabTitles - 1;\n        tabTitles[this.selectedTabId].activateTab();\n      }\n    }\n\n    requestAnimationFrame(() => {\n      this.updateOffsetPosition();\n      this.updateActiveWidth();\n      tabTitles[this.selectedTabId].focus();\n    });\n  }\n}\n"],"version":3}