/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{g as n}from"./_commonjsHelpers.js";var t,r,e,o={exports:{}};t=o,r=function(){var n=Math.PI,t=Math.sin,r=Math.cos,e=Math.tan,o=Math.asin,u=Math.atan2,a=Math.acos,i=n/180,c=864e5,f=2440588,s=2451545,d={dec:0,ra:0};function p(n){return n.valueOf()/c-.5+f}function v(n){return new Date((n+.5-f)*c)}function M(n){return p(n)-s}var l=23.4397*i;function h(n,o){return u(t(n)*r(l)-e(o)*t(l),r(n))}function x(n,e){return o(t(e)*r(l)+r(e)*t(l)*t(n))}function N(n,o,a){return u(t(n),r(n)*t(o)-e(a)*r(o))}function P(n,e,u){return o(t(e)*t(u)+r(e)*r(u)*r(n))}function m(n,t){return i*(280.16+360.9856235*n)-t}function E(n){return i*(357.5291+.98560028*n)}function I(n){return i*(1.9148*t(n)+.02*t(2*n)+3e-4*t(3*n))}function g(t,r){return t+r+102.9372*i+n}function O(n,t){var r=E(n),e=g(r,I(r));return t||(t={dec:0,ra:0}),t.dec=x(e,0),t.ra=h(e,0),t}var T={PolarException:{NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2},getPosition:function(n,t,r,e){var o=i*-r,u=i*t,a=M(n),c=O(a,d),f=m(a,o)-c.ra;return e||(e={azimuth:0,altitude:0}),e.azimuth=N(f,u,c.dec),e.altitude=P(f,u,c.dec),e}},A=[[-.83,"sunrise","sunset"]];T.addTime=function(n,t,r){A.push([n,t,r])};var H=9e-4;function L(t,r){return Math.round(t-H-r/(2*n))}function R(t,r,e){return H+(t+r)/(2*n)+e}function _(n,r,e){return s+n+.0053*t(r)-.0069*t(2*e)}function G(n,e,o){return a((t(n)-t(e)*t(o))/(r(e)*r(o)))}function z(n){var e=i*(134.963+13.064993*n),o=i*(93.272+13.22935*n),u=i*(218.316+13.176396*n)+6.289*i*t(e),a=5.128*i*t(o),c=385001-20905*r(e);return{ra:h(u,a),dec:x(u,a),dist:c}}return T.getTimes=function(n,e,o){var u=i*-o,a=i*e,c=L(M(n),u),f=R(0,u,c),s=E(f),d=I(s),p=g(s,d),l=x(p,0),h=_(f,s,p);function N(n){return _(R(G(n,a,l),u,c),s,p)}function P(n){var e=(t(n)-t(a)*t(l))/(r(a)*r(l));return e<-1?T.PolarException.MIDNIGHT_SUN:e>1?T.PolarException.POLAR_NIGHT:T.PolarException.NORMAL}var m,O,H,z,D,S={solarNoon:v(h),nadir:v(h-.5),polarException:T.PolarException.NORMAL};for(m=0,O=A.length;m<O;m+=1)D=h-((z=N((H=A[m])[0]*i))-h),S[H[1]]=v(D),S[H[2]]=v(z);return S.polarException=P(A[0][0]*i),S},T.getMoonPosition=function(n,t,r){var o=i*-r,u=i*t,a=M(n),c=z(a),f=m(a,o)-c.ra,s=P(f,u,c.dec);return s+=.017*i/e(s+10.26*i/(s+5.1*i)),{azimuth:N(f,u,c.dec),altitude:s,distance:c.dist}},T.getMoonFraction=function(n){var e=M(n),o=O(e),i=z(e),c=149598e3,f=a(t(o.dec)*t(i.dec)+r(o.dec)*r(i.dec)*r(o.ra-i.ra)),s=u(c*t(f),i.dist-c*r(f));return(1+r(s))/2},T},void 0!==(e=r())&&(t.exports=e);const u=n(o.exports);export{u as S};
