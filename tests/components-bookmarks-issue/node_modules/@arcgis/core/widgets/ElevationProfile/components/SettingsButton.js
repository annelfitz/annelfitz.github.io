/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as e}from"../../../chunks/tslib.es6.js";import{on as t}from"../../../core/reactiveUtils.js";import{property as o}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as i}from"../../../core/accessorSupport/decorators/subclass.js";import r from"../../Widget.js";import{settingsCss as n}from"../css.js";import{loadCalciteComponents as s}from"../../support/componentsUtils.js";import{UnitSelect as c}from"../../support/UnitSelect.js";import"../../support/widgetUtils.js";import{tsx as a}from"../../support/jsxFactory.js";let p=class extends r{constructor(){super(...arguments),this.messages=null,this._popover=null,this._popoverIsOpen=!1,this._onPopoverAfterCreate=e=>{this._popover=e},this._onUniformChartScalingChange=e=>{this.onUniformChartScalingChange(e.target.checked)}}loadDependencies(){return s({action:()=>import("@esri/calcite-components/dist/components/calcite-action.js"),checkbox:()=>import("@esri/calcite-components/dist/components/calcite-checkbox.js"),label:()=>import("@esri/calcite-components/dist/components/calcite-label.js"),popover:()=>import("@esri/calcite-components/dist/components/calcite-popover.js"),tooltip:()=>import("@esri/calcite-components/dist/components/calcite-tooltip.js")})}initialize(){const e=()=>this._popover;this.addHandles([t(e,"calcitePopoverOpen",(()=>this._popoverIsOpen=!0)),t(e,"calcitePopoverClose",(()=>this._popoverIsOpen=!1))])}render(){const{id:e,messages:t,visibleElements:o}=this,{unitSelector:i,uniformChartScalingToggle:r}=o;if(!t||!i&&!r)return a("div",{key:`${e}-empty`});const s=`${e}__action`,c=this._popoverIsOpen?t.hideSettings:t.showSettings;return a("div",{class:n.base,key:this},a("calcite-popover",{afterCreate:this._onPopoverAfterCreate,autoClose:!0,label:c,overlayPositioning:"fixed",placement:"bottom-end",referenceElement:s},this._renderPopoverContent()),a("calcite-action",{appearance:"transparent","data-testid":"settings-button",icon:"gear",id:s,scale:"s",text:c,title:c}))}_renderPopoverContent(){const{unitSelector:e,uniformChartScalingToggle:t}=this.visibleElements;return a("div",{class:n.popoverContent},e?this._renderUnitSelector():null,t?this._renderUniformChartScalingToggle():null)}_renderUnitSelector(){const{messages:e}=this;return a(c,{key:"unit-selector-label",options:this.unitOptions,selectLabel:e?.unitSelectLabel??"",value:this.unit,onChange:this.onUnitChange})}_renderUniformChartScalingToggle(){const{messages:e}=this,t=this.uniformChartScaling,o=`${this.id}__uniform-chart-scaling-toggle`,i=e?.[t?"uniformChartScalingDisable":"uniformChartScalingEnable"]??"";return a("calcite-label",{class:n.uniformChartScalingLabel,key:"uniform-chart-scaling-label",layout:"inline"},a("calcite-checkbox",{checked:t,class:n.uniformChartScalingCheckbox,id:o,onCalciteCheckboxChange:this._onUniformChartScalingChange}),a("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:o},i),e?.uniformChartScalingLabel)}};e([o()],p.prototype,"messages",void 0),e([o()],p.prototype,"onUniformChartScalingChange",void 0),e([o()],p.prototype,"onUnitChange",void 0),e([o()],p.prototype,"uniformChartScaling",void 0),e([o()],p.prototype,"unit",void 0),e([o()],p.prototype,"unitOptions",void 0),e([o()],p.prototype,"visibleElements",void 0),e([o()],p.prototype,"_popover",void 0),e([o()],p.prototype,"_popoverIsOpen",void 0),p=e([i("esri.widgets.ElevationProfile.components.SettingsButton")],p);export{p as SettingsButton};
