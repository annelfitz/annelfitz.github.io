/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as e}from"../../../chunks/tslib.es6.js";import{destroyMaybe as o}from"../../../core/maybe.js";import{watch as s,syncAndInitial as r}from"../../../core/reactiveUtils.js";import{convertTime as t}from"../../../core/timeUtils.js";import{generateUUID as i}from"../../../core/uuid.js";import{property as l}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as a}from"../../../core/accessorSupport/decorators/subclass.js";import{formatNumber as m}from"../../../intl/number.js";import c from"../../Slider.js";import n from"../../Widget.js";import{thresholdConfiguratorCss as u}from"../css.js";import{Label as p}from"./Label.js";import{LabeledColorPicker as d}from"./LabeledColorPicker.js";import{loadCalciteComponents as h}from"../../support/componentsUtils.js";import"../../support/widgetUtils.js";import{messageBundle as v}from"../../support/decorators/messageBundle.js";import{tsx as b}from"../../support/jsxFactory.js";let j=class extends n{constructor(e){super(e),this.colorPickerVisible=!0,this._valueSliderId=`value-slider-${i()}`,this._colorPickerId=`color-picker-${i()}`,this._valueSlider=new c({visibleElements:{labels:!1,rangeLabels:!1},steps:t(30,"minutes","milliseconds"),labelFormatFunction:(e,o)=>{const s=t(e,"milliseconds","hours");return"tick"===o?m(s,{maximumFractionDigits:0}):""}}),this._onColorChange=e=>{this.options.color=e}}initialize(){const e=({value:e})=>{this.options.value=e};this.addHandles([s((()=>{const{value:e,minValue:o,maxValue:s}=this.options;return{value:e,minValue:o,maxValue:s}}),(({value:e,minValue:o,maxValue:s})=>{const r=this._valueSlider;r.min=o,r.max=s,r.values=[e];const i=s-o,l=Math.floor(t(i,"milliseconds","hours"));r.tickConfigs=[{mode:"count",values:2*l+1,labelsVisible:!1},{mode:"count",values:l+1,labelsVisible:!0}]}),r),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])}loadDependencies(){return h({label:()=>import("@esri/calcite-components/dist/components/calcite-label.js")})}destroy(){this._valueSlider=o(this._valueSlider)}render(){const e=this._messages.threshold,{color:o}=this.options;return b("div",{class:u.base},b(p,{class:u.valueLabel,for:this._valueSliderId,label:e.valueLabel},this._valueSlider.render()),this.colorPickerVisible?b(d,{id:this._colorPickerId,label:e.colorLabel,value:o,onChange:this._onColorChange}):null)}get testData(){return{valueSlider:this._valueSlider}}};e([l()],j.prototype,"options",void 0),e([l()],j.prototype,"colorPickerVisible",void 0),e([l()],j.prototype,"testData",null),e([l()],j.prototype,"_valueSlider",void 0),e([l(),v("esri/widgets/ShadowCast/t9n/ShadowCast")],j.prototype,"_messages",void 0),j=e([a("esri.widgets.ShadowCast.components.ThresholdConfigurator")],j);export{j as ThresholdConfigurator};
