/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{Convert3DFailedError as e,MultipleModelsError as t,NoModelError as s}from"../../../layers/graphics/sources/support/uploadAssetErrors.js";import{loadFooterActionsComponents as o,FooterActions as i}from"./FooterActions.js";import{loadPanelContentComponents as l,PanelContent as r,PanelContentSection as n}from"./PanelContent.js";import{loadCalciteComponents as c}from"../../support/componentsUtils.js";import{classes as a}from"../../support/widgetUtils.js";import{tsx as p,tsxFragment as d}from"../../support/jsxFactory.js";const u="esri-editor__upload-details",m={base:u,status:`${u}__status`,titleWrapper:`${u}__title-wrapper`,title:`${u}__title`,description:`${u}__description`,loader:`${u}__loader`,iconSuccess:`${u}__icon ${u}__icon--success`,iconError:`${u}__icon ${u}__icon--error`,fileList:`${u}__file-list`,file:`${u}__file`,fileIcon:`${u}__file-icon`,fileName:`${u}__file-name`},f=()=>Promise.all([c({icon:()=>import("@esri/calcite-components/dist/components/calcite-icon.js"),loader:()=>import("@esri/calcite-components/dist/components/calcite-loader.js")}),o(),l()]);function _(e){const{messages:t,key:s,upload:o}=e;return p(d,null,p(r,{key:s??"upload-details"},p(n,null,g(e))),"error"===o.state?p(i,{buttons:[{onClick:()=>o.retry(),label:t.modelUploads.error.uploadNew,iconStart:"upload-to"}],key:"upload-details-footer-actions"}):null)}function g(e){const t=y(e);return t?p("div",{class:m.base,"data-testid":"upload-details",key:"upload-details-content"},p("div",{class:m.status,key:"status"},t.iconContent,p("div",{class:m.titleWrapper,key:"text"},p("div",{class:m.title,key:"title"},t.title),p("div",{class:m.description,key:"description"},t.description))),k(e.upload)):null}function y({helpMessage:e,messages:t,upload:s}){switch(s.state){case"pending":{const{title:e,description:o}=t.modelUploads.pending;return{title:e,description:o,iconContent:p("calcite-loader",{"aria-hidden":"true",class:m.loader,label:"",scale:"s",type:"determinate",value:Math.min(Math.round(100*s.progress),1===s.progress?100:99)})}}case"success":{const{title:s}=t.modelUploads.success;return{title:s,description:e||t.helpMessages3d.mesh,iconContent:p("calcite-icon",{class:a(m.iconSuccess),icon:"check",scale:"l"})}}case"error":{const{title:e}=t.modelUploads.error;return{title:e,description:$(s.error,t),iconContent:p("calcite-icon",{class:a(m.iconError),icon:"exclamation-mark-circle",scale:"l"})}}default:return null}}function $(o,i){if(!o)return null;const l=i.modelUploads.error.messages;switch(o.constructor){case s:return l.noModel;case t:return l.multipleModels;case e:return l.conversionFailed;default:return l.default}}function k(e){return p("div",{class:m.fileList,key:"file-list"},e.files.map((e=>p("div",{class:m.file,key:`file-${e.name}`},p("calcite-icon",{class:m.fileIcon,icon:j(e),scale:"s"}),p("span",{class:m.fileName},h(e.name))))))}function h(e){return e.split("/").pop()?.split("\\").pop()??""}function j(e){const t=e.name.split(".").pop()?.toLowerCase();return(t?b[t]:null)??v}const v="file",C="file-shape",U="file-image",b={glb:C,gltf:C,jpeg:U,jpg:U,png:U,svg:U,zip:"file-zip"};export{_ as UploadDetails,m as css,f as loadUploadDetailsComponents};
