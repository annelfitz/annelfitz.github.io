/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import o from"../../../core/Accessor.js";import{destroyMaybe as e}from"../../../core/maybe.js";import{watch as n,syncAndInitial as i}from"../../../core/reactiveUtils.js";import{property as s}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as r}from"../../../core/accessorSupport/decorators/subclass.js";import{setCalciteThemeClass as c}from"../../../support/themeUtils.js";import{base as p}from"./css.js";import{tooltipContentFactory as l}from"./content/tooltipContentFactory.js";import{isRTL as a}from"../../../widgets/support/widgetUtils.js";const d={base:`${p}`};let u=class extends o{constructor(t){super(t),this.info=null,this.positionMode="follow-cursor",this.content=null,this.contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(d.base),c(t),t})()}initialize(){const{contentContainer:t}=this;this.addHandles([n((()=>this.view.overlay?.surface),(o=>{t.remove(),o?.appendChild(t)}),i),n((()=>this.info),((o,n)=>{if(null!=this.content&&null!=o&&null!=n&&o.type===n.type)this.content.info=o;else{this.content=e(this.content);const n=l(this,o);n&&(this.content=n,n.container&&t.appendChild(n.container))}}),i),n((()=>({container:this.contentContainer,content:this.content,screenPoint:this._screenPoint,positionMode:this.positionMode})),h,i)])}destroy(){this.info=null,this.content=e(this.content),this.contentContainer.remove()}get mode(){return this.content?.mode??"feedback"}get test(){return{visible:"none"!==this.contentContainer?.style.display}}get _screenPoint(){const t=this.view.inputManager;return t?.multiTouchActive?null:t?.latestPointerLocation}clear(){this.info=null}async enterInputMode(t){await(this.content?.enterInputMode(t))}async exitInputMode(){await(this.content?.exitInputMode())}};function h({container:t,content:o,screenPoint:e,positionMode:n}){const{style:i}=t;if("fixed"!==n)if(null!=e&&null!=o){i.display="block";const o=a(t),n=`translate(${Math.round(e.x)+m[0]*(o?-1:1)}px, ${Math.round(e.y)+m[1]}px)`;i.transform=o?`translate(-100%, 0) ${n}`:n}else i.display="none"}t([s({nonNullable:!0})],u.prototype,"view",void 0),t([s()],u.prototype,"info",void 0),t([s()],u.prototype,"positionMode",void 0),t([s()],u.prototype,"content",void 0),t([s()],u.prototype,"mode",null),t([s()],u.prototype,"contentContainer",void 0),t([s()],u.prototype,"_screenPoint",null),u=t([r("esri.views.interactive.tooltip.Tooltip")],u);const m=[20,20];export{u as Tooltip};
