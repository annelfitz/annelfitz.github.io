/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import e from"../../core/Error.js";import{PixelType as t,TextureSamplingMode as r,PixelFormat as o,SizedPixelFormat as a}from"./enums.js";class l{constructor(e,t,r,o){this.dataType=e,this.samplingMode=t,this.pixelFormat=r,this.internalFormat=o}}function n(n,i){const{textureFloat:f,colorBufferFloat:s}=n.capabilities,u=f?.textureFloatLinear,_=s?.textureFloat,m=s?.textureHalfFloat,p=s?.floatBlend,c=n.driverTest.floatBufferBlend.result;if(!_&&!m)throw new e("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(p&&c||m))throw new e("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(c?"":" This device claims support for EXT_float_blend, but does not actually support it."));const d=_&&p&&c,h=m,b=u,R=!!s?.R32F,E=!!s?.R16F;if(d&&b)return b||i.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),new l(t.FLOAT,b?r.LINEAR:r.NEAREST,R?o.RED:o.RGBA,R?a.R32F:o.RGBA);if(h)return new l(t.HALF_FLOAT,r.LINEAR,E?o.RED:o.RGBA,E?a.R16F:o.RGBA);throw new e("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}export{l as HeatmapTextureConfiguration,n as loadHeatmapTextureConfiguration};
