/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{getProjectionDefines as r,getInterpolationDefines as t}from"./utils.js";import{setTextures as e,setUniforms as o,getColormapUniforms as s,getStretchUniforms as a}from"../../../../webgl/rasterUtils.js";const n={vsPath:"raster/common",fsPath:"raster/stretch",attributes:new Map([["a_position",0],["a_texcoord",1]])};function i(e,o,s){const{colormap:a,bandCount:i}=o.symbolizerParameters,m=[...s?[]:r(o.transformGrid),...t(o.interpolation,1===i,e.context)];o.isRendereredSource&&!s?m.push("noop"):null!=a&&m.push("applyColormap");return{defines:m,program:e.painter.materialManager.getProgram(n,m)}}function m(r,t,n,i,m=!1){const{names:c,textures:l}=n.getTextures({useProcessedTexture:m});e(r.context,t,c,l),o(t,i,n.commonUniforms),t.setUniformMatrix3fv("u_dvsMat3",n.transforms.displayViewScreenMat3);const p=n.symbolizerParameters,{colormap:u,colormapOffset:f}=p;if(null!=u){const r=s(u,f);o(t,i,r)}const d=a(p);o(t,i,d)}const c={createProgram:i,bindTextureAndUniforms:m};export{c as default};
