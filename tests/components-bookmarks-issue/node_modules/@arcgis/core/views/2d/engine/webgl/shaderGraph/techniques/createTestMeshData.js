/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import"../../../../../../geometry.js";import{getJsonType as e}from"../../../../../../geometry/support/jsonUtils.js";import t from"../../../../../../layers/support/FieldsIndex.js";import{MeshData as r}from"../../mesh/MeshData.js";import{AResourceProxy as o}from"./mesh/AResourceProxy.js";import{createMeshWriterDirect as s}from"./mesh/createMeshWriter.js";import{ComputedAttributeStorage as n}from"../../../../layers/features/support/ComputedAttributeStorage.js";import{FeatureMetadata as m}from"../../../../layers/features/support/FeatureMetadata.js";import{FeatureSetReaderJSON as i}from"../../../../layers/features/support/FeatureSetReaderJSON.js";import a from"../../../../../../geometry/SpatialReference.js";async function l(o){const l=new r("0.0.0.0"),p=new u,d={},c={fields:new t,spatialReference:a.WebMercator},f={$view:{scale:0,timeZone:null}},h=new n(c);for(const t of o){const r=await s(h,p,t.technique.meshWriter.constructor,t.instanceId,{params:t.meshParams},d);t.feature.displayId=t.feature.attributes.objectId;const o=i.fromFeatures([t.feature],new m({fields:[],objectIdField:"objectId",geometryType:e(t.feature.geometry),globalIdField:null,spatialReference:null,subtypeField:null,subtypes:null,timeInfo:null,typeIdField:null,types:null,timeReferenceUnknownClient:!1}));o.next(),l.entityStart(o.getDisplayId(),0),r.write(l,p,o,f,0),l.entityEnd()}return l.serialize().message}class u extends o{fetchDictionaryResourceImmediate(e){throw new Error("Method not implemented.")}fetchResourceImmediate(e){throw new Error("Method not implemented.")}enqueueRequest(e){throw new Error("Method not implemented.")}fetchEnqueuedResources(){throw new Error("Method not implemented.")}getResource(e){throw new Error("Method not implemented.")}}export{l as createTestMeshData};
