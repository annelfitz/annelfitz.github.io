/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import e from"./DebugOverlay.js";function t(t,r){t.container.addChild(new e({getMesh:e=>o(t,e,r),getColors:s,getOpacities:n}))}const o=(t,o,s)=>{const{pixelRatio:n}=o.state;let r=0;const c=[],a=[];for(const f of t._vectorTileContainer.children)if(f.symbols)for(const[t,o]of f.symbols)for(const i of o)for(const t of i.colliders){const o=(t.xScreen+t.dxScreen)*n,f=(t.yScreen+t.dyScreen)*n,l=t.width*n,p=t.height*n,u=i.unique.parts[t.partIndex].targetOpacity>.5;if(!u&&"all"!==s)continue;const h=3,d=1,g=3,y=0,m=u?2:0,x=u?3:0,b=e.makeFlags(m,x);c.push(o,f,b,o+l,f,b,o,f+p,b,o+l,f+p,b),a.push(r,r+1,r+2,r+1,r+3,r+2),r+=4;const v=u?h:d,w=u?g:y,C=e.makeFlags(v,w);c.push(o,f,C,o+l,f,C,o,f+1,C,o+l,f+1,C),a.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,c.push(o,f+p-1,C,o+l,f+p-1,C,o,f+p,C,o+l,f+p,C),a.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,c.push(o,f,C,o+1,f,C,o,f+p,C,o+1,f+p,C),a.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,c.push(o+l-1,f,C,o+l,f,C,o+l-1,f+p,C,o+l,f+p,C),a.push(r,r+1,r+2,r+1,r+3,r+2),r+=4}const{symbolFader:i}=t._vectorTileContainer;if(i){const[t,o]=i.decluttererOffset,s=e.makeFlags(2,3),n=256,f=256,l=n+t,p=f+o;for(const e of[-3,3])for(const t of[-3,3])c.push(n,f,s,n+e,f+t,s,l,p,s,l+e,p+t,s),a.push(r,r+1,r+2,r+1,r+3,r+2),r+=4}return{vertexData:new Int16Array(c),indexData:new Uint32Array(a)}},s=()=>[1,.5,0,1,1,0,0,1,0,1,.5,1,0,.5,0,1],n=()=>[.05,.01,.15,.2];export{t as showCollisionBoxes};
