/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{formatField as e}from"../../../../../layers/support/labelFormatUtils.js";import{sqlToTemplateString as r}from"../../../../../layers/support/labelUtils.js";import{isBadArcadeResult as t}from"../../../arcade/callExpressionWithCursor.js";import{AComputedField as s}from"./AComputedField.js";class a extends s{static async create(t,s){const l=r(t);return new a((r=>l.replaceAll(/{[^}]*}/g,(t=>{const s=t.slice(1,-1),a=r.metadata.fieldsIndex.get(s);if(null==a)return t;const l=r.readAttribute(s);return null==l?"":e(l,a)}))))}constructor(e){super(),this._evaluator=e}resize(e){}read(e,r){return this._evaluator(e)}readWithDefault(e,r,s){const a=this._evaluator(e);return t(a)?s:a}referencesScale(){return!1}referencesGeometry(){return!1}}export{a as ComputedLegacyLabelExpression};
