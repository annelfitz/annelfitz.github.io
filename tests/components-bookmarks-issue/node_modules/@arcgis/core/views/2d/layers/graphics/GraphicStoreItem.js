/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{create as t}from"../../../../geometry/support/aaBoundingRect.js";import{closeRingsAndFixWinding as e}from"../../../../geometry/support/coordsUtils.js";import{isExtent as s}from"../../../../geometry/support/jsonUtils.js";import{normalizeCentralMeridianForDisplay as r}from"../../../../geometry/support/normalizeUtilsSync.js";import{checkProjectionSupport as i,project as o}from"../../../../layers/graphics/data/projectionSupport.js";import{polygonFromExtent as m}from"./graphicsUtils.js";class p{static fromGraphic(t,e,s,r){return new p(t.geometry,e,t.attributes,t.visible,t.uid,s,r)}constructor(e,s,r,i,o,m,p){this.geometry=e,this.symbol=s,this.attributes=r,this.visible=i,this.objectId=o,this.zOrder=m,this.displayId=p,this.bounds=t(),this.prevBounds=t(),this.size=[0,0,0,0]}get linearCIM(){return this.symbolResource?.symbolInfo.linearCIM}update(e,s,r){return(this.geometry!==e.geometry||this.attributes!==e.attributes||this.symbol!==s||this.zOrder!==r||this.visible!==e.visible)&&(this.prevBounds=this.bounds,this.bounds=t(),this.zOrder=r,this.geometry=e.geometry,this.attributes=e.attributes,this.symbol=s,this.visible=e.visible,this.symbolResource=null,this.projectedGeometry=null,!0)}async projectAndNormalize(t){let p=this.geometry;if(!p||!p.spatialReference||"mesh"===p.type)return;"extent"===p.type&&(p=m(p)),await i(p.spatialReference,t);const h=r(p);if(!h)return;const a=o(h,p.spatialReference,t);a&&e(a),this.projectedGeometry=s(a)?m(a):a}}export{p as GraphicStoreItem};
