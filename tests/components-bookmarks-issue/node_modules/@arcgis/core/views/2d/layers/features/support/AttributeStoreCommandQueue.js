/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as r}from"../../../../../chunks/tslib.es6.js";import{property as e}from"../../../../../core/accessorSupport/decorators/property.js";import{UpdateTracking2D as s}from"../../support/UpdateTracking2D.js";import{QueueProcessor as t}from"../../../../support/QueueProcessor.js";class o{constructor(r){this._updateTracking=new s({debugName:"AttributeStoreCommandQueue"}),this._queueProcessor=new t({concurrency:1,process:r.process})}destroy(){this._updateTracking.destroy(),this.clear()}get updateTracking(){return this._updateTracking}clear(){this._queueProcessor.clear()}async push(r){return this._updateTracking.addPromise(this._doPush(r))}async _doPush(r){const e=this._queueProcessor,s=e.last();switch(r.type){case"update":return s?.type===r.type?e.lastPromise():e.push(r);case"initialize":return e.push(r)}}}r([e()],o.prototype,"process",void 0);export{o as AttributeStoreCommmandQueue};
