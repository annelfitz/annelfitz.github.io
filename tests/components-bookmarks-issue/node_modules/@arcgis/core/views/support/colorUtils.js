/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import t from"../../Color.js";import{getColorTheme as n}from"../../core/colorUtils.js";async function r(n){await n.whenReady();const r=n.basemapView?.baseLayerViews.map((t=>t.layer)).toArray()??[];if(!r.length){const r=getComputedStyle(n.container).backgroundColor,o=r?new t(r):void 0;return("background"in n?n.background?.color:void 0)||(0!==o?.a?o:null)||null}const o=(await n.takeScreenshot({format:"png",layers:r})).data.data,a=o.length;let e=0,l=0,s=0,u=0,c=0,i=0;for(let t=0;t<a;t+=4){const n=o[t],r=o[t+1],a=o[t+2],d=o[t+3],h=d/255;e+=n*n*h,l+=r*r*h,s+=a*a*h,c+=h,d&&(u+=d,i++)}e=Math.round(Math.sqrt(e/c)),l=Math.round(Math.sqrt(l/c)),s=Math.round(Math.sqrt(s/c));return new t([e,l,s,u/i/255])}async function o(t){if(!t)return null;const o=await r(t);return null!=o?n(o):null}export{r as getBackgroundColor,o as getBackgroundColorTheme};
