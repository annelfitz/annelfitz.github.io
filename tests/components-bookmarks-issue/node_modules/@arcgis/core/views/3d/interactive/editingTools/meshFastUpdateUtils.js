/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{makeHandle as e}from"../../../../core/handleUtils.js";import{watch as t,syncAndInitial as r}from"../../../../core/reactiveUtils.js";import{isRelativeVertexSpace as o}from"../../../../geometry/support/meshVertexSpaceUtils.js";import{equals as i}from"../../../../geometry/support/spatialReferenceUtils.js";import{MeshTransformUpdateAction as s}from"../../../../layers/graphics/sources/interfaces.js";import{ViewingMode as n}from"../../../ViewingMode.js";function a(o,i){const s=o.graphic;return s?[t((()=>"visible"in o?o.visible:o.displaying),(e=>{e?c(s,i):p(s,i)}),{...r}),e((()=>p(s,i)))]:[]}function c(e,t){const{geometry:r}=e;f(r,t)&&e.notifyMeshTransformChanged({action:s.EnableFastUpdates})}function p(e,t){const{geometry:r}=e;f(r,t)&&e.notifyMeshTransformChanged({action:s.DisableFastUpdates})}function f(e,{state:{viewingMode:t},spatialReference:r}){if("mesh"!==e?.type)return!1;const{vertexSpace:s,spatialReference:a}=e;if(!o(s))return!1;const{type:c}=s;return t===n.Global&&"local"===c||t===n.Local&&i(r,a)&&"georeferenced"===c&&!a.isGeographic}export{a as meshTransformFastUpdateHandles,p as tryDisableMeshTransformFastUpdates,c as tryEnableMeshTransformFastUpdates};
