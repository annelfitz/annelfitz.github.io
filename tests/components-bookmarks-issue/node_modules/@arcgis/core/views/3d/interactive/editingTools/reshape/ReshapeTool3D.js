/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../../chunks/tslib.es6.js";import t from"../../../../../core/Evented.js";import{destroyMaybe as o}from"../../../../../core/maybe.js";import{property as n}from"../../../../../core/accessorSupport/decorators/property.js";import"../../../../../core/has.js";import"../../../../../core/Logger.js";import"../../../../../core/RandomLCG.js";import{subclass as i}from"../../../../../core/accessorSupport/decorators/subclass.js";import{ReshapeOperation as s}from"./ReshapeOperation.js";import{InteractiveToolBase as r}from"../../../../interactive/InteractiveToolBase.js";import a from"../../../../interactive/sketch/SketchOptions.js";let p=class extends r{constructor(e){super(e),this.events=new t,this.enableZShape=!0,this.enableZVertex=!0,this.enableMoveObject=!0,this.enableMidpoints=!0,this.enableEdgeOffset=!1,this.type="reshape-3d",this.sketchOptions=new a,this.snappingManager=null,this.automaticManipulatorSelection=!1}initialize(){const e=this._reshapeOperation=new s({tool:this});this.addHandles([e.events.on("reshape",(e=>this.events.emit("reshape",e))),e.events.on("move",(e=>this.events.emit("move",e))),e.events.on("vertex-add",(e=>this.events.emit("vertex-add",e))),e.events.on("vertex-remove",(e=>this.events.emit("vertex-remove",e))),e.events.on("immediate-click",(e=>this.events.emit("immediate-click",{...e,object:this.object}))),this.view.on("pointer-down",["Shift"],(e=>e.stopPropagation()))]),this.finishToolCreation()}destroy(){this._reshapeOperation=o(this._reshapeOperation)}get updating(){return((this.object.updating??!1)||this._reshapeOperation?.updating)??!1}onManipulatorSelectionChanged(){this._reshapeOperation&&this._reshapeOperation.onManipulatorSelectionChanged()}get canUndo(){return this._reshapeOperation.canUndo??!1}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._reshapeOperation.undo()}get canRedo(){return this._reshapeOperation.canRedo??!1}redo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._reshapeOperation.redo()}onInputEvent(e){"key-down"!==e.type||"Delete"!==e.key&&"Backspace"!==e.key||this._reshapeOperation.removeSelectedVertices()}reset(){}get test(){return{snappingManager:this.snappingManager,reshapeOperation:this._reshapeOperation}}};e([n()],p.prototype,"_reshapeOperation",void 0),e([n({constructOnly:!0,nonNullable:!0})],p.prototype,"view",void 0),e([n({constructOnly:!0})],p.prototype,"object",void 0),e([n({constructOnly:!0,nonNullable:!0})],p.prototype,"enableZShape",void 0),e([n({constructOnly:!0,nonNullable:!0})],p.prototype,"enableZVertex",void 0),e([n({constructOnly:!0,nonNullable:!0})],p.prototype,"enableMoveObject",void 0),e([n({constructOnly:!0,nonNullable:!0})],p.prototype,"enableMidpoints",void 0),e([n({constructOnly:!0,nonNullable:!0})],p.prototype,"enableEdgeOffset",void 0),e([n()],p.prototype,"type",void 0),e([n({constructOnly:!0,type:a})],p.prototype,"sketchOptions",void 0),e([n({constructOnly:!0})],p.prototype,"snappingManager",void 0),e([n()],p.prototype,"updating",null),e([n()],p.prototype,"automaticManipulatorSelection",void 0),p=e([i("esri.views.3d.interactive.editingTools.reshape.ReshapeTool3D")],p);export{p as ReshapeTool3D};
