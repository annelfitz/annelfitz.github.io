/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import r from"../../../request.js";import{result as e}from"../../../core/asyncUtils.js";import t from"../../../core/Error.js";import{throwIfAborted as a,throwIfAbortError as s}from"../../../core/promiseUtils.js";import{isDataProtocol as o,dataToArrayBuffer as i}from"../../../core/urlUtils.js";class n{constructor(r){this._streamDataRequester=r}async loadJSON(r,e){return this._load("json",r,e)}async loadBinary(r,e){return o(r)?(a(e),i(r)):this._load("binary",r,e)}async loadImage(r,e){return this._load("image",r,e)}async _load(a,o,i){if(null==this._streamDataRequester)return(await r(o,{responseType:m[a]})).data;const n=await e(this._streamDataRequester.request(o,a,i));if(!0===n.ok)return n.value;throw s(n.error),new t("",`Request for resource failed: ${n.error}`)}}const m={image:"image",binary:"array-buffer",json:"json","image+type":void 0};export{n as DefaultLoadingContext};
