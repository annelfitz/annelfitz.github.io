/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{MemCachePool as t}from"../../../../../core/MemCachePool.js";import{VertexArrayObject as e}from"../../lib/VertexArrayObject.js";import{BufferObject as r}from"../../../../webgl/BufferObject.js";import{Usage as o}from"../../../../webgl/enums.js";class s{constructor(e,r,o){this._rctx=e,this._locations=r,this._layout=o,this._cache=new t(e.newCache,"VAOCache")}dispose(){this._cache.destroy()}newVao(t){const s=t.toString();let c=this._cache.pop(s);return c||(c=new e(this._rctx,this._locations,{geometry:this._layout},{geometry:r.createVertex(this._rctx,o.STATIC_DRAW)}),c.vertexBuffers.geometry.setSize(t),c)}deleteVao(t){if(null==t)return;const e=t.byteSize.toString();this._cache.put(e,t)}}export{s as VaoCache};
