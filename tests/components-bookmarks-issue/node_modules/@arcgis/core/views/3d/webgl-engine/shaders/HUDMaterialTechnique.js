/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{ViewingMode as r}from"../../../ViewingMode.js";import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as i}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as t}from"../core/shaderTechnique/ShaderTechnique.js";import{Default3D as o}from"../lib/DefaultVertexAttributeLocations.js";import{oitBlending as n}from"../lib/OrderIndependentTransparency.js";import{Program as s}from"../lib/Program.js";import{TransparencyPassType as a}from"../lib/TransparencyPassType.js";import{H as l}from"../../../../chunks/HUDMaterial.glsl.js";import{BlendFactor as u,CompareFunction as p,PrimitiveType as c}from"../../../webgl/enums.js";import{simpleBlendingParams as d,defaultDepthWriteParams as h,makePipelineState as m,defaultColorWriteParams as f}from"../../../webgl/renderState.js";class g extends t{initializeConfiguration(e,i){i.spherical=e.viewingMode===r.Global}initializeProgram(r){return new s(r.rctx,g.shader.get().build(this.configuration),o)}initializePipeline(){const r=this.configuration.transparencyPassType,i=this.configuration,t=r===a.NONE,o=r===a.FrontFace,s=this.configuration.hasPolygonOffset?b:null,l=i.draped?null:(t||o)&&i.output!==e.Highlight&&(i.depthEnabled||i.occlusionPass)?h:null;return m({blending:i.output===e.Color||i.output===e.Alpha||i.output===e.Highlight?t?j:n(r):null,depthTest:i.draped?null:{func:p.LEQUAL},depthWrite:l,colorWrite:f,polygonOffset:s})}get primitiveType(){return this.configuration.occlusionPass?c.POINTS:c.TRIANGLES}}g.shader=new i(l,(()=>import("./HUDMaterial.glsl.js")));const b={factor:0,units:-4},j=d(u.ONE,u.ONE_MINUS_SRC_ALPHA);export{g as HUDMaterialTechnique};
