/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{ZEROS as e}from"../../../../core/libs/gl-matrix-2/factories/vec4f64.js";import{ShaderOutput as r}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as i}from"../core/shaderTechnique/ShaderTechnique.js";import{Default3D as s}from"../lib/DefaultVertexAttributeLocations.js";import{blendingDefault as l,oitBlending as o,oitDepthTest as n,getOITPolygonOffset as a}from"../lib/OrderIndependentTransparency.js";import{Program as c}from"../lib/Program.js";import{stencilWriteMaskOn as p,stencilToolMaskBaseParams as u,stencilBaseAllZerosParams as m}from"../lib/StencilUtils.js";import{TransparencyPassType as d}from"../lib/TransparencyPassType.js";import{VisualVariablePassParameters as f}from"../materials/VisualVariablePassParameters.js";import{C as h}from"../../../../chunks/ColorMaterial.glsl.js";import{makePipelineState as g,cullingParams as P,defaultDepthWriteParams as b,defaultColorWriteParams as j}from"../../../webgl/renderState.js";class y extends f{constructor(){super(...arguments),this.color=e}}class T extends i{initializeProgram(e){return new c(e.rctx,T.shader.get().build(this.configuration),s)}_createPipeline(e,t){const i=this.configuration,s=e===d.NONE,c=e===d.FrontFace;return g({blending:i.output!==r.Color&&i.output!==r.Alpha||!i.transparent?null:s?l:o(e),culling:P(i.cullFace),depthTest:i.draped?null:{func:n(e)},depthWrite:i.draped?null:(s||c)&&i.writeDepth?b:null,colorWrite:j,stencilWrite:i.hasOccludees?p:null,stencilTest:i.hasOccludees?t?u:m:null,polygonOffset:s||c?i.polygonOffset?O:null:a(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}T.shader=new t(h,(()=>import("./ColorMaterial.glsl.js")));const O={factor:1,units:1};export{y as ColorMaterialPassParameters,T as ColorMaterialTechnique};
