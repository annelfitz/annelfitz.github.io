/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{deduplicate as e}from"../../../../../geometry/support/meshUtils/deduplicate.js";import{computeNeighbors as t}from"../../../support/meshProcessing.js";import{newLayout as r}from"../../../support/buffer/InterleavedLayout.js";import{VertexAttribute as i}from"../VertexAttribute.js";import{EdgeInputBufferLayout as s}from"./bufferLayouts.js";import{RegularEdgeBufferWriter as n,SilhouetteEdgeBufferWriter as o}from"./edgeBufferWriters.js";import{extractEdges as c}from"./edgePreprocessing.js";function f(e){const t=u(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return g.updateSettings(e.writerSettings),a.updateSettings(e.writerSettings),c(t,g,a)}function u(r,i,n,o){if(i){const e=t(n,o,r.count);return new p(n,o,e,r)}const c=e(r.buffer,r.stride/4,{originalIndices:n,originalIndicesLength:o}),f=t(c.indices,o,c.uniqueCount);return{faces:c.indices,facesLength:c.indices.length,neighbors:f,vertices:s.createView(c.buffer)}}class p{constructor(e,t,r,i){this.faces=e,this.facesLength=t,this.neighbors=r,this.vertices=i}}const g=new n,a=new o,d=r().vec3f(i.POSITION0).vec3f(i.POSITION1),m=r().vec3f(i.POSITION0).vec3f(i.POSITION1).u16(i.COMPONENTINDEX);export{f as extract,m as extractComponentsEdgeLocationsLayout,u as extractEdgeInformation,d as extractEdgeLocationsLayout};
