/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import e from"../../request.js";import{deprecatedProperty as t}from"../../core/deprecate.js";import r from"../../core/Logger.js";import{associationTypeKebabDict as o}from"../../networks/support/typeUtils.js";import{parseUrl as s,encode as n,asValidOptions as i}from"../utils.js";import c from"./support/QueryAssociationsResult.js";function a(e){const{returnDeletes:t,elements:r,gdbVersion:s,moment:n}=e.toJSON();return{returnDeletes:t,elements:JSON.stringify(r.map((e=>({globalId:e.globalId,networkSourceId:e.networkSourceId,terminalId:e.terminalId})))),types:JSON.stringify(e.types.map((e=>o.toJSON(e)))).replaceAll('"connectivity"','"junctionJunctionConnectivity"'),gdbVersion:s,moment:n}}async function p(o,p,m){const u=s(o),l={...a(p),f:"json"},y=n({...u.query,...l}),d=i(y,{...m,method:"post"}),f=`${u.path}/associations/query`,{data:g}=await e(f,d),j=c.fromJSON(g);return p.types.includes("connectivity")&&t(r.getLogger("esri/rest/networks/support/QueryAssociationsParameters"),"types",{replacement:"Please use 'junction-junction-connectivity' instead of 'connectivity'.",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-networks-support-QueryAssociationsParameters.html#types",version:"4.29",warnOnce:!0}),j}export{p as queryAssociations};
