/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{s as o,f as n,b as s,n as t}from"../../../../../chunks/vec32.js";import{create as r}from"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js";function c(o,n){if(o.components)for(const s of o.components)s.faces&&"smooth"===s.shading&&e(s,n)}function e(r,c){null==c.normal&&(c.normal=new Float32Array(c.position.length));const e=r.faces,{position:m,normal:p}=c,h=e.length/3;for(let t=0;t<h;++t){const r=3*e[3*t],c=3*e[3*t+1],l=3*e[3*t+2],h=o(a,m[r],m[r+1],m[r+2]),g=o(f,m[c],m[c+1],m[c+2]),u=o(i,m[l],m[l+1],m[l+2]),b=n(g,g,h),j=n(u,u,h),v=s(b,b,j);p[r]+=v[0],p[r+1]+=v[1],p[r+2]+=v[2],p[c]+=v[0],p[c+1]+=v[1],p[c+2]+=v[2],p[l]+=v[0],p[l+1]+=v[1],p[l+2]+=v[2]}for(let n=0;n<p.length;n+=3)o(l,p[n],p[n+1],p[n+2]),t(l,l),p[n]=l[0],p[n+1]=l[1],p[n+2]=l[2]}const a=r(),f=r(),i=r(),l=r();export{c as smoothNormals};
