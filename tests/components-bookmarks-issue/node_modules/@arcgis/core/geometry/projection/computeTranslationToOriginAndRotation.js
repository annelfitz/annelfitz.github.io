/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{deg2rad as r}from"../../core/mathUtils.js";import{fromTranslation as t,identity as o}from"../../core/libs/gl-matrix-2/math/mat4.js";import{create as i}from"../../core/libs/gl-matrix-2/factories/vec3f64.js";import{computeENUToSphericalPCPFLocalRotation as l,computeSphericalPCPFToENULocalRotation as n}from"./localRotationUtils.js";import{classifySpatialReference as E,sourceClassificationCache as s,destClassificationCache as e,ProjectionID as m,projectionTable as A}from"./projectors.js";import{equals as C}from"../support/spatialReferenceUtils.js";function R(r,i,R,c){if(null==r||null==c)return!1;const p=E(r,s),P=E(c,e);if(p===P&&!f(P)&&(p!==m.UNKNOWN||C(r,c)))return t(R,i),!0;if(f(P)){const r=A[p][m.LON_LAT],t=A[m.LON_LAT][P];return null!=r&&null!=t&&(r(i,0,L,0),t(L,0,_,0),l(u*L[0],u*L[1],R),R[12]=_[0],R[13]=_[1],R[14]=_[2],!0)}if((P===m.WEB_MERCATOR||P===m.PLATE_CARREE||P===m.WGS84)&&(p===m.WGS84||p===m.CGCS2000&&P===m.PLATE_CARREE||p===m.SPHERICAL_ECEF||p===m.WEB_MERCATOR)){const r=A[p][m.LON_LAT],t=A[m.LON_LAT][P];return null!=r&&null!=t&&(r(i,0,L,0),t(L,0,_,0),p===m.SPHERICAL_ECEF?n(u*L[0],u*L[1],R):o(R),R[12]=_[0],R[13]=_[1],R[14]=_[2],!0)}return!1}function f(r){return r===m.SPHERICAL_ECEF||r===m.SPHERICAL_MARS_PCPF||r===m.SPHERICAL_MOON_PCPF}const u=r(1),L=i(),_=i();export{R as computeTranslationToOriginAndRotation};
