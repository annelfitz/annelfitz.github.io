/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import r from"../../request.js";import{JSONSupport as o}from"../../core/JSONSupport.js";import{clone as s}from"../../core/lang.js";import{on as t,sync as i}from"../../core/reactiveUtils.js";import{property as a}from"../../core/accessorSupport/decorators/property.js";import"../../core/has.js";import"../../core/Logger.js";import{reader as p}from"../../core/accessorSupport/decorators/reader.js";import{subclass as c}from"../../core/accessorSupport/decorators/subclass.js";import{persistable as m}from"../../core/accessorSupport/decorators/persistable.js";import n from"./PolygonCollection.js";import{f as l}from"../../chunks/persistableUrlUtils.js";var u;let g=u=class extends o{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new n,this._geometriesSource=null}initialize(){this.addHandles(t((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),i))}readGeometries(e,r,o){Array.isArray(e)?this.geometries=n.fromJSON(e,o):this._geometriesSource={url:l(e,o),context:o}}async loadGeometries(e,o){if(null==this._geometriesSource)return;const{url:s,context:t}=this._geometriesSource,i=await r(s,{responseType:"json",signal:o?.signal}),a=e.toJSON(),p=i.data.map((e=>({...e,spatialReference:a})));this.geometries=n.fromJSON(p,t),this._geometriesSource=null}clone(){const e=new u({geometries:s(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};e([a({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],g.prototype,"spatialRelationship",void 0),e([a({type:n,nonNullable:!0,json:{write:!0}}),m({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],g.prototype,"geometries",void 0),e([p(["web-scene","portal-item"],"geometries")],g.prototype,"readGeometries",null),g=u=e([c("esri.layers.support.SceneFilter")],g);const h=g;export{h as default};
