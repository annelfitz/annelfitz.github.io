"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[4798],{68197:(t,e,n)=>{n.d(e,{A:()=>f});var r,o,i=n(40876),s=n(34727),a=n(56507);function l(t){return(0,s.qE)((0,a.Vr)(t),0,255)}function u(t,e,n){return t=Number(t),isNaN(t)?n:t<e?e:t>n?n:t}function c(t,e){const n=t.toString(16).padStart(2,"0");return e?n.substring(0,1):n}class d{static blendColors(t,e,n,r=new d){return r.r=Math.round(t.r+(e.r-t.r)*n),r.g=Math.round(t.g+(e.g-t.g)*n),r.b=Math.round(t.b+(e.b-t.b)*n),r.a=t.a+(e.a-t.a)*n,r._sanitize()}static fromRgb(t,e){const n=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(n){const t=n[2].split(/\s*,\s*/),r=n[1];if("rgb"===r&&3===t.length||"rgba"===r&&4===t.length){const n=t[0];if("%"===n.charAt(n.length-1)){const n=t.map((t=>2.56*parseFloat(t)));return 4===t.length&&(n[3]=parseFloat(t[3])),d.fromArray(n,e)}return d.fromArray(t.map((t=>parseFloat(t))),e)}if("hsl"===r&&3===t.length||"hsla"===r&&4===t.length)return d.fromArray((0,i.z$)(parseFloat(t[0]),parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])),e)}return null}static fromHex(t,e=new d){if("#"!==t[0]||isNaN(Number(`0x${t.substring(1)}`)))return null;switch(t.length){case 4:case 5:{const n=parseInt(t.substring(1,2),16),r=parseInt(t.substring(2,3),16),o=parseInt(t.substring(3,4),16),i=5===t.length?15:parseInt(t.substring(4),16);return d.fromArray([n+16*n,r+16*r,o+16*o,(i+16*i)/255],e)}case 7:case 9:{const n=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),o=parseInt(t.substring(5,7),16),i=7===t.length?255:parseInt(t.substring(7),16);return d.fromArray([n,r,o,i/255],e)}default:return null}}static fromArray(t,e=new d){return e._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(e.a)&&(e.a=1),e._sanitize()}static fromString(t,e){const n=(0,i.V6)(t)?(0,i.TS)(t):null;return n&&d.fromArray(n,e)||d.fromRgb(t,e)||d.fromHex(t,e)}static fromJSON(t){return null!=t?new d([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return null!=t?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return null!=t?[t.r/255,t.g/255,t.b/255,null!=t.a?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return"string"==typeof t?d.fromString(t,this):Array.isArray(t)?d.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof d||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const e=t?.capitalize??!1,n=t?.digits??6,r=3===n||4===n,o=4===n||8===n,i=`#${c(this.r,r)}${c(this.g,r)}${c(this.b,r)}${o?c(Math.round(255*this.a),r):""}`;return e?i.toUpperCase():i}toCss(t=!1){const e=this.r+", "+this.g+", "+this.b;return t?`rgba(${e}, ${this.a})`:`rgb(${e})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=d.AlphaMode.ALWAYS){const e=l(this.r),n=l(this.g),r=l(this.b);return t===d.AlphaMode.ALWAYS||1!==this.a?[e,n,r,l(255*this.a)]:[e,n,r]}clone(){return new d(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return null!=t&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(u(this.r,0,255)),this.g=Math.round(u(this.g,0,255)),this.b=Math.round(u(this.b,0,255)),this.a=u(this.a,0,1),this}_set(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=r}}d.prototype.declaredClass="esri.Color",(o=(r=d||(d={})).AlphaMode||(r.AlphaMode={}))[o.ALWAYS=0]="ALWAYS",o[o.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";const f=d},40876:(t,e,n)=>{n.d(e,{TS:()=>i,V6:()=>o,c4:()=>s,qh:()=>u,z$:()=>l});const r={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function o(t){return!!r[t]||!!r[t.toLowerCase()]}function i(t){return r[t]??r[t.toLowerCase()]}function s(t){return[...i(t)]}function a(t,e,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?t+(e-t)*r:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function l(t,e,n,r=1){const o=(t%360+360)%360/360,i=n<=.5?n*(e+1):n+e-n*e,s=2*n-i;return[Math.round(255*a(s,i,o+1/3)),Math.round(255*a(s,i,o)),Math.round(255*a(s,i,o-1/3)),r]}function u(t){const e=t.length>5,n=e?8:4,r=(1<<n)-1,o=e?1:17,i=e?9===t.length:5===t.length;let s=Number("0x"+t.substr(1));if(isNaN(s))return null;const a=[0,0,0,1];let l;return i&&(l=s&r,s>>=n,a[3]=o*l/255),l=s&r,s>>=n,a[2]=o*l,l=s&r,s>>=n,a[1]=o*l,l=s&r,s>>=n,a[0]=o*l,a}},93223:(t,e,n)=>{n.d(e,{e:()=>i});var r=n(66552),o=n(10107);function i(t,e={}){const n=t instanceof r.J?t:new r.J(t,e),i={type:e?.ignoreUnknown??1?n.apiValues:String,json:{type:n.jsonValues,read:!e?.readOnly&&{reader:n.read},write:{writer:n.write}}};return void 0!==e?.readOnly&&(i.readOnly=!!e.readOnly),void 0!==e?.default&&(i.json.default=e.default),void 0!==e?.name&&(i.json.name=e.name),void 0!==e?.nonNullable&&(i.nonNullable=e.nonNullable),(0,o.MZ)(i)}},9762:(t,e,n)=>{n.r(e),n.d(e,{projectBuffer:()=>o});var r=n(37539);function o(t,e,n,o,i,s,a=1){const l=(0,r.jd)(e,i,r.N9);if(null==l)return!1;if(l===r.pO){if(t===o&&n===s)return!0;const e=n+3*a;for(let r=n,i=s;r<e;r++,i++)o[i]=t[r];return!0}const u=n+3*a;for(let e=n,r=s;e<u;e+=3,r+=3)l(t,e,o,r);return!0}},37539:(t,e,n)=>{n.d(e,{rz:()=>c,Qk:()=>b,pO:()=>g,zp:()=>L,jd:()=>p,w5:()=>h,N9:()=>F,Wv:()=>T});var r=n(34727),o=n(83047),i=n(73941),s=n(79258);Math.PI;const a=s.$O.radius,l=s.$O.eccentricitySquared,u={a1:a*l,a2:a*l*a*l,a3:a*l*l/2,a4:a*l*a*l*2.5,a5:a*l+a*l*l/2,a6:1-l};s.$O.radius,s.$O.flattening,s.Sw.radius,s.Sw.flattening,s.sH.radius,s.sH.flattening,s.sH.radius;var c,d=n(21325),f=n(19936);!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"}(c||(c={}));const h={[c.WGS84]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:g,[c.SPHERICAL_ECEF]:w,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:C,[c.PLATE_CARREE]:A,[c.WGS84]:g,[c.WGS84_ECEF]:O},[c.CGCS2000]:{[c.CGCS2000]:g,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:g,[c.SPHERICAL_ECEF]:w,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:A,[c.WGS84]:g,[c.WGS84_ECEF]:O},[c.GCSMARS2000]:{[c.CGCS2000]:null,[c.GCSMARS2000]:g,[c.GCSMOON2000]:null,[c.LON_LAT]:g,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:M,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.GCSMOON2000]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:g,[c.LON_LAT]:g,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:S,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.WEB_MERCATOR]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:y,[c.SPHERICAL_ECEF]:function(t,e,n,r){const o=t[e]/G,i=x-2*Math.atan(Math.exp(-t[e+1]/G)),s=G+t[e+2],a=Math.cos(i)*s;n[r]=Math.cos(o)*a,n[r+1]=Math.sin(o)*a,n[r+2]=Math.sin(i)*s},[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:g,[c.PLATE_CARREE]:function(t,e,n,r){y(t,e,n,r),A(n,r,n,r)},[c.WGS84]:y,[c.WGS84_ECEF]:function(t,e,n,r){y(t,e,n,r),O(n,r,n,r)}},[c.WGS84_ECEF]:{[c.CGCS2000]:N,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:N,[c.SPHERICAL_ECEF]:function(t,e,n,r){N(t,e,n,r),w(n,r,n,r)},[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:function(t,e,n,r){N(t,e,n,r),C(n,r,n,r)},[c.PLATE_CARREE]:function(t,e,n,r){N(t,e,n,r),A(n,r,n,r)},[c.WGS84]:N,[c.WGS84_ECEF]:g},[c.SPHERICAL_ECEF]:{[c.CGCS2000]:R,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:R,[c.SPHERICAL_ECEF]:g,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:function(t,e,n,r){R(t,e,n,r),C(n,r,n,r)},[c.PLATE_CARREE]:function(t,e,n,r){R(t,e,n,r),A(n,r,n,r)},[c.WGS84]:R,[c.WGS84_ECEF]:function(t,e,n,r){R(t,e,n,r),O(n,r,n,r)}},[c.SPHERICAL_MARS_PCPF]:{[c.CGCS2000]:null,[c.GCSMARS2000]:P,[c.GCSMOON2000]:null,[c.LON_LAT]:P,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:g,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.SPHERICAL_MOON_PCPF]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:E,[c.LON_LAT]:E,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:g,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.UNKNOWN]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:null,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:g,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.LON_LAT]:{[c.CGCS2000]:g,[c.GCSMARS2000]:g,[c.GCSMOON2000]:g,[c.LON_LAT]:g,[c.SPHERICAL_ECEF]:w,[c.SPHERICAL_MARS_PCPF]:M,[c.SPHERICAL_MOON_PCPF]:S,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:C,[c.PLATE_CARREE]:A,[c.WGS84]:g,[c.WGS84_ECEF]:O},[c.PLATE_CARREE]:{[c.CGCS2000]:m,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:m,[c.SPHERICAL_ECEF]:function(t,e,n,r){m(t,e,n,r),w(n,r,n,r)},[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:function(t,e,n,r){m(t,e,n,r),C(n,r,n,r)},[c.PLATE_CARREE]:g,[c.WGS84]:m,[c.WGS84_ECEF]:function(t,e,n,r){m(t,e,n,r),O(n,r,n,r)}}};function p(t,e,n=I()){return null==t||null==e?null:function(t,e,n){if(null==t||null==e||n.source.spatialReference===t&&n.dest.spatialReference===e)return n;const r=b(t,n.source),o=b(e,n.dest);return r===c.UNKNOWN&&o===c.UNKNOWN?(0,d.aI)(t,e)?n.projector=g:n.projector=null:n.projector=h[r][o],n}(t,e,n).projector}function b(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=(0,o.GA)(t,1)),(0,i.jA)(t)?e.spatialReferenceId=c.SPHERICAL_ECEF:(0,d.oT)(t)?e.spatialReferenceId=c.WGS84:(0,d.K8)(t)?e.spatialReferenceId=c.WEB_MERCATOR:(0,d.r1)(t)?e.spatialReferenceId=c.PLATE_CARREE:t.wkt===i.Ro.wkt?e.spatialReferenceId=c.WGS84_ECEF:t.wkid===f.Y.CGCS2000?e.spatialReferenceId=c.CGCS2000:t.wkt===i.FY.wkt?e.spatialReferenceId=c.SPHERICAL_MARS_PCPF:t.wkt===i.LJ.wkt?e.spatialReferenceId=c.SPHERICAL_MOON_PCPF:(0,d.q8)(t)?e.spatialReferenceId=c.GCSMARS2000:(0,d.KQ)(t)?e.spatialReferenceId=c.GCSMOON2000:e.spatialReferenceId=c.UNKNOWN):c.UNKNOWN}function g(t,e,n,r){t!==n&&(n[r++]=t[e++],n[r++]=t[e++],n[r]=t[e])}function y(t,e,n,r){n[r]=U*(t[e]/G),n[r+1]=U*(x-2*Math.atan(Math.exp(-t[e+1]/G))),n[r+2]=t[e+2]}function C(t,e,n,o){!function(t,e,n,o,i){const s=.4999999*z,a=(0,r.qE)(j*t[e+1],-s,s),l=Math.sin(a);n[o++]=j*t[e]*i.radius,n[o++]=i.halfSemiMajorAxis*Math.log((1+l)/(1-l)),n[o]=t[e+2]}(t,e,n,o,s.$O)}function A(t,e,n,r){n[r]=t[e]*V,n[r+1]=t[e+1]*V,n[r+2]=t[e+2]}function m(t,e,n,r){n[r]=t[e]*W,n[r+1]=t[e+1]*W,n[r+2]=t[e+2]}function _(t,e,n,r,o){const i=o+t[e+2],s=j*t[e+1],a=j*t[e],l=Math.cos(s)*i;n[r]=Math.cos(a)*l,n[r+1]=Math.sin(a)*l,n[r+2]=Math.sin(s)*i}function S(t,e,n,r){_(t,e,n,r,s.Sw.radius)}function M(t,e,n,r){_(t,e,n,r,s.sH.radius)}function w(t,e,n,r){_(t,e,n,r,s.$O.radius)}function v(t,e,n,o,i){const s=t[e],a=t[e+1],l=t[e+2],u=Math.sqrt(s*s+a*a+l*l),c=(0,r.YN)(l/(0===u?1:u)),d=Math.atan2(a,s);n[o++]=U*d,n[o++]=U*c,n[o]=u-i}function E(t,e,n,r){v(t,e,n,r,s.Sw.radius)}function P(t,e,n,r){v(t,e,n,r,s.sH.radius)}function R(t,e,n,r){v(t,e,n,r,s.$O.radius)}function O(t,e,n,r){!function(t,e,n,r,o){const i=j*t[e],s=j*t[e+1],a=t[e+2],l=Math.sin(s),u=Math.cos(s),c=o.radius/Math.sqrt(1-o.eccentricitySquared*l*l);n[r++]=(c+a)*u*Math.cos(i),n[r++]=(c+a)*u*Math.sin(i),n[r++]=(c*(1-o.eccentricitySquared)+a)*l}(t,e,n,r,s.$O)}function N(t,e,n,r){const o=u,i=t[e],a=t[e+1],l=t[e+2];let c,d,f,h,p,b,g,y,C,A,m,_,S,M,w,v,E,P,R,O,N;c=Math.abs(l),d=i*i+a*a,f=Math.sqrt(d),h=d+l*l,p=Math.sqrt(h),O=Math.atan2(a,i),b=l*l/h,g=d/h,M=o.a2/p,w=o.a3-o.a4/p,g>.3?(y=c/p*(1+g*(o.a1+M+b*w)/p),R=Math.asin(y),A=y*y,C=Math.sqrt(1-A)):(C=f/p*(1-b*(o.a5-M-g*w)/p),R=Math.acos(C),A=1-C*C,y=Math.sqrt(A)),m=1-s.$O.eccentricitySquared*A,_=s.$O.radius/Math.sqrt(m),S=o.a6*_,M=f-_*C,w=c-S*y,E=C*M+y*w,v=C*w-y*M,P=v/(S/m+E),R+=P,N=E+v*P/2,l<0&&(R=-R),n[r++]=U*O,n[r++]=U*R,n[r]=N}function I(){return{source:{spatialReference:null,spatialReferenceId:c.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:c.UNKNOWN,metersPerUnit:1},projector:g}}const T={spatialReference:null,spatialReferenceId:c.UNKNOWN},L={spatialReference:null,spatialReferenceId:c.UNKNOWN},F=I(),j=(0,r.kU)(1),U=(0,r.KJ)(1),z=Math.PI,x=.5*z,G=s.$O.radius,V=G*z/180,W=180/(G*z)},63531:(t,e,n)=>{n.d(e,{A:()=>C});var r,o=n(90237),i=n(4718),s=n(10107),a=(n(44208),n(53966),n(93223)),l=n(40608),u=n(51857),c=n(86768),d=n(68197),f=n(25482),h=n(56507);let p=r=class extends f.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,i.o8)(this.color)})}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,o._)([(0,s.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],p.prototype,"minValue",void 0),(0,o._)([(0,s.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],p.prototype,"maxValue",void 0),(0,o._)([(0,s.MZ)({type:d.A,json:{type:[h.jz],write:!0}})],p.prototype,"color",void 0),p=r=(0,o._)([(0,l.$)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],p);const b=p;var g;let y=g=class extends u.A{constructor(t){super(t),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new g({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,i.o8)(this.colorClassBreakInfos),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],y.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],y.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:c.q,json:{write:!0}})],y.prototype,"legendOptions",void 0),(0,o._)([(0,s.MZ)({type:u.A.fieldTransformTypeKebabDict.apiValues,json:{type:u.A.fieldTransformTypeKebabDict.jsonValues,read:u.A.fieldTransformTypeKebabDict.read,write:u.A.fieldTransformTypeKebabDict.write}})],y.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[b],json:{write:!0}})],y.prototype,"colorClassBreakInfos",void 0),y=g=(0,o._)([(0,l.$)("esri.renderers.PointCloudClassBreaksRenderer")],y);const C=y},51857:(t,e,n)=>{n.d(e,{A:()=>w});var r,o=n(90237),i=n(66552),s=n(25482),a=n(4718),l=n(10107),u=(n(44208),n(53966),n(40608));n(87811);let c=r=class extends s.oY{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new r({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,o._)([(0,l.MZ)({type:String,json:{write:!0}})],c.prototype,"field",void 0),(0,o._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],c.prototype,"minValue",void 0),(0,o._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],c.prototype,"maxValue",void 0),c=r=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.ColorModulation")],c);const d=c,f=new i.J({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let h=class extends s.oY{};(0,o._)([(0,l.MZ)({type:f.apiValues,readOnly:!0,nonNullable:!0,json:{type:f.jsonValues,read:!1,write:f.write}})],h.prototype,"type",void 0),h=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],h);const p=h;var b,g=n(93223);let y=b=class extends p{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new b({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,o._)([(0,g.e)({pointCloudFixedSizeAlgorithm:"fixed-size"})],y.prototype,"type",void 0),(0,o._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],y.prototype,"size",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"useRealWorldSymbolSizes",void 0),y=b=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],y);const C=y;var A;let m=A=class extends p{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new A({scaleFactor:this.scaleFactor})}};(0,o._)([(0,g.e)({pointCloudSplatAlgorithm:"splat"})],m.prototype,"type",void 0),(0,o._)([(0,l.MZ)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],m.prototype,"scaleFactor",void 0),m=A=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],m);const _={key:"type",base:p,typeMap:{"fixed-size":C,splat:m}},S=(0,i.O)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let M=class extends s.oY{constructor(t){super(t),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,a.o8)(this.pointSizeAlgorithm),colorModulation:(0,a.o8)(this.colorModulation),pointsPerInch:(0,a.o8)(this.pointsPerInch)}}};(0,o._)([(0,l.MZ)({type:S.apiValues,readOnly:!0,nonNullable:!0,json:{type:S.jsonValues,read:!1,write:S.write}})],M.prototype,"type",void 0),(0,o._)([(0,l.MZ)({types:_,json:{write:!0}})],M.prototype,"pointSizeAlgorithm",void 0),(0,o._)([(0,l.MZ)({type:d,json:{write:!0}})],M.prototype,"colorModulation",void 0),(0,o._)([(0,l.MZ)({json:{write:!0},nonNullable:!0,type:Number})],M.prototype,"pointsPerInch",void 0),M=(0,o._)([(0,u.$)("esri.renderers.PointCloudRenderer")],M),(M||(M={})).fieldTransformTypeKebabDict=new i.J({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const w=M},69846:(t,e,n)=>{n.d(e,{A:()=>h});var r,o=n(90237),i=n(4718),s=n(10107),a=(n(44208),n(53966),n(93223)),l=n(40608),u=n(51857),c=n(86768),d=n(72500);let f=r=class extends u.A{constructor(t){super(t),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new r({...this.cloneProperties(),field:(0,i.o8)(this.field),fieldTransformType:(0,i.o8)(this.fieldTransformType),stops:(0,i.o8)(this.stops),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudStretchRenderer:"point-cloud-stretch"})],f.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],f.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:c.q,json:{write:!0}})],f.prototype,"legendOptions",void 0),(0,o._)([(0,s.MZ)({type:u.A.fieldTransformTypeKebabDict.apiValues,json:{type:u.A.fieldTransformTypeKebabDict.jsonValues,read:u.A.fieldTransformTypeKebabDict.read,write:u.A.fieldTransformTypeKebabDict.write}})],f.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[d.A],json:{write:!0}})],f.prototype,"stops",void 0),f=r=(0,o._)([(0,l.$)("esri.renderers.PointCloudStretchRenderer")],f);const h=f},48425:(t,e,n)=>{n.d(e,{A:()=>C});var r,o=n(90237),i=n(4718),s=n(10107),a=(n(44208),n(53966),n(93223)),l=n(40608),u=n(51857),c=n(86768),d=n(68197),f=n(25482),h=n(56507);let p=r=class extends f.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new r({description:this.description,label:this.label,values:(0,i.o8)(this.values),color:(0,i.o8)(this.color)})}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,o._)([(0,s.MZ)({type:[String],json:{write:!0}})],p.prototype,"values",void 0),(0,o._)([(0,s.MZ)({type:d.A,json:{type:[h.jz],write:!0}})],p.prototype,"color",void 0),p=r=(0,o._)([(0,l.$)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],p);const b=p;var g;let y=g=class extends u.A{constructor(t){super(t),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new g({...this.cloneProperties(),field:(0,i.o8)(this.field),fieldTransformType:(0,i.o8)(this.fieldTransformType),colorUniqueValueInfos:(0,i.o8)(this.colorUniqueValueInfos),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],y.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],y.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:u.A.fieldTransformTypeKebabDict.apiValues,json:{type:u.A.fieldTransformTypeKebabDict.jsonValues,read:u.A.fieldTransformTypeKebabDict.read,write:u.A.fieldTransformTypeKebabDict.write}})],y.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[b],json:{write:!0}})],y.prototype,"colorUniqueValueInfos",void 0),(0,o._)([(0,s.MZ)({type:c.q,json:{write:!0}})],y.prototype,"legendOptions",void 0),y=g=(0,o._)([(0,l.$)("esri.renderers.PointCloudUniqueValueRenderer")],y);const C=y},86768:(t,e,n)=>{n.d(e,{q:()=>l});var r,o=n(90237),i=n(25482),s=n(10107),a=(n(44208),n(53966),n(87811),n(40608));let l=r=class extends i.oY{constructor(){super(...arguments),this.title=null}clone(){return new r({title:this.title})}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=r=(0,o._)([(0,a.$)("esri.renderers.support.LegendOptions")],l)},72500:(t,e,n)=>{n.d(e,{A:()=>f});var r,o=n(90237),i=n(68197),s=n(25482),a=n(10107),l=n(56507),u=(n(87811),n(44208),n(40608)),c=n(43937);let d=r=class extends s.oY{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,n){e[n]=t??0}clone(){return new r({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,o._)([(0,a.MZ)({type:i.A,json:{type:[l.jz],write:!0}})],d.prototype,"color",void 0),(0,o._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,o._)([(0,a.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],d.prototype,"value",void 0),(0,o._)([(0,c.K)("value")],d.prototype,"writeValue",null),d=r=(0,o._)([(0,u.$)("esri.renderers.visualVariables.support.ColorStop")],d);const f=d},64798:(t,e,n)=>{n.r(e),n.d(e,{default:()=>j});var r=n(4576),o=n(34275),i=n(67026),s=n(82534),a=n(38954);function l(){return new Float32Array(3)}function u(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function c(t,e,n){const r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}function d(){return l()}function f(){return c(1,1,1)}function h(){return c(1,0,0)}function p(){return c(0,1,0)}function b(){return c(0,0,1)}const g=d(),y=f(),C=h(),A=p(),m=b();Object.freeze(Object.defineProperty({__proto__:null,ONES:y,UNIT_X:C,UNIT_Y:A,UNIT_Z:m,ZEROS:g,clone:u,create:l,createView:function(t,e){return new Float32Array(t,e,3)},fromValues:c,ones:f,unitX:h,unitY:p,unitZ:b,zeros:d},Symbol.toStringTag,{value:"Module"}));var _=n(16930),S=n(9762),M=(n(44208),n(63531)),w=n(69846),v=n(48425),E=n(46851),P=n(37203);function R(t,e,n){return t?.attributeInfo.useElevation?e?function(t,e){const n=new Float64Array(e);for(let r=0;r<e;r++)n[r]=t[3*r+2];return n}(e,n):null:t?.attributeInfo.storageInfo?(0,E.m0)(t.attributeInfo.storageInfo,t.buffer,n):null}function O(t){switch(t){default:case null:case"none":return t=>t;case"low-four-bit":return t=>15&t;case"high-four-bit":return t=>(240&t)>>4;case"absolute-value":return t=>Math.abs(t);case"modulo-ten":return t=>t%10}}function N(t){let e=0;for(const n of t||[])e|=1<<n;return e}var I=n(57005);class T{transform(t){const e=this._transform(t),n=[e.points.buffer,e.rgb.buffer];null!=e.pointIdFilterMap&&n.push(e.pointIdFilterMap.buffer);for(const t of e.attributes)"buffer"in t.values&&(0,o.mw)(t.values.buffer)&&t.values.buffer!==e.rgb.buffer&&n.push(t.values.buffer);return Promise.resolve({result:e,transferList:n})}_transform(t){const e=function(t,e){if(null==t.encoding||""===t.encoding){const n=(0,E.wH)(e,t);if(null==n.vertexAttributes.position)return;const r=(0,E.MA)(e,n.vertexAttributes.position),o=n.header.fields,i=[o.offsetX,o.offsetY,o.offsetZ],s=[o.scaleX,o.scaleY,o.scaleZ],a=r.length/3,l=new Float64Array(3*a);for(let t=0;t<a;t++)l[3*t]=r[3*t]*s[0]+i[0],l[3*t+1]=r[3*t+1]*s[1]+i[1],l[3*t+2]=r[3*t+2]*s[2]+i[2];return l}if("lepcc-xyz"===t.encoding)return(0,P.Me)(e).result}(t.schema,t.geometryBuffer);let n=e.length/3,o=null;const i=new Array,s=R(t.primaryAttributeData,e,n);null!=t.primaryAttributeData&&s&&i.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:s});const a=R(t.modulationAttributeData,e,n);null!=t.modulationAttributeData&&a&&i.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:a});let l=function(t,e,n,r){const{rendererJSON:o,isRGBRenderer:i}=t;let s=null,a=null;if(e&&i)s=e;else if(e&&"pointCloudUniqueValueRenderer"===o?.type){a=v.A.fromJSON(o);const t=a.colorUniqueValueInfos;s=new Uint8Array(3*r);const n=O(a.fieldTransformType);for(let o=0;o<r;o++){const r=(n?n(e[o]):e[o])+"";for(let e=0;e<t.length;e++)if(t[e].values.includes(r)){s[3*o]=t[e].color.r,s[3*o+1]=t[e].color.g,s[3*o+2]=t[e].color.b;break}}}else if(e&&"pointCloudStretchRenderer"===o?.type){a=w.A.fromJSON(o);const t=a.stops;s=new Uint8Array(3*r);const n=O(a.fieldTransformType);for(let o=0;o<r;o++){const r=n?n(e[o]):e[o],i=t.length-1;if(r<t[0].value)s[3*o]=t[0].color.r,s[3*o+1]=t[0].color.g,s[3*o+2]=t[0].color.b;else if(r>=t[i].value)s[3*o]=t[i].color.r,s[3*o+1]=t[i].color.g,s[3*o+2]=t[i].color.b;else for(let e=1;e<t.length;e++)if(r<t[e].value){const n=(r-t[e-1].value)/(t[e].value-t[e-1].value);s[3*o]=t[e].color.r*n+t[e-1].color.r*(1-n),s[3*o+1]=t[e].color.g*n+t[e-1].color.g*(1-n),s[3*o+2]=t[e].color.b*n+t[e-1].color.b*(1-n);break}}}else if(e&&"pointCloudClassBreaksRenderer"===o?.type){a=M.A.fromJSON(o);const t=a.colorClassBreakInfos;s=new Uint8Array(3*r);const n=O(a.fieldTransformType);for(let o=0;o<r;o++){const r=n?n(e[o]):e[o];for(let e=0;e<t.length;e++)if(r>=t[e].minValue&&r<=t[e].maxValue){s[3*o]=t[e].color.r,s[3*o+1]=t[e].color.g,s[3*o+2]=t[e].color.b;break}}}else s=new Uint8Array(3*r).fill(255);if(n&&a?.colorModulation){const t=a.colorModulation.minValue,e=a.colorModulation.maxValue,o=.3;for(let i=0;i<r;i++){const r=n[i],a=r>=e?1:r<=t?o:o+(1-o)*(r-t)/(e-t);s[3*i]=a*s[3*i],s[3*i+1]=a*s[3*i+1],s[3*i+2]=a*s[3*i+2]}}return s}(t.rendererInfo,s,a,n);if(t.filterInfo&&t.filterInfo.length>0&&null!=t.filterAttributesData){const s=t.filterAttributesData.filter(r.Ru).map((t=>{const r=R(t,e,n),o={attributeInfo:t.attributeInfo,values:r};return i.push(o),o}));o=new Uint32Array(n),n=function(t,e,n,r,o){const i=t.length/3;let s=0;for(let a=0;a<i;a++){let i=!0;for(let t=0;t<r.length&&i;t++){const{filterJSON:e}=r[t],n=o[t].values[a];switch(e.type){case"pointCloudValueFilter":{const t="exclude"===e.mode;e.values.includes(n)===t&&(i=!1);break}case"pointCloudBitfieldFilter":{const t=N(e.requiredSetBits),r=N(e.requiredClearBits);((n&t)!==t||n&r)&&(i=!1);break}case"pointCloudReturnFilter":{const t=15&n,r=n>>>4&15,o=r>1,s=1===t,a=t===r;let l=!1;for(const t of e.includedReturns)if("last"===t&&a||"firstOfMany"===t&&s&&o||"lastOfMany"===t&&a&&o||"single"===t&&!o){l=!0;break}l||(i=!1);break}}}i&&(n[s]=a,t[3*s]=t[3*a],t[3*s+1]=t[3*a+1],t[3*s+2]=t[3*a+2],e[3*s]=e[3*a],e[3*s+1]=e[3*a+1],e[3*s+2]=e[3*a+2],s++)}return s}(e,l,o,t.filterInfo,s)}for(const r of t.userAttributesData){const t=R(r,e,n);i.push({attributeInfo:r.attributeInfo,values:t})}3*n<l.length&&(l=new Uint8Array(l.buffer.slice(0,3*n))),function(t,e,n){if(0!==n)for(let r=0;r<e;r++)t[3*r+2]+=n}(e,n,t.elevationOffset);const u=L(e,n,I.ab.fromData(t.obbData),_.A.fromJSON(t.inSR),_.A.fromJSON(t.outSR));return{obbData:t.obbData,points:u,rgb:l,attributes:i,pointIdFilterMap:o}}}function L(t,e,n,r,o){if(!(0,S.projectBuffer)(t,r,0,t,o,0,e))throw new Error("Can't reproject");const s=u(n.center),c=l(),d=l(),f=u(n.halfSize);(0,i.Xr)(F,n.quaternion);const h=new Float32Array(3*e);for(let n=0;n<e;n++){let e=3*n;c[0]=t[e]-s[0],c[1]=t[e+1]-s[1],c[2]=t[e+2]-s[2],(0,a.u)(d,c,F),f[0]=Math.max(f[0],Math.abs(d[0])),f[1]=Math.max(f[1],Math.abs(d[1])),f[2]=Math.max(f[2],Math.abs(d[2])),h[e++]=c[0],h[e++]=c[1],h[e]=c[2]}return n.halfSize=f,h}const F=(0,s.vt)();function j(){return new T}},46851:(t,e,n)=>{n.d(e,{MA:()=>f,m0:()=>y,wH:()=>b});var r=n(49186),o=n(4718),i=n(53966),s=n(37203),a=n(46540);const l=()=>i.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function u(t,e,n){let o="",i=0;for(;i<n;){const s=t[e+i];if(s<128)o+=String.fromCharCode(s),i++;else if(s>=192&&s<224){if(i+1>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const a=(31&s)<<6|63&t[e+i+1];o+=String.fromCharCode(a),i+=2}else if(s>=224&&s<240){if(i+2>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(15&s)<<12|(63&t[e+i+1])<<6|63&t[e+i+2];o+=String.fromCharCode(a),i+=3}else{if(!(s>=240&&s<248))throw new r.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(7&s)<<18|(63&t[e+i+1])<<12|(63&t[e+i+2])<<6|63&t[e+i+3];if(a>=65536){const t=55296+(a-65536>>10),e=56320+(1023&a);o+=String.fromCharCode(t,e)}else o+=String.fromCharCode(a);i+=4}}}return o}function c(t,e){const n={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<e.length;o++){const i=e[o],s=i.valueType||i.type,a=A[s];n.fields[i.property]=a(t,r),r+=C[s].BYTES_PER_ELEMENT}return n.byteCount=r,n}function d(t,e,n){const o=[];let i,s,a=0;for(s=0;s<t;s+=1){if(i=e[s],i>0){if(o.push(u(n,a,i-1)),0!==n[a+i-1])throw new r.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);a+=i}return o}function f(t,e){return new(0,C[e.valueType])(t,e.byteOffset,e.count*e.valuesPerElement)}function h(t,e,n){const i=null!=e.header?c(t,e.header):{byteOffset:0,byteCount:0,fields:{count:n}},s={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let a=i.byteCount;for(let t=0;t<e.ordering.length;t++){const n=e.ordering[t],l=(0,o.o8)(e[n]);if(l.count=i.fields.count??0,"String"===l.valueType){if(l.byteOffset=a,l.byteCount=i.fields[n+"ByteCount"],"UTF-8"!==l.encoding)throw new r.A("unsupported-encoding","Unsupported String encoding.",{encoding:l.encoding});if(l.timeEncoding&&"ECMA_ISO8601"!==l.timeEncoding)throw new r.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:l.timeEncoding})}else{if(!m(l.valueType))throw new r.A("unsupported-value-type","Unsupported binary valueType",{valueType:l.valueType});{const t=_(l.valueType);a+=a%t!=0?t-a%t:0,l.byteOffset=a,l.byteCount=t*l.valuesPerElement*l.count}}a+=l.byteCount??0,s.entries[n]=l}return s.byteCount=a-s.byteOffset,s}function p(t,e,n){if(e!==t&&l().error(`Invalid ${n} buffer size\n expected: ${t}, actual: ${e})`),e<t)throw new r.A("buffer-too-small","Binary buffer is too small",{expectedSize:t,actualSize:e})}function b(t,e){const n=c(t,e&&e.header);let r=n.byteCount;const o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,s=null!=i.vertexCount?i.vertexCount:i.count;for(const t of e.ordering){if(!e.vertexAttributes[t])continue;const n={...e.vertexAttributes[t],byteOffset:r,count:s},i=g[t]||"_"+t;o.vertexAttributes[i]=n,r+=_(n.valueType)*n.valuesPerElement*s}const a=i.faceCount;if(e.faces&&a){o.faces={};for(const t of e.ordering){if(!e.faces[t])continue;const n={...e.faces[t],byteOffset:r,count:a};o.faces[t]=n,r+=_(n.valueType)*n.valuesPerElement*a}}const l=i.featureCount;if(e.featureAttributes&&e.featureAttributeOrder&&l){o.featureAttributes={};for(const t of e.featureAttributeOrder){if(!e.featureAttributes[t])continue;const n={...e.featureAttributes[t],byteOffset:r,count:l};o.featureAttributes[t]=n,r+=("UInt64"===n.valueType?8:_(n.valueType))*n.valuesPerElement*l}}return p(r,t.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}const g={position:a.r.POSITION,normal:a.r.NORMAL,color:a.r.COLOR,uv0:a.r.UV0,region:a.r.UVREGION};function y(t,e,n){if("lepcc-rgb"===t.encoding)return(0,s.mb)(e);if("lepcc-intensity"===t.encoding)return(0,s.Ax)(e);if(null!=t.encoding&&""!==t.encoding)throw new r.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");t["attributeByteCounts "]&&!t.attributeByteCounts&&(l().warn("Warning: Trailing space in 'attributeByteCounts '."),t.attributeByteCounts=t["attributeByteCounts "]),"ObjectIds"===t.ordering[0]&&t.hasOwnProperty("objectIds")&&(l().warn("Warning: Case error in objectIds"),t.ordering[0]="objectIds");const o=h(e,t,n);p(o.byteOffset+o.byteCount,e.byteLength,"attribute");const i=o.entries.attributeValues||o.entries.objectIds;if(i){if("String"===i.valueType){const t=o.entries.attributeByteCounts,n=f(e,t),r=function(t,e){return new Uint8Array(t,e.byteOffset,e.byteCount)}(e,i);return i.timeEncoding?function(t,e,n){return d(t,e,n).map((t=>{const e=t?Date.parse(t):null;return e&&!Number.isNaN(e)?e:null}))}(t.count,n,r):d(t.count,n,r)}return f(e,i)}throw new r.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const C={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},A={Float32:(t,e)=>new DataView(t,0).getFloat32(e,!0),Float64:(t,e)=>new DataView(t,0).getFloat64(e,!0),UInt8:(t,e)=>new DataView(t,0).getUint8(e),Int8:(t,e)=>new DataView(t,0).getInt8(e),UInt16:(t,e)=>new DataView(t,0).getUint16(e,!0),Int16:(t,e)=>new DataView(t,0).getInt16(e,!0),UInt32:(t,e)=>new DataView(t,0).getUint32(e,!0),Int32:(t,e)=>new DataView(t,0).getInt32(e,!0)};function m(t){return C.hasOwnProperty(t)}function _(t){return m(t)?C[t].BYTES_PER_ELEMENT:0}},37203:(t,e,n)=>{n.d(e,{Ax:()=>y,Me:()=>u,mb:()=>p});var r=n(49186);const o=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function s(t,e,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(t,n+i.identifierOffset,i.identifierLength)),version:e.getUint16(n+i.versionOffset,o),checksum:e.getUint32(n+i.checksumOffset,o)}}const a={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function l(t,e){return{sizeLo:t.getUint32(e+a.sizeLo,o),sizeHi:t.getUint32(e+a.sizeHi,o),minX:t.getFloat64(e+a.minX,o),minY:t.getFloat64(e+a.minY,o),minZ:t.getFloat64(e+a.minZ,o),maxX:t.getFloat64(e+a.maxX,o),maxY:t.getFloat64(e+a.maxY,o),maxZ:t.getFloat64(e+a.maxZ,o),errorX:t.getFloat64(e+a.errorX,o),errorY:t.getFloat64(e+a.errorY,o),errorZ:t.getFloat64(e+a.errorZ,o),count:t.getUint32(e+a.count,o),reserved:t.getUint32(e+a.reserved,o)}}function u(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:u}=s(t,e,n);if(n+=i.byteCount,"LEPCC     "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(u>1)throw new r.A("lepcc-decode-error","Unknown version");const d=l(e,n);if(n+=a.byteCount,d.sizeHi*2**32+d.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const f=new Float64Array(3*d.count),h=[],p=[],b=[],g=[];if(n=c(t,n,h),n=c(t,n,p),n=c(t,n,b),n=c(t,n,g),n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad length");let y=0,C=0;for(let t=0;t<h.length;t++){C+=h[t];let e=0;for(let n=0;n<p[t];n++){e+=b[y];const t=g[y];f[3*y]=Math.min(d.maxX,d.minX+2*d.errorX*e),f[3*y+1]=Math.min(d.maxY,d.minY+2*d.errorY*C),f[3*y+2]=Math.min(d.maxZ,d.minZ+2*d.errorZ*t),y++}}return{errorX:d.errorX,errorY:d.errorY,errorZ:d.errorZ,result:f}}function c(t,e,n){const r=[];e=d(t,e,r);const o=[];for(let i=0;i<r.length;i++){o.length=0,e=d(t,e,o);for(let t=0;t<o.length;t++)n.push(o[t]+r[i])}return e}function d(t,e,n){const i=new DataView(t,e),s=i.getUint8(0),a=31&s,l=!!(32&s),u=(192&s)>>6;let c=0;if(0===u)c=i.getUint32(1,o),e+=5;else if(1===u)c=i.getUint16(1,o),e+=3;else{if(2!==u)throw new r.A("lepcc-decode-error","Bad count type");c=i.getUint8(1),e+=2}if(l)throw new r.A("lepcc-decode-error","LUT not implemented");const d=Math.ceil(c*a/8),f=new Uint8Array(t,e,d);let h=0,p=0,b=0;const g=-1>>>32-a;for(let t=0;t<c;t++){for(;p<a;)h|=f[b]<<p,p+=8,b+=1;n[t]=h&g,h>>>=a,p-=a,p+a>32&&(h|=f[b-1]>>8-p)}return e+b}const f={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function h(t,e){return{sizeLo:t.getUint32(e+f.sizeLo,o),sizeHi:t.getUint32(e+f.sizeHi,o),count:t.getUint32(e+f.count,o),colorMapCount:t.getUint16(e+f.colorMapCount,o),lookupMethod:t.getUint8(e+f.lookupMethod),compressionMethod:t.getUint8(e+f.compressionMethod)}}function p(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:a}=s(t,e,n);if(n+=i.byteCount,"ClusterRGB"!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const l=h(e,n);if(n+=f.byteCount,l.sizeHi*2**32+l.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");if((2===l.lookupMethod||1===l.lookupMethod)&&0===l.compressionMethod){if(3*l.colorMapCount+l.count+n!==t.byteLength||l.colorMapCount>256)throw new r.A("lepcc-decode-error","Bad count");const e=new Uint8Array(t,n,3*l.colorMapCount),o=new Uint8Array(t,n+3*l.colorMapCount,l.count),i=new Uint8Array(3*l.count);for(let t=0;t<l.count;t++){const n=o[t];i[3*t]=e[3*n],i[3*t+1]=e[3*n+1],i[3*t+2]=e[3*n+2]}return i}if(0===l.lookupMethod&&0===l.compressionMethod){if(3*l.count+n!==t.byteLength||0!==l.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");return new Uint8Array(t,n).slice()}if(l.lookupMethod<=2&&1===l.compressionMethod){if(n+3!==t.byteLength||1!==l.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");const o=e.getUint8(n),i=e.getUint8(n+1),s=e.getUint8(n+2),a=new Uint8Array(3*l.count);for(let t=0;t<l.count;t++)a[3*t]=o,a[3*t+1]=i,a[3*t+2]=s;return a}throw new r.A("lepcc-decode-error","Bad method "+l.lookupMethod+","+l.compressionMethod)}const b={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function g(t,e){return{sizeLo:t.getUint32(e+b.sizeLo,o),sizeHi:t.getUint32(e+b.sizeHi,o),count:t.getUint32(e+b.count,o),scaleFactor:t.getUint16(e+b.scaleFactor,o),bitsPerPoint:t.getUint8(e+b.bitsPerPoint),reserved:t.getUint8(e+b.reserved)}}function y(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:a}=s(t,e,n);if(n+=i.byteCount,"Intensity "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const l=g(e,n);if(n+=b.byteCount,l.sizeHi*2**32+l.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const u=new Uint16Array(l.count);if(8===l.bitsPerPoint){if(l.count+n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const e=new Uint8Array(t,n,l.count);for(let t=0;t<l.count;t++)u[t]=e[t]*l.scaleFactor}else if(16===l.bitsPerPoint){if(2*l.count+n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const e=new Uint16Array(t,n,l.count);for(let t=0;t<l.count;t++)u[t]=e[t]*l.scaleFactor}else{const e=[];if(d(t,n,e)!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");for(let t=0;t<l.count;t++)u[t]=e[t]*l.scaleFactor}return u}},57005:(t,e,n)=>{n.d(e,{ab:()=>mt,gm:()=>Nt});var r=n(77690),o=n(29242),i=n(9093),s=n(67026),a=n(82534),l=n(38954),u=n(51850),c=n(87317),d=n(91829),f=n(73941),h=n(98764),p=n(48353),b=n(9762),g=n(37539),y=n(240),C=n(21325),A=n(32114),m=n(24151),_=n(48163),S=n(46610);const M=1e-6,w=(0,u.vt)(),v=(0,u.vt)();function E(t,e,n,r,o,i,s,a,l,u){return function(t,e,n){let r=Ct(t.maxVert[0],t.minVert[0]),o=0;for(let e=1;e<7;++e){const n=Ct(t.maxVert[e],t.minVert[e]);n>r&&(r=n,o=e)}pt(e,t.minVert[o]),pt(n,t.maxVert[o])}(t,r,o),Ct(r,o)<M?1:(ft(s,r,o),gt(s,s),function(t,e,n,r){const{data:o,size:i}=t;let s=Number.NEGATIVE_INFINITY,a=0;for(let t=0;t<o.length;t+=i){U[0]=o[t]-e[0],U[1]=o[t+1]-e[1],U[2]=o[t+2]-e[2];const r=n[0]*U[0]+n[1]*U[1]+n[2]*U[2],i=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],l=U[0]*U[0]+U[1]*U[1]+U[2]*U[2]-r*r/i;l>s&&(s=l,a=t)}return pt(r,o,a),s}(e,r,s,i)<M?2:(ft(a,o,i),gt(a,a),ft(l,i,r),gt(l,l),bt(n,a,s),gt(n,n),H(e,n,s,a,l,u),0))}const P=(0,u.vt)(),R=(0,u.vt)(),O=(0,u.vt)(),N=(0,u.vt)(),I=(0,u.vt)(),T=(0,u.vt)(),L=(0,u.vt)(),F=(0,u.vt)();function j(t,e,n,r,o,i,s,a,l){(function(t,e,n,r,o){!function(t,e,n,r,o){const{data:i,size:s}=t;pt(r,i),pt(o,r),n[0]=At(q,e),n[1]=n[0];for(let t=s;t<i.length;t+=s){const s=i[t]*e[0]+i[t+1]*e[1]+i[t+2]*e[2];s<n[0]&&(n[0]=s,pt(r,i,t)),s>n[1]&&(n[1]=s,pt(o,i,t))}}(t,e,z,o,r);const i=At(n,e);z[1]-M<=i&&(r[0]=void 0),z[0]+M>=i&&(o[0]=void 0)})(t,e,n,P,R),void 0!==P[0]&&(ft(O,P,n),gt(O,O),ft(N,P,r),gt(N,N),ft(I,P,o),gt(I,I),bt(T,N,i),gt(T,T),bt(L,I,s),gt(L,L),bt(F,O,a),gt(F,F),H(t,T,i,N,O,l),H(t,L,s,I,N,l),H(t,F,a,O,I,l)),void 0!==R[0]&&(ft(O,R,n),gt(O,O),ft(N,R,r),gt(N,N),ft(I,R,o),gt(I,I),bt(T,N,i),gt(T,T),bt(L,I,s),gt(L,L),bt(F,O,a),gt(F,F),H(t,T,i,N,O,l),H(t,L,s,I,N,l),H(t,F,a,O,I,l))}const U=[0,0,0],z=(0,_.vt)(),x=(0,u.vt)(),G=(0,u.vt)(),V=(0,u.vt)(),W=(0,u.vt)(),k=(0,u.vt)(),B=(0,u.vt)();function H(t,e,n,r,o,i){if(yt(e)<M)return;bt(x,n,e),bt(G,r,e),bt(V,o,e),Z(t,e,z),k[1]=z[0],W[1]=z[1],B[1]=W[1]-k[1];const s=[n,r,o],a=[x,G,V];for(let n=0;n<3;++n){Z(t,s[n],z),k[0]=z[0],W[0]=z[1],Z(t,a[n],z),k[2]=z[0],W[2]=z[1],B[0]=W[0]-k[0],B[2]=W[2]-k[2];const r=ct(B);r<i.quality&&(pt(i.b0,s[n]),pt(i.b1,e),pt(i.b2,a[n]),i.quality=r)}}const q=(0,u.vt)();function Z(t,e,n){const{data:r,size:o}=t;n[0]=Number.POSITIVE_INFINITY,n[1]=Number.NEGATIVE_INFINITY;for(let t=0;t<r.length;t+=o){const o=r[t]*e[0]+r[t+1]*e[1]+r[t+2]*e[2];n[0]=Math.min(n[0],o),n[1]=Math.max(n[1],o)}}function D(t,e,n){n.center=t,n.halfSize=(0,l.h)(e,e,.5),n.quaternion=a.zK}const K=(0,u.vt)(),Y=(0,u.vt)(),$=(0,u.vt)(),X=(0,u.vt)(),Q=(0,u.vt)(),J=(0,u.vt)();function tt(t,e,n){pt(K,e),Math.abs(e[0])>Math.abs(e[1])&&Math.abs(e[0])>Math.abs(e[2])?K[0]=0:Math.abs(e[1])>Math.abs(e[2])?K[1]=0:K[2]=0,yt(K)<M&&(K[0]=K[1]=K[2]=1),bt(Y,e,K),gt(Y,Y),bt($,e,Y),gt($,$),et(t,e,Y,$,X,Q),ft(J,Q,X),at(e,Y,$,X,Q,J,n)}function et(t,e,n,r,o,i){Z(t,e,z),o[0]=z[0],i[0]=z[1],Z(t,n,z),o[1]=z[0],i[1]=z[1],Z(t,r,z),o[2]=z[0],i[2]=z[1]}const nt=(0,u.vt)(),rt=(0,u.vt)(),ot=(0,u.vt)(),it=(0,o.fA)(1,0,0,0,1,0,0,0,1),st=(0,a.vt)();function at(t,e,n,r,o,i,s){it[0]=t[0],it[1]=t[1],it[2]=t[2],it[3]=e[0],it[4]=e[1],it[5]=e[2],it[6]=n[0],it[7]=n[1],it[8]=n[2],s.quaternion=function(t,e){const n=e[0]+e[4]+e[8];if(n>0){let r=Math.sqrt(n+1);t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r}else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const r=(n+1)%3,o=(n+2)%3;let i=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*o+o]+1);t[n]=.5*i,i=.5/i,t[3]=(e[3*r+o]-e[3*o+r])*i,t[r]=(e[3*r+n]+e[3*n+r])*i,t[o]=(e[3*o+n]+e[3*n+o])*i}return t}(st,it),dt(nt,r,o),ht(nt,nt,.5),ht(rt,t,nt[0]),ht(ot,e,nt[1]),dt(rt,rt,ot),ht(ot,n,nt[2]),s.center=(0,l.g)(rt,rt,ot),s.halfSize=(0,l.h)(nt,i,.5)}class lt{constructor(t){this.minVert=new Array(7),this.maxVert=new Array(7),this.buffer=new ArrayBuffer(448);let e=0;this.minProj=new Float64Array(this.buffer,e,7),e+=56,this.maxProj=new Float64Array(this.buffer,e,7),e+=56;for(let t=0;t<7;++t)this.minVert[t]=new Float64Array(this.buffer,e,3),e+=24;for(let t=0;t<7;++t)this.maxVert[t]=new Float64Array(this.buffer,e,3),e+=24;for(let t=0;t<7;++t)this.minProj[t]=Number.POSITIVE_INFINITY,this.maxProj[t]=Number.NEGATIVE_INFINITY;const n=new Array(7),r=new Array(7),{data:o,size:i}=t;for(let t=0;t<o.length;t+=i){let e=o[t];e<this.minProj[0]&&(this.minProj[0]=e,n[0]=t),e>this.maxProj[0]&&(this.maxProj[0]=e,r[0]=t),e=o[t+1],e<this.minProj[1]&&(this.minProj[1]=e,n[1]=t),e>this.maxProj[1]&&(this.maxProj[1]=e,r[1]=t),e=o[t+2],e<this.minProj[2]&&(this.minProj[2]=e,n[2]=t),e>this.maxProj[2]&&(this.maxProj[2]=e,r[2]=t),e=o[t]+o[t+1]+o[t+2],e<this.minProj[3]&&(this.minProj[3]=e,n[3]=t),e>this.maxProj[3]&&(this.maxProj[3]=e,r[3]=t),e=o[t]+o[t+1]-o[t+2],e<this.minProj[4]&&(this.minProj[4]=e,n[4]=t),e>this.maxProj[4]&&(this.maxProj[4]=e,r[4]=t),e=o[t]-o[t+1]+o[t+2],e<this.minProj[5]&&(this.minProj[5]=e,n[5]=t),e>this.maxProj[5]&&(this.maxProj[5]=e,r[5]=t),e=o[t]-o[t+1]-o[t+2],e<this.minProj[6]&&(this.minProj[6]=e,n[6]=t),e>this.maxProj[6]&&(this.maxProj[6]=e,r[6]=t)}for(let t=0;t<7;++t){let e=n[t];pt(this.minVert[t],o,e),e=r[t],pt(this.maxVert[t],o,e)}}}class ut{constructor(){this.b0=(0,u.fA)(1,0,0),this.b1=(0,u.fA)(0,1,0),this.b2=(0,u.fA)(0,0,1),this.quality=0}}function ct(t){return t[0]*t[1]+t[0]*t[2]+t[1]*t[2]}function dt(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}function ft(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}function ht(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}function pt(t,e,n=0){t[0]=e[n],t[1]=e[n+1],t[2]=e[n+2]}function bt(t,e,n){const r=e[0],o=e[1],i=e[2],s=n[0],a=n[1],l=n[2];t[0]=o*l-i*a,t[1]=i*s-r*l,t[2]=r*a-o*s}function gt(t,e){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(n>0){const r=1/Math.sqrt(n);t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r}}function yt(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function Ct(t,e){const n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function At(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}class mt{constructor(t=u.uY,e=Ht,n=a.zK){this._data=[t[0],t[1],t[2],e[0],e[1],e[2],n[0],n[1],n[2],n[3]]}clone(){const t=new mt;return t._data=this._data.slice(),t}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(t){const e=new mt;return e._data=t.slice(),e}static fromJSON(t){return new mt(t.center,t.halfSize,t.quaternion)}copy(t){this._data=t.data.slice()}get center(){return(0,l.s)(A.rq.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(t){return t[0]=this._data[0],t[1]=this._data[1],t[2]=this._data[2],t}set center(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2]}setCenter(t,e,n){this._data[0]=t,this._data[1]=e,this._data[2]=n}get halfSize(){return(0,l.s)(A.rq.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(t){return t[0]=this._data[3],t[1]=this._data[4],t[2]=this._data[5],t}set halfSize(t){this._data[3]=t[0],this._data[4]=t[1],this._data[5]=t[2]}get quaternion(){return(0,s.hZ)(A.J8.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(t){return t[0]=this._data[6],t[1]=this._data[7],t[2]=this._data[8],t[3]=this._data[9],t}set quaternion(t){this._data[6]=t[0],this._data[7]=t[1],this._data[8]=t[2],this._data[9]=t[3]}get data(){return this._data}getCorners(t){const e=_t,n=this._data;e[0]=n[6],e[1]=n[7],e[2]=n[8],e[3]=n[9];for(let r=0;r<8;++r){const o=t[r];o[0]=(1&r?-1:1)*n[3],o[1]=(2&r?-1:1)*n[4],o[2]=(4&r?-1:1)*n[5],(0,l.u)(o,o,e),o[0]+=n[0],o[1]+=n[1],o[2]+=n[2]}}doesIntersectFrustumConservativeApproximation(t){return this.intersectPlane(t[0])<=0&&this.intersectPlane(t[1])<=0&&this.intersectPlane(t[2])<=0&&this.intersectPlane(t[3])<=0&&this.intersectPlane(t[4])<=0&&this.intersectPlane(t[5])<=0}get radius(){const t=this._data[3],e=this._data[4],n=this._data[5];return Math.sqrt(t*t+e*e+n*n)}intersectSphere(t){wt[0]=this._data[0]-t[0],wt[1]=this._data[1]-t[1],wt[2]=this._data[2]-t[2];const e=this.getQuaternion(St);return(0,s.Xr)(_t,e),(0,l.u)(wt,wt,_t),(0,l.v)(wt,wt),vt[0]=Math.min(wt[0],this._data[3]),vt[1]=Math.min(wt[1],this._data[4]),vt[2]=Math.min(wt[2],this._data[5]),(0,l.w)(vt,wt)<t[3]*t[3]}intersectSphereWithMBS(t,e=this.radius){const n=this._data;wt[0]=n[0]-t[0],wt[1]=n[1]-t[1],wt[2]=n[2]-t[2];const r=t[3],o=r+e;return!((0,l.x)(wt)>o*o)&&(_t[0]=-n[6],_t[1]=-n[7],_t[2]=-n[8],_t[3]=n[9],(0,l.u)(wt,wt,_t),(0,l.v)(wt,wt),vt[0]=Math.min(wt[0],n[3]),vt[1]=Math.min(wt[1],n[4]),vt[2]=Math.min(wt[2],n[5]),(0,l.w)(vt,wt)<r*r)}intersectPlane(t){const e=t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3],n=this.projectedRadius((0,y.Qj)(t));return e>n?1:e<-n?-1:0}intersectRay(t,e,n=0){const r=this._data,o=_t;o[0]=-r[6],o[1]=-r[7],o[2]=-r[8],o[3]=r[9],wt[0]=t[0]-r[0],wt[1]=t[1]-r[1],wt[2]=t[2]-r[2];const i=(0,l.u)(wt,wt,_t),s=(0,l.u)(vt,e,_t);let a=-1/0,u=1/0;const c=this.getHalfSize(zt);for(let t=0;t<3;t++){const e=i[t],r=s[t],o=c[t]+n;if(Math.abs(r)>1e-6){const t=(o-e)/r,n=(-o-e)/r;a=Math.max(a,Math.min(t,n)),u=Math.min(u,Math.max(t,n))}else if(e>o||e<-o)return!1}return a<=u}projectedArea(t,e,n,o){const i=this.getQuaternion(St);(0,s.Xr)(_t,i),wt[0]=t[0]-this._data[0],wt[1]=t[1]-this._data[1],wt[2]=t[2]-this._data[2],(0,l.u)(wt,wt,_t);const a=this.getHalfSize(zt),u=wt[0]<-a[0]?-1:wt[0]>a[0]?1:0,d=wt[1]<-a[1]?-1:wt[1]>a[1]?1:0,f=wt[2]<-a[2]?-1:wt[2]>a[2]?1:0,h=Math.abs(u)+Math.abs(d)+Math.abs(f);if(0===h)return 1/0;const p=1===h?4:6,b=6*(u+3*d+9*f+13);(0,r.I0)(xt,i),(0,r.hs)(xt,xt,a);const g=this.getCenter(jt);for(let t=0;t<p;t++){const n=Ot[b+t];(0,l.s)(wt,((1&n)<<1)-1,(2&n)-1,((4&n)>>1)-1),(0,l.t)(wt,wt,xt),(0,l.g)(Et,g,wt),Et[3]=1,(0,c.t)(Et,Et,e);const r=1/Math.max(1e-6,Et[3]);Rt[2*t]=Et[0]*r,Rt[2*t+1]=Et[1]*r}const y=2*p-2;let C=Rt[0]*(Rt[3]-Rt[y+1])+Rt[y]*(Rt[1]-Rt[y-1]);for(let t=2;t<y;t+=2)C+=Rt[t]*(Rt[t+3]-Rt[t-1]);return Math.abs(C)*n*o*.125}projectedRadius(t){const e=this.getQuaternion(St);return(0,s.Xr)(_t,e),(0,l.u)(wt,t,_t),Math.abs(wt[0]*this._data[3])+Math.abs(wt[1]*this._data[4])+Math.abs(wt[2]*this._data[5])}minimumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]-this.projectedRadius((0,y.Qj)(t))}maximumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]+this.projectedRadius((0,y.Qj)(t))}toAaBoundingBox(t){const e=this.getQuaternion(St),n=(0,r.I0)(xt,e),o=this._data[3]*Math.abs(n[0])+this._data[4]*Math.abs(n[3])+this._data[5]*Math.abs(n[6]),i=this._data[3]*Math.abs(n[1])+this._data[4]*Math.abs(n[4])+this._data[5]*Math.abs(n[7]),s=this._data[3]*Math.abs(n[2])+this._data[4]*Math.abs(n[5])+this._data[5]*Math.abs(n[8]);t[0]=this._data[0]-o,t[1]=this._data[1]-i,t[2]=this._data[2]-s,t[3]=this._data[0]+o,t[4]=this._data[1]+i,t[5]=this._data[2]+s}transform(t,e,n,r=0,o=(0,h.lO)(n),i=(0,h.lO)(e),a=(0,g.jd)(e,i)){if(n===o)e.isGeographic?function(t,e,n,r,o=(0,h.lO)(n)){const i=(0,f.tO)(n),a=1+Math.max(0,r)/(i.radius+t.centerZ);t.getCenter(Ft),Ft[2]+=r,(0,b.projectBuffer)(Ft,n,0,Ft,o,0,1),e.center=Ft;const u=t.getQuaternion(St);e.quaternion=u,(0,s.Xr)(_t,u),(0,l.s)(Wt,0,0,1),(0,l.u)(Wt,Wt,_t);const c=t.getHalfSize(zt);(0,l.s)(Wt,c[0]*Math.abs(Wt[0]),c[1]*Math.abs(Wt[1]),c[2]*Math.abs(Wt[2])),(0,l.h)(Wt,Wt,i.inverseFlattening),(0,l.g)(Wt,c,Wt),e.halfSize=(0,l.h)(Wt,Wt,a)}(this,t,e,r,i):function(t,e,n,r,o=(0,h.lO)(n),i=(0,g.jd)(n,o)){t.getCorners(Vt),t.getCenter(Ft),Ft[2]+=r,(0,p.l)(n,Ft,Gt,o),e.setCenter(Gt[12],Gt[13],Gt[14]);const a=2*Math.sqrt(1+Gt[0]+Gt[5]+Gt[10]);_t[0]=(Gt[6]-Gt[9])/a,_t[1]=(Gt[8]-Gt[2])/a,_t[2]=(Gt[1]-Gt[4])/a,_t[3]=.25*a;const u=t.getQuaternion(St);e.quaternion=(0,s.lw)(_t,_t,u),(0,s.Xr)(_t,_t),(0,l.s)(kt,0,0,0);const c=e.getCenter(Ut);for(const t of Vt)t[2]+=r,i(t,0,t,0),(0,l.z)(Wt,t,c),(0,l.u)(Wt,Wt,_t),(0,l.v)(Wt,Wt),(0,l.C)(kt,kt,Wt);e.halfSize=kt}(this,t,e,r,i,a);else if(e.isWGS84&&(n.isWebMercator||(0,C.r1)(n)))!function(t,e,n,r,o){e.getCenter(jt),jt[2]+=o;const i=(0,h.lO)(n);(0,b.projectBuffer)(jt,t,0,jt,i,0,1),It(i,e,jt,n,r)}(e,this,n,t,r);else if(e.isWebMercator&&(0,C.r1)(n))!function(t,e,n,r,o){e.getCenter(jt),jt[2]+=o,It(t,e,jt,n,r)}(e,this,n,t,r);else{const o=this.getCenter(jt);o[2]+=r,(0,b.projectBuffer)(o,e,0,o,n,0,1),t.center=o,this!==t&&(t.quaternion=this.getQuaternion(St),t.halfSize=this.getHalfSize(zt))}}}const _t=(0,a.vt)(),St=(0,a.vt)(),Mt=(0,a.vt)(),wt=(0,u.vt)(),vt=(0,u.vt)(),Et=(0,d.vt)();function Pt(t,e=new mt){return function(t,e){const{data:n,size:r}=t,o=n.length/r;if(o<=0)return;const i=new lt(t);dt(w,i.minProj,i.maxProj),ht(w,w,.5),ft(v,i.maxProj,i.minProj);const s=ct(v),a=new ut;a.quality=s,o<14&&(t=new S.K(new Float64Array(i.buffer,112,42),3));const l=(0,u.vt)(),c=(0,u.vt)(),d=(0,u.vt)(),f=(0,u.vt)(),h=(0,u.vt)(),p=(0,u.vt)(),b=(0,u.vt)();switch(E(i,t,b,l,c,d,f,h,p,a)){case 1:return void D(w,v,e);case 2:return void tt(t,f,e)}j(t,b,l,c,d,f,h,p,a),et(t,a.b0,a.b1,a.b2,X,Q);const g=(0,u.vt)();ft(g,Q,X),a.quality=ct(g),a.quality<s?at(a.b0,a.b1,a.b2,X,Q,g,e):D(w,v,e)}(t,e),e}const Rt=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],Ot=(()=>{const t=new Int8Array(162);let e=0;const n=n=>{for(let r=0;r<n.length;r++)t[e+r]=n[r];e+=6};return n([6,2,3,1,5,4]),n([0,2,3,1,5,4]),n([0,2,3,7,5,4]),n([0,1,3,2,6,4]),n([0,1,3,2,0,0]),n([0,1,5,7,3,2]),n([0,1,3,7,6,4]),n([0,1,3,7,6,2]),n([0,1,5,7,6,2]),n([0,1,5,4,6,2]),n([0,1,5,4,0,0]),n([0,1,3,7,5,4]),n([0,2,6,4,0,0]),n([0,0,0,0,0,0]),n([1,3,7,5,0,0]),n([2,3,7,6,4,0]),n([2,3,7,6,0,0]),n([2,3,1,5,7,6]),n([0,1,5,7,6,2]),n([0,1,5,7,6,4]),n([0,1,3,7,6,4]),n([4,5,7,6,2,0]),n([4,5,7,6,0,0]),n([4,5,1,3,7,6]),n([0,2,3,7,5,4]),n([6,2,3,7,5,4]),n([6,2,3,1,5,4]),t})();function Nt(t,e,n,r,o){const i=t.getQuaternion(St);o.quaternion=i,(0,s.Xr)(_t,i);const a=t.getCenter(jt),c=t.getHalfSize(zt);if(r===m.RT.Global){(0,l.u)(Wt,a,_t),(0,l.v)(kt,Wt),(0,l.y)(Bt,kt,c),(0,l.z)(Bt,kt,Bt);const r=(0,l.l)(Bt);(0,l.g)(Bt,kt,c);const i=(0,l.l)(Bt);if(r<n)o.center=a,(0,l.s)(Wt,n,n,n),o.halfSize=(0,l.g)(Wt,c,Wt);else{const s=i>0?1+e/i:1,a=r>0?1+n/r:1,u=(a+s)/2,d=(a-s)/2;(0,l.h)(Bt,kt,d),o.halfSize=(0,l.r)(Bt,Bt,c,u),(0,l.h)(Bt,kt,u),(0,l.r)(Bt,Bt,c,d),(0,l.A)(Wt,Wt),(0,l.B)(Wt,Bt,Wt);const f=t.getQuaternion(Mt);o.center=(0,l.u)(Wt,Wt,f)}}else{o.center=(0,l.r)(Wt,a,u.Cb,(n+e)/2);const t=(0,l.u)(Wt,u.Cb,_t);(0,l.v)(t,t),o.halfSize=(0,l.r)(kt,c,t,(n-e)/2)}return o}function It(t,e,n,o,i){const s=e.getQuaternion(St),a=(0,r.I0)(xt,s),l=e.getHalfSize(zt);for(let t=0;t<8;++t){for(let e=0;e<3;++e)Ft[e]=l[e]*(t&1<<e?-1:1);for(let e=0;e<3;++e){let r=n[e];for(let t=0;t<3;++t)r+=Ft[t]*a[3*t+e];Tt[3*t+e]=r}}(0,b.projectBuffer)(Tt,t,0,Tt,o,0,8),Pt(Lt,i)}const Tt=new Array(24),Lt=new S.K(Tt,3),Ft=(0,u.vt)(),jt=(0,u.vt)(),Ut=(0,u.vt)(),zt=(0,u.vt)(),xt=(0,o.vt)(),Gt=(0,i.vt)(),Vt=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Wt=(0,u.vt)(),kt=(0,u.vt)(),Bt=(0,u.vt)(),Ht=(0,u.fA)(-1,-1,-1)},24151:(t,e,n)=>{var r;n.d(e,{RT:()=>r}),function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"}(r||(r={}))}}]);