/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.30/esri/copyright.txt for details.
 * v4.30.0-next.13
 */
import{r as t,c as i,h as s,g as e}from"./p-7d3260b2.js";import{A as h,i as a}from"./p-af31b1ec.js";import{r as n,c as r,a as c}from"./p-088ec939.js";import{o}from"./p-873856f3.js";const l=class{constructor(s){t(this,s),this.arcgisFeaturesReady=i(this,"arcgisFeaturesReady",7),this.arcgisPropertyChange=i(this,"arcgisPropertyChange",7),this.featuresTriggerAction=i(this,"featuresTriggerAction",7),this._watchHandles=[],this.referenceElement=void 0,this.collapsed=!1,this.content=void 0,this.features=void 0,this.icon=void 0,this.promises=void 0,this.selectedFeature=void 0,this.selectedFeatureIndex=void 0,this.featuresTitle=void 0,this.visibleElementsActionBar=!0,this.visibleElementsCloseButton=!0,this.visibleElementsCollapseButton=!0,this.visibleElementsFeatureNavigation=!0,this.visibleElementsHeading=!0,this.visibleElementsSpinner=!0,this.position="bottom-left",this.view=void 0,this.widget=void 0}referenceElementWatcher(t){n(this,t)}contentWatcher(t){this.widget&&(this.widget.content=t)}featuresWatcher(t){this.widget&&(this.widget.features=t)}iconWatcher(t){this.widget&&(this.widget.icon=t)}featuresTitleWatcher(t){this.widget&&(this.widget.title=t)}visibleElementsActionBarWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,actionBar:t})}visibleElementsCloseButtonWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,closeButton:t})}visibleElementsCollapseButtonWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,collapseButton:t})}visibleElementsFeatureNavigationWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,featureNavigation:t})}visibleElementsHeadingWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,heading:t})}visibleElementsSpinnerWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,spinner:t})}positionWatcher(t){void 0!==t&&this.widget&&this.view.ui.move(this.childElem,t)}viewWatcher(t){void 0!==t&&this.widget&&(this.widget.view=t)}async fetchFeatures(t,i){return await(this.widget?.fetchFeatures(t,i))}async clear(){this.widget?.clear()}async close(){this.widget?.close()}async next(){return this.widget?.next()}async open(t){this.widget?.open(t)}async previous(){return this.widget?.previous()}async triggerAction(t){this.widget?.triggerAction(t)}async componentDidLoad(){const t=this._createParams(),i=await h(t);this.widget=i,await this._addWatchers(),this._proxyEvents(),this._addContainer(),this.arcgisFeaturesReady.emit(),r(this)}disconnectedCallback(){o(this)}render(){return s("div",{ref:t=>this.childElem=t})}_addContainer(){this.widget.container=this.childElem}async _addWatchers(){const{watch:t}=await a();c(this,t((()=>this.widget.collapsed),(t=>this.collapsed=t),{initial:!0})),c(this,t((()=>this.widget.promises),(t=>this.promises=t),{initial:!0})),c(this,t((()=>this.widget.selectedFeature),(t=>{this.selectedFeature=t,this.arcgisPropertyChange.emit({name:"selectedFeature"})}),{initial:!0})),c(this,t((()=>this.widget.selectedFeatureIndex),(t=>{this.selectedFeatureIndex=t,this.arcgisPropertyChange.emit({name:"selectedFeatureIndex"})}),{initial:!0}))}_createParams(){const t={};return t.visibleElements={actionBar:this.visibleElementsActionBar,closeButton:this.visibleElementsCloseButton,collapseButton:this.visibleElementsCollapseButton,featureNavigation:this.visibleElementsFeatureNavigation,heading:this.visibleElementsHeading,spinner:this.visibleElementsSpinner},this.icon&&(t.icon=this.icon),this.view&&(t.view=this.view),this.content&&(t.content=this.content),this.features&&(t.features=this.features),this.featuresTitle&&(t.title=this.featuresTitle),t}_proxyEvents(){this.widget.on("trigger-action",(t=>this.featuresTriggerAction.emit(t)))}get el(){return e(this)}static get watchers(){return{referenceElement:["referenceElementWatcher"],content:["contentWatcher"],features:["featuresWatcher"],icon:["iconWatcher"],featuresTitle:["featuresTitleWatcher"],visibleElementsActionBar:["visibleElementsActionBarWatcher"],visibleElementsCloseButton:["visibleElementsCloseButtonWatcher"],visibleElementsCollapseButton:["visibleElementsCollapseButtonWatcher"],visibleElementsFeatureNavigation:["visibleElementsFeatureNavigationWatcher"],visibleElementsHeading:["visibleElementsHeadingWatcher"],visibleElementsSpinner:["visibleElementsSpinnerWatcher"],position:["positionWatcher"],view:["viewWatcher"]}}};l.style="arcgis-features{}";export{l as arcgis_features}