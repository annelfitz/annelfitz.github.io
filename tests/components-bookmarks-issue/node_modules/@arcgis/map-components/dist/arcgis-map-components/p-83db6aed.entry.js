/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.30/esri/copyright.txt for details.
 * v4.30.0-next.13
 */
import{r as t,c as e,h as s,g as i}from"./p-7d3260b2.js";import{T as l,i as o,U as h}from"./p-af31b1ec.js";import{r as n,c as a,a as r}from"./p-088ec939.js";import{o as c}from"./p-873856f3.js";const p=class{constructor(s){t(this,s),this.arcgisSketchReady=e(this,"arcgisSketchReady",7),this.sketchCreate=e(this,"sketchCreate",7),this.sketchDelete=e(this,"sketchDelete",7),this.sketchRedo=e(this,"sketchRedo",7),this.sketchUndo=e(this,"sketchUndo",7),this.sketchUpdate=e(this,"sketchUpdate",7),this._watchHandles=[],this.referenceElement=void 0,this.activeTool=void 0,this.availableCreateTools=void 0,this.createGraphic=void 0,this.creationMode="continuous",this.defaultCreateOptions=void 0,this.defaultUpdateOptions=void 0,this.icon=void 0,this.labelOptions=void 0,this.layer=void 0,this.layout="horizontal",this.pointSymbol=void 0,this.polylineSymbol=void 0,this.polygonSymbol=void 0,this.snappingOptions=void 0,this.tooltipOptions=void 0,this.updateGraphics=void 0,this.visibleElementsCreateToolsPoint=!0,this.visibleElementsCreateToolsPolyline=!0,this.visibleElementsCreateToolsPolygon=!0,this.visibleElementsCreateToolsRectangle=!0,this.visibleElementsCreateToolsCircle=!0,this.visibleElementsDuplicateButton=!0,this.visibleElementsSelectionToolsRectangle=!0,this.visibleElementsSelectionToolsLasso=!0,this.visibleElementsSettingsMenu=!0,this.visibleElementsLabelsToggle=!0,this.visibleElementsTooltipsToggle=!0,this.visibleElementsSnappingControls=!0,this.visibleElementsSnappingControlsElementsHeader=!0,this.visibleElementsSnappingControlsElementsEnabledToggle=!0,this.visibleElementsSnappingControlsElementsSelfEnabledToggle=!0,this.visibleElementsSnappingControlsElementsFeatureEnabledToggle=!0,this.visibleElementsSnappingControlsElementsLayerList=!0,this.visibleElementsUndoRedoMenu=!0,this.position="bottom-left",this.view=void 0,this.widget=void 0}referenceElementWatcher(t){n(this,t)}availableCreateToolsWatcher(t){this.widget&&(this.widget.availableCreateTools=t)}creationModeWatcher(t){this.widget&&(this.widget.creationMode=t)}defaultCreateOptionsWatcher(t){this.widget&&(this.widget.defaultCreateOptions=t)}defaultUpdateOptionsWatcher(t){this.widget&&(this.widget.defaultUpdateOptions=t)}iconWatcher(t){this.widget&&(this.widget.icon=t)}labelOptionsWatcher(t){this.widget&&(this.widget.labelOptions=t)}layerWatcher(t){this.widget&&(this.widget.layer=t)}layoutWatcher(t){this.widget&&(this.widget.layout=t)}pointSymbolWatcher(t){this.widget&&(this.widget.viewModel.pointSymbol=t)}polylineSymbolWatcher(t){this.widget&&(this.widget.viewModel.polylineSymbol=t)}polygonSymbolWatcher(t){this.widget&&(this.widget.viewModel.polygonSymbol=t)}snappingOptionsWatcher(t){this.widget&&(this.widget.snappingOptions=t)}tooltipOptionsWatcher(t){this.widget&&(this.widget.tooltipOptions=t)}visibleElementsCreateToolsPointWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,createTools:{...this.widget.visibleElements.createTools,point:t}})}visibleElementsCreateToolsPolylineWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,createTools:{...this.widget.visibleElements.createTools,polyline:t}})}visibleElementsCreateToolsPolygonWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,createTools:{...this.widget.visibleElements.createTools,polygon:t}})}visibleElementsCreateToolsRectangleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,createTools:{...this.widget.visibleElements.createTools,rectangle:t}})}visibleElementsCreateToolsCircleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,createTools:{...this.widget.visibleElements.createTools,circle:t}})}visibleElementsDuplicateButtonWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,duplicateButton:t})}visibleElementsSelectionToolsRectangleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,selectionTools:{...this.widget.visibleElements.selectionTools,"rectangle-selection":t}})}visibleElementsSelectionToolsLassoWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,selectionTools:{...this.widget.visibleElements.selectionTools,"lasso-selection":t}})}visibleElementsSettingsMenuWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,settingsMenu:t})}visibleElementsLabelsToggleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,labelsToggle:t})}visibleElementsTooltipsToggleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,tooltipsToggle:t})}visibleElementsSnappingControlsWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,snappingControls:t})}visibleElementsSnappingControlsElementsHeaderWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,snappingControlsElements:{header:t}})}visibleElementsSnappingControlsElementsEnabledToggleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,snappingControlsElements:{enabledToggle:t}})}visibleElementsSnappingControlsElementsSelfEnabledToggleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,snappingControlsElements:{selfEnabledToggle:t}})}visibleElementsSnappingControlsElementsFeatureEnabledToggleWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,snappingControlsElements:{featureEnabledToggle:t}})}visibleElementsSnappingControlsElementsLayerListWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,snappingControlsElements:{layerList:t}})}visibleElementsUndoRedoMenuWatcher(t){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,undoRedoMenu:t})}positionWatcher(t){void 0!==t&&this.widget&&this.view.ui.move(this.childElem,t)}viewWatcher(t){void 0!==t&&this.widget&&(this.widget.view=t,this.widget.view.map?.add(this.layer))}async cancel(){this.widget?.cancel()}async complete(){this.widget?.complete()}async create(t,e){this.widget?.create(t,e)}async delete(){this.widget?.delete()}async duplicate(){this.widget?.duplicate()}async redo(){this.widget?.redo()}async undo(){this.widget?.undo()}async update(t,e){this.widget?.update(t,e)}async componentDidLoad(){const t=await this._createParams(),e=await l(t);this.widget=e,this._setViewModelParams(),await this._addWatchers(),this._proxyEvents(),this._addContainer(),this.arcgisSketchReady.emit(),a(this)}disconnectedCallback(){c(this)}render(){return s("div",{ref:t=>this.childElem=t})}_addContainer(){this.widget.container=this.childElem}async _addWatchers(){const{watch:t}=await o();r(this,t((()=>this.widget.activeTool),(t=>this.activeTool=t),{initial:!0})),r(this,t((()=>this.widget.createGraphic),(t=>this.createGraphic=t),{initial:!0})),r(this,t((()=>this.widget.updateGraphics),(t=>this.updateGraphics=t),{initial:!0}))}async _createParams(){this.layer||(this.layer=await h({title:"Sketch Layer",creationMode:"update"}));const t={layer:this.layer};return t.visibleElements={createTools:{point:this.visibleElementsCreateToolsPoint,polyline:this.visibleElementsCreateToolsPolyline,polygon:this.visibleElementsCreateToolsPolygon,rectangle:this.visibleElementsCreateToolsRectangle,circle:this.visibleElementsCreateToolsCircle},duplicateButton:this.visibleElementsDuplicateButton,selectionTools:{"rectangle-selection":this.visibleElementsSelectionToolsRectangle,"lasso-selection":this.visibleElementsSelectionToolsLasso},settingsMenu:this.visibleElementsSettingsMenu,labelsToggle:this.visibleElementsLabelsToggle,tooltipsToggle:this.visibleElementsTooltipsToggle,snappingControls:this.visibleElementsSnappingControls,snappingControlsElements:{header:this.visibleElementsSnappingControlsElementsHeader,enabledToggle:this.visibleElementsSnappingControlsElementsEnabledToggle,selfEnabledToggle:this.visibleElementsSnappingControlsElementsSelfEnabledToggle,featureEnabledToggle:this.visibleElementsSnappingControlsElementsFeatureEnabledToggle,layerList:this.visibleElementsSnappingControlsElementsLayerList},undoRedoMenu:this.visibleElementsUndoRedoMenu},this.view&&(t.view=this.view),this.availableCreateTools&&(t.availableCreateTools=this.availableCreateTools),this.creationMode&&(t.creationMode=this.creationMode),this.defaultCreateOptions&&(t.defaultCreateOptions=this.defaultCreateOptions),this.defaultUpdateOptions&&(t.defaultUpdateOptions=this.defaultUpdateOptions),this.labelOptions&&(t.labelOptions=this.labelOptions),this.layout&&(t.layout=this.layout),this.snappingOptions&&(t.snappingOptions=this.snappingOptions),this.tooltipOptions&&(t.tooltipOptions=this.tooltipOptions),t}_setViewModelParams(){const t={};this.pointSymbol&&(t.pointSymbol=this.pointSymbol),this.polylineSymbol&&(t.polylineSymbol=this.polylineSymbol),this.polygonSymbol&&(t.polygonSymbol=this.polygonSymbol),this.widget.viewModel.set(t)}_proxyEvents(){this.widget.on("create",(t=>this.sketchCreate.emit(t))),this.widget.on("delete",(t=>this.sketchDelete.emit(t))),this.widget.on("redo",(t=>this.sketchRedo.emit(t))),this.widget.on("undo",(t=>this.sketchUndo.emit(t))),this.widget.on("update",(t=>this.sketchUpdate.emit(t)))}get el(){return i(this)}static get watchers(){return{referenceElement:["referenceElementWatcher"],availableCreateTools:["availableCreateToolsWatcher"],creationMode:["creationModeWatcher"],defaultCreateOptions:["defaultCreateOptionsWatcher"],defaultUpdateOptions:["defaultUpdateOptionsWatcher"],icon:["iconWatcher"],labelOptions:["labelOptionsWatcher"],layer:["layerWatcher"],layout:["layoutWatcher"],pointSymbol:["pointSymbolWatcher"],polylineSymbol:["polylineSymbolWatcher"],polygonSymbol:["polygonSymbolWatcher"],snappingOptions:["snappingOptionsWatcher"],tooltipOptions:["tooltipOptionsWatcher"],visibleElementsCreateToolsPoint:["visibleElementsCreateToolsPointWatcher"],visibleElementsCreateToolsPolyline:["visibleElementsCreateToolsPolylineWatcher"],visibleElementsCreateToolsPolygon:["visibleElementsCreateToolsPolygonWatcher"],visibleElementsCreateToolsRectangle:["visibleElementsCreateToolsRectangleWatcher"],visibleElementsCreateToolsCircle:["visibleElementsCreateToolsCircleWatcher"],visibleElementsDuplicateButton:["visibleElementsDuplicateButtonWatcher"],visibleElementsSelectionToolsRectangle:["visibleElementsSelectionToolsRectangleWatcher"],visibleElementsSelectionToolsLasso:["visibleElementsSelectionToolsLassoWatcher"],visibleElementsSettingsMenu:["visibleElementsSettingsMenuWatcher"],visibleElementsLabelsToggle:["visibleElementsLabelsToggleWatcher"],visibleElementsTooltipsToggle:["visibleElementsTooltipsToggleWatcher"],visibleElementsSnappingControls:["visibleElementsSnappingControlsWatcher"],visibleElementsSnappingControlsElementsHeader:["visibleElementsSnappingControlsElementsHeaderWatcher"],visibleElementsSnappingControlsElementsEnabledToggle:["visibleElementsSnappingControlsElementsEnabledToggleWatcher"],visibleElementsSnappingControlsElementsSelfEnabledToggle:["visibleElementsSnappingControlsElementsSelfEnabledToggleWatcher"],visibleElementsSnappingControlsElementsFeatureEnabledToggle:["visibleElementsSnappingControlsElementsFeatureEnabledToggleWatcher"],visibleElementsSnappingControlsElementsLayerList:["visibleElementsSnappingControlsElementsLayerListWatcher"],visibleElementsUndoRedoMenu:["visibleElementsUndoRedoMenuWatcher"],position:["positionWatcher"],view:["viewWatcher"]}}};p.style="arcgis-sketch{}";export{p as arcgis_sketch}