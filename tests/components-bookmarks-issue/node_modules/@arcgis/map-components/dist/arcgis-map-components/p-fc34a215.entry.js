/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.30/esri/copyright.txt for details.
 * v4.30.0-next.13
 */
import{r as e,c as t,h as i,g as s}from"./p-7d3260b2.js";import{x as h,y as l,i as n}from"./p-af31b1ec.js";import{r as a,i as o,c as r,a as c}from"./p-088ec939.js";import{o as m}from"./p-873856f3.js";const d=class{constructor(i){e(this,i),this.arcgisFeatureTableReady=t(this,"arcgisFeatureTableReady",7),this.featureTableSelectionChange=t(this,"featureTableSelectionChange",7),this._watchHandles=[],this.referenceElement=void 0,this.activeFilters=void 0,this.activeSortOrders=[],this.attachmentsEnabled=!1,this.autoRefreshEnabled=!0,this.columnReorderingEnabled=!0,this.columns=void 0,this.editingEnabled=!1,this.filterGeometry=void 0,this.hiddenFields=!0,this.highlightEnabled=!0,this.highlightIds=void 0,this.layer=void 0,this.menu=void 0,this.menuConfig=void 0,this.multiSortEnabled=!1,this.pageSize=50,this.returnGeometryEnabled=!1,this.state=void 0,this.tableTemplate=void 0,this.timeZone=void 0,this.itemId=void 0,this.url=void 0,this.visibleElementsHeader=!0,this.visibleElementsMenu=!0,this.visibleElementsSelectionColumn=!0,this.visibleElementsColumnMenus=!0,this.visibleElementsMenuItemsClearSelection=!0,this.visibleElementsMenuItemsDeleteSelection=!0,this.visibleElementsMenuItemsRefreshData=!0,this.visibleElementsMenuItemsSelectedRecordsShowAllToggle=!0,this.visibleElementsMenuItemsToggleColumns=!0,this.visibleElementsMenuItemsZoomToSelection=!0,this.view=void 0,this.widget=void 0}referenceElementWatcher(e){a(this,e)}attachmentsEnabledWatcher(e){void 0!==e&&this.widget&&(this.widget.attachmentsEnabled=e)}autoRefreshEnabledWatcher(e){void 0!==e&&this.widget&&(this.widget.autoRefreshEnabled=e)}columnReorderingEnabledWatcher(e){void 0!==e&&this.widget&&(this.widget.columnReorderingEnabled=e)}editingEnabledWatcher(e){void 0!==e&&this.widget&&(this.widget.editingEnabled=e)}filterGeometryWatcher(e){e&&this.widget&&(this.widget.filterGeometry=e)}hiddenFieldsWatcher(e){e&&this.widget&&(this.widget.hiddenFields=e)}highlightEnabledWatcher(e){void 0!==e&&this.widget&&(this.widget.highlightEnabled=e)}highlightIdsWatcher(e){e&&this.widget&&(this.widget.highlightIds=e)}layerWatcher(e){e&&this.widget?this.widget.layer=e:e||(this.widget.layer=null)}menuConfigWatcher(e){e&&this.widget&&(this.widget.menuConfig=e)}multiSortEnabledWatcher(e){void 0!==e&&this.widget&&(this.widget.multiSortEnabled=e)}pageSizeWatcher(e){void 0!==e&&this.widget&&(this.widget.pageSize=e)}returnGeometryEnabledWatcher(e){void 0!==e&&this.widget&&(this.widget.returnGeometryEnabled=e)}tableTemplateWatcher(e){e&&this.widget&&(this.widget.tableTemplate=e)}timeZoneWatcher(e){this.widget&&(this.widget.timeZone=e)}async itemIdWatcher(e,t){if(o(e))this.layer=null;else if(e&&e!==t){const t=await h({portalItem:{id:e}});this.layer=t}}async urlWatcher(e,t){if(e&&e!==t){const t=await h({url:e});this.layer=t}}visibleElementsHeaderWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,header:e})}visibleElementsMenuWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,menu:e})}visibleElementsSelectionColumnWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,selectionColumn:e})}visibleElementsColumnMenusWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,columnMenus:e})}visibleElementsMenuItemsClearSelectionWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,menuItems:{...this.widget.visibleElements.menuItems,clearSelection:e}})}visibleElementsMenuItemsDeleteSelectionWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,menuItems:{...this.widget.visibleElements.menuItems,deleteSelection:e}})}visibleElementsMenuItemsRefreshDataWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,menuItems:{...this.widget.visibleElements.menuItems,refreshData:e}})}visibleElementsMenuItemsSelectedRecordsShowAllToggleWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,menuItems:{...this.widget.visibleElements.menuItems,selectedRecordsShowAllToggle:e}})}visibleElementsMenuItemsToggleColumnsWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,menuItems:{...this.widget.visibleElements.menuItems,toggleColumns:e}})}visibleElementsMenuItemsZoomToSelectionWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,menuItems:{...this.widget.visibleElements.menuItems,zoomToSelection:e}})}viewWatcher(e){void 0!==e&&this.widget&&(this.widget.view=e)}async clearSelectionFilter(){this.widget?.clearSelectionFilter()}async deleteSelection(e){await(this.widget?.deleteSelection(e))}async filterBySelection(){this.widget?.filterBySelection()}async findColumn(e){return this.widget?.findColumn(e)}async hideColumn(e){this.widget?.hideColumn(e)}async refresh(){await(this.widget?.refresh())}async scrollToIndex(e){this.widget?.scrollToIndex(e)}async showAllColumns(){this.widget?.showAllColumns()}async showColumn(e){this.widget?.showColumn(e)}async sortColumn(e,t){this.widget?.sortColumn(e,t)}async zoomToSelection(){this.widget?.zoomToSelection()}async componentDidLoad(){const e=await this._createParams(),t=await l(e);this.widget=t,await this._addWatchers(),this._proxyEvents(),this._addContainer(),this.arcgisFeatureTableReady.emit(),r(this)}disconnectedCallback(){m(this)}render(){return i("div",{class:"arcgis-feature-table",ref:e=>this.childElem=e})}_addContainer(){this.widget.container=this.childElem}async _addWatchers(){const{watch:e}=await n();c(this,e((()=>this.widget.activeFilters),(e=>this.activeFilters=e),{initial:!0})),c(this,e((()=>this.widget.activeSortOrders),(e=>this.activeSortOrders=e),{initial:!0})),c(this,e((()=>this.widget.columns),(e=>this.columns=e),{initial:!0})),c(this,e((()=>this.widget.menu),(e=>this.menu=e),{initial:!0})),c(this,e((()=>this.widget.state),(e=>this.state=e),{initial:!0}))}async _createParams(){const e={};return e.visibleElements={header:this.visibleElementsHeader,menu:this.visibleElementsMenu,selectionColumn:this.visibleElementsSelectionColumn,columnMenus:this.visibleElementsColumnMenus,menuItems:{clearSelection:this.visibleElementsMenuItemsClearSelection,deleteSelection:this.visibleElementsMenuItemsDeleteSelection,refreshData:this.visibleElementsMenuItemsRefreshData,selectedRecordsShowAllToggle:this.visibleElementsMenuItemsSelectedRecordsShowAllToggle,toggleColumns:this.visibleElementsMenuItemsToggleColumns,zoomToSelection:this.visibleElementsMenuItemsZoomToSelection}},this.view&&(e.view=this.view),void 0!==this.attachmentsEnabled&&(e.attachmentsEnabled=this.attachmentsEnabled),void 0!==this.autoRefreshEnabled&&(e.autoRefreshEnabled=this.autoRefreshEnabled),void 0!==this.columnReorderingEnabled&&(e.columnReorderingEnabled=this.columnReorderingEnabled),void 0!==this.editingEnabled&&(e.editingEnabled=this.editingEnabled),void 0!==this.filterGeometry&&(e.filterGeometry=this.filterGeometry),void 0!==this.hiddenFields&&(e.hiddenFields=this.hiddenFields),void 0!==this.highlightEnabled&&(e.highlightEnabled=this.highlightEnabled),void 0!==this.highlightIds&&(e.highlightIds=this.highlightIds),void 0!==this.menuConfig&&(e.menuConfig=this.menuConfig),void 0!==this.multiSortEnabled&&(e.multiSortEnabled=this.multiSortEnabled),void 0!==this.pageSize&&(e.pageSize=this.pageSize),void 0!==this.tableTemplate&&(e.tableTemplate=this.tableTemplate),void 0!==this.timeZone&&(e.timeZone=this.timeZone),void 0!==this.layer?e.layer=this.layer:this.url?e.layer=await h({url:this.url}):this.itemId&&(e.layer=await h({portalItem:{id:this.itemId}})),e}_proxyEvents(){this.widget?.highlightIds.on("change",(e=>this.featureTableSelectionChange.emit(e)))}get el(){return s(this)}static get watchers(){return{referenceElement:["referenceElementWatcher"],attachmentsEnabled:["attachmentsEnabledWatcher"],autoRefreshEnabled:["autoRefreshEnabledWatcher"],columnReorderingEnabled:["columnReorderingEnabledWatcher"],editingEnabled:["editingEnabledWatcher"],filterGeometry:["filterGeometryWatcher"],hiddenFields:["hiddenFieldsWatcher"],highlightEnabled:["highlightEnabledWatcher"],highlightIds:["highlightIdsWatcher"],layer:["layerWatcher"],menuConfig:["menuConfigWatcher"],multiSortEnabled:["multiSortEnabledWatcher"],pageSize:["pageSizeWatcher"],returnGeometryEnabled:["returnGeometryEnabledWatcher"],tableTemplate:["tableTemplateWatcher"],timeZone:["timeZoneWatcher"],itemId:["itemIdWatcher"],url:["urlWatcher"],visibleElementsHeader:["visibleElementsHeaderWatcher"],visibleElementsMenu:["visibleElementsMenuWatcher"],visibleElementsSelectionColumn:["visibleElementsSelectionColumnWatcher"],visibleElementsColumnMenus:["visibleElementsColumnMenusWatcher"],visibleElementsMenuItemsClearSelection:["visibleElementsMenuItemsClearSelectionWatcher"],visibleElementsMenuItemsDeleteSelection:["visibleElementsMenuItemsDeleteSelectionWatcher"],visibleElementsMenuItemsRefreshData:["visibleElementsMenuItemsRefreshDataWatcher"],visibleElementsMenuItemsSelectedRecordsShowAllToggle:["visibleElementsMenuItemsSelectedRecordsShowAllToggleWatcher"],visibleElementsMenuItemsToggleColumns:["visibleElementsMenuItemsToggleColumnsWatcher"],visibleElementsMenuItemsZoomToSelection:["visibleElementsMenuItemsZoomToSelectionWatcher"],view:["viewWatcher"]}}};d.style=".arcgis-feature-table{width:100%;height:100%}";export{d as arcgis_feature_table}