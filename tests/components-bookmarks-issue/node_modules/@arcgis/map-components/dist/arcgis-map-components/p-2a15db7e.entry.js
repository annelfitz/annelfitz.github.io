/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.30/esri/copyright.txt for details.
 * v4.30.0-next.13
 */
import{r as i,c as e,h as t,H as s,g as n}from"./p-7d3260b2.js";import{i as o}from"./p-af31b1ec.js";const c=class{constructor(t){i(this,t),this.versionItemActionClickedEvent=e(this,"versionItemActionClickedEvent",7),this.strings=void 0,this.hasAdvEditingUte=void 0,this.isVersioningApiAvailable=void 0,this.versionInfo=void 0}render(){const{strings:{actions:i},versionInfo:e}=this,n=e.versionIdentifier.name,o=e.versionIdentifier.guid,c=`actionSwitchToVersion_${o}`;return t(s,null,t("calcite-list-item",{description:n.split(".")[0],label:n.split(".")[1],value:o},t("calcite-action",{id:c,icon:"switch",text:"",onClick:()=>{this.versionItemActionClickedEvent.emit({actionType:"changeVersion",versionInfo:e})},slot:"actions-start"}),t("calcite-tooltip",{"overlay-positioning":"fixed",referenceElement:c},t("span",null,i.switchToVersion)),t("calcite-action-menu",{"overlay-positioning":"fixed",slot:"actions-end",label:""},t("calcite-action",{icon:"switch",onClick:()=>{this.versionItemActionClickedEvent.emit({actionType:"changeVersion",versionInfo:e})},scale:"s",text:i.switchToVersion,textEnabled:!0}),t("calcite-action",{disabled:"SDE.DEFAULT"===n.toUpperCase()||!this.hasAdvEditingUte||!this.isVersioningApiAvailable,icon:"edit-attributes",onClick:()=>{this.versionItemActionClickedEvent.emit({actionType:"editVersion",versionInfo:e})},scale:"s",text:i.editVersion,textEnabled:!0}))))}get _hostElement(){return n(this)}},a=class{constructor(t){i(this,t),this.versionItemActionClickedEventWithServiceUrl=e(this,"versionItemActionClickedEventWithServiceUrl",7),this.versionListActionClickedEvent=e(this,"versionListActionClickedEvent",7),this._watchHandles=[],this.heading=void 0,this.serviceName=void 0,this.serviceUrl=void 0,this.strings=void 0,this.userHasAdvancedEditingUserTypeExtension=void 0,this.versionInfos=void 0,this.viewModel=void 0,this.state=void 0}async componentDidLoad(){const{watch:i}=await o();this._watchHandles.push(i((()=>this.versionInfos),(i=>{this.versionInfos=i})),i((()=>this.viewModel.state),(i=>{this.state=i})))}async componentWillLoad(){this.state=this.viewModel.state}disconnectedCallback(){this._watchHandles.forEach((i=>{i.remove()})),this._watchHandles=[]}render(){const{heading:i,serviceName:e,serviceUrl:n,state:o,strings:c,versionInfos:a,viewModel:r}=this,l=r.versionIdentifierLookup.get(n);return t(s,null,t("calcite-flow-item",{heading:i,description:e},l?t("calcite-panel",{disabled:"executing"===o,class:"panel-versions",heading:"Current version",description:l.name}):void 0,t("calcite-panel",{loading:"executing"===o,class:"panel-versions",heading:a.length?`${c.headers.manageVersions} (${a.length})`:c.headers.manageVersions},t("calcite-action",{id:"actionRefreshVersions",icon:"refresh",text:"",onClick:()=>{this.versionListActionClickedEvent.emit({actionType:"refreshVersions",serviceUrl:n})},slot:"header-actions-end"}),t("calcite-tooltip",{"overlay-positioning":"fixed",referenceElement:"actionRefreshVersions"},t("span",null,c.actions.refreshVersions)),t("calcite-list",{class:"version-list",filterEnabled:!0},a.map((i=>t("arcgis-version-management-version-item",{strings:c,hasAdvEditingUte:r.advancedEditingUserTypeExtensionLookup.get(n),isVersioningApiAvailable:(r.serverVersionLookup.get(n)??0)>=11.2,versionInfo:i,onVersionItemActionClickedEvent:i=>{this.versionItemActionClickedEventWithServiceUrl.emit({...i.detail,serviceUrl:n})}})))),t("calcite-fab",{appearance:"outline-fill",slot:"fab",textEnabled:!0,text:c.actions.newVersion,onClick:()=>{this.versionListActionClickedEvent.emit({actionType:"newVersion",serviceUrl:n})}}))))}get _hostElement(){return n(this)}};export{c as arcgis_version_management_version_item,a as arcgis_version_management_version_list}