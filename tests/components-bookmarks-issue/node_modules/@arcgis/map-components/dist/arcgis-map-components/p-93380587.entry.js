/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.30/esri/copyright.txt for details.
 * v4.30.0-next.13
 */
import{r as i,c as t,h as s,g as h}from"./p-7d3260b2.js";import{i as e,P as a,Q as r}from"./p-af31b1ec.js";import{i as o,e as n,f as c,b as d,g as l,a as p}from"./p-088ec939.js";const v=class{constructor(s){i(this,s),this.arcgisViewReadyChange=t(this,"arcgisViewReadyChange",7),this.arcgisViewChange=t(this,"arcgisViewChange",7),this.arcgisViewClick=t(this,"arcgisViewClick",7),this.arcgisViewDoubleClick=t(this,"arcgisViewDoubleClick",7),this.arcgisViewDrag=t(this,"arcgisViewDrag",7),this.arcgisViewHold=t(this,"arcgisViewHold",7),this.arcgisViewImmediateClick=t(this,"arcgisViewImmediateClick",7),this.arcgisViewImmediateDoubleClick=t(this,"arcgisViewImmediateDoubleClick",7),this.arcgisViewKeyDown=t(this,"arcgisViewKeyDown",7),this.arcgisViewKeyUp=t(this,"arcgisViewKeyUp",7),this.arcgisViewLayerviewCreate=t(this,"arcgisViewLayerviewCreate",7),this.arcgisViewLayerviewCreateError=t(this,"arcgisViewLayerviewCreateError",7),this.arcgisViewLayerviewDestroy=t(this,"arcgisViewLayerviewDestroy",7),this.arcgisViewMouseWheel=t(this,"arcgisViewMouseWheel",7),this.arcgisViewPointerDown=t(this,"arcgisViewPointerDown",7),this.arcgisViewPointerEnter=t(this,"arcgisViewPointerEnter",7),this.arcgisViewPointerLeave=t(this,"arcgisViewPointerLeave",7),this.arcgisViewPointerMove=t(this,"arcgisViewPointerMove",7),this.arcgisViewPointerUp=t(this,"arcgisViewPointerUp",7),this._watchHandles=[],this.allLayerViews=void 0,this.alphaCompositingEnabled=!1,this.analyses=void 0,this.basemapView=void 0,this.basemap=void 0,this.camera=void 0,this.center=void 0,this.clippingArea=void 0,this.constraints=void 0,this.destroyDisabled=!1,this.environment=void 0,this.extent=void 0,this.fatalError=void 0,this.floors=void 0,this.gamepad=void 0,this.graphics=void 0,this.ground=void 0,this.groundView=void 0,this.highlightOptions=void 0,this.interacting=!1,this.itemId=void 0,this.layerViews=void 0,this.magnifier=void 0,this.map=void 0,this.navigating=!1,this.navigation=void 0,this.padding=void 0,this.performanceInfo=void 0,this.popup=void 0,this.popupEnabled=!0,this.qualityProfile=void 0,this.ready=!1,this.resolution=void 0,this.scale=void 0,this.spatialReference=void 0,this.stationary=void 0,this.suspended=!1,this.theme=void 0,this.timeExtent=void 0,this.toMap=void 0,this.toScreen=void 0,this.updating=!1,this.viewingMode="global",this.viewpoint=void 0,this.zoom=void 0,this.view=void 0}alphaCompositingEnabledWatcher(i){void 0!==i&&this.view&&(this.view.alphaCompositingEnabled=i)}basemapWatcher(i){("string"==typeof i&&this.view?.map&&!o(i)||this.view?.map)&&(this.view.map.basemap=i)}cameraWatcher(i){this.view&&i&&n(this.view.camera,i)&&(this.view.camera=i)}centerWatcher(i,t){if(i!==t&&this.view)if("string"==typeof i){const t=i.split(",").map((i=>Number(i)));t[0]!==this.view.center.longitude&&t[1]!==this.view.center.latitude&&(this.view.center=t)}else Array.isArray(i)?i[0]!==this.view.center.longitude&&i[1]!==this.view.center.latitude&&(this.view.center=i):this.view.center.equals(i)||(this.view.center=i)}clippingAreaWatcher(i){this.view&&i&&!this.view.clippingArea?.equals(i)&&(this.view.clippingArea=i)}constraintsWatcher(i){this.view&&(this.view.constraints=i)}environmentWatcher(i){this.view&&i&&c(this.view.environment,i)&&(this.view.environment=i)}extentWatcher(i){this.view&&i&&!this.view.extent.equals(i)&&(this.view.extent=i)}floorsWatcher(i){this.view&&(this.view.floors=i)}graphicsWatcher(i){this.view&&(this.view.graphics=i)}groundWatcher(i){this.view?.map&&!o(i)&&(this.view.map.ground=i)}highlightOptionsWatcher(i){this.view&&(this.view.highlightOptions=i)}itemIdWatcher(i,t){i!==t&&(this.view?.map?this._updateMap():this._loadMap())}mapWatcher(i){this.view&&(this.view.map=i)}navigationWatcher(i){this.view&&(this.view.navigation=i)}paddingWatcher(i){this.view&&(this.view.padding=i)}popupWatcher(i){this.view&&(this.view.popup=i)}popupEnabledWatcher(i,t){i!==t&&this.view&&(this.view.popupEnabled=i)}qualityProfileWatcher(i){this.view&&this.view.qualityProfile!==i&&(this.view.qualityProfile=i)}scaleWatcher(i,t){this.view&&this.view.stationary&&!this.view.interacting&&null!=i&&i!==t&&(this.view.scale=i)}spatialReferenceWatcher(i){this.view&&i&&!this.view.spatialReference.equals(i)&&(this.view.spatialReference=i)}themeWatcher(i){this.view&&(this.view.theme=i)}timeExtentWatcher(i){this.view&&(this.view.timeExtent=i)}viewingModeWatcher(i){this.view&&(this.view.viewingMode=i)}viewpointWatcher(i){this.view&&d(this.view.viewpoint,i)&&(this.view.viewpoint=i)}zoomWatcher(i,t){this.view&&this.view.stationary&&!this.view.interacting&&i!==t&&l(i)&&(this.view.zoom=i)}async closePopup(){this.view?.closePopup()}async destroy(){this.destroyDisabled&&(this._clearWatchHandles(),this.view.destroy())}async goTo(i,t){return await(this.view?.goTo(i,t))}async hitTest(i,t){return await(this.view?.hitTest(i,t))}async openPopup(i){return await(this.view?.openPopup(i))}async takeScreenshot(i){return await(this.view?.takeScreenshot(i))}async tryFatalErrorRecovery(){this.view?.tryFatalErrorRecovery()}async whenAnalysisView(i){return await(this.view?.whenAnalysisView(i))}async whenLayerView(i){return await(this.view?.whenLayerView(i))}async componentWillLoad(){this.view||await this._loadMap()}componentDidRender(){this.view&&!this.view.container&&(this.view.container=this.el)}componentDidLoad(){this._proxyEvents()}disconnectedCallback(){this.destroy()}render(){return s("div",{class:"arcgis-scene",ref:i=>this.el=i})}_clearWatchHandles(){this._watchHandles.forEach((i=>i.remove())),this._watchHandles=[]}async _addWatchers(){const{watch:i,when:t}=await e();p(this,[i((()=>this.view.stationary),(()=>{this.stationary=this.view.stationary,this.interacting=this.view.interacting,this.navigating=this.view.navigating,this.arcgisViewChange.emit()}),{initial:!0}),t((()=>this.view.stationary),(()=>{this.camera=this.view.camera,this.center=this.view.center,this.extent=this.view.extent,this.scale=this.view.scale,this.viewpoint=this.view.viewpoint,this.zoom=this.view.zoom,this.spatialReference=this.view.spatialReference})),i((()=>this.view.allLayerViews),(()=>{this.allLayerViews=this.view.allLayerViews}),{initial:!0}),i((()=>this.view.analyses),(()=>{this.analyses=this.view.analyses}),{initial:!0}),i((()=>this.view.map?.basemap),(()=>{this.basemap=this.view.map?.basemap}),{initial:!0}),i((()=>this.view.basemapView),(()=>{this.basemapView=this.view.basemapView}),{initial:!0}),i((()=>this.view.environment),(()=>{this.environment=this.view.environment}),{initial:!0}),i((()=>this.view.fatalError),(()=>{this.fatalError=this.view.fatalError}),{initial:!0}),i((()=>this.view.input.gamepad),(()=>{this.gamepad=this.view.input.gamepad}),{initial:!0}),i((()=>this.view.graphics),(()=>{this.graphics=this.view.graphics}),{initial:!0}),i((()=>this.view.map?.ground),(()=>{this.ground=this.view.map?.ground}),{initial:!0}),i((()=>this.view.groundView),(()=>{this.groundView=this.view.groundView}),{initial:!0}),i((()=>this.view.interacting),(()=>{this.interacting=this.view.interacting})),i((()=>this.view.navigating),(()=>{this.navigating=this.view.navigating})),i((()=>this.view.stationary),(()=>{this.stationary=this.view.stationary})),i((()=>this.view.layerViews),(()=>{this.layerViews=this.view.layerViews}),{initial:!0}),i((()=>this.view.navigation),(()=>{this.navigation=this.view.navigation}),{initial:!0}),i((()=>this.view.map),(()=>{this.map=this.view.map}),{initial:!0}),i((()=>this.view.performanceInfo),(()=>{this.performanceInfo=this.view.performanceInfo})),i((()=>this.view.popup),(()=>{this.popup=this.view.popup}),{initial:!0}),i((()=>this.view.qualityProfile),(()=>{this.qualityProfile=this.view.qualityProfile}),{initial:!0}),i((()=>this.view.resolution),(()=>{this.resolution=this.view.resolution}),{initial:!0}),i((()=>this.view.suspended),(()=>{this.suspended=this.view.suspended}),{initial:!0}),i((()=>this.view.updating),(()=>{this.updating=this.view.updating}),{initial:!0}),i((()=>this.view.ready),(()=>{this.ready=this.view.ready,this.arcgisViewReadyChange.emit()}),{initial:!0})])}async _createMap(){const i={};return this.itemId&&(i.portalItem=await this._createPortalItem()),this.basemap?i.basemap=this.basemap:o(this.itemId)&&(i.basemap="topo-vector"),this.ground?i.ground=this.ground:o(this.itemId)&&(i.ground="world-elevation"),await a(i)}async _createPortalItem(){const i={};return this.itemId&&(i.id=this.itemId),i}_createViewParams(){const i={};return this.center&&(i.center="string"==typeof this.center?this.center.split(",").map((i=>Number(i))):this.center),this.constraints&&(i.constraints=this.constraints),this.extent&&(i.extent=this.extent),this.floors&&(i.floors=this.floors),this.graphics&&(i.graphics=this.graphics),this.highlightOptions&&(i.highlightOptions=this.highlightOptions),this.map&&(i.map=this.map),this.navigation&&(i.navigation=this.navigation),this.padding&&(i.padding=this.padding),this.popup&&(i.popup=this.popup),void 0!==this.popupEnabled&&(i.popupEnabled=this.popupEnabled),void 0!==this.scale&&(i.scale=this.scale),this.spatialReference&&(i.spatialReference=this.spatialReference),this.theme&&(i.theme=this.theme),this.timeExtent&&(i.timeExtent=this.timeExtent),this.viewpoint&&(i.viewpoint=this.viewpoint),void 0!==this.zoom&&(i.zoom=this.zoom),i}async _loadMap(){const i=await this._createMap(),t=this._createViewParams(),s=await r({map:i,...t});this.view=s,s.when((async()=>{this.toMap=s.toMap.bind(s),this.toScreen=s.toScreen.bind(s),await this._addWatchers()}))}_proxyEvents(){p(this,[this.view.on("click",(i=>{this.arcgisViewClick.emit(i)})),this.view.on("double-click",(i=>{this.arcgisViewDoubleClick.emit(i)})),this.view.on("drag",(i=>{this.arcgisViewDrag.emit(i)})),this.view.on("hold",(i=>{this.arcgisViewHold.emit(i)})),this.view.on("immediate-click",(i=>{this.arcgisViewImmediateClick.emit(i)})),this.view.on("immediate-double-click",(i=>{this.arcgisViewImmediateDoubleClick.emit(i)})),this.view.on("key-down",(i=>{this.arcgisViewKeyDown.emit(i)})),this.view.on("key-up",(i=>{this.arcgisViewKeyUp.emit(i)})),this.view.on("layerview-create",(i=>{this.arcgisViewLayerviewCreate.emit(i)})),this.view.on("layerview-create-error",(i=>{this.arcgisViewLayerviewCreateError.emit(i)})),this.view.on("layerview-destroy",(i=>{this.arcgisViewLayerviewDestroy.emit(i)})),this.view.on("mouse-wheel",(i=>{this.arcgisViewMouseWheel.emit(i)})),this.view.on("pointer-down",(i=>{this.arcgisViewPointerDown.emit(i)})),this.view.on("pointer-enter",(i=>{this.arcgisViewPointerEnter.emit(i)})),this.view.on("pointer-leave",(i=>{this.arcgisViewPointerLeave.emit(i)})),this.view.on("pointer-move",(i=>{this.arcgisViewPointerMove.emit(i)})),this.view.on("pointer-up",(i=>{this.arcgisViewPointerUp.emit(i)}))])}async _updateMap(){if(this.view?.map){this.view.map.destroy();const i=await this._createMap();this.view.map=i}}get _hostElement(){return h(this)}static get watchers(){return{alphaCompositingEnabled:["alphaCompositingEnabledWatcher"],basemap:["basemapWatcher"],camera:["cameraWatcher"],center:["centerWatcher"],clippingArea:["clippingAreaWatcher"],constraints:["constraintsWatcher"],environment:["environmentWatcher"],extent:["extentWatcher"],floors:["floorsWatcher"],graphics:["graphicsWatcher"],ground:["groundWatcher"],highlightOptions:["highlightOptionsWatcher"],itemId:["itemIdWatcher"],map:["mapWatcher"],navigation:["navigationWatcher"],padding:["paddingWatcher"],popup:["popupWatcher"],popupEnabled:["popupEnabledWatcher"],qualityProfile:["qualityProfileWatcher"],scale:["scaleWatcher"],spatialReference:["spatialReferenceWatcher"],theme:["themeWatcher"],timeExtent:["timeExtentWatcher"],viewingMode:["viewingModeWatcher"],viewpoint:["viewpointWatcher"],zoom:["zoomWatcher"]}}};v.style=".arcgis-scene{padding:0;margin:0;height:100%;width:100%}";export{v as arcgis_scene}