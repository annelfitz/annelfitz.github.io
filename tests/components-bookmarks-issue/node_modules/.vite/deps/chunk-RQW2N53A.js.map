{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js", "../../@arcgis/core/views/3d/webgl-engine/lib/testUtils.js", "../../@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{fromValues as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";class s{constructor(r,s){this.vec3=r,this.id=s}}function t(t,o,c,e){return new s(r(t,o,c),e)}export{s as LocalOrigin,t as fromValues};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst n={stableRendering:!1},e={rootOrigin:null};export{e as gridLocalOriginFactory,n as textTextureAtlas};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{generateUID as t}from\"../../../../core/uid.js\";import{f as i}from\"../../../../chunks/vec32.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as o}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectBuffer as s}from\"../../../../geometry/projection/projectBuffer.js\";import{Attribute as e}from\"./Attribute.js\";import{ContentObjectType as n}from\"./ContentObjectType.js\";import{Geometry as a}from\"./Geometry.js\";import{fromValues as h}from\"./LocalOriginFactory.js\";import{Object3D as m}from\"./Object3D.js\";import{gridLocalOriginFactory as c}from\"./testUtils.js\";import{VertexAttribute as g}from\"./VertexAttribute.js\";import{WebGLLayer as d}from\"./WebGLLayer.js\";import{RibbonLineMaterial as f}from\"../materials/RibbonLineMaterial.js\";class _{constructor(i){this._originSR=i,this._rootOriginId=\"root/\"+t(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=c.rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,h(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=h(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),a=`${s}/${e}/${n}`;let m=this._origins.get(a);const g=.5*o;if(i(l,t,r.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]),l[0]<g&&l[1]<g&&l[2]<g){if(m){const r=Math.max(...l);i(l,t,m.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]);if(Math.max(...l)<r)return m}return r}return m||(m=h(s*o,e*o,n*o,a),this._origins.set(a,m)),m}_drawOriginBox(t,i=o(1,1,0,1)){const r=window.view,h=r._stage,c=i.toString();if(!this._objects.has(c)){this._material=new f({width:2,color:i}),h.add(this._material);const t=new d(h,{pickable:!1}),r=new m({castShadow:!1});h.add(r),t.add(r),this._objects.set(c,r)}const _=this._objects.get(c),l=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],p=l.length,j=new Array(3*p),b=new Array,u=.5*this._gridSize;for(let o=0;o<p;o++)j[3*o]=t[0]+(1&l[o]?u:-u),j[3*o+1]=t[1]+(2&l[o]?u:-u),j[3*o+2]=t[2]+(4&l[o]?u:-u),o>0&&b.push(o-1,o);s(j,this._originSR,0,j,r.renderSpatialReference,0,p);const M=new a(this._material,[[g.POSITION,new e(j,b,3,!0)]],null,n.Line);h.add(M),_.addGeometry(M)}get test(){const t=this;return{set gridSize(i){t._gridSize=i}}}}const l=r();export{_ as GridLocalOriginFactory};\n"],
  "mappings": "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",
  "names": ["r", "s", "t", "e", "n", "e", "t", "r", "e", "s", "n", "a", "_", "l"]
}
