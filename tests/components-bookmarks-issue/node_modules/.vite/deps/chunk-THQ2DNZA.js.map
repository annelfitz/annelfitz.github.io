{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/LayerList/LayerListViewModel.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Collection.js\";import s from\"../../core/Evented.js\";import{watch as i,initial as r}from\"../../core/reactiveUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"./ListItem.js\";import{getItemLayers as n,findLayerListMode as m}from\"./support/layerListUtils.js\";const c={view:\"view\",viewLayers:\"view-layers\",mapLayers:\"map-layers\",layerViews:\"layer-views\",layerListMode:\"layer-list-mode\"},d=\"hide\",h=t.ofType(l);let p=class extends s.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new h,this.view=null}initialize(){this.addHandles([i((()=>!0===this.view?.ready),(()=>this._viewHandles()),r),i((()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled]),(()=>this._recompileList()))],c.view)}destroy(){this.view=null,this.operationalItems.removeAll()}get state(){const{view:e}=this;return e?.ready?\"ready\":e?\"loading\":\"disabled\"}get totalItems(){return this.operationalItems.flatten((e=>e.children)).length}triggerAction(e,t){e&&!e.disabled&&this.emit(\"trigger-action\",{action:e,item:t})}moveListItem(e,t,s,i){const r=e?.layer;if(!r||\"subtype-sublayer\"===r.type)return;const a=this.view?.map?.layers,o=t?n(t):a,l=s?n(s):a;if(!o||!l)return;const{operationalItems:m}=this,c=t?.children||m,d=s?.children||m,h=l.length-i;e.parent=s||null,c.remove(e),o.remove(r),d.includes(e)||d.add(e,h),l.includes(r)||l.add(r,h),this._compileList()}_createLayerViewHandles(e){this.removeHandles(c.layerViews),this._compileList(),e&&this.addHandles(e.on(\"change\",(()=>this._compileList())),c.layerViews)}_createMapLayerHandles(e){this.removeHandles(c.mapLayers),this._compileList(),e&&this.addHandles(e.on(\"change\",(()=>this._compileList())),c.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:s,checkPublishStatusEnabled:i}=this;return new l({checkPublishStatusEnabled:i,layer:e,listItemCreatedFunction:s,view:t})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter((e=>m(e)!==d))}_watchLayersListMode(e){this.removeHandles(c.layerListMode),e&&e.forEach((e=>{\"listMode\"in e&&this.addHandles(i((()=>e.listMode),(()=>this._compileList())),c.layerListMode)}))}_compileList(){const e=this.view?.map?.layers;this._watchLayersListMode(e);const t=this._getViewableLayers(e);t?.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach((e=>{t.some((t=>t.layer===e))||t.add(this._createListItem(e))}))}_removeItems(e){const{operationalItems:t}=this,s=[];t.forEach((t=>{t&&e&&e.includes(t.layer)||s.push(t)})),t.removeMany(s)}_sortItems(e){const{operationalItems:t}=this;t.sort(((t,s)=>{const i=e.indexOf(t.layer),r=e.indexOf(s.layer);return i>r?-1:i<r?1:0}))}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([c.mapLayers,c.layerViews,c.viewLayers]),e?.ready?this.addHandles([i((()=>this.view?.map?.allLayers),(e=>this._createMapLayerHandles(e)),r),i((()=>this.view?.allLayerViews),(e=>this._createLayerViewHandles(e)),r)],c.viewLayers):this._removeAllItems()}};e([a()],p.prototype,\"checkPublishStatusEnabled\",void 0),e([a()],p.prototype,\"listItemCreatedFunction\",void 0),e([a({type:h})],p.prototype,\"operationalItems\",void 0),e([a({readOnly:!0})],p.prototype,\"state\",null),e([a()],p.prototype,\"totalItems\",null),e([a()],p.prototype,\"view\",void 0),p=e([o(\"esri.widgets.LayerList.LayerListViewModel\")],p);const y=p;export{y as default};\n"],
  "mappings": "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",
  "names": ["d", "h", "e", "a", "o", "c", "t", "y"]
}
