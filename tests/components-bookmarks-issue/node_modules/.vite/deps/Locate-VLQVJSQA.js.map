{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/Locate/LocateViewModel.js", "../../@arcgis/core/widgets/Locate.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../intl.js\";import e from\"../../PopupTemplate.js\";import o from\"../../core/Error.js\";import{isAbortError as r}from\"../../core/promiseUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{removeSelectedFeature as l}from\"../Popup/actions.js\";import s from\"../support/GeolocationPositioning.js\";import{getCurrentPosition as c}from\"../support/geolocationUtils.js\";import{onLocaleChange as p}from\"../../intl/locale.js\";import{fetchMessageBundle as n}from\"../../intl/messages.js\";async function d(){const t=await n(\"esri/widgets/Locate/t9n/Locate\");return new e({title:t.currentLocation,fieldInfos:[{fieldName:\"timestamp\",label:t.timestamp,format:{dateFormat:\"short-date-short-time\"}},{fieldName:\"latitude\",label:t.latitude,format:{places:4,digitSeparator:!0}},{fieldName:\"longitude\",label:t.longitude,format:{places:4,digitSeparator:!0}},{fieldName:\"accuracy\",label:t.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:\"altitude\",label:t.altitude,format:{places:0,digitSeparator:!0}},{fieldName:\"altitudeAccuracy\",label:t.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:\"heading\",label:t.heading,format:{places:0,digitSeparator:!0}},{fieldName:\"speed\",label:t.speed,format:{places:0,digitSeparator:!0}}],actions:[l.clone()],content:[{type:\"fields\"}]})}let u=class extends s{constructor(t){super(t),this._locateController=null,this.error=void 0,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([p((()=>{const{graphic:t,view:e}=this;if(!t)return;const o=e?.graphics?.includes(t);o&&this._updatePopupTemplate(t)}))])}destroy(){this.cancelLocate()}get state(){return this._geolocationUsable?this.view?.ready?this._locateController?\"locating\":null!=this.error?\"error\":\"ready\":\"disabled\":\"feature-unsupported\"}async locate(){if(this.cancelLocate(),\"disabled\"===this.state)throw new o(\"locate:disabled-state\",\"Cannot locate when disabled.\");if(\"feature-unsupported\"===this.state)throw new o(\"locate:feature-unsupported-state\",\"Cannot locate in unsecure domain.\");const t=new AbortController;this._locateController=t,this.error=void 0;try{const e=await c(this.geolocationOptions);if(await this.updatePosition(e,t),this._locateController!==t)return null;const{graphic:o}=this;return o&&await this._updatePopupTemplate(o),this._addGraphic(),this.emit(\"locate\",{position:e}),this._locateController=null,e}catch(e){if(r(e))return null;throw t===this._locateController&&(this._locateController=null),this.error=e,this.emit(\"locate-error\",{error:e}),e}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(t){if(!this.popupEnabled)return;const e=await d(),o=t!==this.graphic;this.destroyed||o||(t.popupTemplate=e)}};t([a()],u.prototype,\"_locateController\",void 0),t([a()],u.prototype,\"error\",void 0),t([a()],u.prototype,\"popupEnabled\",void 0),t([a({readOnly:!0})],u.prototype,\"state\",null),t([a()],u.prototype,\"locate\",null),t([a()],u.prototype,\"cancelLocate\",null),u=t([i(\"esri.widgets.Locate.LocateViewModel\")],u);const m=u;export{m as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{deprecatedProperty as o}from\"../core/deprecate.js\";import t from\"../core/Logger.js\";import{property as i}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import r from\"./Widget.js\";import l from\"./Locate/LocateViewModel.js\";import{loadCalciteComponents as n}from\"./support/componentsUtils.js\";import{globalCss as a}from\"./support/globalCss.js\";import{legacyIcon as c}from\"./support/legacyIcon.js\";import\"./support/widgetUtils.js\";import{messageBundle as p}from\"./support/decorators/messageBundle.js\";import{vmEvent as d}from\"./support/decorators/vmEvent.js\";import{tsx as m}from\"./support/jsxFactory.js\";const g={base:\"esri-locate\"},u=\"gps-off\";let v=class extends r{constructor(e,o){super(e,o),this.messages=null,this.messagesCommon=null,this.viewModel=new l,this._locate=()=>{const{viewModel:e}=this;\"locating\"===e.state?e.cancelLocate():e.locate().catch((()=>{}))}}loadDependencies(){return n({button:()=>import(\"@esri/calcite-components/dist/components/calcite-button.js\"),loader:()=>import(\"@esri/calcite-components/dist/components/calcite-loader.js\"),tooltip:()=>import(\"@esri/calcite-components/dist/components/calcite-tooltip.js\")})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(e){this.viewModel.geolocationOptions=e}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(e){this.viewModel.goToLocationEnabled=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get icon(){return\"compass\"}set icon(e){this._overrideIfSome(\"icon\",e)}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get rotationEnabled(){return o(t.getLogger(this),\"rotationEnabled\",{replacement:\"use Track widget\",version:\"4.29\",warnOnce:!0}),this.viewModel.rotationEnabled}set rotationEnabled(e){o(t.getLogger(this),\"rotationEnabled\",{replacement:\"use Track widget\",version:\"4.29\",warnOnce:!0}),this.viewModel.rotationEnabled=e}get scale(){return this.viewModel.scale}set scale(e){this.viewModel.scale=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){const{viewModel:e,icon:o}=this,{state:t}=e,i=\"locating\"===t,s=i?this.messagesCommon.cancel:this.messages.title,r=\"feature-unsupported\"===t,l=void 0===c?u:void 0,n=this._localizeError(this.viewModel?.error);return m(\"div\",{class:this.classes(g.base,a.widget)},!r&&m(\"calcite-button\",{class:a.widgetButton,disabled:\"disabled\"===t,iconStart:i?void 0:o??l,kind:\"neutral\",label:s,onclick:this._locate,title:s},i?m(\"calcite-loader\",{inline:!0,label:\"\"}):null),n?m(\"calcite-tooltip\",{open:!0,overlayPositioning:\"fixed\",referenceElement:this.container},n):null)}_localizeError(e){return e instanceof GeolocationPositionError?e.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:e.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable:e instanceof Error?e.message:void 0}};e([i()],v.prototype,\"geolocationOptions\",null),e([i()],v.prototype,\"goToLocationEnabled\",null),e([i()],v.prototype,\"goToOverride\",null),e([i()],v.prototype,\"graphic\",null),e([i()],v.prototype,\"icon\",null),e([i()],v.prototype,\"label\",null),e([i(),p(\"esri/widgets/Locate/t9n/Locate\")],v.prototype,\"messages\",void 0),e([i(),p(\"esri/t9n/common\")],v.prototype,\"messagesCommon\",void 0),e([i()],v.prototype,\"popupEnabled\",null),e([i()],v.prototype,\"rotationEnabled\",null),e([i()],v.prototype,\"scale\",null),e([i()],v.prototype,\"view\",null),e([i({type:l}),d([\"locate\",\"locate-error\"])],v.prototype,\"viewModel\",void 0),v=e([s(\"esri.widgets.Locate\")],v);const h=v;export{h as default};\n"],
  "mappings": "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",
  "names": ["r", "b", "e", "o", "u", "e", "o", "i", "s", "r", "n", "h"]
}
