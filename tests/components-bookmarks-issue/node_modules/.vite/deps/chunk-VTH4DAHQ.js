import {
  f
} from "./chunk-CZSTCON2.js";
import {
  I,
  St,
  V,
  _,
  qt,
  x
} from "./chunk-SAYWXQVM.js";

// node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js
var i = { mapserver: "MapServer", imageserver: "ImageServer", featureserver: "FeatureServer", sceneserver: "SceneServer", streamserver: "StreamServer", vectortileserver: "VectorTileServer", "3dtilesserver": "3DTilesServer" };
var o = Object.values(i);
var c = new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`, "i");
var a = new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`, "i");
var f2 = /(.*?)\/(?:layers\/)?(\d+)\/?$/i;
function v(e) {
  return !!c.test(e);
}
function p(r) {
  if (null == r)
    return null;
  const t = I(r), s = (t == null ? void 0 : t.path.match(c)) || (t == null ? void 0 : t.path.match(a));
  if (!s)
    return null;
  const [, n, l, u, o2] = s, f3 = l.indexOf("/");
  return { title: m(-1 !== f3 ? l.slice(f3 + 1) : l), serverType: i[u.toLowerCase()], sublayer: null != o2 && "" !== o2 ? parseInt(o2, 10) : null, url: { path: n } };
}
function d(r) {
  const t = I(r).path.match(f2);
  return t ? { serviceUrl: t[1], sublayerId: Number(t[2]) } : null;
}
function m(e) {
  return (e = e.replaceAll(/\s*[/_]+\s*/g, " "))[0].toUpperCase() + e.slice(1);
}
function h(e, r) {
  const t = [];
  if (e) {
    const r2 = p(e);
    null != r2 && r2.title && t.push(r2.title);
  }
  if (r) {
    const e2 = m(r);
    t.push(e2);
  }
  if (2 === t.length) {
    if (t[0].toLowerCase().includes(t[1].toLowerCase()))
      return t[0];
    if (t[1].toLowerCase().includes(t[0].toLowerCase()))
      return t[1];
  }
  return t.join(" - ");
}
function w(e) {
  if (!e)
    return false;
  const r = ".arcgis.com/", t = "//services", s = "//tiles", n = "//features", l = (e = e.toLowerCase()).includes(r), u = e.includes(t) || e.includes(s) || e.includes(n);
  return l && u;
}
function y(e, s) {
  return e ? qt(St(e, s)) : e;
}
function g(s) {
  let { url: n } = s;
  if (!n)
    return { url: n };
  n = St(n, s.logger);
  const l = I(n), u = p(l.path);
  let i2;
  if (null != u)
    null != u.sublayer && null == s.layer.layerId && (i2 = u.sublayer), n = u.url.path;
  else if (s.nonStandardUrlAllowed) {
    const e = d(l.path);
    null != e && (n = e.serviceUrl, i2 = e.sublayerId);
  }
  return { url: qt(n), layerId: i2 };
}
function S(e, r, t, n, l) {
  f(r, n, "url", l), n.url && null != e.layerId && (n.url = V(n.url, t, e.layerId.toString()));
}
function C(e) {
  if (!e)
    return false;
  const r = e.toLowerCase(), t = r.includes("/services/"), s = r.includes("/mapserver/wmsserver"), n = r.includes("/imageserver/wmsserver"), l = r.includes("/wmsserver");
  return t && (s || n || l);
}
function b(e) {
  var _a;
  if (!e)
    return false;
  const r = new x(_(e)), t = (_a = r.authority) == null ? void 0 : _a.toLowerCase();
  return "server.arcgisonline.com" === t || "services.arcgisonline.com" === t;
}

export {
  v,
  p,
  d,
  m,
  h,
  w,
  y,
  g,
  S,
  C,
  b
};
//# sourceMappingURL=chunk-VTH4DAHQ.js.map
