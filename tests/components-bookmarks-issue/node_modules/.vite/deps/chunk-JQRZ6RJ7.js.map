{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/graphics/sources/support/uploadProgressWeights.js", "../../@arcgis/core/support/progressUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst e={upload:{createFromFiles:.8,loadMesh:.2},uploadAssetBlobs:{prepareAssetItems:.9,uploadAssetItems:.1},uploadConvertibleSource:{uploadEditSource:.5,serviceAssetsToGlb:.5},uploadLocalMesh:{meshToAssetBlob:.5,uploadAssetBlobs:.5}};export{e as uploadProgressWeights};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{makeHandle as s}from\"../core/handleUtils.js\";import has from\"../core/has.js\";import{getOrCreateMapValue as t}from\"../core/MapUtils.js\";import{millisecondsFromSeconds as e,Seconds as r,Milliseconds as o}from\"../core/time.js\";function i(s,t=(s=>{}),e){return new n(s,t,e)}class n{constructor(s,t=(s=>{}),e){if(this.onProgress=t,this.taskName=e,this._progressMap=new Map,this._startTime=void 0,this._timingsMap=new Map,\"number\"==typeof s){this._weights={};for(let t=0;t<s;t++){const e=t,r=1/s;this._weights[e]=r,this._progressMap.set(e,0)}}else this._weights=s;this.emitProgress()}emitProgress(){let s=0;for(const[t,e]of this._progressMap.entries()){s+=e*this._weights[t]}if(1===s&&has(\"enable-feature:esri-3dofl-upload-timings\")){const s=Math.round(performance.now()-(this._startTime??0))/1e3;console.log(`${this.taskName} done in ${s} sec`);for(const[t,e]of this._timingsMap){const r=Math.round(e.end-e.start)/1e3,o=Math.round(r/s*100);console.log(this.taskName??\"Task\",{stepKey:t,stepTime:r,relativeTime:o})}}this.onProgress(s)}setProgress(s,e){if(this._progressMap.set(s,e),has(\"enable-feature:esri-3dofl-upload-timings\")){const r=performance.now();this._startTime??=r;const o=t(this._timingsMap,s,(()=>({start:r,end:0})));1===e&&(o.end=r)}this.emitProgress()}simulate(s,t){return a((t=>this.setProgress(s,t)),t)}makeOnProgress(s){return t=>this.setProgress(s,t)}}function a(t=(s=>{}),e=l){const r=performance.now();t(0);const o=setInterval((()=>{const s=performance.now()-r,o=1-Math.exp(-s/e);t(o)}),g);return s((()=>{clearInterval(o),t(1)}))}function h(s,t=c){return e(r(s*f/t))}function m(s,t=p){return e(r(s*f/t))}const c=10,p=10,f=8e-6,g=o(50),l=o(1e3);export{n as ProgressManager,m as estimatedConversionTime,h as estimatedTransferTime,i as makeProgressManager,a as simulateProgress};\n"],
  "mappings": "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",
  "names": ["e", "t", "s", "e", "n", "r", "o"]
}
