{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/knowledgeGraph/SessionMemoryStorage.js", "../../@arcgis/core/rest/knowledgeGraph/ProtoFeatureCollection.js", "../../@arcgis/core/rest/knowledgeGraph/wasmInterface/WasmSerializedLayerData.js", "../../@arcgis/core/layers/knowledgeGraph/supportUtils.js", "../../@arcgis/core/layers/knowledgeGraph/KnowledgeGraphLayerDataManager.js", "../../@arcgis/core/layers/knowledgeGraph/KnowledgeGraphSublayerBase.js", "../../@arcgis/core/layers/knowledgeGraph/KnowledgeGraphSublayer.js", "../../@arcgis/core/libs/linkchartlayout/LinkChartLayout.js", "../../@arcgis/core/layers/LinkChartLayer.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{convertFromGeometry as e}from\"../graphics/featureConversionUtils.js\";import{OptimizedFeature as t}from\"../graphics/OptimizedFeature.js\";import{fromJSON as r}from\"../../geometry/support/jsonUtils.js\";const i=\"ESRI__DESTINATION_ID\",s=\"ESRI__ORIGIN_ID\";class o{constructor(){this._featureLookup=new Map}static getInstance(){return o.instance||(o.instance=new o),o.instance}static resetInstance(){o.instance&&(o.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const r=this.readFromStoreById(e);r&&t.push(r)})),t}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(o,n,p){const a=[];return o.forEach((o=>{if(!o?.id)return;o.properties||(o.properties=[]);let u,c=null;if(p&&o.properties[p]&&(c=e(o.properties[p])),\"originId\"in o&&\"destinationId\"in o&&(o.properties[s]=o.originId,o.properties[i]=o.destinationId),o.properties[n]=o.id,o.id&&this._featureLookup.has(o.id)&&this._featureLookup.get(o.id).attributes){const e=this._featureLookup.get(o.id),i=JSON.parse(JSON.stringify(Object.assign(e.attributes,o.properties)));p&&o.properties[p]&&(i[p]=r(o.properties[p])),u=new t(c?JSON.parse(JSON.stringify(c)):e?.geometry?JSON.parse(JSON.stringify(e.geometry)):null,i,null,o.properties[n])}else u=new t(c?JSON.parse(JSON.stringify(c)):null,o.properties,null,o.properties[n]);this._featureLookup.set(o.id,u),a.push(u)})),a}}export{o as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import s from\"../../geometry/SpatialReference.js\";class t{constructor(){this.version=\"\",this.queryResult=new e}}class e{constructor(){this.featureResult=new i}}class i{constructor(){this.objectIdFieldName=\"\",this.uniqueIdField=new r,this.globalIdFieldName=\"\",this.geohashFieldName=\"\",this.geometryProperties=new a,this.geometryType=null,this.spatialReference=new s,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new h,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}}class r{constructor(){this.name=\"\",this.isSystemMaintained=!1}}class a{constructor(){this.shapeAreaFieldName=\"\",this.shapeLengthFieldName=\"\",this.units=\"\"}}class h{constructor(){this.quantizeOriginPosition=\"upperLeft\",this.scale=new n,this.translate=new o}}class n{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}}class o{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}}class c{constructor(){this.name=\"\",this.fieldType=\"esriFieldTypeString\",this.alias=\"\",this.sqlType=\"sqlTypeVarchar\",this.domain=\"\",this.defaultValue=\"\"}}class l{constructor(){this.attributes=[],this.compressedGeometry=new E,this.centroid=new E,this.aggregateGeometries=[]}}class E{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}}class u extends c{constructor(){super(...arguments),this.geometryType=\"esriGeometryPoint\"}}var T;!function(s){s.ELEMENTUID=\"ELEMENTUID\",s.TYPENAME=\"TYPENAME\"}(T||(T={}));const m=[T.ELEMENTUID,T.TYPENAME];var d,p;!function(s){s[s.ELEMENTUID=0]=\"ELEMENTUID\",s[s.TYPENAME=1]=\"TYPENAME\"}(d||(d={})),function(s){s[s.ELEMENTUID=0]=\"ELEMENTUID\",s[s.TYPENAME=1]=\"TYPENAME\",s[s.FROMUID=2]=\"FROMUID\",s[s.TOUID=3]=\"TOUID\"}(p||(p={}));export{E as CompressedGeometry,l as Feature,i as FeatureResult,c as Field,u as GeometryField,a as GeometryProperties,t as ProtoFeatureCollection,T as ProtoInboundFeatureCollectionAttributionNames,m as ProtoInboundFeatureCollectionRequiredAttributes,d as ProtoOutboundEntityFeatureCollectionAttributionIndexes,p as ProtoOutboundRelationshipFeatureCollectionAttributionIndexes,e as QueryResult,n as Scale,h as Transform,o as Translate,r as UniqueIdField};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar e,l,s,T;!function(e){e[e.featureResult=0]=\"featureResult\",e[e.countResult=1]=\"countResult\",e[e.idsResult=2]=\"idsResult\"}(e||(e={})),function(e){e[e.upperLeft=0]=\"upperLeft\",e[e.lowerLeft=1]=\"lowerLeft\"}(l||(l={})),function(e){e[e.sqlTypeBigInt=0]=\"sqlTypeBigInt\",e[e.sqlTypeBinary=1]=\"sqlTypeBinary\",e[e.sqlTypeBit=2]=\"sqlTypeBit\",e[e.sqlTypeChar=3]=\"sqlTypeChar\",e[e.sqlTypeDate=4]=\"sqlTypeDate\",e[e.sqlTypeDecimal=5]=\"sqlTypeDecimal\",e[e.sqlTypeDouble=6]=\"sqlTypeDouble\",e[e.sqlTypeFloat=7]=\"sqlTypeFloat\",e[e.sqlTypeGeometry=8]=\"sqlTypeGeometry\",e[e.sqlTypeGUID=9]=\"sqlTypeGUID\",e[e.sqlTypeInteger=10]=\"sqlTypeInteger\",e[e.sqlTypeLongNVarchar=11]=\"sqlTypeLongNVarchar\",e[e.sqlTypeLongVarbinary=12]=\"sqlTypeLongVarbinary\",e[e.sqlTypeLongVarchar=13]=\"sqlTypeLongVarchar\",e[e.sqlTypeNChar=14]=\"sqlTypeNChar\",e[e.sqlTypeNVarChar=15]=\"sqlTypeNVarChar\",e[e.sqlTypeOther=16]=\"sqlTypeOther\",e[e.sqlTypeReal=17]=\"sqlTypeReal\",e[e.sqlTypeSmallInt=18]=\"sqlTypeSmallInt\",e[e.sqlTypeSqlXml=19]=\"sqlTypeSqlXml\",e[e.sqlTypeTime=20]=\"sqlTypeTime\",e[e.sqlTypeTimestamp=21]=\"sqlTypeTimestamp\",e[e.sqlTypeTimestamp2=22]=\"sqlTypeTimestamp2\",e[e.sqlTypeTinyInt=23]=\"sqlTypeTinyInt\",e[e.sqlTypeVarbinary=24]=\"sqlTypeVarbinary\",e[e.sqlTypeVarchar=25]=\"sqlTypeVarchar\"}(s||(s={})),function(e){e[e.OID_ARRAY=0]=\"OID_ARRAY\",e[e.GLOBALID_ARRAY=1]=\"GLOBALID_ARRAY\",e[e.STRING_ARRAY=2]=\"STRING_ARRAY\",e[e.IDENTIFIER_ARRAY=3]=\"IDENTIFIER_ARRAY\"}(T||(T={}));export{T as IdArrayType,s as SqlTypeCode,l as WasmQuantizeOriginPositionTypeCode,e as WasmResultsTypeCode};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{convertFromGeometry as r}from\"../graphics/featureConversionUtils.js\";import n from\"../graphics/OptimizedGeometry.js\";import{executeQueryStreaming as i}from\"../../rest/knowledgeGraphService.js\";import a from\"../../rest/knowledgeGraph/GraphQueryStreaming.js\";import{ProtoOutboundRelationshipFeatureCollectionAttributionIndexes as s,ProtoInboundFeatureCollectionAttributionNames as o,ProtoOutboundEntityFeatureCollectionAttributionIndexes as l}from\"../../rest/knowledgeGraph/ProtoFeatureCollection.js\";import{getWasmInterface as m}from\"../../rest/knowledgeGraph/wasmInterface/knowledgeWasmAccess.js\";import{EsriFieldTypes as d}from\"../../rest/knowledgeGraph/wasmInterface/WasmDataModelWrapperInterfaces.js\";import{WasmQuantizeOriginPositionTypeCode as c,SqlTypeCode as y,IdArrayType as p}from\"../../rest/knowledgeGraph/wasmInterface/WasmSerializedLayerData.js\";import{wasmToProtoFeatureCollection as f}from\"../../rest/knowledgeGraph/wasmInterface/wasmToFeatureFactories.js\";function u(e){if(!e.spatialReference.isWGS84)throw new t(\"knowledge-graph:layer-support-utils\",\"The extentToInBoundsRings function only supports WGS84 spatial references.\");let r;return r=e.xmax>180&&e.xmin<180?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[180,e.ymax],[180,e.ymin],[e.xmin,e.ymin]],[[-180,e.ymin],[-180,e.ymax],[e.xmax-360,e.ymax],[e.xmax-360,e.ymin],[-180,e.ymin]]]:e.xmax>180&&e.xmin>180?[[[e.xmin-360,e.ymin],[e.xmin-360,e.ymax],[e.xmax-360,e.ymax],[e.xmax-360,e.ymin],[e.xmin-360,e.ymin]]]:e.xmax>-180&&e.xmin<-180?[[[e.xmin+360,e.ymin],[e.xmin+360,e.ymax],[180,e.ymax],[180,e.ymin],[e.xmin+360,e.ymin]],[[-180,e.ymin],[-180,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[-180,e.ymin]]]:e.xmax<-180&&e.xmin<-180?[[[e.xmin+360,e.ymin],[e.xmin+360,e.ymax],[e.xmax+360,e.ymax],[e.xmax+360,e.ymin],[e.xmin+360,e.ymin]]]:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]],r}async function w(e,t){const r=[],n=new Map,s=[];if(t.dataModel?.relationshipTypes)for(const i of t.dataModel.relationshipTypes)i.name&&n.set(i.name,[]);for(const i of e)n.has(i.typeName)&&n.get(i.typeName)?.push(i.id);for(const[o,l]of n){if(l.length<1)continue;const e=new a({openCypherQuery:`MATCH (n)-[r:${o}]->(m) WHERE id(r) in $ids RETURN id(n), labels(n)[0], id(m), labels(m)[0]`,bindParameters:{ids:l}});s.push(i(t,e).then((async e=>{const t=e.resultRowsStream.getReader();for(;;){const{done:e,value:n}=await t.read();if(e)break;for(const t of n)r.push({id:t[0],typeName:t[1]}),r.push({id:t[2],typeName:t[3]})}})))}return await Promise.all(s),r}async function h(e,t){const r=new Map,n=new Map,s=[];if(t.dataModel?.relationshipTypes)for(const i of t.dataModel.relationshipTypes)i.name&&n.set(i.name,[]);for(const i of e)n.has(i.typeName)&&n.get(i.typeName)?.push(i.id);for(const[o,l]of n){if(l.length<1)continue;const e=new a({openCypherQuery:`MATCH (n)-[r:${o}]->(m) WHERE id(r) in $ids RETURN id(r), id(n), id(m)`,bindParameters:{ids:l}});s.push(i(t,e).then((async e=>{const t=e.resultRowsStream.getReader();for(;;){const{done:e,value:n}=await t.read();if(e)break;for(const t of n)r.set(t[0],[t[1],t[2]])}})))}return await Promise.all(s),r}async function _(e){const t=[],r={generateAllSublayers:!1,namedTypeDefinitions:new Map};return e.entitiesUrl&&t.push(k(e.entitiesUrl).then((e=>{I(e,r)}))),e.relationshipsUrl&&t.push(k(e.relationshipsUrl).then((e=>{I(e,r)}))),e.idCollectionsUrl&&t.push(F(e.idCollectionsUrl).then((e=>{A(e,r)}))),await Promise.all(t),r}async function g(e){const t={generateAllSublayers:!1,namedTypeDefinitions:new Map};return await F(e).then((e=>{A(e,t)})),t}async function x(e,t,r){const n=await m(),i=new n.FeatureCollection,a=new n.FeatureCollection;try{b(i,n,e,\"entities\",t,r),b(a,n,e,\"relationships\",t,r);const s=new n.FeatureCollectionEncoder,o=new n.FeatureCollectionEncoder,l=D(i,s),m=structuredClone(l),d=D(a,o),c={entitiesFC:m,relationshipsFC:structuredClone(d),idCollections:await T(e)};return s.delete(),o.delete(),c}finally{i.delete(),a.delete()}}async function T(e){const r=await m(),n=new r.MapOfObjectIdentifierSets;E(n,r,e);const i=new r.MapOfObjectIdentifierSetsEncoder;try{i.set_map_of_identifier_sets(n),i.encode();const e=i.get_encoding_result();if(0!==e.error.error_code)throw new t(\"knowledge-graph:layer-support-utils\",e.error.error_message);const r=structuredClone(e.get_byte_buffer());return i.delete(),r}finally{n.delete()}}function b(e,t,n,i,a,o){e.version=\"\";const m=new t.QueryResult,p=new t.FeatureResult,f=\"entities\"===i?l:s;p.unique_id_field={name:f[f.ELEMENTUID],isSystemMaintained:!1},p.globalid_field_name=f[f.ELEMENTUID],p.geohash_field_name=\"\",p.geometry_properties={shapeAreaFieldName:\"\",shapeLengthFieldName:\"\",units:\"\"},p.spatial_reference={wkid:4326,latestWkid:4326,vcsWkid:0,latestVcsWkid:0,wkt:\"\"},p.exceeded_transfer_limit=!1,p.has_z=!1,p.has_m=!1,p.transform={quantizeOriginPosition:{value:c.upperLeft},scale:{xScale:1e-9,yScale:1e-9,mScale:1e-4,zScale:1e-4},translate:{xTranslate:-400,yTranslate:-400,mTranslate:-1e5,zTranslate:-1e5}};for(const r of Object.keys(f).filter((e=>isNaN(Number(e))))){const e=new t.Field;if(e.name=r,e.alias=r,e.sql_type={value:y.sqlTypeBigInt},\"entities\"===i)switch(r){case f[f.ELEMENTUID]:case f[f.TYPENAME]:e.field_type={value:d.esriFieldTypeString}}else switch(r){case f[f.ELEMENTUID]:case f[f.TYPENAME]:case s[s.FROMUID]:case s[s.TOUID]:e.field_type={value:d.esriFieldTypeString}}e.domain=\"\",p.add_field(e),e.delete()}const u=new Map;for(const r of a.dataModel.entityTypes)u.set(r.name,\"entities\");for(const r of a.dataModel.relationshipTypes)u.set(r.name,\"relationships\");for(const[l,d]of n.namedTypeDefinitions)if(i===u.get(l))for(const e of d.members.values()){const n=new t.Feature;for(const r of Object.keys(f).filter((e=>isNaN(Number(e)))))if(\"entities\"===i)switch(r){case f[f.ELEMENTUID]:n.add_attribute(e.id,t.esriFieldType.esriFieldTypeString);break;case f[f.TYPENAME]:n.add_attribute(l,t.esriFieldType.esriFieldTypeString)}else switch(r){case f[f.ELEMENTUID]:n.add_attribute(e.id,t.esriFieldType.esriFieldTypeString);break;case s[s.FROMUID]:n.add_attribute(o.has(e.id)?o.get(e.id)[0]:\"\",t.esriFieldType.esriFieldTypeString);break;case s[s.TOUID]:n.add_attribute(o.has(e.id)?o.get(e.id)[1]:\"\",t.esriFieldType.esriFieldTypeString);break;case f[f.TYPENAME]:n.add_attribute(l,t.esriFieldType.esriFieldTypeString)}let a;if(e.linkChartLocation&&\"x\"in e.linkChartLocation?a=r(e.linkChartLocation):e.linkChartLocation&&(a=e.linkChartLocation),e.linkChartLocation&&a){const e=new t.FeatureCollectionGeometry;switch(i){case\"entities\":e.geometry_type=t.esriGeometryType.esriGeometryPoint;break;case\"relationships\":e.geometry_type=t.esriGeometryType.esriGeometryPolyline}e.coords=new Float64Array(a.coords),e.lengths=new Uint32Array(a.lengths),n.set_compressed_geometry(e),e.delete()}p.add_feature(n),n.delete()}switch(i){case\"entities\":p.geometry_type=t.esriGeometryType.esriGeometryPoint;break;case\"relationships\":p.geometry_type=t.esriGeometryType.esriGeometryPolyline}return m.set_feature_result(p),e.set_query_result(m),p.delete(),m.delete(),e}function E(e,t,r){for(const[n,i]of r.namedTypeDefinitions){if(!i.members||i.useAllData)continue;const r=i.members.keys(),a=new t.GlobalIdArray,s=new t.ObjectIdentifierSet;for(const e of r)a.add_globalid(e);s.set_globalid_array(a),a.delete(),e.put_identifier_set(n,s),s.delete()}return e}async function k(t){const r=await e(t,{responseType:\"array-buffer\"});return M(await r.data)}async function M(e){const r=new((await m()).FeatureCollectionDecoder),n=r.decode(new Uint8Array(e));if(0!==n.error_code)throw new t(\"knowledge-graph:layer-support-utils\",n.error_message);const i=r.get_feature_collection(),a=f(i);return r.delete(),a}async function F(t){const r=await e(t,{responseType:\"array-buffer\"}),n=await r.data;return N(new Uint8Array(n))}async function N(e){const r=new((await m()).MapOfObjectIdentifierSetsDecoder),n=r.decode(new Uint8Array(e)),i=new Map;if(0!==n.error_code)throw new t(\"knowledge-graph:layer-support-utils\",n.error_message);const a=r.get_map_of_identifier_sets(),s=a.keys,o=s.size();for(let l=0;l<o;l++){const e=s.get(l),r=a.query_identifier_set(e),n=[];if(r.id_array_type.value===p.GLOBALID_ARRAY){const e=r.get_globalid_array(),t=e.count();for(let r=0;r<t;r++)n.push(e.get_globalid_at(r))}else{if(r.id_array_type.value!==p.IDENTIFIER_ARRAY)throw new t(\"knowledge-graph:layer-support-utils\",\"Tried to encode an unexpected ID Array type.\");{const e=r.get_identifier_array(),t=e.count();for(let r=0;r<t;r++)n.push(e.get_identifier_at(r).toString())}}i.set(e,n)}return r.delete(),i}function I(e,t){if(!e?.queryResult?.featureResult)return t;const r=e.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const i of e.queryResult.featureResult.features){const e=i.attributes[r[o.TYPENAME]],a=C(t.namedTypeDefinitions,e,(()=>({useAllData:!1,members:new Map}))),s=i.attributes[r[o.ELEMENTUID]];i.compressedGeometry?.coords?.length>0?a.members.set(s,{id:s,linkChartLocation:new n(i.compressedGeometry.lengths,i.compressedGeometry.coords)}):a.members.set(s,{id:s})}return t}function A(e,t){for(const[r,n]of e){const e=C(t.namedTypeDefinitions,r,(()=>({useAllData:!1,members:new Map})));for(const t of n)e.members.has(t)||e.members.set(t,{id:t})}return t}const C=(e,t,r)=>(e.has(t)||e.set(t,r()),e.get(t)),D=(e,r)=>{r.set_feature_collection(e),r.encode();const n=r.get_encoding_result();if(0!==n.error.error_code)throw new t(\"knowledge-graph:layer-support-utils\",n.error.error_message);return n.get_byte_buffer()};export{I as addFeatureCollectionToInclusionDefinition,A as addIdMapToInclusionDefinition,M as deserializeFeatureCollection,N as deserializeIdCollectionMap,u as extentToInBoundsRings,g as fetchAndConvertSerializedKgIdMap,_ as fetchAndConvertSerializedLinkChart,k as fetchAndDeserializeFeatureCollection,F as fetchAndDeserializeIdCollectionMap,w as getRelationshipEndNodeIds,h as getRelationshipEndNodeMap,x as serializeInclusionDefinitionToAllPbf,T as serializeInclusionDefinitionToIdCollectionsMapPbf};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import t from\"../../core/Accessor.js\";import i from\"../../core/Error.js\";import n from\"../../core/Logger.js\";import{getOrCreateMapValue as o}from\"../../core/MapUtils.js\";import{parseWhereClause as s}from\"../../core/sql.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import{encodeGeohash as p}from\"../../geohash/geohashUtils.js\";import d from\"../../geometry/Polygon.js\";import{initializeProjection as m,project as l}from\"../../geometry/projection.js\";import{wgs84 as h}from\"../../geometry/support/spatialReferenceUtils.js\";import c from\"./SessionMemoryStorage.js\";import{extentToInBoundsRings as y}from\"./supportUtils.js\";import{executeQueryStreaming as u}from\"../../rest/knowledgeGraphService.js\";import f from\"../../rest/knowledgeGraph/GraphQueryStreaming.js\";import g from\"../../rest/support/Query.js\";import b from\"../../geometry/Extent.js\";const w=\"ESRI__ID\",T=\"ESRI__ORIGIN_ID\",D=\"ESRI__DESTINATION_ID\",I=\"ESRI__LAYOUT_GEOMETRY\",M=\"ESRI__AGGREGATION_COUNT\",k=12;let E=class extends t{constructor(e){super(e),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const t=new Map;e.knowledgeGraph.dataModel.entityTypes?.forEach((i=>{i.name&&(t.set(i.name,\"entity\"),this._processingCacheUpdatesLookup.set(i.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(i.name),i.properties?.forEach((e=>{e.geometryType&&\"esriGeometryNull\"!==e.geometryType&&this.geographicLookup.set(i.name,{name:e.name??\"\",geometryType:e.geometryType})})))})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((i=>{i.name&&(t.set(i.name,\"relationship\"),this._processingCacheUpdatesLookup.set(i.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(i.name),i.properties?.forEach((e=>{e.geometryType&&\"esriGeometryNull\"!==e.geometryType&&this.geographicLookup.set(i.name,{name:e.name??\"\",geometryType:e.geometryType})})))})),e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((i,s)=>{if(\"entity\"===t.get(s))this.entityTypeNames.add(s);else{if(\"relationship\"!==t.get(s))return n.getLogger(this).warn(`A named type, ${s}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(s);this.relationshipTypeNames.add(s)}const a=new Map;i.members?.forEach((e=>{o(this.memberIdTypeLookup,e.id,(()=>new Set)).add(s);const t=this.getById(e.id);t&&a.set(e.id,t)})),this.sublayerCaches.set(s,a)}))}addToLayer(e){e.forEach((({typeName:e,id:t})=>{if(!this.inclusionModeDefinition)throw new i(\"knowledge-graph:layer-data-manager\",\"You cannot add to a layer's exclusion list if it was not created with an exclusion list originally\");if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){const i=this.inclusionModeDefinition.namedTypeDefinitions.get(e);i.members||(i.members=new Map),i.members.set(t,{id:t}),o(this.memberIdTypeLookup,t,(()=>new Set)).add(e)}}else{const i=new Map;i.set(t,{id:t}),this.inclusionModeDefinition.namedTypeDefinitions.set(e,{useAllData:!1,members:i}),o(this.memberIdTypeLookup,t,(()=>new Set)).add(e)}}))}getById(e){return c.getInstance().readFromStoreById(e)}async getData(e,t,i){if(t.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let n;if(n=e||new g({where:\"1=1\",outFields:[\"*\"]}),\"link-chart\"===t.parentCompositeLayer.type){const e=t.parentCompositeLayer,i=this._processingCacheUpdatesLookup.get(t.objectType.name??\"\"),o=n.outFields,s=n.geometry;let a=\"\",r=\"\";s&&s.extent&&(a=p(s.extent.ymin,s.extent.xmin,k),r=p(s.extent.ymax,s.extent.xmax,k)),o&&1===o.length&&o[0]===w&&\"1=1\"===n.where||await Promise.all(i??[]);const d=this.sublayerCaches.has(t.objectType.name??\"\")?Array.from(this.sublayerCaches.get(t.objectType.name)?.values()):[],m=[];return d.forEach((i=>{if(this.relationshipTypeNames.has(t.objectType.name)?i.geometry=e.relationshipLinkChartDiagramLookup.get(i.attributes[t.objectIdField]):i.geometry=e.entityLinkChartDiagramLookup.get(i.attributes[t.objectIdField]),i.attributes[I]=i.geometry,a&&r){const n=e.linkChartGeohashLookup.get(i.attributes[t.objectIdField]);n?n>=a&&n<=r&&m.push(i):m.push(i)}else m.push(i)})),m}return this.retrieveDataFromService(n,t,i)}async getConnectedRecordIds(e,t){const i=[];let o=\"\";const s=[],a=new Map;if(e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const t of this.memberIdTypeLookup.get(e)){if(!this.entityTypeNames.has(t))return;a.has(t)?a.get(t)?.push(e):a.set(t,[e])}})),t&&0!==t?.length){for(const e of t)o=o+e+\"|\";o=o.slice(0,-1)}return a.forEach(((e,a)=>{let r;r=t&&0!==t?.length?`MATCH (n:${a})-[r:${o}]-(m) WHERE id(n) IN $ids RETURN id(r), type(r), id(m), labels(m)[0]`:`MATCH (n:${a})-[r]-(m) WHERE id(n) IN $ids RETURN id(r), type(r), id(m), labels(m)[0]`;const p=new Promise((t=>{(async()=>{const t=(await u(this.knowledgeGraph,new f({openCypherQuery:r,bindParameters:{ids:e}}))).resultRowsStream.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;for(let t=0;t<n.length;t++){const e=n[t];i.push({id:e[0],typeName:e[1]}),i.push({id:e[2],typeName:e[3]})}}}catch(o){if(\"AbortError\"!==o.name)throw o;n.getLogger(this).info(\"Request aborted as expected\")}})().then((()=>{t()}))}));s.push(p)})),this.refreshCacheContent(),await Promise.all(s),i}async refreshCacheContent(e,t,n,s=!0){const a=c.getInstance(),r=[],p=new Map,d=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&d.set(e.name,e)})),this.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&d.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const t of this.memberIdTypeLookup.get(e))p.has(t)?p.get(t)?.push(e):p.set(t,[e])})):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e.useAllData?p.set(t,null):e.members&&e.members.forEach((e=>{p.has(t)&&null!==p.get(t)?p.get(t)?.push(e.id):p.set(t,[e.id])}))})):(this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&p.set(e.name,null)})),this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&p.set(e.name,null)})));for(const[m,l]of p){const e=new Promise((e=>{const r=async()=>{const e=new Set,r=[];let p,h=\"\",c=!1;if(t||d.get(m)?.properties?.forEach((t=>{t.name&&e.add(t.name)})),n&&this.geographicLookup.has(m)){const t=this.geographicLookup.get(m)?.name;t&&e.add(t)}if(this.entityTypeNames.has(m))h=`MATCH (n:${m}) ${l?\"WHERE id(n) IN $ids \":\"\"}return ID(n)`,e.forEach((e=>{h+=`, n.${e}`,r.push(e)}));else{if(!this.relationshipTypeNames.has(m))throw new i(\"knowledge-graph:layer-data-manager\",`The graph type of ${m} could not be determined. Was this type set in the KG data model and inclusion definition?`);c=!0,h=`MATCH ()-[n:${m}]->() ${l?\"WHERE id(n) IN $ids \":\"\"}return ID(n), id(startNode(n)), id(endNode(n))`,e.forEach((e=>{h+=`, n.${e}`,r.push(e)}))}p=new f(l?{openCypherQuery:h,bindParameters:{ids:l}}:{openCypherQuery:h});const y=(await u(this.knowledgeGraph,p)).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await y.read();if(e)break;const i=[];for(let s=0;s<t.length;s++){const e=t[s];let n=0,a=0;const p={properties:{}};for(p.id=e[n],n++,a++,c&&(p.originId=e[n],n++,a++,p.destinationId=e[n],n++,a++,o(this.nodeConnectionsLookup,p.originId,(()=>new Set)).add(p.id),o(this.nodeConnectionsLookup,p.destinationId,(()=>new Set)).add(p.id),o(this.relationshipConnectionsLookup,p.id,(()=>[p.originId,p.destinationId])));n<e.length;n++)p.properties[r[n-a]]=e[n];i.push(p)}const n=a.writeToStore(i,w,this.geographicLookup.get(m)?.name);this.sublayerCaches.has(m)||this.sublayerCaches.set(m,new Map),s&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(m)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(m,{useAllData:!1,members:new Map}),s&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(m).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(m).members=new Map);const p=this.sublayerCaches.get(m);n.forEach((e=>{p?.set(e.attributes[w],e),s&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(m).members.has(e.attributes[w])&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(m).members.set(e.attributes[w],{id:e.attributes[w]}),o(this.memberIdTypeLookup,e.attributes[w],(()=>new Set)).add(m))}))}};r().then((()=>{e(null)}))}));r.push(e),this._processingCacheUpdatesLookup.get(m)?.push(e)}await Promise.all(r)}removeFromLayer(e){const t=new Set,i=new Set(e.map((e=>e.id)));for(const n of e)t.add(n.typeName),1===this.memberIdTypeLookup.get(n.id)?.size?this.memberIdTypeLookup.delete(n.id):this.memberIdTypeLookup.get(n.id)?.delete(n.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{t===n.typeName&&e.members?.has(n.id)&&e.members.delete(n.id)}));t.forEach((e=>{this.sublayerCaches.get(e)?.forEach(((t,n)=>{i.has(n)&&this.sublayerCaches.get(e)?.delete(n)}))}))}async retrieveDataFromService(e,t,n){const o=c.getInstance(),a=new Set,r=[];let p,g=\"\",T=[];const D=\"relationship\"===t.graphType,I=this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData,M=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let k=!I&&M?Array.from(M).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData&&null!=e.objectIds&&(k=e.objectIds);else if(null!=e.objectIds&&k&&k.length>0){const t=e.objectIds;e.objectIds=k.filter((e=>t.includes(e)))}else if(null!=e.objectIds)k=e.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(t.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members?.size<1))return e.objectIds=[],[];e.objectIds=k}if(null!=e.outFields){const i=e.outFields;i.includes(\"*\")?t.fields.forEach((e=>{a.add(e.name)})):i.forEach((e=>{e!==w&&e!==t.geometryFieldName&&a.add(e)}))}if(null!=e.geometry){const n=e.geometry;let o;const c=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,u=c?.spatialReference,w=c?.serviceCapabilities?.geometryCapabilities;let T=w?.geometryMaxBoundingRectangleSizeX,I=w?.geometryMaxBoundingRectangleSizeY;if(n?.extent?.spatialReference&&!n.spatialReference?.isWGS84?(await m(n.extent.spatialReference,h),o=l(n.extent,h)):o=n.extent,T&&I&&u){if(4326!==u.wkid){const e=new b({spatialReference:u,xmax:T,ymax:I}),t=l(e,h);T=t.xmax,I=t.ymax}if(o.xmax-o.xmin>T)throw new i(\"knowledge-graph:layer-data-manager\",`Extent x bounds should be within ${T}° latitude, limit exceeded`);if(o.ymax-o.ymin>I)throw new i(\"knowledge-graph:layer-data-manager\",`Extent y bounds should be within ${I}° longitude, limit exceeded`)}if(null!=e.where&&\"1=1\"!==e.where){const i=await s(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{i.fieldNames.includes(e.name)&&a.add(e.name)}))}g=D?`Match ()-[n:${t.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${t.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n)`,t.geometryFieldName&&a.add(t.geometryFieldName),a.forEach((e=>{g+=`, n.${e}`,r.push(e)})),p=new f({openCypherQuery:g,bindParameters:{param_filter_geom:new d({rings:y(o)})}})}else{let i=\"\";if(null!=e.where&&\"1=1\"!==e.where){const n=await s(e.where,t.fieldsIndex);t.fields.forEach((e=>{n.fieldNames.includes(e.name)&&a.add(e.name)}));const o=new Set([\"column-reference\",\"string\",\"number\",\"binary-expression\"]),r=new Set([\"=\",\"<\",\"<=\",\"<>\",\">\",\">=\",\"AND\",\"OR\",\"LIKE\"]);let p=!1;const d=e=>{if(\"column-reference\"===e.type)return`n.${e.column}`;if(\"string\"===e.type)return`'${e.value}'`;if(\"number\"===e.type)return`${e.value}`;if(\"binary-expression\"===e.type&&o.has(e.left.type)&&o.has(e.right.type)&&r.has(e.operator))return`${d(e.left)} ${e.operator} ${d(e.right)}`;if(\"binary-expression\"===e.type&&\"LIKE\"===e.operator){let t=\"\";if(\"function\"===e.left.type&&\"column-reference\"===e.left.args.value[0].type)t+=`lower(n.${e.left.args.value[0].column})`;else{if(\"column-reference\"!==e.left.type)return p=!0,\"\";t+=`lower(n.${e.left.column})`}if(t+=\" CONTAINS (\",\"string\"!==e.right.type)return p=!0,\"\";{let i=e.right.value;\"%\"===i.charAt(0)&&(i=i.slice(1)),\"%\"===i.charAt(i.length-1)&&(i=i.slice(0,-1)),t+=`'${i.toLowerCase()}')`}return t}return p=!0,\"\"};i=d(n.parseTree),p&&(i=\"\")}let n=\"\";n=D?`Match ()-[n:${t.objectType.name}]->()`:`Match (n:${t.objectType.name})`;let o=!1;k&&(o=!0,n+=\" WHERE ID(n) IN $ids\"),i&&(n+=o?\" AND\":\" WHERE\",n+=` ${i}`),n+=\" return ID(n)\",D&&(n+=\", id(startNode(n)), id(endNode(n))\"),e.returnGeometry&&t.geometryFieldName&&a.add(t.geometryFieldName),a.forEach((e=>{n+=`, n.${e}`,r.push(e)})),p=new f(k?{openCypherQuery:n,bindParameters:{ids:k}}:{openCypherQuery:n})}const E=(await u(t.parentCompositeLayer.dataManager.knowledgeGraph,p,n)).resultRowsStream.getReader();for(;;){const{done:e,value:i}=await E.read();if(e)break;const n=[];for(let t=0;t<i.length;t++){const e=i[t];let o=0,s=0;const a={properties:{}};for(a.id=e[o],o++,s++,D&&(a.originId=e[o],o++,s++,a.destinationId=e[o],o++,s++);o<e.length;o++)a.properties[r[o-s]]=e[o];n.push(a)}T=T.concat(o.writeToStore(n,w,t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name)?.name))}return T}};e([a()],E.prototype,\"knowledgeGraph\",void 0),e([a()],E.prototype,\"inclusionModeDefinition\",void 0),e([a()],E.prototype,\"entityTypeNames\",void 0),e([a()],E.prototype,\"relationshipTypeNames\",void 0),e([a()],E.prototype,\"geographicLookup\",void 0),e([a()],E.prototype,\"sublayerCaches\",void 0),e([a()],E.prototype,\"nodeConnectionsLookup\",void 0),e([a()],E.prototype,\"relationshipConnectionsLookup\",void 0),e([a()],E.prototype,\"memberIdTypeLookup\",void 0),E=e([r(\"esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager\")],E);export{E as KnowledgeGraphLayerDataManager,k as geohashEncodingPrecision,M as mockAggregationCountFieldName,D as mockDestinationIdFieldName,I as mockLayoutGeometryFieldName,w as mockOidFieldName,T as mockOriginIdFieldName};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import{defineFieldProperties as s}from\"../support/fieldProperties.js\";const t=s(),p=s=>{let p=class extends s{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return r([o(t.fields)],p.prototype,\"fields\",void 0),r([o(t.fieldsIndex)],p.prototype,\"fieldsIndex\",void 0),p=r([e(\"esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase\")],p),p};export{p as KnowledgeGraphSublayerBase};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import t from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/PieChartRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import{fromJSON as r}from\"../../renderers/support/jsonUtils.js\";import{rendererTypes as o}from\"../../renderers/support/types.js\";import\"../../core/workers/workers.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{initializeProjection as a,project as n}from\"../../geometry/projection.js\";import{wgs84 as p}from\"../../geometry/support/spatialReferenceUtils.js\";import l from\"../Layer.js\";import y from\"../graphics/data/FeatureStore.js\";import{QueryEngine as m}from\"../graphics/data/QueryEngine.js\";import{createCapabilities as u,createDrawingInfo as d}from\"../graphics/sources/support/clientSideDefaults.js\";import{mockOidFieldName as h,mockLayoutGeometryFieldName as c,mockAggregationCountFieldName as g}from\"./KnowledgeGraphLayerDataManager.js\";import{KnowledgeGraphSublayerBase as f}from\"./KnowledgeGraphSublayerBase.js\";import{BlendLayer as j}from\"../mixins/BlendLayer.js\";import{FeatureReductionLayer as b}from\"../mixins/FeatureReductionLayer.js\";import{RefreshableLayer as T}from\"../mixins/RefreshableLayer.js\";import{ScaleRangeLayer as w}from\"../mixins/ScaleRangeLayer.js\";import{popupEnabled as S}from\"../support/commonProperties.js\";import F from\"../support/Field.js\";import{fixRendererFields as x}from\"../support/fieldUtils.js\";import O from\"../../rest/support/FeatureSet.js\";import Q from\"../../rest/support/Query.js\";import{createPopupTemplate as L}from\"../../support/popupUtils.js\";import v from\"../../core/workers/RemoteClient.js\";import E from\"../../geometry/Extent.js\";import N from\"../../geometry/Polygon.js\";import C from\"../../geometry/Polyline.js\";import{featureGeometryTypeKebabDictionary as M}from\"../../geometry/support/typeUtils.js\";let I=class extends(b(f(j(w(T(l)))))){constructor(e){if(super(e),this.capabilities=u(!1,!1),this.definitionExpression=\"\",this.displayField=\"\",this.elevationInfo=null,this.geometryType=null,this.geometryFieldName=null,this.graphType=null,this.hasM=!1,this.hasZ=!1,this.labelsVisible=null,this.labelingInfo=null,this.objectIdField=h,this.objectType=null,this.parentCompositeLayer=null,this.popupEnabled=!0,this.popupTemplate=null,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new v(e.port1,{channel:e,client:{queryFeatures:(e,t={})=>{const r=Q.fromJSON(e);return this.queryFeaturesJSON(r,t)}}}),[e.port2]}))},this.type=\"knowledge-graph-sublayer\",\"link-chart\"===e.parentCompositeLayer.type)\"relationship\"===e.graphType?this.geometryType=\"polyline\":this.geometryType=\"point\",this.geometryFieldName=c;else if(e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name)?.geometryType&&\"esriGeometryNull\"!==e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name)?.geometryType){const t=e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name);this.geometryFieldName=t?.name??null,this.geometryType=t?.geometryType?M.fromJSON(t.geometryType):null;const r=t?.name,o=r?e.objectType.properties?.[r]:null;o?(this.hasM=o.hasM??!1,this.hasZ=o.hasZ??!1):(this.hasM=!1,this.hasZ=!1)}else this.geometryType=null;e.objectType.properties?.forEach((e=>{let t=null,r=e.fieldType;\"esriFieldTypeOID\"===r&&(r=\"esriFieldTypeInteger\"),this.fields.push(F.fromJSON({name:e.name,type:r,alias:e.alias,defaultValue:t,editable:e.editable,nullable:e.nullable}))})),this.fields.push(F.fromJSON({name:this.objectIdField,type:\"esriFieldTypeString\",alias:this.objectIdField,editable:!1})),this.fields.push(F.fromJSON({name:g,type:\"esriFieldTypeInteger\",alias:g,editable:!1})),this._set(\"fields\",[...this.fields]),e.parentCompositeLayer.dataManager.knowledgeGraph.dataModel?.spatialReference&&(this.spatialReference=e.parentCompositeLayer.dataManager.knowledgeGraph.dataModel.spatialReference),\"link-chart\"===e.parentCompositeLayer.type?\"relationship\"===e.graphType?this.renderer=r(d(M.toJSON(\"polyline\")).renderer):this.renderer=r(d(M.toJSON(\"point\")).renderer):this.renderer=r(d(M.toJSON(this.geometryType)).renderer)}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){x(e,this.fieldsIndex),this._set(\"renderer\",e)}createPopupTemplate(e){return L(this,e)}createQuery(){return new Q({where:\"1=1\",outFields:[\"*\"]})}getField(e){for(let t=0;t<this.fields.length;t++)if(this.fields[t].name===e)return this.fields[t];return null}getFieldDomain(e,t){return null}async queryFeatures(e,t){const{resolvedQuery:r,queryEngine:o}=await this._setupQueryObjects(e),s=O.fromJSON(await o.executeQuery(r.toJSON(),t?.signal));return s.features.forEach((e=>{e.sourceLayer=this})),s}async queryFeaturesJSON(e,t){const{resolvedQuery:r,queryEngine:o}=await this._setupQueryObjects(e);return await o.executeQuery(r.toJSON(),t?.signal)}async queryFeatureCount(e,t){const{resolvedQuery:r,queryEngine:o}=await this._setupQueryObjects(e);return o.executeQueryForCount(r.toJSON(),t?.signal)}async queryExtent(e={},t){const r={...e,returnGeometry:!0},{resolvedQuery:o,queryEngine:s}=await this._setupQueryObjects(r),i=await s.executeQueryForExtent(o.toJSON(),t?.signal);let a;return a=null!=i.extent?.xmin&&null!=i.extent?.xmax&&null!=i.extent?.ymin&&null!=i.extent?.ymax?new E(i.extent):new E,{count:i.count,extent:a}}async queryObjectIds(e,t){const r=Q.from(e);let o;if(\"link-chart\"===this.parentCompositeLayer.type&&this._cachedQueryEngine)o=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(r,this,t);o=this.loadQueryEngine(e)}return o.executeQueryForIds(r.toJSON(),t?.signal)}loadQueryEngine(e){const t=new y({geometryType:M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),r=new m({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:null,featureStore:t});return r.featureStore.addMany(e),r}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new Q({where:\"1=1\",outFields:[h]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}async _setupQueryObjects(e,t){const r=Q.from(e),o=r.geometry;let s;if(o&&!o.spatialReference?.isWGS84&&(await a(o.spatialReference,p),r.geometry=n(o instanceof N||o instanceof C?o:o.extent,p)),\"link-chart\"===this.parentCompositeLayer.type&&this._cachedQueryEngine)s=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(r,this,t);s=this.loadQueryEngine(e)}return{resolvedQuery:r,queryEngine:s}}};e([s()],I.prototype,\"capabilities\",void 0),e([s({readOnly:!0})],I.prototype,\"defaultPopupTemplate\",null),e([s()],I.prototype,\"definitionExpression\",void 0),e([s()],I.prototype,\"displayField\",void 0),e([s()],I.prototype,\"elevationInfo\",void 0),e([s()],I.prototype,\"geometryType\",void 0),e([s()],I.prototype,\"geometryFieldName\",void 0),e([s()],I.prototype,\"graphType\",void 0),e([s()],I.prototype,\"hasM\",void 0),e([s()],I.prototype,\"hasZ\",void 0),e([s()],I.prototype,\"labelsVisible\",void 0),e([s()],I.prototype,\"labelingInfo\",void 0),e([s()],I.prototype,\"objectIdField\",void 0),e([s()],I.prototype,\"objectType\",void 0),e([s()],I.prototype,\"parentCompositeLayer\",void 0),e([s(S)],I.prototype,\"popupEnabled\",void 0),e([s({type:t,json:{name:\"popupInfo\",write:!0}})],I.prototype,\"popupTemplate\",void 0),e([s({types:o,json:{write:{target:\"layerDefinition.drawingInfo.renderer\"}}})],I.prototype,\"renderer\",null),e([s()],I.prototype,\"source\",void 0),e([s({json:{read:!1}})],I.prototype,\"type\",void 0),I=e([i(\"esri.layers.knowledgeGraph.KnowledgeGraphSublayer\")],I);const R=I;export{R as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";let e,r=null;function a(){return!!r}function n(){return e||(e=import(\"../../chunks/lclayout.js\").then((t=>t.l)).then((({default:e})=>e({locateFile:e=>t(`esri/libs/linkchartlayout/${e}`)}))).then((t=>{s(t)})),e)}function s(t){r=t}var u,o;function y(t,e,a,n,s,u){const o=a.length,y=s.length,i=Float64Array.BYTES_PER_ELEMENT,l=Uint32Array.BYTES_PER_ELEMENT,c=Uint8Array.BYTES_PER_ELEMENT,E=16,p=E-1+o*(c+2*i)+y*(2*l),f=r._malloc(p);try{const c=f+E-f%E,p=c+o*i,A=p+o*i,b=A+y*l,P=b+y*l,L=()=>[r.HEAPF64.subarray(c>>3,(c>>3)+o),r.HEAPF64.subarray(p>>3,(p>>3)+o),r.HEAPU32.subarray(A>>2,(A>>2)+y),r.HEAPU32.subarray(b>>2,(b>>2)+y),r.HEAPU8.subarray(P,P+o)],[d,C,H,_,g]=L();d.set(a),C.set(n),H.set(s),_.set(u),g.set(e);let F=t(o,P,c,p,y,A,b),R=null;if(F){const t=r.getLayoutLinksTypes(),e=r.getLayoutLinksVerticesEndIndices(),a=r.getLayoutLinksVertices(),n=r.countLayoutLinksVertices();!y||t&&e?n&&!a?F=!1:R={types:new Uint8Array(r.HEAPU8.subarray(t,t+y)),vertexEndIndex:new Uint32Array(r.HEAPU32.subarray(e>>2,(e>>2)+y)),vertices:new Float64Array(r.HEAPF64.subarray(a>>3,(a>>3)+2*n))}:F=!1}const[h,U,m,B,T]=L();return a.set(h),n.set(U),s.set(m),u.set(B),e.set(T),{success:F,links:R}}finally{r._free(f),r.cleanupLayout()}}!function(t){t[t.None=0]=\"None\",t[t.IsMovable=1]=\"IsMovable\",t[t.IsGeographic=2]=\"IsGeographic\",t[t.IsRoot=4]=\"IsRoot\"}(u||(u={})),function(t){t[t.Regular=0]=\"Regular\",t[t.Orthogonal=1]=\"Orthogonal\",t[t.Curved=2]=\"Curved\",t[t.Recursive=3]=\"Recursive\"}(o||(o={}));const i=2,l=1,c=-1;var E,p,f,A,b,P,L,d;function C(t,e,a,n,s,u,o,y,i,l,c,E,p,f,A){const b=e.length,P=Float64Array.BYTES_PER_ELEMENT,L=Uint32Array.BYTES_PER_ELEMENT,d=16,C=d-1+t*(8*P)+b*(3*L),H=r._malloc(C);try{const C=H+d-H%d,_=C+t*P,g=_+t*P,F=g+t*P,R=F+t*P,h=R+t*P,U=h+t*P,m=U+t*P,B=m+t*P,T=B+b*L,v=T+b*L,N=()=>[r.HEAPF64.subarray(C>>3,(C>>3)+t),r.HEAPF64.subarray(_>>3,(_>>3)+t),r.HEAPF64.subarray(g>>3,(g>>3)+t),r.HEAPF64.subarray(F>>3,(F>>3)+t),r.HEAPF64.subarray(R>>3,(R>>3)+t),r.HEAPF64.subarray(h>>3,(h>>3)+t),r.HEAPF64.subarray(U>>3,(U>>3)+t),r.HEAPF64.subarray(m>>3,(m>>3)+t),r.HEAPU32.subarray(B>>2,(B>>2)+b),r.HEAPU32.subarray(T>>2,(T>>2)+b),r.HEAPU32.subarray(v>>2,(v>>2)+b)],[I,M,k,S,w,Y,z,G,x,D,V]=N();I.set(y),M.set(i),k.set(l),S.set(c),w.set(E),Y.set(p),z.set(f),G.set(A),x.set(e),D.set(a),V.set(n);const j=r.computeCentrality(t,b,B,T,v,s,u,o,C,_,g,F,R,h,U,m),[O,$,q,J,K,Q,W,X,Z,tt,et]=N();return y.set(O),i.set($),l.set(q),c.set(J),E.set(K),p.set(Q),f.set(W),A.set(X),e.set(Z),a.set(tt),n.set(et),j}finally{r._free(H)}}!function(t){function e(){return r.getMinIdealEdgeLength()}function a(t,e,a,n,s,u=i,o=l,E=c){return y(((t,e,a,n,s,y,i)=>r.applyForceDirectedLayout(t,e,a,n,s,y,i,u,o,E)),t,e,a,n,s)}t.getMinIdealEdgeLength=e,t.apply=a}(E||(E={})),function(t){function e(t,e,a,n,s,u=i,o=l,E=c){return y(((t,e,a,n,s,y,i)=>r.applyCommunityLayout(t,e,a,n,s,y,i,u,o,E)),t,e,a,n,s)}t.apply=e}(p||(p={})),function(t){function e(t,e,a,n,s){return y(r.applySimpleLayout,t,e,a,n,s)}t.apply=e}(f||(f={})),function(t){function e(t,e,a,n,s){return y(r.applyHierarchicalLayout,t,e,a,n,s)}t.apply=e}(A||(A={})),function(t){function e(t,e,a,n,s){return y(r.applyRadialTreeLayout,t,e,a,n,s)}t.apply=e}(b||(b={})),function(t){function e(t,e,a,n,s){return y(r.applySmartTreeLayout,t,e,a,n,s)}t.apply=e}(P||(P={})),function(t){t[t.Undirected=0]=\"Undirected\",t[t.Directed=1]=\"Directed\",t[t.Reversed=2]=\"Reversed\"}(L||(L={})),function(t){t[t.ByCC_Raw=0]=\"ByCC_Raw\",t[t.ByCC_NormalizeGlobally=1]=\"ByCC_NormalizeGlobally\",t[t.ByCC_NormalizeByCC=2]=\"ByCC_NormalizeByCC\"}(d||(d={}));export{d as CentralityMode,p as LCCommunityLayout,E as LCForceDirectedLayout,A as LCHierarchicalLayout,b as LCRadialTreeLayout,f as LCSimpleLayout,P as LCSmartTreeLayout,o as LinkType,u as NodeFlag,L as RelationshipInterpretation,r as _lclib,C as computeCentrality,i as defaultBudgetTheoreticalSeconds,l as defaultIdealEdgeLengthMultiplier,c as defaultRepulsionRadiusMultiplier,a as isLoaded,n as load};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../core/Collection.js\";import a from\"../core/Error.js\";import i from\"../core/Logger.js\";import{throwIfAborted as n}from\"../core/promiseUtils.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import{encodeGeohash as r}from\"../geohash/geohashUtils.js\";import h from\"./Layer.js\";import{convertFromGeometry as l}from\"./graphics/featureConversionUtils.js\";import p from\"./graphics/OptimizedGeometry.js\";import{KnowledgeGraphLayerDataManager as d,mockOidFieldName as c,mockOriginIdFieldName as u,mockDestinationIdFieldName as y,mockLayoutGeometryFieldName as m,mockAggregationCountFieldName as g,geohashEncodingPrecision as f}from\"./knowledgeGraph/KnowledgeGraphLayerDataManager.js\";import k from\"./knowledgeGraph/KnowledgeGraphSublayer.js\";import{getRelationshipEndNodeIds as L}from\"./knowledgeGraph/supportUtils.js\";import{BlendLayer as C}from\"./mixins/BlendLayer.js\";import{ScaleRangeLayer as M}from\"./mixins/ScaleRangeLayer.js\";import{LCSimpleLayout as w,LCSmartTreeLayout as b,LCRadialTreeLayout as D,LCHierarchicalLayout as x,LCCommunityLayout as T,LCForceDirectedLayout as E,NodeFlag as N,load as G,LinkType as R}from\"../libs/linkchartlayout/LinkChartLayout.js\";import{fetchKnowledgeGraph as I}from\"../rest/knowledgeGraphService.js\";import v from\"../rest/knowledgeGraph/EntityType.js\";import A from\"../rest/knowledgeGraph/RelationshipType.js\";import _ from\"../geometry/Extent.js\";import j from\"../geometry/Point.js\";import P from\"../geometry/Polyline.js\";const S=(e,t,a)=>(e.has(t)||e.set(t,a()),e.get(t));let z=class extends(C(M(h))){constructor(e){if(super(e),this.dataPreloadedInLocalCache=!1,this.defaultLinkChartConfig=null,this._currentLinkChartConfig={layoutMode:\"RADIAL_TREE\"},this._graphTypeLookup=new Map,this.dataManager=null,this.knowledgeGraph=null,this.layers=new t,this.entityLinkChartDiagramLookup=new Map,this.relationshipLinkChartDiagramLookup=new Map,this.linkChartExtent=new _({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7}),this.linkChartGeohashLookup=new Map,this.memberEntityTypes=null,this.memberRelationshipTypes=null,this.sublayerIdsCache=new Map,this.tables=new t,this.type=\"link-chart\",this._originalInclusionList=e.inclusionModeDefinition,e.dataPreloadedInLocalCache&&!e.inclusionModeDefinition)throw new a(\"knowledge-graph:linkchart-layer-constructor\",\"If creating a link chart composite layer and configured that data is already loaded in the cache, you must specify an inclusion list so the Composite Layer knows what records belong to it\")}normalizeCtorArgs(e){return{url:e.url,title:e.title,dataPreloadedInLocalCache:e.dataPreloadedInLocalCache,defaultLinkChartConfig:e.defaultLinkChartConfig}}_initializeLayerProperties(e){if(!this.title&&this.url){const e=this.url.split(\"/\");this.title=e[e.length-2]}const t=new Set;let n=[],s=[];if(e.inclusionModeDefinition&&(!e.inclusionModeDefinition.namedTypeDefinitions||e.inclusionModeDefinition.namedTypeDefinitions.size<1))throw new a(\"knowledge-graph:composite-layer-constructor\",\"If an explicit inclusion definition is defined, at least one namedTypeDefinition must also be defined\");e.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)})),e.inclusionModeDefinition?.generateAllSublayers?(n=e.knowledgeGraph.dataModel.entityTypes??[],s=e.knowledgeGraph.dataModel.relationshipTypes??[]):e.inclusionModeDefinition?.namedTypeDefinitions&&e.inclusionModeDefinition?.namedTypeDefinitions.size>0?e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((a,o)=>{if(!this._graphTypeLookup.get(o))return i.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(o);this._graphTypeLookup.get(o)instanceof A||\"strictOrigin\"in this._graphTypeLookup.get(o)?t.has(o)||(t.add(o),s.push(this._graphTypeLookup.get(o))):this._graphTypeLookup.get(o)instanceof v||\"properties\"in this._graphTypeLookup.get(o)?t.has(o)||(t.add(o),n.push(this._graphTypeLookup.get(o))):(i.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't properly modeled and will be removed`),e.inclusionModeDefinition?.namedTypeDefinitions.delete(o))})):(n=e.knowledgeGraph.dataModel.entityTypes??[],s=e.knowledgeGraph.dataModel.relationshipTypes??[]);const o=new d({knowledgeGraph:e.knowledgeGraph,inclusionModeDefinition:e.inclusionModeDefinition});this.knowledgeGraph=e.knowledgeGraph,this.memberEntityTypes=n,this.memberRelationshipTypes=s,this.dataManager=o}load(e){return this.addResolvingPromise(new Promise((t=>{I(this.url).then((a=>{if(this._initializeLayerProperties({knowledgeGraph:a,inclusionModeDefinition:this._originalInclusionList}),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.size||(this.dataManager.inclusionModeDefinition={generateAllSublayers:!1,namedTypeDefinitions:new Map},this.dataManager.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})})),this.dataManager.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})}))),this.dataPreloadedInLocalCache)this.loadLayerAssumingLocalCache(),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach((e=>{e.useAllData=!1,e.members?.forEach((e=>{let t;t=e.linkChartLocation instanceof p?e.linkChartLocation:e.linkChartLocation?l(e.linkChartLocation):null,t&&2===t.coords.length&&0===t.lengths.length?(this.linkChartGeohashLookup.set(e.id,r(t.coords[1],t.coords[0],f)),this.entityLinkChartDiagramLookup.set(e.id,t)):(this.linkChartGeohashLookup.set(e.id,\"\"),this.relationshipLinkChartDiagramLookup.set(e.id,t))})),this.addResolvingPromise(this._initializeDiagram().then((async()=>{this.layers.forEach((async e=>{await e.refreshCachedQueryEngine()})),this.tables.forEach((async e=>{await e.refreshCachedQueryEngine()}))})))}));else{const t=\"GEOGRAPHIC\"===this.defaultLinkChartConfig?.layoutMode;this.addResolvingPromise(this.dataManager.refreshCacheContent(void 0,!1,t,!0).then((async()=>{n(e);const t=[],a=[];this.loadLayerAssumingLocalCache(),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1,this.dataManager.inclusionModeDefinition.namedTypeDefinitions.forEach((e=>{e.useAllData=!1}))),await this._initializeDiagram(),this.layers.forEach((e=>{a.push(e.refreshCachedQueryEngine()),t.push(new Promise((t=>{e.on(\"layerview-create\",(()=>{t(null)}))})))})),this.tables.forEach((e=>{a.push(e.refreshCachedQueryEngine())})),await Promise.all(a)})))}t(null)}))}))),Promise.resolve(this)}async addRecords(e,t){let a=[];t?.cascadeAddRelationshipEndNodes&&this.dataManager.knowledgeGraph.dataModel&&(a=await L(e,this.dataManager.knowledgeGraph));const i=e.concat(a).filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id)));await this._handleNewRecords(i)}async removeRecords(e,{cascadeRemoveRelationships:t=!0,recalculateLayout:a=!1}={cascadeRemoveRelationships:!0,recalculateLayout:!1}){let i=[];for(const s of e)!1===this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(s.typeName)?.useAllData&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(s.typeName)?.members?.has(s.id)&&i.push(s);if(t){const e=new Set,t=[];for(const a of i)if(this.dataManager.nodeConnectionsLookup.has(a.id))for(const t of this.dataManager.nodeConnectionsLookup.get(a.id))e.add(t);for(const a of e)if(this.dataManager.memberIdTypeLookup.has(a))for(const e of this.dataManager.memberIdTypeLookup.get(a))this.dataManager.relationshipTypeNames.has(e)&&t.push({id:a,typeName:e});i=i.concat(t)}this.dataManager.removeFromLayer(i);for(const s of i)this.sublayerIdsCache.get(s.typeName)?.delete(s.id),this.dataManager.relationshipTypeNames.has(s.typeName)?this.relationshipLinkChartDiagramLookup.delete(s.id):this.entityLinkChartDiagramLookup.delete(s.id);a&&await this.calculateLinkChartLayout(this._currentLinkChartConfig.layoutMode,{});const n=[];return this.layers.forEach((e=>{n.push(e.refreshCachedQueryEngine())})),await Promise.all(n),this._refreshNamedTypes(),i}async expand(e,t){const a=await this.dataManager.getConnectedRecordIds(e,t),i=a.filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id)));return await this._handleNewRecords(a),{records:i}}loadLayerAssumingLocalCache(){this.memberRelationshipTypes.forEach((e=>{const t=new k({objectType:e,parentCompositeLayer:this,graphType:\"relationship\",title:e.name});t.geometryType?this.layers.push(t):this.tables.push(t),this.dataManager.sublayerCaches.has(e.name)||this.dataManager.sublayerCaches.set(e.name,new Map)})),this.memberEntityTypes.forEach((e=>{const t=new k({objectType:e,parentCompositeLayer:this,graphType:\"entity\",title:e.name});t.geometryType?this.layers.push(t):this.tables.push(t),this.dataManager.sublayerCaches.has(e.name)||this.dataManager.sublayerCaches.set(e.name,new Map)})),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{const a=S(this.sublayerIdsCache,t,(()=>new Set));e.members?.forEach((e=>{if(a.add(e.id),e.linkChartLocation)if(e.linkChartLocation instanceof p)this.dataManager.relationshipTypeNames.has(t)?this.relationshipLinkChartDiagramLookup.set(e.id,e.linkChartLocation):this.entityLinkChartDiagramLookup.set(e.id,e.linkChartLocation),2===e.linkChartLocation.coords.length&&0===e.linkChartLocation.lengths.length?this.linkChartGeohashLookup.set(e.id,r(e.linkChartLocation.coords[1],e.linkChartLocation.coords[0],f)):this.linkChartGeohashLookup.set(e.id,\"\");else{const a=l(e.linkChartLocation);this.dataManager.relationshipTypeNames.has(t)?this.relationshipLinkChartDiagramLookup.set(e.id,e.linkChartLocation?a:null):this.entityLinkChartDiagramLookup.set(e.id,e.linkChartLocation?a:null),\"x\"in e.linkChartLocation&&\"y\"in e.linkChartLocation?this.linkChartGeohashLookup.set(e.id,r(e.linkChartLocation.x,e.linkChartLocation.y,f)):this.linkChartGeohashLookup.set(e.id,\"\")}}))}))}async calculateLinkChartLayout(e=\"RADIAL_TREE\",t){const n=[],s=[],o=[];this.dataManager.sublayerCaches.forEach(((e,t)=>{this.dataManager.entityTypeNames.has(t)?e.forEach((e=>{n.push({typeName:t,feature:e})})):this.dataManager.relationshipTypeNames.has(t)&&e.forEach((e=>{s.push({typeName:t,feature:e})}))})),this.entityLinkChartDiagramLookup=new Map,this.relationshipLinkChartDiagramLookup=new Map;const h=new Map,p=new Map,d=new Map,k=new Map,L=new Uint8Array(n.length),C=new Float64Array(n.length),M=new Float64Array(n.length),I=new Uint32Array(s.length),v=new Uint32Array(s.length),A=[],S=\"FORCE_DIRECTED\",z=new _({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7});let O,U=\"FORCE_DIRECTED\",Q=0,F=0;switch(U=\"GEOGRAPHIC\"===e?S:e,U){case\"FORCE_DIRECTED\":O=E.apply;break;case\"COMMUNITY\":O=T.apply;break;case\"HIERARCHICAL\":O=x.apply;break;case\"RADIAL_TREE\":O=D.apply;break;case\"SMART_TREE\":O=b.apply;break;default:O=w.apply}n.forEach((({typeName:a,feature:i})=>{if(t?.lockedNodeLocations?.has(i.attributes[c])){\"GEOGRAPHIC\"===e&&this.dataManager.geographicLookup.has(a)?L[Q]=N.IsGeographic:L[Q]=N.None;const n=t.lockedNodeLocations.get(i.attributes[c]);C[Q]=n.x,M[Q]=n.y}else if(\"GEOGRAPHIC\"===e&&this.dataManager.geographicLookup.has(a)){L[Q]=N.IsGeographic;let e=null;const t=i.attributes[this.dataManager.geographicLookup.get(a).name],n=this.dataManager.geographicLookup.get(a)?.geometryType;switch(n){case\"esriGeometryPoint\":C[Q]=t?.x,M[Q]=t?.y;break;case\"esriGeometryPolygon\":e=t?.centroid,null!=e?.x&&null!=e?.y?(C[Q]=e.x,M[Q]=e.y):L[Q]=N.IsMovable;break;case\"esriGeometryPolyline\":case\"esriGeometryMultipoint\":e=t?.extent?.center,null!=e?.x&&null!=e?.y?(C[Q]=e.x,M[Q]=e.y):L[Q]=N.IsMovable;break;default:L[Q]=N.IsMovable}(null==C[Q]||null==M[Q]||Number.isNaN(C[Q])||Number.isNaN(M[Q]))&&(L[Q]=N.IsMovable,C[Q]=0,M[Q]=0)}else L[Q]=N.IsMovable,C[Q]=0,M[Q]=0;k.set(i.attributes[c],Q),A[Q]={feature:i,typeName:a},Q++}));let H=!1;const K=new Map;s.forEach((e=>{const t=e.feature.attributes[u],a=e.feature.attributes[y],i=k.get(t),n=k.get(a);if(void 0!==i&&void 0!==n){const s=t+\"-\"+a,r=K.get(s),h=r?.has(e.typeName);h||(I[F]=i,v[F]=n,void 0===r?K.set(s,new Map([[e.typeName,F]])):r.set(e.typeName,F),F++),o.push(e)}else H=!0,this.relationshipLinkChartDiagramLookup.set(t,null),this.linkChartGeohashLookup.set(t,null)})),H&&i.getLogger(this).warn(\"A relationship is a member of this layer that has either origin or destination entity nodes that are not members. The diagram geometry will be set to null\"),await G();const{success:$,links:B}=O(L,C,M,I.subarray(0,F),v.subarray(0,F));if(!$)throw new a(\"knowledge-graph:layout-failed\",\"Attempting to arrange the records in the specified layout failed\");for(let a=0;a<A.length;a++){if(M[a]>84.9999?M[a]=84.9999:M[a]<-84.9999&&(M[a]=-84.9999),C[a]>179.9999?C[a]=179.9999:C[a]<-179.9999&&(C[a]=-179.9999),A[a].feature.attributes[m]=new j(C[a],M[a]),h.has(A[a].typeName)){const e=h.get(A[a].typeName);e?.set(A[a].feature.attributes[c],A[a].feature)}else{const e=new Map;e.set(A[a].feature.attributes[c],A[a].feature),h.set(A[a].typeName,e)}d.set(A[a].feature.attributes[c],A[a].feature);const e=l(A[a].feature.attributes[m]);this.entityLinkChartDiagramLookup.set(A[a].feature.attributes[c],A[a].feature.attributes[m]?e:null),this.linkChartGeohashLookup.set(A[a].feature.attributes[c],r(A[a].feature.attributes[m].y,A[a].feature.attributes[m].x,f)),A[a].feature.attributes[m].x<z.xmin&&(z.xmin=A[a].feature.attributes[m].x),A[a].feature.attributes[m].x>z.xmax&&(z.xmax=A[a].feature.attributes[m].x),A[a].feature.attributes[m].y<z.ymin&&(z.ymin=A[a].feature.attributes[m].y),A[a].feature.attributes[m].y>z.ymax&&(z.ymax=A[a].feature.attributes[m].y)}if(this.linkChartExtent.xmin=z.xmin,this.linkChartExtent.xmax=z.xmax,this.linkChartExtent.ymin=z.ymin,this.linkChartExtent.ymax=z.ymax,!B)throw new a(\"knowledge-graph:layout-failed\",\"Attempting to retrieve link geometry from diagram engine failed\");const W=new Map,Y=new Map,q=new Map,J=new Set;for(let a=0;a<o.length;a++){const e=[],t=o[a],n=t.feature.attributes[u],s=t.feature.attributes[y],r=n+\"-\"+s,h=K.get(r).get(t.typeName),g=0===h?0:B?.vertexEndIndex[h-1];if(!J.has(h)){if(J.add(h),B.types[h]===R.Recursive){const t=[B.vertices[2*g],B.vertices[2*g+1]],a=[B.vertices[2*(g+1)],B.vertices[2*(g+1)+1]],i=[.5*(t[0]+a[0]),.5*(t[1]+a[1])],n=[i[0]-t[0],i[1]-t[1]],s=[i[0]+n[1],i[1]-n[0]],o=[i[0]-n[1],i[1]+n[0]];e.push(t),e.push(s),e.push(a),e.push(o),e.push(t)}else{if(B.types[h]!==R.Regular){i.getLogger(this).warn(\"A relationship generated an unsupported link geometry type.  It will not be rendered\");continue}for(let t=g;t<B.vertexEndIndex[h];t++)e.push([B.vertices[2*t],B.vertices[2*t+1]])}const t=A[k.get(n)]?.feature.attributes[m],a=A[k.get(s)]?.feature.attributes[m];e[0][0]===t.x&&e[0][1]===t.y||(e[0]=[t.x,t.y]),e[e.length-1][0]===a.x&&e[e.length-1][1]===a.y||(e[e.length-1]=[a.x,a.y]);for(let i=1;i<e.length-1;i++)e[i][1]>85.5?e[i][1]=85.5:e[i][1]<-85.5&&(e[i][1]=-85.5),e[i][0]>179.9999?e[i][0]=179.9999:e[i][0]<-179.9999&&(e[i][0]=-179.9999);W.has(r)?W.get(r).push(e):W.set(r,[e])}const f=W.get(r);Y.has(r)||(Y.set(r,new Map),q.set(r,new Map));const L=Y.get(r),C=q.get(r);L.has(t.typeName)||(L.set(t.typeName,f.shift()),C.set(t.typeName,0));const M=L.get(t.typeName);C.set(t.typeName,C.get(t.typeName)+1);const w=new P({paths:M});if(t.feature.attributes[m]=w,p.has(t.typeName)){const e=p.get(t.typeName);e?.set(t.feature.attributes[c],t.feature)}else{const e=new Map;e.set(t.feature.attributes[c],t.feature),p.set(t.typeName,e)}d.set(t.feature.attributes[c],t.feature);const b=l(t.feature.attributes[m]);this.relationshipLinkChartDiagramLookup.set(t.feature.attributes[c],t.feature.attributes[m]?b:null),this.linkChartGeohashLookup.set(t.feature.attributes[c],\"\")}for(const a of o)a.feature.attributes[g]=q.get(a.feature.attributes[u]+\"-\"+a.feature.attributes[y])?.get(a.typeName)??null;return this._currentLinkChartConfig={layoutMode:e},{nodes:h,links:p,idMap:d}}async applyNewLinkChartLayout(e=\"RADIAL_TREE\",t){const a=[];await this.calculateLinkChartLayout(e,t),this.layers.forEach((e=>{a.push(e.refreshCachedQueryEngine())})),await Promise.all(a),this._refreshNamedTypes()}getCurrentNodeLocations(){const e=new Map;return this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach((t=>{t?.members?.forEach((t=>{const a=t.linkChartLocation;let i;const n=t.id;a&&(i=\"x\"in a?{x:a.x,y:a.y}:{x:a.coords[0],y:a.coords[1]},e.set(n,new j({x:i.x,y:i.y})))}))})),e}async synchronizeInclusionListWithCache(){return new Promise((e=>{this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{if(e.useAllData=!1,e.members&&e.members.size>0){if(!this.dataManager.sublayerCaches.get(t))return;const a=new Set(Array.from(this.dataManager.sublayerCaches.get(t).keys()));Array.from(e.members.keys()).filter((e=>!a.has(e))).forEach((t=>{e.members?.delete(t)}))}})),e()}))}async refreshLinkChartCache(e){await this.dataManager.refreshCacheContent(e);const t=[];this.layers.forEach((e=>{t.push(e.refreshCachedQueryEngine())})),await Promise.all(t),this._refreshNamedTypes()}async _handleNewRecords(e){const t=[];this.dataManager.addToLayer(e);for(const a of e)this.sublayerIdsCache.has(a.typeName)||(this.sublayerIdsCache.set(a.typeName,new Set),t.push(a.typeName)),this.sublayerIdsCache.get(a.typeName).add(a.id);for(const a of t)if(this._graphTypeLookup.has(a)){const e=this._graphTypeLookup.get(a),t=\"endPoints\"in e?\"relationship\":\"entity\",i=new k({objectType:e,parentCompositeLayer:this,graphType:t,title:a});\"entity\"===t?this.dataManager.entityTypeNames.add(a):this.dataManager.relationshipTypeNames.add(a),i.geometryType?this.layers.push(i):this.tables.push(i),this.dataManager.sublayerCaches.set(a,new Map)}await this.dataManager.refreshCacheContent(e.map((e=>e.id))),await this.applyNewLinkChartLayout(this._currentLinkChartConfig.layoutMode)}async _initializeDiagram(){this.defaultLinkChartConfig?this.defaultLinkChartConfig.doNotRecalculateLayout?(this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e?.members?.forEach((e=>{const a=e.linkChartLocation;let i;const n=e.id;if(!a)return;i=\"x\"in a?{x:a.x,y:a.y}:{x:a.coords[0],y:a.coords[1]};const s=l(i);this.dataManager.relationshipTypeNames.has(t)?this.relationshipLinkChartDiagramLookup.set(n,s):this.entityLinkChartDiagramLookup.set(n,s),this.linkChartGeohashLookup.set(n,r(i.x,i.y,f)),this.linkChartExtent.xmin>i.x&&(this.linkChartExtent.xmin=i.x),this.linkChartExtent.xmax<i.x&&(this.linkChartExtent.xmax=i.x),this.linkChartExtent.ymin>i.y&&(this.linkChartExtent.ymin=i.y),this.linkChartExtent.ymax<i.y&&(this.linkChartExtent.ymax=i.y)}))})),this.memberRelationshipTypes.forEach((e=>{e.name&&this.dataManager.sublayerCaches.get(e.name)?.forEach((e=>{const t=this.relationshipLinkChartDiagramLookup.get(e.attributes[u]),a=this.relationshipLinkChartDiagramLookup.get(e.attributes[y]);if(t&&a){const i=l(new P({paths:[[t.coords[0],t.coords[1]],[a.coords[0],a.coords[1]]]}));this.relationshipLinkChartDiagramLookup.set(e.attributes[c],i)}else this.relationshipLinkChartDiagramLookup.set(e.attributes[c],null);this.linkChartGeohashLookup.set(e.attributes[c],\"\")}))}))):await this.calculateLinkChartLayout(this.defaultLinkChartConfig.layoutMode,{lockedNodeLocations:this.getCurrentNodeLocations()}):await this.calculateLinkChartLayout(\"RADIAL_TREE\",{lockedNodeLocations:this.getCurrentNodeLocations()})}_refreshNamedTypes(){for(const e of this.layers)e.emit(\"refresh\",{dataChanged:!0});for(const e of this.tables)e.emit(\"refresh\",{dataChanged:!0})}};e([s()],z.prototype,\"dataPreloadedInLocalCache\",void 0),e([s()],z.prototype,\"defaultLinkChartConfig\",void 0),e([s()],z.prototype,\"dataManager\",void 0),e([s()],z.prototype,\"knowledgeGraph\",void 0),e([s()],z.prototype,\"layers\",void 0),e([s()],z.prototype,\"entityLinkChartDiagramLookup\",void 0),e([s()],z.prototype,\"relationshipLinkChartDiagramLookup\",void 0),e([s()],z.prototype,\"linkChartExtent\",void 0),e([s()],z.prototype,\"linkChartGeohashLookup\",void 0),e([s()],z.prototype,\"memberEntityTypes\",void 0),e([s()],z.prototype,\"memberRelationshipTypes\",void 0),e([s()],z.prototype,\"sublayerIdsCache\",void 0),e([s()],z.prototype,\"tables\",void 0),e([s({json:{read:!1}})],z.prototype,\"type\",void 0),z=e([o(\"esri.layers.LinkChartLayer\")],z);const O=z;export{O as default};\n"],
  "mappings": "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",
  "names": ["s", "o", "e", "t", "r", "n", "p", "a", "u", "c", "i", "y", "T", "s", "m", "d", "p", "e", "l", "s", "T", "e", "r", "w", "t", "n", "s", "i", "o", "l", "a", "w", "T", "E", "e", "t", "i", "_a", "_b", "s", "a", "o", "n", "b", "r", "d", "m", "p", "l", "_c", "_d", "_e", "_f", "_g", "h", "c", "y", "g", "D", "I", "M", "k", "u", "t", "s", "p", "I", "p", "n", "t", "e", "w", "r", "b", "o", "y", "s", "i", "a", "m", "e", "r", "n", "e", "t", "s", "r", "u", "o", "y", "a", "i", "l", "c", "E", "p", "f", "A", "b", "P", "L", "d", "H", "g", "R", "h", "U", "m", "B", "T", "t", "e", "r", "a", "n", "s", "u", "i", "o", "l", "E", "c", "y", "p", "f", "b", "P", "d", "S", "e", "t", "a", "z", "n", "s", "o", "_a", "_b", "p", "E", "w", "i", "h", "d", "k", "L", "M", "I", "A", "O", "U", "b", "P", "f", "_c", "u", "H", "T", "r", "$", "B", "g", "C"]
}
