{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{set as e}from\"../../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{RgbaFloatEncoding as r}from\"../util/RgbaFloatEncoding.glsl.js\";import{Float2PassUniform as a}from\"../../shaderModules/Float2PassUniform.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";function i(e){e.include(r),e.code.add(o`float linearDepthFromFloat(float depth, vec2 nearFar) {\nreturn -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);\n}\nfloat linearDepthFromRGBA(vec4 depth, vec2 nearFar) {\nreturn linearDepthFromFloat(rgba2float(depth), nearFar);\n}\nfloat linearDepthFromTexture(sampler2D depthTexture, vec2 uv, vec2 nearFar) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nreturn linearDepthFromRGBA(texelFetch(depthTexture, iuv, 0), nearFar);\n}`)}function c(e){e.uniforms.add(new a(\"zProjectionMap\",((e,t)=>d(t.camera)))),e.code.add(o`float linearizeDepth(float depth) {\nfloat depthNdc = depth * 2.0 - 1.0;\nfloat c1 = zProjectionMap[0];\nfloat c2 = zProjectionMap[1];\nreturn -(c1 / (depthNdc + c2));\n}`),e.code.add(o`float depthFromTexture(sampler2D depthTexture, vec2 uv) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nfloat depth = texelFetch(depthTexture, iuv, 0).r;\nreturn depth;\n}`),e.code.add(o`float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {\nreturn linearizeDepth(depthFromTexture(depthTexture, uv));\n}`)}function d(t){const r=t.projectionMatrix;return e(n,r[14],r[10])}const n=t();export{c as ReadDepth,i as ReadLinearDepth};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAI6W,SAAS,EAAEA,IAAE;AAAC,EAAAA,GAAE,QAAQ,CAAC,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASjZ;AAAC;AAAC,SAAS,EAAEA,IAAE;AAAC,EAAAA,GAAE,SAAS,IAAI,IAAI,EAAE,kBAAkB,CAACA,IAAE,MAAI,EAAE,EAAE,MAAM,CAAE,CAAC,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,EAKxF,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA,EAIb,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA,EAEb;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,QAAM,IAAE,EAAE;AAAiB,SAAOC,GAAEC,IAAE,EAAE,EAAE,GAAE,EAAE,EAAE,CAAC;AAAC;AAAC,IAAMA,KAAE,EAAE;",
  "names": ["e", "o", "n"]
}
