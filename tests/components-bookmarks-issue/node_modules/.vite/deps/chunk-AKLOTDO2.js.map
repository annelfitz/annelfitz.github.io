{
  "version": 3,
  "sources": ["../../@arcgis/core/support/timeUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from\"../TimeExtent.js\";import{isSome as e}from\"../core/arrayUtils.js\";import{clone as n}from\"../core/lang.js\";import{offsetDate as i}from\"../core/timeUtils.js\";import{isWebMap as r}from\"../webmap/utils.js\";function l(t){return void 0!==t.timeInfo}async function s(t,e){const{fullTimeExtent:n}=t.widgets?.timeSlider??{};return n||a(t.allLayers,e)}function u(t){const e=t.numThumbs??2,n=t.currentTimeExtent;if(n){const{start:t,end:i}=n;return null!=t&&null!=i&&t.getTime()===i.getTime()?\"instant\":2===e?\"time-window\":null==t||0===t.getTime()?\"cumulative-from-start\":\"cumulative-from-end\"}return 2===e?\"time-window\":\"cumulative-from-start\"}function o(t){const{numStops:e,stopInterval:i,stops:r}=t;return r?{dates:n(r)}:i?{interval:i.clone()}:{count:e??5}}async function a(n,i){if(0===n.length)return t.allTime;const r=n.filter(l);await Promise.all(r.map((t=>t.load({signal:i}))));const s=[],u=[];for(const t of r)\"feature\"!==t?.type&&\"map-image\"!==t?.type||!t.timeInfo?.hasLiveData?u.push(t):s.push(t);const o=t=>null==t||t.isAllTime,a=u.map((t=>t.timeInfo?.fullTimeExtent));if(a.some(o))return t.allTime;const m=s.map((async t=>{const{timeExtent:e}=await t.fetchRecomputedExtents({signal:i});return e||t.timeInfo?.fullTimeExtent})),f=(await Promise.allSettled(m)).map((t=>\"fulfilled\"===t.status?t.value:null));if(f.some(o))return t.allTime;return[...f,...a].filter(e).reduce(((t,e)=>t.union(e)))}function m(e,n){const i=e.currentTimeExtent;if(!i)return null;const{start:r,end:l}=i,s=r??l??null;switch(n){case\"time-window\":return new t({start:r,end:l});case\"cumulative-from-start\":return new t({start:null,end:s});case\"cumulative-from-end\":return new t({start:s,end:null});case\"instant\":return new t({start:s,end:s})}}async function f(t,e){if(null==t||!r(t))return null;await t.load({signal:e});const n=t?.widgets?.timeSlider;if(!n)return null;const i=await s(t,e),l=n.loop,a=u(n);return{fullTimeExtent:i,loop:l,mode:a,playRate:n.stopDelay??2e3,stops:o(n),timeExtent:m(n,a)}}function c(e){if(!e)return e;const{start:n,end:r}=e;return new t({start:null!=n?i(n,-n.getTimezoneOffset(),\"minutes\"):n,end:null!=r?i(r,-r.getTimezoneOffset(),\"minutes\"):r})}function d(e){if(!e)return e;const{start:n,end:r}=e;return new t({start:null!=n?i(n,n.getTimezoneOffset(),\"minutes\"):n,end:null!=r?i(r,r.getTimezoneOffset(),\"minutes\"):r})}export{a as getTimeExtentFromLayers,f as getTimeSliderSettingsFromWebMap,d as toLocalTimeExtent,c as toUTCTimeExtent};\n"],
  "mappings": "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",
  "names": ["e", "a", "t", "o", "s", "u", "_a", "m", "f", "l", "c"]
}
