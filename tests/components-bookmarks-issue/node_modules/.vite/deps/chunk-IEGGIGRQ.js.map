{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/interactive/SnappingVisualizer2D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../Graphic.js\";import\"../../../symbols.js\";import{makeHandle as t}from\"../../../core/handleUtils.js\";import{px2pt as r}from\"../../../core/screenUtils.js\";import{subtract as i,cross as o}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as n}from\"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as a}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{LineCapStyle as l,LineJoinStyle as s}from\"../../../symbols/cim/enums.js\";import{asVec2 as m}from\"../../interactive/sketch/normalizedPoint.js\";import{defaults as c}from\"../../interactive/snapping/Settings.js\";import{SnappingVisualizer as p}from\"../../interactive/snapping/SnappingVisualizer.js\";import y from\"../../../geometry/Point.js\";import g from\"../../../geometry/Polyline.js\";import b from\"../../../symbols/CIMSymbol.js\";import h from\"../../../symbols/SimpleMarkerSymbol.js\";import S from\"../../../symbols/SimpleLineSymbol.js\";class f extends p{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new y({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"intersectionPoint\",t.view.effectiveTheme.accentColor))}visualizePoint(e,t){return this._visualizeSnappingIndicator(new y({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"point\",t.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new g({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"line\",t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new g({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"parallelSign\",t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,t){const r=n(),l=n(),s=a();i(r,m(e.centerVertex),m(e.previousVertex)),i(l,m(e.nextVertex),m(e.previousVertex)),o(s,r,l);const c=`rightAngleQuad${s[2]<0?45:225}`;return this._visualizeSnappingIndicator(new g({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.spatialReference}),this._getOrCreateSymbol(c,t.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(r,i){const o=new e({geometry:r,symbol:i});return this._graphicsLayer.add(o),t((()=>{this._graphicsLayer.remove(o)}))}_getOrCreateSymbol(e,t){const r=this._symbolPairingsByType;return r.get(e)?.color!==t&&r.set(e,{color:t,symbol:u(e,t)}),r.get(e).symbol}}function u(e,t){const i=[...t.toRgb(),255*t.a];switch(e){case\"point\":return new h({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case\"intersectionPoint\":return new h({outline:new S({width:1.5,color:t}),size:15,color:[0,0,0,0]});case\"line\":return new b({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",enable:!0,capStyle:l.Butt,joinStyle:s.Round,miterLimit:10,width:r(c.lineHintWidthTarget),color:i}]}}});case\"parallelSign\":return new b({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:\"Relative\",size:5,markerPlacement:{type:\"CIMMarkerPlacementOnLine\",placePerPart:!0,angleToLine:!0,relativeTo:\"LineMiddle\"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:\"Relative\",size:5,markerPlacement:{type:\"CIMMarkerPlacementOnLine\",placePerPart:!0,angleToLine:!0,relativeTo:\"LineMiddle\"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case\"rightAngleQuad45\":case\"rightAngleQuad225\":{const o=\"rightAngleQuad45\"===e?45:225;return new b({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:\"Relative\",size:r(c.rightAngleHintSize),rotation:o,markerPlacement:{type:\"CIMMarkerPlacementOnVertices\",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",enable:!0,capStyle:\"Butt\",joinStyle:\"Round\",miterLimit:10,width:r(c.rightAngleHintOutlineSize),color:i},{type:\"CIMSolidFill\",enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}export{f as SnappingVisualizer2D};\n"],
  "mappings": "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",
  "names": ["f", "e", "r", "n", "y", "d"]
}
