{
  "version": 3,
  "sources": ["../../@arcgis/core/geometry/support/meshUtils/External.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{equals as r}from\"../../../core/arrayUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as s,getMimeTypeFormatId as n,getFilenameFormatId as a}from\"../../../layers/support/infoFor3D.js\";class i{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&r(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t=\"\";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return e(t),new Blob(s)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await t(this.partUrl,{responseType:\"blob\"});return e(r),s}}function u(t){return p(t?.source)}function c(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof i))}const f=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,l=/\\.(gltf|glb)/i;function p(t){if(!t)return!1;if(Array.isArray(t)){return t.some(m)}return m(t)}function m(t){if(t instanceof File){const{type:r,name:e}=t;return f.test(r)||l.test(e)}return f.test(t.assetMimeType)||l.test(t.assetName)}function h(t,r){if(!t)return!1;const{source:e}=t;return g(e,r)}function y(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(c(e)&&c(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function g(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>b(t,r)))}return b(t,r)}function b(t,r){return t instanceof i&&t.isOnService(r)}function N(t,r){return t instanceof File?s(t,r):n(t.assetMimeType,r)??a(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function v(t){return!!t.original}export{i as ServiceAsset,o as ServiceAssetPart,N as assetFormatId,b as assetIsOnService,h as externalIsOnService,A as externalSourceToMultiPart,y as externalSourcesAreEqual,m as isDisplayAsset,u as isDisplayExternal,p as isDisplaySource,v as isOriginalExternal,g as sourceIsOnService};\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAIgR,IAAMA,KAAN,MAAO;AAAA,EAAC,YAAY,GAAE,GAAE,GAAE;AAAC,SAAK,YAAU,GAAE,KAAK,gBAAc,GAAE,KAAK,QAAM;AAAA,EAAC;AAAA,EAAC,OAAO,GAAE;AAAC,WAAO,SAAO,KAAG,KAAK,cAAY,EAAE,aAAW,KAAK,kBAAgB,EAAE,iBAAe,EAAE,KAAK,OAAM,EAAE,OAAO,CAACC,IAAE,MAAIA,GAAE,OAAO,CAAC,CAAE;AAAA,EAAC;AAAA,EAAC,YAAY,GAAE;AAAC,WAAO,KAAK,MAAM,MAAO,OAAG,EAAE,YAAY,CAAC,CAAE;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,QAAI,IAAE;AAAG,eAAU,KAAK,KAAK;AAAM,WAAG,EAAE;AAAS,WAAO;AAAA,EAAC;AAAA,EAAC,MAAM,OAAO,GAAE;AAAC,UAAK,EAAC,OAAM,EAAC,IAAE;AAAK,QAAG,MAAI,EAAE;AAAO,aAAO,EAAE,CAAC,EAAE,OAAO,CAAC;AAAE,UAAMC,KAAE,MAAM,QAAQ,IAAI,EAAE,IAAK,CAAAC,OAAGA,GAAE,OAAO,CAAC,CAAE,CAAC;AAAE,WAAO,EAAE,CAAC,GAAE,IAAI,KAAKD,EAAC;AAAA,EAAC;AAAC;AAAC,IAAM,IAAN,MAAO;AAAA,EAAC,YAAY,GAAE,GAAE;AAAC,SAAK,UAAQ,GAAE,KAAK,WAAS;AAAA,EAAC;AAAA,EAAC,OAAO,GAAE;AAAC,WAAO,SAAO,KAAG,KAAK,YAAU,EAAE,WAAS,KAAK,aAAW,EAAE;AAAA,EAAQ;AAAA,EAAC,YAAY,GAAE;AAAC,WAAO,KAAK,QAAQ,WAAW,GAAG,EAAE,IAAI,UAAU;AAAA,EAAC;AAAA,EAAC,MAAM,OAAO,GAAE;AAAC,UAAK,EAAC,MAAKA,GAAC,IAAE,MAAM,EAAE,KAAK,SAAQ,EAAC,cAAa,OAAM,CAAC;AAAE,WAAO,EAAE,CAAC,GAAEA;AAAA,EAAC;AAAC;AAAC,SAASE,GAAE,GAAE;AAAC,SAAO,EAAE,uBAAG,MAAM;AAAC;AAAC,SAASC,GAAE,GAAE;AAAC,MAAG,CAAC,MAAM,QAAQ,CAAC;AAAE,WAAM;AAAG,SAAO,EAAE,MAAO,CAAAJ,OAAGA,cAAaD,EAAE;AAAC;AAAC,IAAM,IAAE;AAAR,IAAqD,IAAE;AAAgB,SAAS,EAAE,GAAE;AAAC,MAAG,CAAC;AAAE,WAAM;AAAG,MAAG,MAAM,QAAQ,CAAC,GAAE;AAAC,WAAO,EAAE,KAAK,CAAC;AAAA,EAAC;AAAC,SAAO,EAAE,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,MAAG,aAAa,MAAK;AAAC,UAAK,EAAC,MAAK,GAAE,MAAK,EAAC,IAAE;AAAE,WAAO,EAAE,KAAK,CAAC,KAAG,EAAE,KAAK,CAAC;AAAA,EAAC;AAAC,SAAO,EAAE,KAAK,EAAE,aAAa,KAAG,EAAE,KAAK,EAAE,SAAS;AAAC;AAAC,SAASM,GAAE,GAAE,GAAE;AAAC,MAAG,CAAC;AAAE,WAAM;AAAG,QAAK,EAAC,QAAO,EAAC,IAAE;AAAE,SAAO,EAAE,GAAE,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,MAAG,MAAI;AAAE,WAAM;AAAG,QAAK,EAAC,QAAO,EAAC,IAAE,GAAE,EAAC,QAAOJ,GAAC,IAAE;AAAE,MAAG,MAAIA;AAAE,WAAM;AAAG,MAAGG,GAAE,CAAC,KAAGA,GAAEH,EAAC,GAAE;AAAC,QAAG,EAAE,WAASA,GAAE;AAAO,aAAM;AAAG,UAAMD,KAAE,CAACA,IAAEE,OAAIF,GAAE,YAAUE,GAAE,YAAU,KAAGF,GAAE,YAAUE,GAAE,YAAU,IAAE,GAAEA,KAAE,CAAC,GAAG,CAAC,EAAE,KAAKF,EAAC,GAAE,IAAE,CAAC,GAAGC,EAAC,EAAE,KAAKD,EAAC;AAAE,aAAQM,KAAE,GAAEA,KAAEJ,GAAE,QAAO,EAAEI;AAAE,UAAG,CAACJ,GAAEI,EAAC,EAAE,OAAO,EAAEA,EAAC,CAAC;AAAE,eAAM;AAAG,WAAM;AAAA,EAAE;AAAC,SAAM;AAAE;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,MAAG,MAAM,QAAQ,CAAC,GAAE;AAAC,UAAM,IAAE;AAAE,WAAO,EAAE,SAAO,KAAG,EAAE,MAAO,CAAAN,OAAG,EAAEA,IAAE,CAAC,CAAE;AAAA,EAAC;AAAC,SAAO,EAAE,GAAE,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,SAAO,aAAaD,MAAG,EAAE,YAAY,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,SAAO,aAAa,OAAK,EAAE,GAAE,CAAC,IAAE,EAAE,EAAE,eAAc,CAAC,KAAG,EAAE,EAAE,WAAU,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,SAAO,MAAM,QAAQ,CAAC,IAAE,IAAE,CAAC,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,SAAM,CAAC,CAAC,EAAE;AAAQ;",
  "names": ["i", "t", "s", "r", "u", "c", "h", "e"]
}
