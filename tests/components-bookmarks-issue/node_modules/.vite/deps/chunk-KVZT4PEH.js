import {
  f as f2
} from "./chunk-VIRGWB3Z.js";
import {
  e as e5
} from "./chunk-637XZX4A.js";
import {
  m
} from "./chunk-5IITWVGY.js";
import {
  r
} from "./chunk-7KNPDPFB.js";
import {
  A as A3,
  d
} from "./chunk-M6P775BS.js";
import {
  e as e4,
  f,
  o as o4
} from "./chunk-J5F4VILS.js";
import {
  t as t2
} from "./chunk-KSBIR2KG.js";
import {
  A,
  E,
  S as S2,
  a as a2,
  l
} from "./chunk-7A5N7G2Z.js";
import {
  r as r2,
  r2 as r3,
  t
} from "./chunk-ZPC74XHC.js";
import {
  A as A2
} from "./chunk-IVGJRGD2.js";
import {
  u
} from "./chunk-JA2AO4PC.js";
import {
  r as r4
} from "./chunk-JBF6CULO.js";
import {
  u2
} from "./chunk-3DFMDDMO.js";
import {
  S,
  _,
  h,
  o as o3,
  s as s2
} from "./chunk-MEEG7XMI.js";
import {
  o as o2
} from "./chunk-LJULTBAY.js";
import {
  R
} from "./chunk-WKVHVZW2.js";
import {
  s
} from "./chunk-RLZYC2LS.js";
import {
  e as e3
} from "./chunk-TXLJQAAN.js";
import {
  y
} from "./chunk-IRL6OOVK.js";
import {
  a,
  i,
  o
} from "./chunk-CDBOQCLE.js";
import {
  e as e2
} from "./chunk-GLF3KRAL.js";
import {
  e
} from "./chunk-2F6FFF5T.js";

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js
var N = class _N extends r2 {
  initializeProgram(e6) {
    return new r3(e6.rctx, _N.shader.get().build(this.configuration), _2);
  }
  _setPipelineState(e6, r5) {
    const o5 = this.configuration, i2 = e6 === o2.NONE, s3 = e6 === o2.FrontFace;
    return S({ blending: o5.output !== o.Color && o5.output !== o.Alpha || !o5.transparent ? null : i2 ? E2 : A(e6), culling: h(o5.cullFace), depthTest: { func: l(e6) }, depthWrite: i2 ? o5.writeDepth ? o3 : null : E(e6), colorWrite: _, stencilWrite: o5.hasOccludees ? e4 : null, stencilTest: o5.hasOccludees ? r5 ? o4 : f : null, polygonOffset: i2 || s3 ? null : a2(o5.enableOffset) });
  }
  initializePipeline() {
    return this._occludeePipelineState = this._setPipelineState(this.configuration.transparencyPassType, true), this._setPipelineState(this.configuration.transparencyPassType, false);
  }
  getPipeline(e6) {
    return e6 ? this._occludeePipelineState : super.getPipeline();
  }
};
N.shader = new t(m, () => import("./ImageMaterial.glsl-3F3QULXB.js"));
var E2 = s2(R.ONE, R.ONE_MINUS_SRC_ALPHA);
var C = class extends t2 {
  constructor() {
    super(...arguments), this.output = o.Color, this.cullFace = e3.None, this.hasSlicePlane = false, this.transparent = false, this.enableOffset = true, this.writeDepth = true, this.hasOccludees = false, this.transparencyPassType = o2.NONE, this.multipassEnabled = false, this.cullAboveGround = false, this.perspectiveInterpolation = true;
  }
};
e([r4({ count: o.COUNT })], C.prototype, "output", void 0), e([r4({ count: e3.COUNT })], C.prototype, "cullFace", void 0), e([r4()], C.prototype, "hasSlicePlane", void 0), e([r4()], C.prototype, "transparent", void 0), e([r4()], C.prototype, "enableOffset", void 0), e([r4()], C.prototype, "writeDepth", void 0), e([r4()], C.prototype, "hasOccludees", void 0), e([r4({ count: o2.COUNT })], C.prototype, "transparencyPassType", void 0), e([r4()], C.prototype, "multipassEnabled", void 0), e([r4()], C.prototype, "cullAboveGround", void 0), e([r4()], C.prototype, "perspectiveInterpolation", void 0), e([r4({ constValue: false })], C.prototype, "occlusionPass", void 0);
var _2 = /* @__PURE__ */ new Map([[e2.POSITION, 0], [e2.UV0, 2], [e2.PERSPECTIVEDIVIDE, 3]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js
var T = class extends e5 {
  constructor(t3) {
    super(t3, new A4()), this.supportsEdges = true, this.produces = /* @__PURE__ */ new Map([[A2.OPAQUE_MATERIAL, (t4) => t4 === o.Highlight || i(t4) && !this.parameters.transparent], [A2.TRANSPARENT_MATERIAL, (t4) => i(t4) && this.parameters.transparent && this.parameters.writeDepth], [A2.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL, (t4) => i(t4) && this.parameters.transparent && !this.parameters.writeDepth], [A2.DRAPED_MATERIAL, (t4) => a(t4)]]), this._vertexAttributeLocations = _2, this._configuration = new C();
  }
  getConfiguration(t3, e6) {
    return this._configuration.output = t3, this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.hasOccludees = this.parameters.hasOccludees, this._configuration.transparencyPassType = e6.transparencyPassType, this._configuration.enableOffset = e6.camera.relativeElevation < S2, this._configuration.multipassEnabled = e6.multipassEnabled, this._configuration.cullAboveGround = e6.multipassTerrain.cullAboveGround, this._configuration.perspectiveInterpolation = this.parameters.perspectiveInterpolation, this._configuration;
  }
  createGLMaterial(t3) {
    return new I(t3);
  }
  createBufferWriter() {
    const t3 = f2.clone();
    return this.parameters.perspectiveInterpolation && t3.f32(e2.PERSPECTIVEDIVIDE), new b(t3);
  }
};
var I = class extends u {
  constructor(t3) {
    super({ ...t3, ...t3.material.parameters });
  }
  _updateParameters(t3) {
    return this.updateTexture(this._material.parameters.textureId), this._material.setParameters(this.textureBindParameters), this.ensureTechnique(N, t3);
  }
  _updateOccludeeState(t3) {
    t3.hasOccludees !== this._material.parameters.hasOccludees && (this._material.setParameters({ hasOccludees: t3.hasOccludees }), this._updateParameters(t3));
  }
  beginSlot(t3) {
    return this._output !== o.Color && this._output !== o.Alpha || this._updateOccludeeState(t3), this._updateParameters(t3);
  }
};
var b = class extends r {
  write(e6, r5, s3, a3, i2) {
    for (const n2 of this.vertexBufferLayout.fields.keys()) {
      const o5 = s3.attributes.get(n2);
      if (o5)
        if (n2 === e2.PERSPECTIVEDIVIDE) {
          s(1 === o5.size);
          const e7 = a3.getField(n2, y);
          e7 && d(o5, e7, i2);
        } else
          A3(n2, o5, e6, r5, a3, i2);
    }
  }
};
var A4 = class extends u2 {
  constructor() {
    super(...arguments), this.transparent = false, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = e3.None, this.hasOccludees = false, this.opacity = 1, this.textureId = null, this.initTextureTransparent = true, this.perspectiveInterpolation = false;
  }
};

export {
  T
};
//# sourceMappingURL=chunk-KVZT4PEH.js.map
