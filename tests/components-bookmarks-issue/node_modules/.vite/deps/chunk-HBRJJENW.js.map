{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{ReadLinearDepth as e}from\"../output/ReadDepth.glsl.js\";import{Float2PassUniform as r}from\"../../shaderModules/Float2PassUniform.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as a}from\"../../shaderModules/Texture2DPassUniform.js\";function o(o,n){if(!n.multipassEnabled)return;o.fragment.include(e),o.fragment.uniforms.add(new a(\"terrainDepthTexture\",((e,r)=>r.multipassTerrain.linearDepth?.getTexture())),new r(\"nearFar\",((e,r)=>r.camera.nearFar)));const s=n.occlusionPass;o.fragment.code.add(t`\n   ${s?\"bool\":\"void\"} terrainDepthTest(float fragmentDepth) {\n      vec4 data = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0);\n      float linearDepth = linearDepthFromRGBA(data, nearFar);\n      ${s?t`return fragmentDepth < linearDepth && data != vec4(0.0, 0.0, 0.0, 1.0);`:t`\n          if(fragmentDepth ${n.cullAboveGround?\">\":\"<=\"} linearDepth){\n            discard;\n          }`}\n    }`)}class n{constructor(){this.cullAboveGround=!1}}export{n as MultipassTerrainUniforms,o as multipassTerrainTest};\n"],
  "mappings": ";;;;;;;;;;;;;;AAIuR,SAASA,GAAEA,IAAEC,IAAE;AAAC,MAAG,CAACA,GAAE;AAAiB;AAAO,EAAAD,GAAE,SAAS,QAAQ,CAAC,GAAEA,GAAE,SAAS,SAAS,IAAI,IAAI,EAAE,uBAAuB,CAACE,IAAE,MAAE;AAJrZ;AAIuZ,mBAAE,iBAAiB,gBAAnB,mBAAgC;AAAA,GAAa,GAAE,IAAI,EAAE,WAAW,CAACA,IAAE,MAAI,EAAE,OAAO,OAAQ,CAAC;AAAE,QAAMC,KAAEF,GAAE;AAAc,EAAAD,GAAE,SAAS,KAAK,IAAI;AAAA,KACzhBG,KAAE,SAAO,MAAM;AAAA;AAAA;AAAA,QAGZA,KAAE,6EAA2E;AAAA,6BACxDF,GAAE,kBAAgB,MAAI,IAAI;AAAA;AAAA,YAE3C;AAAA,MACN;AAAC;AAAC,IAAM,IAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,kBAAgB;AAAA,EAAE;AAAC;",
  "names": ["o", "n", "e", "s"]
}
