import {
  b
} from "./chunk-W5ALAOW2.js";

// node_modules/@arcgis/core/layers/support/featureQueryAll.js
async function r(e, r2, a2) {
  r2 = r2.clone(), e.capabilities.query.supportsMaxRecordCountFactor && (r2.maxRecordCountFactor = u(e));
  const n = t(e), o = e.capabilities.query.supportsPagination;
  r2.start = 0, r2.num = n;
  let i = null;
  for (; ; ) {
    const t2 = await e.source.queryFeaturesJSON(r2, a2);
    if (null == i ? i = t2 : i.features = i.features.concat(t2.features), i.exceededTransferLimit = t2.exceededTransferLimit, !o || !t2.exceededTransferLimit)
      break;
    r2.start += n;
  }
  return i;
}
function t(e) {
  return u(e) * a(e);
}
function a(e) {
  return e.capabilities.query.maxRecordCount || 2e3;
}
function u(r2) {
  return r2.capabilities.query.supportsMaxRecordCountFactor ? b.MAX_MAX_RECORD_COUNT_FACTOR : 1;
}

export {
  r,
  t
};
//# sourceMappingURL=chunk-U34ZXOJT.js.map
