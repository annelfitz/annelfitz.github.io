{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{releaseMaybe as t}from\"../../../../core/maybe.js\";import{isPromiseLike as e}from\"../../../../core/promiseUtils.js\";import{NoParameters as s}from\"../core/shaderModules/interfaces.js\";import{ResourceState as i}from\"./basicInterfaces.js\";import r from\"./GLMaterial.js\";class u extends r{constructor(t){super(t),this._numLoading=0,this._disposed=!1,this._textureRepository=t.textureRepository,this._textureId=t.textureId,this._acquire(t.textureId,(t=>this._texture=t)),this._acquire(t.normalTextureId,(t=>this._textureNormal=t)),this._acquire(t.emissiveTextureId,(t=>this._textureEmissive=t)),this._acquire(t.occlusionTextureId,(t=>this._textureOcclusion=t)),this._acquire(t.metallicRoughnessTextureId,(t=>this._textureMetallicRoughness=t))}dispose(){this._texture=t(this._texture),this._textureNormal=t(this._textureNormal),this._textureEmissive=t(this._textureEmissive),this._textureOcclusion=t(this._textureOcclusion),this._textureMetallicRoughness=t(this._textureMetallicRoughness),this._disposed=!0}ensureResources(t){return 0===this._numLoading?i.LOADED:i.LOADING}get textureBindParameters(){return new l(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:null)}updateTexture(e){null!=this._texture&&e===this._texture.id||(this._texture=t(this._texture),this._textureId=e,this._acquire(this._textureId,(t=>this._texture=t)))}_acquire(s,i){if(null==s)return void i(null);const r=this._textureRepository.acquire(s);if(e(r))return++this._numLoading,void r.then((e=>{if(this._disposed)return t(e),void i(null);i(e)})).finally((()=>--this._numLoading));i(r)}}class l extends s{constructor(t=null,e=null,s=null,i=null,r=null,u,l){super(),this.texture=t,this.textureNormal=e,this.textureEmissive=s,this.textureOcclusion=i,this.textureMetallicRoughness=r,this.scale=u,this.normalTextureTransformMatrix=l}}export{u as GLTextureMaterial,l as GLTextureMaterialBindParameters};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAIiR,IAAM,IAAN,cAAgBA,GAAC;AAAA,EAAC,YAAYA,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,cAAY,GAAE,KAAK,YAAU,OAAG,KAAK,qBAAmBA,GAAE,mBAAkB,KAAK,aAAWA,GAAE,WAAU,KAAK,SAASA,GAAE,WAAW,CAAAA,OAAG,KAAK,WAASA,EAAE,GAAE,KAAK,SAASA,GAAE,iBAAiB,CAAAA,OAAG,KAAK,iBAAeA,EAAE,GAAE,KAAK,SAASA,GAAE,mBAAmB,CAAAA,OAAG,KAAK,mBAAiBA,EAAE,GAAE,KAAK,SAASA,GAAE,oBAAoB,CAAAA,OAAG,KAAK,oBAAkBA,EAAE,GAAE,KAAK,SAASA,GAAE,4BAA4B,CAAAA,OAAG,KAAK,4BAA0BA,EAAE;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,WAAS,EAAE,KAAK,QAAQ,GAAE,KAAK,iBAAe,EAAE,KAAK,cAAc,GAAE,KAAK,mBAAiB,EAAE,KAAK,gBAAgB,GAAE,KAAK,oBAAkB,EAAE,KAAK,iBAAiB,GAAE,KAAK,4BAA0B,EAAE,KAAK,yBAAyB,GAAE,KAAK,YAAU;AAAA,EAAE;AAAA,EAAC,gBAAgBA,IAAE;AAAC,WAAO,MAAI,KAAK,cAAY,EAAE,SAAO,EAAE;AAAA,EAAO;AAAA,EAAC,IAAI,wBAAuB;AAAC,WAAO,IAAI,EAAE,QAAM,KAAK,WAAS,KAAK,SAAS,YAAU,MAAK,QAAM,KAAK,iBAAe,KAAK,eAAe,YAAU,MAAK,QAAM,KAAK,mBAAiB,KAAK,iBAAiB,YAAU,MAAK,QAAM,KAAK,oBAAkB,KAAK,kBAAkB,YAAU,MAAK,QAAM,KAAK,4BAA0B,KAAK,0BAA0B,YAAU,IAAI;AAAA,EAAC;AAAA,EAAC,cAAc,GAAE;AAAC,YAAM,KAAK,YAAU,MAAI,KAAK,SAAS,OAAK,KAAK,WAAS,EAAE,KAAK,QAAQ,GAAE,KAAK,aAAW,GAAE,KAAK,SAAS,KAAK,YAAY,CAAAA,OAAG,KAAK,WAASA,EAAE;AAAA,EAAE;AAAA,EAAC,SAAS,GAAE,GAAE;AAAC,QAAG,QAAM;AAAE,aAAO,KAAK,EAAE,IAAI;AAAE,UAAM,IAAE,KAAK,mBAAmB,QAAQ,CAAC;AAAE,QAAG,EAAE,CAAC;AAAE,aAAM,EAAE,KAAK,aAAY,KAAK,EAAE,KAAM,OAAG;AAAC,YAAG,KAAK;AAAU,iBAAO,EAAE,CAAC,GAAE,KAAK,EAAE,IAAI;AAAE,UAAE,CAAC;AAAA,MAAC,CAAE,EAAE,QAAS,MAAI,EAAE,KAAK,WAAY;AAAE,MAAE,CAAC;AAAA,EAAC;AAAC;AAAC,IAAM,IAAN,cAAgB,EAAC;AAAA,EAAC,YAAYA,KAAE,MAAK,IAAE,MAAK,IAAE,MAAK,IAAE,MAAK,IAAE,MAAKC,IAAEC,IAAE;AAAC,UAAM,GAAE,KAAK,UAAQF,IAAE,KAAK,gBAAc,GAAE,KAAK,kBAAgB,GAAE,KAAK,mBAAiB,GAAE,KAAK,2BAAyB,GAAE,KAAK,QAAMC,IAAE,KAAK,+BAA6BC;AAAA,EAAC;AAAC;",
  "names": ["t", "u", "l"]
}
