{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/interfaces.js\";function e(e){e.fragment.code.add(a`vec4 textureAtlasLookup(sampler2D tex, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nreturn textureGrad(tex, uvAtlas, dUVdx, dUVdy);\n}`)}export{e as TextureAtlasLookup};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../../../core/compilerUtils.js\";import{TextureCoordinateAttribute as t,TextureCoordinateAttributeType as r}from\"./TextureCoordinateAttribute.glsl.js\";import{TextureAtlasLookup as o}from\"../util/TextureAtlasLookup.glsl.js\";import{glsl as u}from\"../../shaderModules/interfaces.js\";function s(s,a){switch(s.include(t,a),a.textureCoordinateType){case r.Default:case r.Compressed:return void s.fragment.code.add(u`vec4 textureLookup(sampler2D tex, vec2 uv) {\nreturn texture(tex, uv);\n}`);case r.Atlas:return s.include(o),void s.fragment.code.add(u`vec4 textureLookup(sampler2D tex, vec2 uv) {\nreturn textureAtlasLookup(tex, uv, vuvRegion);\n}`);default:e(a.textureCoordinateType);case r.None:case r.COUNT:return}}export{s as VertexTextureCoordinates};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{VertexTextureCoordinates as e}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{Float3DrawUniform as s}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as o}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{Texture2DDrawUniform as i}from\"../../shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as t}from\"../../shaderModules/Texture2DPassUniform.js\";import{BindType as a}from\"../../shaderTechnique/BindType.js\";import{GLTextureMaterialBindParameters as n}from\"../../../lib/GLTextureMaterial.js\";var c;!function(e){e[e.Disabled=0]=\"Disabled\",e[e.Normal=1]=\"Normal\",e[e.Schematic=2]=\"Schematic\",e[e.Water=3]=\"Water\",e[e.WaterOnIntegratedMesh=4]=\"WaterOnIntegratedMesh\",e[e.Simplified=5]=\"Simplified\",e[e.TerrainWithWater=6]=\"TerrainWithWater\",e[e.COUNT=7]=\"COUNT\"}(c||(c={}));class u extends n{}function l(n,u){const l=n.fragment,m=u.hasMetallicRoughnessTexture||u.hasEmissionTexture||u.hasOcclusionTexture;if(u.pbrMode===c.Normal&&m&&n.include(e,u),u.pbrMode!==c.Schematic)if(u.pbrMode!==c.Disabled){if(u.pbrMode===c.Normal){l.code.add(r`vec3 mrr;\nvec3 emission;\nfloat occlusion;`);const e=u.pbrTextureBindType;u.hasMetallicRoughnessTexture&&(l.uniforms.add(e===a.Pass?new t(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness)):new i(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness))),l.code.add(r`void applyMetallnessAndRoughness(vec2 uv) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, uv).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),u.hasEmissionTexture&&(l.uniforms.add(e===a.Pass?new t(\"texEmission\",(e=>e.textureEmissive)):new i(\"texEmission\",(e=>e.textureEmissive))),l.code.add(r`void applyEmission(vec2 uv) {\nemission *= textureLookup(texEmission, uv).rgb;\n}`)),u.hasOcclusionTexture?(l.uniforms.add(e===a.Pass?new t(\"texOcclusion\",(e=>e.textureOcclusion)):new i(\"texOcclusion\",(e=>e.textureOcclusion))),l.code.add(r`void applyOcclusion(vec2 uv) {\nocclusion *= textureLookup(texOcclusion, uv).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):l.code.add(r`float getBakedOcclusion() { return 1.0; }`),e===a.Pass?l.uniforms.add(new o(\"emissionFactor\",(e=>e.emissiveFactor)),new o(\"mrrFactors\",(e=>e.mrrFactors))):l.uniforms.add(new s(\"emissionFactor\",(e=>e.emissiveFactor)),new s(\"mrrFactors\",(e=>e.mrrFactors))),l.code.add(r`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n\n      ${u.hasMetallicRoughnessTexture?r`applyMetallnessAndRoughness(${u.hasMetallicRoughnessTextureTransform?r`metallicRoughnessUV`:\"vuv0\"});`:\"\"}\n\n      ${u.hasEmissionTexture?r`applyEmission(${u.hasEmissiveTextureTransform?r`emissiveUV`:\"vuv0\"});`:\"\"}\n\n      ${u.hasOcclusionTexture?r`applyOcclusion(${u.hasOcclusionTextureTransform?r`occlusionUV`:\"vuv0\"});`:\"\"}\n    }\n  `)}}else l.code.add(r`float getBakedOcclusion() { return 1.0; }`);else l.code.add(r`vec3 mrr = vec3(0.0, 0.6, 0.2);\nvec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}export{u as PBRBindParameters,c as PBRMode,l as PhysicallyBasedRenderingParameters};\n"],
  "mappings": "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",
  "names": ["e", "s", "a", "o", "e", "e", "l", "n", "s", "e", "o"]
}
