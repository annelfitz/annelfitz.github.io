{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/effects/EffectView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import has from\"../../core/has.js\";import{clone as s}from\"../../core/lang.js\";import r from\"../../core/Logger.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{parse as c}from\"./parser.js\";import{canInterpolateEffects as o,normalizeEffects as f}from\"./utils.js\";const l=-1;let h=class extends e{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=has(\"mapview-transitions-duration\"),this.effects=[]}set effect(t){if(this._get(\"effect\")!==(t=t||\"\")){this._set(\"effect\",t);try{this._transitionTo(a(t))}catch(e){this._transitionTo([]),r.getLogger(this).warn(\"Invalid Effect\",{effect:t,error:e})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return null!==this._to}canTransitionTo(t){try{return this.scale>0&&u(this._current,a(t),this.scale)}catch{return!1}}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}endTransitions(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&u(this._current,t,this.scale)?(this._final=t,this._to=s(t),_(this._current,this._to,this.scale),this._from=s(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set(\"effects\",this._current[0]?s(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let s=0;s<this._current.length;s++){const t=this._current[s],r=this._from[s],i=this._to[s];t.scale=p(r.scale,i.scale,e);for(let s=0;s<t.effects.length;s++){const n=t.effects[s],c=r.effects[s],o=i.effects[s];n.interpolate(c,o,e)}}1===e&&(this._current=this._final,this._set(\"effects\",this._current[0]?s(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set(\"scale\",t),0===this._current.length)return;const e=this._current,s=this._current.length-1;let r,i,n=1;if(1===e.length||t>=e[0].scale)i=r=e[0].effects;else if(t<=e[s].scale)i=r=e[s].effects;else for(let c=0;c<s;c++){const s=e[c],o=e[c+1];if(s.scale>=t&&o.scale<=t){n=(t-s.scale)/(o.scale-s.scale),r=s.effects,i=o.effects;break}}for(let c=0;c<this.effects.length;c++){this.effects[c].interpolate(r[c],i[c],n)}}};function a(t){const e=c(t)||[];return m(e)?[{scale:l,effects:e}]:e}function u(t,e,s){if(!t[0]?.effects||!e[0]?.effects)return!0;return!((t[0]?.scale===l||e[0]?.scale===l)&&(t.length>1||e.length>1)&&s<=0)&&o(t[0].effects,e[0].effects)}function _(t,e,s){const r=t.length>e.length?t:e,i=t.length>e.length?e:t,n=i[i.length-1],c=n?.scale??s,o=n?.effects??[];for(let f=i.length;f<r.length;f++)i.push({scale:c,effects:[...o]});for(let h=0;h<r.length;h++)i[h].scale=i[h].scale===l?s:i[h].scale,r[h].scale=r[h].scale===l?s:r[h].scale,f(i[h].effects,r[h].effects)}function p(t,e,s){return t+(e-t)*s}function m(t){const e=t[0];return!!e&&\"type\"in e}t([i()],h.prototype,\"_to\",void 0),t([i()],h.prototype,\"duration\",void 0),t([i({value:\"\"})],h.prototype,\"effect\",null),t([i({readOnly:!0})],h.prototype,\"effects\",void 0),t([i({readOnly:!0})],h.prototype,\"hasEffects\",null),t([i({value:0})],h.prototype,\"scale\",null),t([i({readOnly:!0})],h.prototype,\"transitioning\",null),h=t([n(\"esri.layers.effects.EffectView\")],h);export{h as EffectView,u as canInterpolateEffectStops,a as convertEffectToStops,_ as normalizeEffectStops};\n"],
  "mappings": "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",
  "names": ["t", "a", "e", "s", "n", "y", "h"]
}
