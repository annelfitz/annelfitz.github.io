{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/LineOfSightLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../chunks/tslib.es6.js\";import{createTask as i}from\"../../../core/asyncUtils.js\";import e from\"../../../core/Error.js\";import{destroyMaybe as a,abortMaybe as t}from\"../../../core/maybe.js\";import{isAborted as r}from\"../../../core/promiseUtils.js\";import{watch as n,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as y}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as w}from\"./LayerView3D.js\";import h from\"../../layers/LayerView.js\";const c=\"analysis-view-handles\";let p=class extends(w(h)){constructor(s){super(s),this.type=\"line-of-sight-3d\",this._analysisModule=null}initialize(){this.addHandles(n((()=>this.layer.analysis),(s=>{this._destroyAnalysisView(),null!=s&&this._createAnalysisView(s)}),l),c)}destroy(){this.removeHandles(c),this._destroyAnalysisView()}async whenAnalysisView(){if(null!=this.analysisView)return this.analysisView;if(null!=this._createAnalysisViewTask)return this._createAnalysisViewTask.promise;throw new e(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been set on the LineOfSightLayer of this layer view\")}isUpdating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}_createAnalysisView(s){const e=i((async i=>(this.analysisView=await this._createAnalysisViewPromise(s,i),this._createAnalysisViewTask===e&&(this._createAnalysisViewTask=null),this.analysisView)));this._createAnalysisViewTask=e}_destroyAnalysisView(){this.analysisView=a(this.analysisView),this._createAnalysisViewTask=t(this._createAnalysisViewTask)}async _createAnalysisViewPromise(s,i){let a=this._analysisModule;if(null==a){const s=await this._loadAnalysisModule();this._analysisModule=s,a=s}const t=new a.default({analysis:s,view:this.view,parent:this});if(await t.when(),r(i))throw t.destroy(),new e(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been added to the LineOfSightLayer of this layer view\",{analysis:s});return t}_loadAnalysisModule(){return import(\"../analysis/LineOfSightAnalysisView3D.js\")}};s([o()],p.prototype,\"type\",void 0),s([o()],p.prototype,\"layer\",void 0),s([o()],p.prototype,\"analysisView\",void 0),s([o()],p.prototype,\"_createAnalysisViewTask\",void 0),p=s([y(\"esri.views.3d.layers.LineOfSightLayerView3D\")],p);const d=p;export{d as default};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAImlB,IAAMA,KAAE;AAAwB,IAAI,IAAE,cAAc,EAAEC,EAAC,EAAE;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,OAAK,oBAAmB,KAAK,kBAAgB;AAAA,EAAI;AAAA,EAAC,aAAY;AAAC,SAAK,WAAWC,GAAG,MAAI,KAAK,MAAM,UAAW,CAAAD,OAAG;AAAC,WAAK,qBAAqB,GAAE,QAAMA,MAAG,KAAK,oBAAoBA,EAAC;AAAA,IAAC,GAAG,CAAC,GAAEF,EAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,cAAcA,EAAC,GAAE,KAAK,qBAAqB;AAAA,EAAC;AAAA,EAAC,MAAM,mBAAkB;AAAC,QAAG,QAAM,KAAK;AAAa,aAAO,KAAK;AAAa,QAAG,QAAM,KAAK;AAAwB,aAAO,KAAK,wBAAwB;AAAQ,UAAM,IAAI,EAAE,0CAAyC,0EAA0E;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,WAAO,QAAM,KAAK,2BAAyB,QAAM,KAAK,gBAAc,KAAK,aAAa;AAAA,EAAQ;AAAA,EAAC,oBAAoBE,IAAE;AAAC,UAAME,KAAE,EAAG,OAAM,OAAI,KAAK,eAAa,MAAM,KAAK,2BAA2BF,IAAE,CAAC,GAAE,KAAK,4BAA0BE,OAAI,KAAK,0BAAwB,OAAM,KAAK,aAAc;AAAE,SAAK,0BAAwBA;AAAA,EAAC;AAAA,EAAC,uBAAsB;AAAC,SAAK,eAAa,EAAE,KAAK,YAAY,GAAE,KAAK,0BAAwBA,GAAE,KAAK,uBAAuB;AAAA,EAAC;AAAA,EAAC,MAAM,2BAA2BF,IAAE,GAAE;AAAC,QAAIG,KAAE,KAAK;AAAgB,QAAG,QAAMA,IAAE;AAAC,YAAMH,KAAE,MAAM,KAAK,oBAAoB;AAAE,WAAK,kBAAgBA,IAAEG,KAAEH;AAAA,IAAC;AAAC,UAAM,IAAE,IAAIG,GAAE,QAAQ,EAAC,UAASH,IAAE,MAAK,KAAK,MAAK,QAAO,KAAI,CAAC;AAAE,QAAG,MAAM,EAAE,KAAK,GAAE,EAAE,CAAC;AAAE,YAAM,EAAE,QAAQ,GAAE,IAAI,EAAE,0CAAyC,8EAA6E,EAAC,UAASA,GAAC,CAAC;AAAE,WAAO;AAAA,EAAC;AAAA,EAAC,sBAAqB;AAAC,WAAO,OAAO,yCAA0C;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,QAAO,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,SAAQ,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,2BAA0B,MAAM,GAAE,IAAE,EAAE,CAAC,EAAE,6CAA6C,CAAC,GAAE,CAAC;AAAE,IAAMC,KAAE;",
  "names": ["c", "u", "s", "d", "e", "a"]
}
