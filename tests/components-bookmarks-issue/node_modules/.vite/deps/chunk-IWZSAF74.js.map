{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/graphics/dehydratedFeatures.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{estimateAttributesObjectSize as e}from\"../../core/byteSizeEstimations.js\";import\"../../core/has.js\";import{estimateSize as t}from\"../../core/typedArrayUtil.js\";import{generateUID as s}from\"../../core/uid.js\";import r from\"../../geometry/SpatialReference.js\";import{empty as n,expandWithNestedArray as i}from\"../../geometry/support/aaBoundingBox.js\";import{empty as o,expandWithNestedArray as a}from\"../../geometry/support/aaBoundingRect.js\";import{unquantizePolyline as l,unquantizePolygon as u,unquantizeMultipoint as p,unquantizePoint as c}from\"../../geometry/support/quantizationUtils.js\";import{featureGeometryTypeKebabDictionary as h}from\"../../geometry/support/typeUtils.js\";import m from\"../support/Field.js\";export{equals}from\"./dehydratedFeatureComparison.js\";class f{constructor(e,t,s){this.uid=e,this.geometry=t,this.attributes=s,this.visible=!0,this.objectId=null,this.centroid=null}}function y(e){return null!=e.geometry}class g{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function b(e,t){const s=h.fromJSON(e.geometryType),n=r.fromJSON(e.spatialReference),i=e.transform,o=e.objectIdFieldName,a=t?.maxStringAttributeLength,f=t?.maxStringAttributeFields;let y;const g=e.features.map((t=>{const r=d(t,s,n,e.objectIdFieldName),h=r.geometry;if(z(r.attributes,f,a,(e=>{y??=[];const t=I(r,o);null!=t&&y.push({objectId:t,attribute:e})})),null!=h&&i)switch(h.type){case\"point\":r.geometry=c(i,h,h,h.hasZ,h.hasM);break;case\"multipoint\":r.geometry=p(i,h,h,!!h.hasZ,!!h.hasM);break;case\"polygon\":r.geometry=u(i,h,h,!!h.hasZ,!!h.hasM);break;case\"polyline\":r.geometry=l(i,h,h,!!h.hasZ,!!h.hasM);break;case\"extent\":case\"mesh\":r.geometry=h}return r}));return{geometryType:s,features:g,spatialReference:n,fields:e.fields?.map((e=>m.fromJSON(e)))??[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null,missingAttributes:y}}function d(e,t,r,n){return{uid:s(),objectId:n&&e.attributes?e.attributes[n]:null,attributes:e.attributes,geometry:x(e.geometry,t,r),visible:!0}}function x(e,t,s){if(null==e)return null;switch(t){case\"point\":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:\"point\",spatialReference:s}}case\"polyline\":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polyline\",spatialReference:s}}case\"polygon\":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polygon\",spatialReference:s}}case\"multipoint\":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"multipoint\",spatialReference:s}}}}function j(e){if(null==e)return 0;let s=32;switch(e.type){case\"point\":s+=42;break;case\"polyline\":case\"polygon\":{let t=0;const r=2+(e.hasZ?1:0)+(e.hasM?1:0),n=\"polyline\"===e.type?e.paths:e.rings;for(const e of n)t+=e.length;s+=8*t*r+64,s+=128*t,s+=34,s+=32*(n.length+1);break}case\"multipoint\":{const t=2+(e.hasZ?1:0)+(e.hasM?1:0),r=e.points.length;s+=8*r*t+64,s+=128*r,s+=34,s+=32;break}case\"extent\":s+=98,e.hasM&&(s+=32),e.hasZ&&(s+=32);break;case\"mesh\":s+=t(e.vertexAttributes.position,e.vertexAttributes.normal,e.vertexAttributes.uv,e.vertexAttributes.tangent)}return s}function Z(t){let s=32;return s+=e(t.attributes),s+=3,s+=8+j(t.geometry),s}function M(e){if(null==e)return 0;switch(e.type){case\"point\":return 1;case\"polyline\":{let t=0;for(const s of e.paths)t+=s.length;return t}case\"polygon\":{let t=0;for(const s of e.rings)t+=s.length;return t}case\"multipoint\":return e.points.length;case\"extent\":return 2;case\"mesh\":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function k(e){if(null==e)return!1;switch(e.type){case\"extent\":case\"point\":return!0;case\"polyline\":for(const t of e.paths)if(t.length>0)return!0;return!1;case\"polygon\":for(const t of e.rings)if(t.length>0)return!0;return!1;case\"multipoint\":return e.points.length>0;case\"mesh\":return!e.loaded||e.vertexAttributes.position.length>0}}function N(e,t){switch(n(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case\"polyline\":for(let s=0;s<e.paths.length;s++)i(t,e.paths[s],!!e.hasZ);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)i(t,e.rings[s],!!e.hasZ);break;case\"multipoint\":i(t,e.points,!!e.hasZ);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function F(e,t){switch(o(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case\"polyline\":for(let s=0;s<e.paths.length;s++)a(t,e.paths[s]);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)a(t,e.rings[s]);break;case\"multipoint\":a(t,e.points);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function I(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}function z(e,t,s,r){if(t?.size&&null!=s&&e)for(const n in e){if(!t.has(n))continue;const i=e[n];\"string\"==typeof i&&i.length>s&&(r(n),e[n]=\"\")}}export{f as DehydratedFeatureClass,g as DehydratedFeatureSetClass,N as computeAABB,F as computeAABR,j as estimateGeometryObjectSize,Z as estimateSize,b as fromFeatureSetJSON,x as fromJSONGeometry,I as getObjectId,y as hasGeometry,k as hasVertices,M as numVertices,z as removeLargeStringAttributes};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIwwB,IAAMA,KAAN,MAAO;AAAA,EAAC,YAAYC,IAAEC,IAAE,GAAE;AAAC,SAAK,MAAID,IAAE,KAAK,WAASC,IAAE,KAAK,aAAW,GAAE,KAAK,UAAQ,MAAG,KAAK,WAAS,MAAK,KAAK,WAAS;AAAA,EAAI;AAAC;AAAC,SAASC,GAAEF,IAAE;AAAC,SAAO,QAAMA,GAAE;AAAQ;AAAC,IAAM,IAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,wBAAsB,OAAG,KAAK,WAAS,CAAC,GAAE,KAAK,SAAO,CAAC,GAAE,KAAK,OAAK,OAAG,KAAK,OAAK,OAAG,KAAK,eAAa,MAAK,KAAK,oBAAkB,MAAK,KAAK,oBAAkB,MAAK,KAAK,qBAAmB,MAAK,KAAK,mBAAiB,MAAK,KAAK,mBAAiB,MAAK,KAAK,YAAU;AAAA,EAAI;AAAC;AAAC,SAAS,EAAEA,IAAEC,IAAE;AAJjuC;AAIkuC,QAAM,IAAE,EAAE,SAASD,GAAE,YAAY,GAAE,IAAE,EAAE,SAASA,GAAE,gBAAgB,GAAE,IAAEA,GAAE,WAAUG,KAAEH,GAAE,mBAAkB,IAAEC,MAAA,gBAAAA,GAAG,0BAAyBF,KAAEE,MAAA,gBAAAA,GAAG;AAAyB,MAAIC;AAAE,QAAME,KAAEJ,GAAE,SAAS,IAAK,CAAAC,OAAG;AAAC,UAAM,IAAE,EAAEA,IAAE,GAAE,GAAED,GAAE,iBAAiB,GAAEK,KAAE,EAAE;AAAS,QAAG,EAAE,EAAE,YAAWN,IAAE,GAAG,CAAAC,OAAG;AAAC,MAAAE,YAAI,CAAC;AAAE,YAAMD,KAAE,EAAE,GAAEE,EAAC;AAAE,cAAMF,MAAGC,GAAE,KAAK,EAAC,UAASD,IAAE,WAAUD,GAAC,CAAC;AAAA,IAAC,CAAE,GAAE,QAAMK,MAAG;AAAE,cAAOA,GAAE,MAAK;AAAA,QAAC,KAAI;AAAQ,YAAE,WAAS,EAAE,GAAEA,IAAEA,IAAEA,GAAE,MAAKA,GAAE,IAAI;AAAE;AAAA,QAAM,KAAI;AAAa,YAAE,WAAS,EAAE,GAAEA,IAAEA,IAAE,CAAC,CAACA,GAAE,MAAK,CAAC,CAACA,GAAE,IAAI;AAAE;AAAA,QAAM,KAAI;AAAU,YAAE,WAAS,EAAE,GAAEA,IAAEA,IAAE,CAAC,CAACA,GAAE,MAAK,CAAC,CAACA,GAAE,IAAI;AAAE;AAAA,QAAM,KAAI;AAAW,YAAE,WAAS,EAAE,GAAEA,IAAEA,IAAE,CAAC,CAACA,GAAE,MAAK,CAAC,CAACA,GAAE,IAAI;AAAE;AAAA,QAAM,KAAI;AAAA,QAAS,KAAI;AAAO,YAAE,WAASA;AAAA,MAAC;AAAC,WAAO;AAAA,EAAC,CAAE;AAAE,SAAM,EAAC,cAAa,GAAE,UAASD,IAAE,kBAAiB,GAAE,UAAO,KAAAJ,GAAE,WAAF,mBAAU,IAAK,CAAAA,OAAG,EAAE,SAASA,EAAC,OAAK,CAAC,GAAE,mBAAkBA,GAAE,mBAAkB,mBAAkBA,GAAE,mBAAkB,kBAAiBA,GAAE,kBAAiB,oBAAmBA,GAAE,oBAAmB,MAAKA,GAAE,MAAK,MAAKA,GAAE,MAAK,uBAAsBA,GAAE,uBAAsB,WAAU,MAAK,mBAAkBE,GAAC;AAAC;AAAC,SAAS,EAAEF,IAAEC,IAAE,GAAE,GAAE;AAAC,SAAM,EAAC,KAAI,EAAE,GAAE,UAAS,KAAGD,GAAE,aAAWA,GAAE,WAAW,CAAC,IAAE,MAAK,YAAWA,GAAE,YAAW,UAASM,GAAEN,GAAE,UAASC,IAAE,CAAC,GAAE,SAAQ,KAAE;AAAC;AAAC,SAASK,GAAEN,IAAEC,IAAE,GAAE;AAAC,MAAG,QAAMD;AAAE,WAAO;AAAK,UAAOC,IAAE;AAAA,IAAC,KAAI,SAAQ;AAAC,YAAMA,KAAED;AAAE,aAAM,EAAC,GAAEC,GAAE,GAAE,GAAEA,GAAE,GAAE,GAAEA,GAAE,GAAE,GAAEA,GAAE,GAAE,MAAK,QAAMA,GAAE,GAAE,MAAK,QAAMA,GAAE,GAAE,MAAK,SAAQ,kBAAiB,EAAC;AAAA,IAAC;AAAA,IAAC,KAAI,YAAW;AAAC,YAAMA,KAAED;AAAE,aAAM,EAAC,OAAMC,GAAE,OAAM,MAAK,CAAC,CAACA,GAAE,MAAK,MAAK,CAAC,CAACA,GAAE,MAAK,MAAK,YAAW,kBAAiB,EAAC;AAAA,IAAC;AAAA,IAAC,KAAI,WAAU;AAAC,YAAMA,KAAED;AAAE,aAAM,EAAC,OAAMC,GAAE,OAAM,MAAK,CAAC,CAACA,GAAE,MAAK,MAAK,CAAC,CAACA,GAAE,MAAK,MAAK,WAAU,kBAAiB,EAAC;AAAA,IAAC;AAAA,IAAC,KAAI,cAAa;AAAC,YAAMA,KAAED;AAAE,aAAM,EAAC,QAAOC,GAAE,QAAO,MAAK,CAAC,CAACA,GAAE,MAAK,MAAK,CAAC,CAACA,GAAE,MAAK,MAAK,cAAa,kBAAiB,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,SAAS,EAAED,IAAE;AAAC,MAAG,QAAMA;AAAE,WAAO;AAAE,MAAI,IAAE;AAAG,UAAOA,GAAE,MAAK;AAAA,IAAC,KAAI;AAAQ,WAAG;AAAG;AAAA,IAAM,KAAI;AAAA,IAAW,KAAI,WAAU;AAAC,UAAIC,KAAE;AAAE,YAAM,IAAE,KAAGD,GAAE,OAAK,IAAE,MAAIA,GAAE,OAAK,IAAE,IAAG,IAAE,eAAaA,GAAE,OAAKA,GAAE,QAAMA,GAAE;AAAM,iBAAUA,MAAK;AAAE,QAAAC,MAAGD,GAAE;AAAO,WAAG,IAAEC,KAAE,IAAE,IAAG,KAAG,MAAIA,IAAE,KAAG,IAAG,KAAG,MAAI,EAAE,SAAO;AAAG;AAAA,IAAK;AAAA,IAAC,KAAI,cAAa;AAAC,YAAMA,KAAE,KAAGD,GAAE,OAAK,IAAE,MAAIA,GAAE,OAAK,IAAE,IAAG,IAAEA,GAAE,OAAO;AAAO,WAAG,IAAE,IAAEC,KAAE,IAAG,KAAG,MAAI,GAAE,KAAG,IAAG,KAAG;AAAG;AAAA,IAAK;AAAA,IAAC,KAAI;AAAS,WAAG,IAAGD,GAAE,SAAO,KAAG,KAAIA,GAAE,SAAO,KAAG;AAAI;AAAA,IAAM,KAAI;AAAO,WAAG,EAAEA,GAAE,iBAAiB,UAASA,GAAE,iBAAiB,QAAOA,GAAE,iBAAiB,IAAGA,GAAE,iBAAiB,OAAO;AAAA,EAAC;AAAC,SAAO;AAAC;AAAC,SAAS,EAAEC,IAAE;AAAC,MAAI,IAAE;AAAG,SAAO,KAAG,EAAEA,GAAE,UAAU,GAAE,KAAG,GAAE,KAAG,IAAE,EAAEA,GAAE,QAAQ,GAAE;AAAC;AAAC,SAAS,EAAED,IAAE;AAAC,MAAG,QAAMA;AAAE,WAAO;AAAE,UAAOA,GAAE,MAAK;AAAA,IAAC,KAAI;AAAQ,aAAO;AAAA,IAAE,KAAI,YAAW;AAAC,UAAIC,KAAE;AAAE,iBAAU,KAAKD,GAAE;AAAM,QAAAC,MAAG,EAAE;AAAO,aAAOA;AAAA,IAAC;AAAA,IAAC,KAAI,WAAU;AAAC,UAAIA,KAAE;AAAE,iBAAU,KAAKD,GAAE;AAAM,QAAAC,MAAG,EAAE;AAAO,aAAOA;AAAA,IAAC;AAAA,IAAC,KAAI;AAAa,aAAOD,GAAE,OAAO;AAAA,IAAO,KAAI;AAAS,aAAO;AAAA,IAAE,KAAI,QAAO;AAAC,YAAMC,KAAED,GAAE,oBAAkBA,GAAE,iBAAiB;AAAS,aAAOC,KAAEA,GAAE,SAAO,IAAE;AAAA,IAAC;AAAA,IAAC;AAAQ;AAAA,EAAM;AAAC;AAAC,SAASM,GAAEP,IAAE;AAAC,MAAG,QAAMA;AAAE,WAAM;AAAG,UAAOA,GAAE,MAAK;AAAA,IAAC,KAAI;AAAA,IAAS,KAAI;AAAQ,aAAM;AAAA,IAAG,KAAI;AAAW,iBAAUC,MAAKD,GAAE;AAAM,YAAGC,GAAE,SAAO;AAAE,iBAAM;AAAG,aAAM;AAAA,IAAG,KAAI;AAAU,iBAAUA,MAAKD,GAAE;AAAM,YAAGC,GAAE,SAAO;AAAE,iBAAM;AAAG,aAAM;AAAA,IAAG,KAAI;AAAa,aAAOD,GAAE,OAAO,SAAO;AAAA,IAAE,KAAI;AAAO,aAAM,CAACA,GAAE,UAAQA,GAAE,iBAAiB,SAAS,SAAO;AAAA,EAAC;AAAC;AAAC,SAAS,EAAEA,IAAEC,IAAE;AAAC,UAAO,EAAEA,EAAC,GAAE,WAASD,GAAE,SAAOA,KAAEA,GAAE,SAAQA,GAAE,MAAK;AAAA,IAAC,KAAI;AAAQ,MAAAC,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAED,GAAE,GAAEC,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAED,GAAE,GAAEA,GAAE,SAAOC,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAED,GAAE;AAAG;AAAA,IAAM,KAAI;AAAW,eAAQ,IAAE,GAAE,IAAEA,GAAE,MAAM,QAAO;AAAI,UAAEC,IAAED,GAAE,MAAM,CAAC,GAAE,CAAC,CAACA,GAAE,IAAI;AAAE;AAAA,IAAM,KAAI;AAAU,eAAQ,IAAE,GAAE,IAAEA,GAAE,MAAM,QAAO;AAAI,UAAEC,IAAED,GAAE,MAAM,CAAC,GAAE,CAAC,CAACA,GAAE,IAAI;AAAE;AAAA,IAAM,KAAI;AAAa,QAAEC,IAAED,GAAE,QAAO,CAAC,CAACA,GAAE,IAAI;AAAE;AAAA,IAAM,KAAI;AAAS,MAAAC,GAAE,CAAC,IAAED,GAAE,MAAKC,GAAE,CAAC,IAAED,GAAE,MAAKC,GAAE,CAAC,IAAED,GAAE,MAAKC,GAAE,CAAC,IAAED,GAAE,MAAK,QAAMA,GAAE,SAAOC,GAAE,CAAC,IAAED,GAAE,OAAM,QAAMA,GAAE,SAAOC,GAAE,CAAC,IAAED,GAAE;AAAA,EAAK;AAAC;AAAC,SAAS,EAAEA,IAAEC,IAAE;AAAC,UAAO,EAAEA,EAAC,GAAE,WAASD,GAAE,SAAOA,KAAEA,GAAE,SAAQA,GAAE,MAAK;AAAA,IAAC,KAAI;AAAQ,MAAAC,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAED,GAAE,GAAEC,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAED,GAAE;AAAE;AAAA,IAAM,KAAI;AAAW,eAAQ,IAAE,GAAE,IAAEA,GAAE,MAAM,QAAO;AAAI,UAAEC,IAAED,GAAE,MAAM,CAAC,CAAC;AAAE;AAAA,IAAM,KAAI;AAAU,eAAQ,IAAE,GAAE,IAAEA,GAAE,MAAM,QAAO;AAAI,UAAEC,IAAED,GAAE,MAAM,CAAC,CAAC;AAAE;AAAA,IAAM,KAAI;AAAa,QAAEC,IAAED,GAAE,MAAM;AAAE;AAAA,IAAM,KAAI;AAAS,MAAAC,GAAE,CAAC,IAAED,GAAE,MAAKC,GAAE,CAAC,IAAED,GAAE,MAAKC,GAAE,CAAC,IAAED,GAAE,MAAKC,GAAE,CAAC,IAAED,GAAE;AAAA,EAAI;AAAC;AAAC,SAAS,EAAEA,IAAEC,IAAE;AAAC,SAAO,QAAMD,GAAE,WAASA,GAAE,WAASA,GAAE,cAAYC,KAAED,GAAE,WAAWC,EAAC,IAAE;AAAI;AAAC,SAAS,EAAED,IAAEC,IAAE,GAAE,GAAE;AAAC,OAAGA,MAAA,gBAAAA,GAAG,SAAM,QAAM,KAAGD;AAAE,eAAU,KAAKA,IAAE;AAAC,UAAG,CAACC,GAAE,IAAI,CAAC;AAAE;AAAS,YAAM,IAAED,GAAE,CAAC;AAAE,kBAAU,OAAO,KAAG,EAAE,SAAO,MAAI,EAAE,CAAC,GAAEA,GAAE,CAAC,IAAE;AAAA,IAAG;AAAC;",
  "names": ["f", "e", "t", "y", "o", "g", "h", "x", "k"]
}
