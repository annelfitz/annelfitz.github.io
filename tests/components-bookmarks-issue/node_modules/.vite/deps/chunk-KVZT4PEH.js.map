{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js", "../../@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutput.js\";import{NoParameters as r}from\"../core/shaderModules/interfaces.js\";import{ReloadableShaderModule as o}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as i}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as s}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{CullFaceOptions as n}from\"../lib/basicInterfaces.js\";import{oitBlending as a,oitDepthTest as l,oitDepthWrite as p,getOITPolygonOffset as c}from\"../lib/OrderIndependentTransparency.js\";import{Program as u}from\"../lib/Program.js\";import{stencilWriteMaskOn as h,stencilToolMaskBaseParams as d,stencilBaseAllZerosParams as m}from\"../lib/StencilUtils.js\";import{TransparencyPassType as f}from\"../lib/TransparencyPassType.js\";import{VertexAttribute as y}from\"../lib/VertexAttribute.js\";import{DefaultTechniqueConfiguration as b}from\"../materials/DefaultTechniqueConfiguration.js\";import{I as P}from\"../../../../chunks/ImageMaterial.glsl.js\";import{BlendFactor as g}from\"../../../webgl/enums.js\";import{simpleBlendingParams as T,makePipelineState as O,cullingParams as j,defaultDepthWriteParams as S,defaultColorWriteParams as v}from\"../../../webgl/renderState.js\";class I extends r{}class N extends i{initializeProgram(e){return new u(e.rctx,N.shader.get().build(this.configuration),_)}_setPipelineState(e,r){const o=this.configuration,i=e===f.NONE,s=e===f.FrontFace;return O({blending:o.output!==t.Color&&o.output!==t.Alpha||!o.transparent?null:i?E:a(e),culling:j(o.cullFace),depthTest:{func:l(e)},depthWrite:i?o.writeDepth?S:null:p(e),colorWrite:v,stencilWrite:o.hasOccludees?h:null,stencilTest:o.hasOccludees?r?d:m:null,polygonOffset:i||s?null:c(o.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}N.shader=new o(P,(()=>import(\"./ImageMaterial.glsl.js\")));const E=T(g.ONE,g.ONE_MINUS_SRC_ALPHA);class C extends b{constructor(){super(...arguments),this.output=t.Color,this.cullFace=n.None,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=f.NONE,this.multipassEnabled=!1,this.cullAboveGround=!1,this.perspectiveInterpolation=!0}}e([s({count:t.COUNT})],C.prototype,\"output\",void 0),e([s({count:n.COUNT})],C.prototype,\"cullFace\",void 0),e([s()],C.prototype,\"hasSlicePlane\",void 0),e([s()],C.prototype,\"transparent\",void 0),e([s()],C.prototype,\"enableOffset\",void 0),e([s()],C.prototype,\"writeDepth\",void 0),e([s()],C.prototype,\"hasOccludees\",void 0),e([s({count:f.COUNT})],C.prototype,\"transparencyPassType\",void 0),e([s()],C.prototype,\"multipassEnabled\",void 0),e([s()],C.prototype,\"cullAboveGround\",void 0),e([s()],C.prototype,\"perspectiveInterpolation\",void 0),e([s({constValue:!1})],C.prototype,\"occlusionPass\",void 0);const _=new Map([[y.POSITION,0],[y.UV0,2],[y.PERSPECTIVEDIVIDE,3]]);export{I as ImageMaterialPassParameters,N as ImageMaterialTechnique,C as ImageMaterialTechniqueConfiguration,_ as vertexAttributeLocations};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{BufferViewFloat as t}from\"../../../../geometry/support/buffer/BufferView.js\";import{ShaderOutput as e,isColorOrAlpha as r,isColorAlphaOrHighlight as s}from\"../core/shaderLibrary/ShaderOutput.js\";import{CullFaceOptions as a}from\"../lib/basicInterfaces.js\";import{GLTextureMaterial as i}from\"../lib/GLTextureMaterial.js\";import{MaterialParameters as n}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as o}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as p}from\"../lib/RenderSlot.js\";import{assert as u}from\"../lib/Util.js\";import{VertexAttribute as c}from\"../lib/VertexAttribute.js\";import{DefaultBufferWriter as l}from\"./DefaultBufferWriter.js\";import{PositionUVLayout as h}from\"./DefaultLayouts.js\";import{TriangleMaterial as m}from\"./TriangleMaterial.js\";import{writeBufferFloat as f,writeDefaultAttribute as d}from\"./internal/bufferWriterUtils.js\";import{vertexAttributeLocations as _,ImageMaterialTechniqueConfiguration as g,ImageMaterialTechnique as E}from\"../shaders/ImageMaterialTechnique.js\";class T extends m{constructor(t){super(t,new A),this.supportsEdges=!0,this.produces=new Map([[p.OPAQUE_MATERIAL,t=>t===e.Highlight||r(t)&&!this.parameters.transparent],[p.TRANSPARENT_MATERIAL,t=>r(t)&&this.parameters.transparent&&this.parameters.writeDepth],[p.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,t=>r(t)&&this.parameters.transparent&&!this.parameters.writeDepth],[p.DRAPED_MATERIAL,t=>s(t)]]),this._vertexAttributeLocations=_,this._configuration=new g}getConfiguration(t,e){return this._configuration.output=t,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=e.transparencyPassType,this._configuration.enableOffset=e.camera.relativeElevation<o,this._configuration.multipassEnabled=e.multipassEnabled,this._configuration.cullAboveGround=e.multipassTerrain.cullAboveGround,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}createGLMaterial(t){return new I(t)}createBufferWriter(){const t=h.clone();return this.parameters.perspectiveInterpolation&&t.f32(c.PERSPECTIVEDIVIDE),new b(t)}}class I extends i{constructor(t){super({...t,...t.material.parameters})}_updateParameters(t){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(E,t)}_updateOccludeeState(t){t.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:t.hasOccludees}),this._updateParameters(t))}beginSlot(t){return this._output!==e.Color&&this._output!==e.Alpha||this._updateOccludeeState(t),this._updateParameters(t)}}class b extends l{write(e,r,s,a,i){for(const n of this.vertexBufferLayout.fields.keys()){const o=s.attributes.get(n);if(o)if(n===c.PERSPECTIVEDIVIDE){u(1===o.size);const e=a.getField(n,t);e&&f(o,e,i)}else d(n,o,e,r,a,i)}}}class A extends n{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=a.None,this.hasOccludees=!1,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0,this.perspectiveInterpolation=!1}}export{T as ImageMaterial,A as Parameters};\n"],
  "mappings": "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",
  "names": ["r", "e", "_", "o", "i", "s", "E", "a", "t", "e", "t", "A", "_", "S", "f", "r", "s", "a", "i", "n", "o", "u"]
}
