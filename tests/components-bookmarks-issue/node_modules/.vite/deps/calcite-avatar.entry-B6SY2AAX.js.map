{
  "version": 3,
  "sources": ["../../@esri/calcite-components/dist/esm/src/components/avatar/utils.ts", "../../@esri/calcite-components/dist/esm/src/components/avatar/avatar.scss?tag=calcite-avatar&encapsulation=shadow", "../../@esri/calcite-components/dist/esm/src/components/avatar/avatar.tsx"],
  "sourcesContent": ["import { RGB } from \"../color-picker/interfaces\";\nimport { hexToRGB } from \"../color-picker/utils\";\n\n/**\n * Convert a string to a valid hex by hashing its contents\n * and using the hash as a seed for three distinct color values\n *\n * @param str\n */\nexport function stringToHex(str: string): string {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n\n  let hex = \"#\";\n  for (let j = 0; j < 3; j++) {\n    const value = (hash >> (j * 8)) & 0xff;\n    hex += (\"00\" + value.toString(16)).substr(-2);\n  }\n  return hex;\n}\n\n/**\n * Find the hue of a color given the separate RGB color channels\n *\n * @param rgb\n */\nexport function rgbToHue(rgb: RGB): number {\n  let { r, g, b } = rgb;\n  r /= 255;\n  g /= 255;\n  b /= 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const delta = max - min;\n\n  if (max === min) {\n    return 0;\n  }\n\n  let hue = (max + min) / 2;\n  switch (max) {\n    case r:\n      hue = (g - b) / delta + (g < b ? 6 : 0);\n      break;\n    case g:\n      hue = (b - r) / delta + 2;\n      break;\n    case b:\n      hue = (r - g) / delta + 4;\n      break;\n  }\n\n  return Math.round(hue * 60);\n}\n\n/**\n * For a hex color, find the hue\n *\n * @param hex {string} - form of \"#------\"\n */\nexport function hexToHue(hex: string): number {\n  return rgbToHue(hexToRGB(hex));\n}\n", ":host {\n  @apply rounded-half inline-block overflow-hidden;\n}\n\n:host([scale=\"s\"]) {\n  @apply text-n3 h-6 w-6;\n}\n\n:host([scale=\"m\"]) {\n  @apply text-n2 h-8 w-8;\n}\n\n:host([scale=\"l\"]) {\n  @apply text-0 h-11 w-11;\n}\n\n.icon {\n  @apply flex;\n}\n\n.background {\n  @apply rounded-half flex h-full w-full items-center justify-center;\n}\n\n.initials {\n  @apply text-color-2 font-bold uppercase;\n}\n\n.thumbnail {\n  @apply rounded-half h-full w-full;\n}\n\n@include base-component();\n", "import { Component, Element, h, Prop, State } from \"@stencil/core\";\nimport { getModeName } from \"../../utils/dom\";\nimport { isValidHex } from \"../color-picker/utils\";\nimport { Scale } from \"../interfaces\";\nimport { hexToHue, stringToHex } from \"./utils\";\n\n@Component({\n  tag: \"calcite-avatar\",\n  styleUrl: \"avatar.scss\",\n  shadow: true,\n})\nexport class Avatar {\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /** Specifies the size of the component. */\n  @Prop({ reflect: true }) scale: Scale = \"m\";\n\n  /** Specifies the `src` to an image (remember to add a token if the user is private). */\n  @Prop({ reflect: true }) thumbnail: string;\n\n  /** Specifies the full name of the user. When `label` and `thumbnail` are not defined, specifies the accessible name for the component. */\n  @Prop({ reflect: true }) fullName: string;\n\n  /** Specifies the username of the user. */\n  @Prop({ reflect: true }) username: string;\n\n  /** Specifies the unique id of the user. */\n  @Prop({ reflect: true }) userId: string;\n\n  /** Specifies alternative text when `thumbnail` is defined, otherwise specifies an accessible label.*/\n  @Prop() label: string;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  render() {\n    return this.determineContent();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteAvatarElement;\n\n  @State() thumbnailFailedToLoad = false;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  private determineContent() {\n    if (this.thumbnail && !this.thumbnailFailedToLoad) {\n      return (\n        <img\n          alt={this.label || \"\"}\n          class=\"thumbnail\"\n          onError={() => (this.thumbnailFailedToLoad = true)}\n          src={this.thumbnail}\n        />\n      );\n    }\n    const initials = this.generateInitials();\n    const backgroundColor = this.generateFillColor();\n    return (\n      <span\n        aria-label={this.label || this.fullName}\n        class=\"background\"\n        role=\"figure\"\n        style={{ backgroundColor }}\n      >\n        {initials ? (\n          <span aria-hidden=\"true\" class=\"initials\">\n            {initials}\n          </span>\n        ) : (\n          <calcite-icon class=\"icon\" icon=\"user\" scale={this.scale} />\n        )}\n      </span>\n    );\n  }\n\n  /**\n   * Generate a valid background color that is consistent and unique to this user\n   */\n  private generateFillColor() {\n    const { userId, username, fullName, el } = this;\n    const theme = getModeName(el);\n    const id = userId && `#${userId.substr(userId.length - 6)}`;\n    const name = username || fullName || \"\";\n    const hex = id && isValidHex(id) ? id : stringToHex(name);\n    // if there is not unique information, or an invalid hex is produced, return a default\n    if ((!userId && !name) || !isValidHex(hex)) {\n      return `var(--calcite-color-foreground-2)`;\n    }\n    const hue = hexToHue(hex);\n    const l = theme === \"dark\" ? 20 : 90;\n    return `hsl(${hue}, 60%, ${l}%)`;\n  }\n\n  /**\n   * Use fullName or username to generate initials\n   */\n  private generateInitials(): string | boolean {\n    const { fullName, username } = this;\n    if (fullName) {\n      return fullName\n        .trim()\n        .split(\" \")\n        .map((name) => name.substring(0, 1))\n        .join(\"\");\n    } else if (username) {\n      return username.substring(0, 2);\n    }\n    return false;\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;SASgB,YAAY,KAAW;AACrC,MAAI,OAAO;AACX,WAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AACnC,WAAO,IAAI,WAAW,CAAC,MAAM,QAAQ,KAAK;;AAG5C,MAAI,MAAM;AACV,WAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,UAAM,QAAS,QAAS,IAAI,IAAM;AAClC,YAAQ,OAAO,MAAM,SAAS,EAAE,GAAG,OAAO,EAAE;;AAE9C,SAAO;AACT;SAOgB,SAAS,KAAQ;AAC/B,MAAI,EAAE,GAAG,GAAG,EAAC,IAAK;AAClB,OAAK;AACL,OAAK;AACL,OAAK;AACL,QAAM,MAAM,KAAK,IAAI,GAAG,GAAG,CAAC;AAC5B,QAAM,MAAM,KAAK,IAAI,GAAG,GAAG,CAAC;AAC5B,QAAM,QAAQ,MAAM;AAEpB,MAAI,QAAQ,KAAK;AACf,WAAO;;AAGT,MAAI,OAAO,MAAM,OAAO;AACxB,UAAQ,KAAG;IACT,KAAK;AACH,aAAO,IAAI,KAAK,SAAS,IAAI,IAAI,IAAI;AACrC;IACF,KAAK;AACH,aAAO,IAAI,KAAK,QAAQ;AACxB;IACF,KAAK;AACH,aAAO,IAAI,KAAK,QAAQ;AACxB;;AAGJ,SAAO,KAAK,MAAM,MAAM,EAAE;AAC5B;SAOgB,SAAS,KAAW;AAClC,SAAO,SAAS,SAAS,GAAG,CAAC;AAC/B;AChEA,IAAM,YAAY;ICWL,SAAM,MAAA;;;iBAQuB;;;;;;iCAmCP;;;;;;;EAZjC,SAAM;AACJ,WAAO,KAAK,iBAAgB;;;;;;;EAmBtB,mBAAgB;AACtB,QAAI,KAAK,aAAa,CAAC,KAAK,uBAAuB;AACjD,aACE,EAAA,OAAA,EACE,KAAK,KAAK,SAAS,IACnB,OAAM,aACN,SAAS,MAAO,KAAK,wBAAwB,MAC7C,KAAK,KAAK,UAAS,CAAA;;AAIzB,UAAM,WAAW,KAAK,iBAAgB;AACtC,UAAM,kBAAkB,KAAK,kBAAiB;AAC9C,WACE,EAAA,QAAA,EAAA,cACc,KAAK,SAAS,KAAK,UAC/B,OAAM,cACN,MAAK,UACL,OAAO,EAAE,gBAAe,EAAE,GAEzB,WACC,EAAA,QAAA,EAAA,eAAkB,QAAO,OAAM,WAAU,GACtC,QAAQ,IAGX,EAAA,gBAAA,EAAc,OAAM,QAAO,MAAK,QAAO,OAAO,KAAK,MAAK,CAAA,CACzD;;;;;EAQC,oBAAiB;AACvB,UAAM,EAAE,QAAQ,UAAU,UAAU,GAAE,IAAK;AAC3C,UAAM,QAAQ,YAAY,EAAE;AAC5B,UAAM,KAAK,UAAU,IAAI,OAAO,OAAO,OAAO,SAAS,CAAC,CAAC;AACzD,UAAM,OAAO,YAAY,YAAY;AACrC,UAAM,MAAM,MAAM,WAAW,EAAE,IAAI,KAAK,YAAY,IAAI;AAExD,QAAK,CAAC,UAAU,CAAC,QAAS,CAAC,WAAW,GAAG,GAAG;AAC1C,aAAO;;AAET,UAAM,MAAM,SAAS,GAAG;AACxB,UAAM,IAAI,UAAU,SAAS,KAAK;AAClC,WAAO,OAAO,GAAG,UAAU,CAAC;;;;;EAMtB,mBAAgB;AACtB,UAAM,EAAE,UAAU,SAAQ,IAAK;AAC/B,QAAI,UAAU;AACZ,aAAO,SACJ,KAAI,EACJ,MAAM,GAAG,EACT,IAAI,CAAC,SAAS,KAAK,UAAU,GAAG,CAAC,CAAC,EAClC,KAAK,EAAE;eACD,UAAU;AACnB,aAAO,SAAS,UAAU,GAAG,CAAC;;AAEhC,WAAO;;;;;;;",
  "names": []
}
