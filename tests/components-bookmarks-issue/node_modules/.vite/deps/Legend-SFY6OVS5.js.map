{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/Legend/support/clusterUtils.js", "../../@arcgis/core/widgets/Legend/support/ActiveLayerInfo.js", "../../@arcgis/core/widgets/Legend/LegendViewModel.js", "../../@arcgis/core/widgets/Legend/styles/CardCSS.js", "../../@arcgis/core/widgets/Legend/styles/support/univariateUtils.js", "../../@arcgis/core/widgets/Legend/support/styleUtils.js", "../../@arcgis/core/widgets/Legend/styles/Card.js", "../../@arcgis/core/widgets/Legend/styles/ClassicCSS.js", "../../@arcgis/core/widgets/Legend/styles/Classic.js", "../../@arcgis/core/widgets/Legend.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../../renderers/visualVariables/SizeVariable.js\";function l(l,i,s){const a=l.effectiveClusterRenderer;if(!a||!(\"visualVariables\"in a)||!a.visualVariables)return null;const n=a.visualVariables.find((e=>\"size\"===e.type));if(!(\"stops\"in n)||!n.stops)return null;const t=n.stops.find((e=>e.useMinValue)),u=n.stops.find((e=>e.useMaxValue));if(null==t||null==u)return null;const r=s.featuresTilingScheme.getClosestInfoForScale(s.scale).level,f=n.field,o=i.getDisplayStatistics(r,f);return o?new e({field:n.field,minSize:l.clusterMinSize,minDataValue:o.minValue,maxSize:l.clusterMaxSize,maxDataValue:o.maxValue}):null}export{l as getEffectiveClusterSizeVariable};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import\"../../../intl.js\";import{addTokenParameter as s}from\"../../../kernel.js\";import i from\"../../../request.js\";import\"../../../symbols.js\";import l from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import n from\"../../../core/Collection.js\";import{JSONMap as a}from\"../../../core/jsonMap.js\";import o from\"../../../core/Logger.js\";import{debounce as u}from\"../../../core/promiseUtils.js\";import{on as c,watch as d,whenOnce as y,initial as h}from\"../../../core/reactiveUtils.js\";import{px2pt as m}from\"../../../core/screenUtils.js\";import{parseWhereClause as f}from\"../../../core/sql.js\";import{addQueryParameters as p}from\"../../../core/urlUtils.js\";import{property as g}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{OriginId as S}from\"../../../core/accessorSupport/PropertyOrigin.js\";import{EffectView as _}from\"../../../layers/effects/EffectView.js\";import{effectFunctionsFromJSON as v}from\"../../../layers/effects/jsonUtils.js\";import{ExportImageParameters as w}from\"../../../layers/support/ExportImageParameters.js\";import{isFeatureLayer as L}from\"../../../layers/support/layerUtils.js\";import{getPixelValueRange as E}from\"../../../layers/support/rasterFormats/pixelRangeUtils.js\";import{fromJSON as C}from\"../../../renderers/support/jsonUtils.js\";import{isSupportedRenderer3D as I}from\"../../../renderers/support/rendererConversion.js\";import R from\"../../../renderers/visualVariables/SizeVariable.js\";import F from\"../../../renderers/visualVariables/support/SizeVariableLegendOptions.js\";import{updateReferenceSizeSymbol as V}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import{applyCIMSymbolColor as x}from\"../../../symbols/support/cimSymbolUtils.js\";import{SymbolSizeDefaults as z}from\"../../../symbols/support/previewUtils.js\";import{renderSymbol as T}from\"../../../symbols/support/renderUtils.js\";import{renderColorRampPreviewHTML as D,renderDotDensityPreviewHTML as j,renderPieChartPreviewHTML as O,renderPreviewHTML as P}from\"../../../symbols/support/symbolUtils.js\";import{isVolumetricSymbol as A}from\"../../../symbols/support/utils.js\";import{getEffectiveClusterSizeVariable as M}from\"./clusterUtils.js\";import{getColorFromPointCloudStops as k,getRampStopsForPointCloud as U,getStretchRampStops as B,getRampStops as q}from\"./colorRampUtils.js\";import{getHeatmapRampStops as N}from\"./heatmapRampUtils.js\";import{getRotationAngleForFocus as H,getRelationshipRampElement as $}from\"./relationshipRampUtils.js\";import{getRampStops as W,realWorldMaxSize as G,realWorldMinSize as J}from\"./sizeRampUtils.js\";import{specialCharsLessThan as Q,specialCharsGreaterThan as Z,getReferenceSizeAuthoringInfoVisualVariable as K,getSymbolForFlowRenderer as X,isRasterBandStatistics as Y,getMedianColor as ee,rgbImgSource as te,getDateFormatOptions as se}from\"./utils.js\";import{formatNumberLabel as ie}from\"../../smartMapping/support/utils.js\";import le from\"../../../symbols/SimpleMarkerSymbol.js\";import re from\"../../../symbols/SimpleFillSymbol.js\";import{fetchMessageBundle as ne}from\"../../../intl/messages.js\";import{substitute as ae}from\"../../../intl/substitute.js\";const oe=16,ue=\"https://utility.arcgis.com/sharing/tools/legend\",ce=\"esri.layers.ImageryLayer\",de=\"esri.layers.ImageryTileLayer\",ye=\"esri.layers.WCSLayer\",he=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i,me=new a({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryMultiPatch:\"multipatch\"}),fe=new le({size:6,outline:{color:[128,128,128,.5],width:.5}}),pe=new re({style:\"solid\"});function ge(e){return\"flow\"===e.type}function be(e){return\"vector-field\"===e.type}function Se(e){return\"raster-colormap\"===e.type}function _e(e){return\"raster-stretch\"===e.type}function ve(e){return\"raster-shaded-relief\"===e.type}function we(e){return\"esri.renderers.SimpleRenderer\"===e.declaredClass}function Le(e){return\"esri.renderers.ClassBreaksRenderer\"===e.declaredClass}function Ee(e){return\"esri.renderers.UniqueValueRenderer\"===e.declaredClass}function Ce(e){return\"esri.renderers.HeatmapRenderer\"===e.declaredClass}function Ie(e){return Fe(e)||Ve(e)||xe(e)||Re(e)}function Re(e){return\"esri.renderers.PointCloudRGBRenderer\"===e.declaredClass}function Fe(e){return\"esri.renderers.PointCloudClassBreaksRenderer\"===e.declaredClass}function Ve(e){return\"esri.renderers.PointCloudStretchRenderer\"===e.declaredClass}function xe(e){return\"esri.renderers.PointCloudUniqueValueRenderer\"===e.declaredClass}function ze(e){return\"esri.renderers.DotDensityRenderer\"===e.declaredClass}function Te(e){return\"esri.renderers.PieChartRenderer\"===e.declaredClass}function De(e,t){return we(e)||Le(e)||Ee(e)||Ce(e)||ze(e)||Te(e)?\"2d\"===t.type||I(e):_e(e)||Se(e)||ve(e)||Fe(e)||Ve(e)||xe(e)||be(e)||ge(e)}function je(e){return\"esri.layers.BuildingSceneLayer\"===e.declaredClass}function Oe(e){return\"esri.layers.SubtypeGroupLayer\"===e.declaredClass}function Pe(e){return\"esri.layers.VoxelLayer\"===e.declaredClass}function Ae(e){return\"esri.layers.WMSLayer\"===e.declaredClass}function Me(e){return\"esri.layers.WMTSLayer\"===e.declaredClass}function ke(e){return\"esri.layers.MapImageLayer\"===e.declaredClass}function Ue(e){return\"esri.layers.TileLayer\"===e.declaredClass}function Be(e){return e.declaredClass===ce}function qe(e){return e.declaredClass===de}function Ne(e){return e.declaredClass===ye}function He(e){return\"stretch-ramp\"===e.type}function $e(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type}function We(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type&&\"above-and-below\"===t?.univariateTheme}function Ge(e){return\"sublayers\"in e}async function Je(e,t){const s=await ne(\"esri/widgets/Legend/t9n/Legend\");return\"previewTemplateAriaLabel\"!==e||t||(e=\"previewAriaLabel\"),ae(s[e],{label:t})}const Qe=new le({style:\"path\",path:\"M10,5 L5,0 0,5 M5,0 L5,15\",size:15,outline:{width:1,color:[85,85,85,1]}});let Ze={},Ke=class extends l{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpressionClause=null,this.children=new n,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange(\"ready\");this.addHandles([c((()=>this.children),\"change\",(t=>{const{added:s,removed:i}=t;s.forEach((t=>{const s=`activeLayerInfo-ready-watcher-${t.layer.uid}`;this.addHandles(d((()=>t.ready),e,h),s)})),i.forEach((e=>this.removeHandles(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(Ze={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Ze=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return\"effect\"in e&&e.effect&&(t=new _,t.effect=e.effect,t.endTransitions(),t.scale=this.scale),t}get opacity(){const e=this.layer.opacity,t=this.parent?.opacity,s=this.layer.parent,i=s&&\"uid\"in s?this._getParentLayerOpacity(s):null;return null!=t?t*e:null!=i?i*e:e}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if(\"effect\"in e&&e.effect&&Array.isArray(e.effect))return!0;if(\"featureReduction\"in e&&e.featureReduction){if(\"cluster\"===e.featureReduction.type)return!0;if(\"binning\"===e.featureReduction.type&&\"renderer\"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return\"renderer\"in e&&e.renderer?this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get(\"version\")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange(\"ready\");const t=Array.from(e,(e=>{if(L(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet?.features.length){const t=e.layerDefinition,s=t?.drawingInfo,i=s&&C(s.renderer),l=me.read(t.geometryType);return i?this._getRendererLegendElements(i,{title:e.name,geometryType:l}):(o.getLogger(this).warn(\"drawingInfo not available!\"),null)}return null}));try{const e=[],s=await Promise.allSettled(t);for(const t of s)if(\"fulfilled\"===t.status)for(const s of t.value??[])e.push(s);this.legendElements=e,this.notifyChange(\"ready\")}catch(s){o.getLogger(this).warn(\"error while building legend for layer!\",s)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForTools(){const e=this.layer;if(Pe(e))this._constructLegendElementsForVoxelLayer();else if(Me(e))this._constructLegendElementsForWMTSlayer();else if(Ae(e))await this._constructLegendElementsForWMSSublayers();else if(je(e))await this._constructLegendElementsForBuildingSceneLayer();else if(ke(e)||Ue(e)||Oe(e))await this._constructLegendElementsForSublayers();else{this.removeHandles(\"imageryLayers-watcher\");let t=\"default\";if(Be(e)){const s=e;t=(s?.rasterFunction?.functionName||\"default\")+\"_\"+(e.bandIds?.length?e.bandIds.join(\"\"):\"###\")}if(qe(e))return;await this._getLegendLayers(`${e.uid}-${t}`).then((async t=>{this.legendElements=[],this.notifyChange(\"ready\");const s=t.map((async t=>{if(Be(e)){const t=d((()=>[\"renderingRule\"in e&&e.rasterFunction,e.bandIds]),(()=>u((async()=>{Ze.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(t,\"imageryLayers-watcher\")}const s=this._generateSymbolTableElementForLegendLayer(t);s&&s.infos.length&&(Be(e)&&(s.title=e.title),this.legendElements.push(s)),this.notifyChange(\"ready\")}));await Promise.allSettled(s)})).catch((e=>{o.getLogger(this).warn(\"Request to server for legend has failed!\",e)}))}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,s=t&&\"createQuery\"in t&&\"queryFeatureCount\"in t;if(!s&&!(t&&\"createQuery\"in e&&\"queryFeatureCount\"in e))return!0;await y((()=>!t.updating));const i=s?\"createQuery\"in t&&t.createQuery():\"createQuery\"in e&&e.createQuery();if(!i)return!0;i.geometry=this.view.extent;return 0!==(s?\"queryFeatureCount\"in t&&await t.queryFeatureCount(i):\"queryFeatureCount\"in e&&await e.queryFeatureCount(i))}_getParentLayerOpacity(e){let t=1;const s=e.parent;return s&&\"uid\"in s&&(t=this._getParentLayerOpacity(s)),e.opacity*t}_isGroupActive(){return this.children.some((e=>e.ready))}_isRendererScaleDriven(e){if(\"dot-density\"===e.type)return!0;const t=\"valueExpression\"in e?e.valueExpression:null;if(he.test(t))return!0;const s=\"visualVariables\"in e?e.visualVariables:null;return!!s?.some((e=>this._isScaleDrivenSizeVariable(e)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){switch(e.type){case\"simple\":return this._isScaleDrivenSymbol(e.symbol);case\"class-breaks\":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some((e=>this._isScaleDrivenSymbol(e.symbol)));case\"unique-value\":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!e.uniqueValueInfos?.some((e=>this._isScaleDrivenSymbol(e.symbol)))}return!1}_isScaleDrivenSymbol(e){if(\"cim\"===e?.type){const{primitiveOverrides:t,minScale:s,maxScale:i}=e.data,l=t?.some((e=>/\\$view\\.scale/.test(e.valueExpressionInfo?.expression||\"\")))??!1;return null!=s||null!=i||l}return!1}_isScaleDrivenSizeVariable(e){if(e&&\"size\"!==e.type)return!1;const t=e,s=t.minSize,i=t.maxSize;return!(\"object\"!=typeof s||!s||!this._isScaleDrivenSizeVariable(s))||(!(\"object\"!=typeof i||!i||!this._isScaleDrivenSizeVariable(i))||he.test(t.valueExpression))}_isLayerScaleDriven(e){if(\"minScale\"in e&&e.minScale>0||\"maxScale\"in e&&e.maxScale>0)return!0;if(\"sublayers\"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&ke(t)&&\"source\"in e&&e.source&&\"map-layer\"===e.source.type)for(const s of t.sourceJSON.layers??[])if(s.id===e.source.mapLayerId&&(s.minScale>0||s.maxScale>0))return!0;return!1}async _constructLegendElementsForVoxelLayer(){this.legendElements=[],this.removeHandles(\"voxel-style-watcher\"),this.removeHandles(\"voxel-current-variable\");const e=this.layer;this.addHandles(d((()=>e.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-current-variable\"),this.addHandles(d((()=>e.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-style-watcher\");const t=e.getVariableStyle(null),s=[];if(t)if(t.uniqueValues?.length){const e=[];t.uniqueValues.forEach((t=>{t.enabled&&e.push({label:t.label||`${t.value}`,value:t.value,symbol:new re({color:t.color,outline:null})})})),e.length&&s.push({type:\"symbol-table\",title:t.label,infos:e})}else if(t.transferFunction){const{colorStops:e,stretchRange:i}=t.transferFunction,l=e.toArray().reverse(),r=i.map(((e,t)=>`${0===t?Q:Z} ${ie(e)}`)).reverse(),n=l.map((e=>({color:e.color,value:null,label:null})));n[0].label=r[0],n[n.length-1].label=r[1],s.push({type:\"color-ramp\",title:t.label,infos:n,preview:D(l.map((e=>e.color)),{ariaLabel:await Je(\"previewColorRampAriaLabel\")})})}const i=e.opacity,l=s.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol)).map((e=>this._getSymbolPreview(e,i)));await Promise.allSettled(l),this.legendElements=s,this.notifyChange(\"ready\")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this.removeHandles(\"wmts-activeLayer-watcher\");const e=this.layer.activeLayer;this.addHandles(d((()=>{const{layer:e}=this;return e&&\"activeLayer\"in e&&e.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),\"wmts-activeLayer-watcher\");const t=e.styleId?e.styles?.find((({id:t})=>t===e.styleId))?.legendUrl:void 0;t&&(this.legendElements=[{type:\"symbol-table\",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange(\"ready\")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles(\"wms-sublayers-watcher\");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(d((()=>{const{layer:e}=this;return e&&\"sublayers\"in e&&e.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange(\"ready\")}async _generateLegendElementsForWMSSublayers(e,t){const s=this.layer,i=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\");const l=this.sublayerIds?.map((e=>s.findSublayerById(e)))?.filter(r)??[],n=l.length?l:e.toArray();for(const r of n){const e=d((()=>[r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(e,\"wms-sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e?.infos.length&&i.unshift(e)}}return i}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const s=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:\"symbol-table\",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){let s=e.legendUrl;if(!s)return;const l={type:\"symbol-table\",title:e.title||e.name||String(e.id??\"\"),infos:[]};t&&(s=p(s,t));let r=null;const n=e.layer?.opacity;try{r=(await i(s,{responseType:\"image\"})).data,r&&(r.style.opacity=n)}catch{}return l.infos.push({src:s,preview:r,opacity:n}),l}_getLegendLayers(e,t){const s=Ze&&Ze[e];return s?Promise.resolve(s):this._legendRequest(t).then((t=>{const s=t.layers;return Ze[e]=s,s}))}_legendRequest(e){const t=this.layer;let s={f:\"json\",dynamicLayers:e};if(Be(t)){const e=t.exportImageServiceParameters.rasterFunction;if(e&&(s.renderingRule=JSON.stringify(e.functionDefinition?.toJSON()||e.toJSON())),t.bandIds&&(s.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:i,customParameters:l}=t;s={raster:e,viewId:i,...s,...l}}}let l=t.url.replace(/(\\/)+$/,\"\");if(\"version\"in t&&+t.version>=10.01){const e=l.indexOf(\"?\");e>-1?l=l.substring(0,e)+\"/legend\"+l.substring(e):l+=\"/legend\"}else{const e=l.toLowerCase().indexOf(\"/rest/\"),t=l.substring(0,e)+l.substring(e+5,l.length);l=ue+\"?soapUrl=\"+encodeURI(t)+\"&returnbytes=true\"}return i(l,{query:s}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;this.addHandles(d((()=>e.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let s=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");const i=e.toArray();for(const l of i){const e=d((()=>[\"renderer\"in l&&l.renderer,l.opacity,l.title,l.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||l.visible){const e=null!=l?.opacity?l.opacity:null,i=null!=e?e*t:t;if(\"building-group\"===l.type){const e={type:\"symbol-table\",title:l.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(l.sublayers,i);e.infos.push(...t),s=[e,...s]}else if(l.renderer){s=[...await this._getRendererLegendElements(l.renderer,{title:l.title,opacity:i,sublayer:l}),...s]}}}return s.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;if(ke(e)||Ue(e)||Oe(e)){this.addHandles(d((()=>e.sublayers),(()=>this._constructLegendElementsForSublayers)),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}}async _generateLegendElementsForSublayers(e,t,s){const i=this.layer;let l=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForSublayers())),\"sublayers-watcher\");let n=e.toArray();!s&&this.sublayerIds&&this.sublayerIds.length&&(n=Oe(i)?this.sublayerIds.map((e=>i.findSublayerForSubtypeCode(e))).filter(r):this.sublayerIds.map((e=>i.findSublayerById(e))).filter(r));for(const r of n){const e=d((()=>[r.renderer,r.opacity,r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled&&this._isSublayerInScale(r)){const e=null!=r?.opacity?r.opacity:null,i=null!=e?e*t:t,n=!Ge(r)||r.originIdOf(\"renderer\")>S.SERVICE&&!r.sublayers;if(r.renderer&&n){await r.load();l=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:i,sublayer:r}),...l]}else if(Ge(r)){const e=await this._generateSymbolTableElementForSublayer(r,i,s);e&&l.unshift(e)}}}return l.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,s){if(!s){s=new Map;const t=this.layer,i=e.source;let l=null;if(!(!i||\"map-layer\"===i.type&&i.mapLayerId===e.id&&(!i.gdbVersion||i.gdbVersion===(\"gdbVersion\"in t&&t.gdbVersion)))||e.originIdOf(\"renderer\")>S.SERVICE||e.originIdOf(\"labelingInfo\")>S.SERVICE||e.originIdOf(\"labelsVisible\")>S.SERVICE){const e=new w({layer:this.layer});l=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy()}const r=l||`${t.uid}-default`;(await this._getLegendLayers(r,l)).forEach((e=>s.set(e.layerId,e)))}const i=s.get(e.id);if((!i||i?.subLayerIds&&i.defaultVisibility)&&e.sublayers){const i=await this._generateLegendElementsForSublayers(e.sublayers,t,s);return{type:\"symbol-table\",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendLayer(i,e,t)}_generateSymbolTableElementForLegendLayer(e,t,s){if(!e?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const i=t?.renderer;let l=t?.title||e.layerName;if(i&&(!t||t?.originIdOf(\"renderer\")>S.SERVICE)){const e=t?.title||this._getRendererTitle(i,t);e&&(l&&\"string\"!=typeof e&&\"title\"in e&&(e.title=l),l=e)}const r={type:\"symbol-table\",title:l,legendType:e.legendType||null,infos:[]},n=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach((t=>{const i={type:\"symbol-table\",title:t.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(n.filter((e=>e.groupId===t.id)),e.layerId,s)};i.infos?.length>0&&r.infos.push(i)})):r.infos=this._generateSymbolTableElementInfosForLegendLayer(n,e.layerId,s),r.infos.length>0?r:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map((e=>{let l=e.url;if(e.imageData&&e.imageData.length>0)l=`data:image/png;base64,${e.imageData}`;else{if(0===l.indexOf(\"http\"))return null;l=s(`${this.layer.url}/${t}/images/${l}`)}return{label:e.label,src:l,opacity:i??this.opacity,width:e.width,height:e.height}})).filter(r)}_isSublayerInScale(e){const t=e.minScale||0,s=e.maxScale||0;return!(t>0&&t<this.scale||s>this.scale)}_isLegendLayerInScale(e,t){const s=t||this.layer;let i=null,l=null,r=!0;return!s.minScale&&0!==s.minScale||!s.maxScale&&0!==s.maxScale?(0===e.minScale&&s.tileInfo&&(i=s.tileInfo.lods[0].scale),0===e.maxScale&&s.tileInfo&&(l=s.tileInfo.lods[s.tileInfo.lods.length-1].scale)):(i=Math.min(s.minScale,e.minScale)||s.minScale||e.minScale,l=Math.max(s.maxScale,e.maxScale)),(i>0&&i<this.scale||l>this.scale)&&(r=!1),r}_sanitizeLegendForSublayer(e,t){if(\"version\"in this.layer&&+this.layer.version<10.1||0===e.length)return e;const s=t.renderer,i=e.some((e=>e.values));let l=0,r=null;return i&&e.some(((e,t)=>(e.values||(l=t,r=e,r.label||(r.label=\"others\")),null!=r))),s?\"unique-value\"===s.type?r&&(e.splice(l,1),e.push(r)):\"class-breaks\"===s.type&&(r&&e.splice(l,1),e.reverse(),r&&e.push(r)):r&&(e.splice(l,1),e.push(r)),e}async _getRendererLegendElements(e,t={}){if(!De(e,this.view))return o.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(Ie(e))return this._constructPointCloudRendererLegendElements(e,t);if(ze(e))return this._constructDotDensityRendererLegendElements(e);const s=await this._loadRenderer(e);return Te(s)?this._constructPieChartRendererLegendElements(s):this._constructRendererLegendElements(s,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return\"binning\"===e.type?t=e.renderer:\"cluster\"===e.type&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){return(e.legendOptions?.title||e.field)??\"\"}async _constructPointCloudRendererLegendElements(e,t={}){const s=t.title,i=[];let l=null,r=null;if(Fe(e))l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{l.infos.unshift({label:e.label||e.minValue+\" - \"+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(fe,e.color)})}));else if(Ve(e)){const t=e.stops;let i=null;if(t?.length&&(1===t.length&&(i=t[0].color),!i)){const e=t[0].value,s=t[t.length-1].value;if(null!=e&&null!=s){i=k(e+(s-e)/2,t)}}l={type:\"symbol-table\",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(fe,i||fe.color)}]};const n=U(e.stops??[])??[];r={type:\"color-ramp\",title:s||this._getPointCloudRendererTitle(e),infos:n,preview:D(n.map((e=>e.color)),{ariaLabel:await Je(\"previewColorRampAriaLabel\")})}}else xe(e)&&(l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos?.forEach((e=>{l.infos.push({label:e.label||e.values.join(\", \"),value:e.values.join(\", \"),symbol:this._getAppliedCloneSymbol(fe,e.color)})})));l&&l.infos.length&&i.push(l),r&&r.infos.length&&i.push(r);const n=i.reduce(((e,t)=>[...e,...t.infos??[]]),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return await Promise.allSettled(n),i}async _getElementInfoForDotDensity(e,t){const{color:s,label:i,valueExpressionTitle:l}=t,{backgroundColor:r,outline:n,dotSize:a}=e,o=this.effectList,u=o?.effects.map((e=>e.toJSON())),c=v(u),d=await Je(\"previewTemplateAriaLabel\",i||l),y=a+\"-\"+s+\"-\"+r+\"-\"+(n&&JSON.stringify(n.toJSON()))+\"-\"+c,h=this._dotDensityUrlCache,m=h.has(y)?h.get(y):j(e,s,{ariaLabel:d});h.set(y,m);const f={shape:{type:\"image\",x:0,y:0,width:m.width,height:m.height,src:m.src},fill:null,stroke:null,offset:[0,0]},p=T([[f]],[m.width,m.height],{effectView:this.effectList,ariaLabel:d});return{opacity:1,src:m.src,preview:p,width:m.width,height:m.height}}async _constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),s=e.legendOptions?.unit,i={type:\"symbol-table\",title:{value:t&&Math.round(t),unit:s||\"\"},infos:[]};for(const l of e.attributes){const t=await this._getElementInfoForDotDensity(e,l);t.label=l.label||l.valueExpressionTitle||l.field,i.infos.push(t)}return[i]}async _constructPieChartRendererLegendElements(e){const t=this.layer.opacity,s=[];let i=null;const l=e.outline;e.attributes.forEach((e=>{const t=new le({color:e.color,outline:l}),i=e.label||e.valueExpressionTitle||e.field;s.push({label:i,symbol:t})}));const r=s.length?[...s]:[];if(e.othersCategory?.color&&0!==e.othersCategory?.threshold){const t=new le({color:e.othersCategory.color,outline:l});i=e.othersCategory.label||\"Other\",s.push({label:i,symbol:t})}if(e.defaultColor?.a){const t=new le({color:e.defaultColor,outline:l});s.push({label:e.defaultLabel,symbol:t})}const n=await this._getVisualVariableLegendElements(e,this.layer)||[];if(s.length){n.unshift({type:\"symbol-table\",title:null,infos:s});const t=r.filter((e=>e.label!==i)).map((e=>e.symbol.color)).filter(Boolean),a=O(t,{holePercentage:e.holePercentage,backgroundColor:e.backgroundFillSymbol?.color,effectList:this.effectList,outline:l,ariaLabel:await Je(\"previewPieChartAriaLabel\")});n.unshift({type:\"pie-chart-ramp\",title:this._getRendererTitle(e,this.layer),infos:s,preview:a})}const a=n.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol&&!e?.preview)).map((e=>this._getSymbolPreview(e,t,{effectList:this.effectList})));return await Promise.allSettled(a),n}async _constructRendererLegendElements(e,t={}){const{title:s,sublayer:i}=t,l=i||this.layer,r=K(e);\"definitionExpression\"in l&&l.definitionExpression&&!this._layerDefinitionExpressionClause&&this.respectLayerDefinitionExpression&&(this._layerDefinitionExpressionClause=await f(l.definitionExpression,l.fieldsIndex)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const n=await this._getVisualVariableLegendElements(e,l)||[],a={type:\"symbol-table\",title:s||this._getRendererTitle(e,l),infos:[]};let o=null,u=!1;const c=new Set;if(ge(e)&&!this._hasSizeRamp){const t=await X(e);a.infos.push({label:null,symbol:t})}else if($e(e)){let t=s;const i=We(e)?\"univariate-above-and-below-ramp\":\"univariate-color-size-ramp\",l=n.findIndex((e=>\"color-ramp\"===e.type)),r=-1!==l?n.splice(l,1)[0]:null,a=n.findIndex((e=>\"size-ramp\"===e.type)),o=-1!==a?n.splice(a,1)[0]:null,u=[];r&&(t=r.title,u.push(r)),o&&(t=o.title,u.push(o)),u.length>0&&n.push({type:i,title:t,infos:u})}else if(Ce(e)){const t=N(e);n.push({type:\"heatmap-ramp\",title:s||this._getRendererTitle(e,l),infos:t,preview:D(t.map((e=>e.color)),{effectList:this.effectList,ariaLabel:await Je(\"previewColorRampAriaLabel\")})})}else if(Ee(e)){const t=e&&e.authoringInfo;if(t&&\"relationship\"===t.type){const{numClasses:s,field1:i,field2:r}=t,o=t.focus;if(s&&i&&r){const t=[i,r];let u=H(o)||0;for(const e of t){const{field:t,normalizationField:s,label:i}=e,r=i||{field:this._getFieldAlias(t,l),normField:s&&this._getFieldAlias(s,l)},n=Qe.clone();n.angle=u,a.infos.push({label:r,symbol:n}),c.add(n),u+=90}const d=$({focus:o,numClasses:s,infos:e.uniqueValueInfos??[]});n.unshift(d)}}else if(Be(this.layer)||qe(this.layer)){const{field:t,field2:s}=e;e.uniqueValueInfos?.forEach((e=>{e.symbol&&(this._checkDefinitionExpression(t,e.value)||s)&&a.infos.push({label:e.label||e.value,value:e.value,symbol:e.symbol})}))}else{const{field:t,field2:i,field3:n,fieldDelimiter:o,valueExpression:c,defaultSymbol:d}=e,y=!(!t&&!c||!i&&!n),h=[];if(e.uniqueValueGroups?.forEach((e=>{const s={type:\"symbol-table\",title:e.heading,infos:[]};e.classes?.forEach((e=>{const{symbol:a,values:u}=e;if(a){const d=[],h=[];for(const e of u??[]){const{value:s,value2:r,value3:a}=e,u=[],m=[];(t||c)&&(u.push(s),m.push(this._getDomainName(t,s,l))),i&&(u.push(r),m.push(this._getDomainName(i,r,l))),n&&(u.push(a),m.push(this._getDomainName(n,a,l))),d.push(y?u.join(o||\"\"):u[0]),h.push(m.join(\" - \"))}const m=d.join(\", \");let f=e.label;if(!f){const e=h.filter(Boolean);f=e.length?e.join(\", \"):m}const p=a.clone();\"cim\"===p.type&&r&&V(p,{innerDotSize:.5*oe,outerRingSize:oe}),(this._checkDefinitionExpression(t,m)||i)&&s.infos.push({label:f,value:m,symbol:p})}})),s.infos.length&&h.push(s)})),h.length){const t=h[0];1===h.length&&\"title\"in t&&!t.title?a.infos.push(...t.infos??[]):(d&&(h.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:d}]}),u=!0),a.infos.push(...h)),s||e.legendOptions?.title||e.valueExpressionTitle||(a.title=null)}}e.defaultSymbol&&!u&&(a.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),u=!0)}else if(Le(e)){if(!r){o=this._isUnclassedRenderer(e);if(!o||!this._hasSizeRamp){const t=e.classBreakInfos.filter((({symbol:e})=>e));for(const{label:e,minValue:s,maxValue:i,symbol:l}of t)a.infos.unshift({label:e||(o?null:`${s} - ${i}`),value:[s,i],symbol:l});o&&(a.title=null),this._updateInfosForClassedSizeRenderer(e,a.infos)}e.defaultSymbol&&!o&&(a.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),u=!0)}}else if(_e(e))if(qe(this.layer)||Ne(this.layer)){const t=await this._constructTileImageryStretchRendererElements(e);He(t)?n.push(t):a.infos=t}else{const t=this.layer;let s,i;if(e.statistics?.length){const t=e.statistics[0];Y(t)?(s=t.min,i=t.max):[s,i]=t}let l=[],r=t.serviceRasterInfo;if(t.rasterFunction)try{r=await t.generateRasterInfo(t.rasterFunction)}catch{}const o=E(r.pixelType);if(1===r.bandCount){const l=t.bandIds?.[0]||0;s=null!=s?s:r.statistics?r.statistics[l].min:o[0],i=null!=i?i:r.statistics?r.statistics[l].max:o[1],s||i?n.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend()}else if(t.bandIds&&1===t.bandIds.length)s=null!=s?s:r.statistics?r.statistics[t.bandIds[0]].min:o[0],i=null!=i?i:r.statistics?r.statistics[t.bandIds[0]].max:o[1],s||i?n.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend();else if(r.bandCount>=3){const{bandInfos:e}=r,{bandIds:s}=t;e.length>=r.bandCount?3===s?.length?(l=s.map((t=>e[t].name)),a.infos=this._createSymbolTableElementMultiBand(l)):\"lerc\"===t.format?(l=[0,1,2].map((t=>e[t].name)),a.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():\"lerc\"===t.format?(l=[\"band1\",\"band2\",\"band3\"],a.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Se(e))e.colormapInfos.forEach((e=>{a.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(pe,e.color)})}));else if(we(e)){let s=e.symbol;switch(t.geometryType){case\"point\":s=\"pointSymbol\"in l?l.pointSymbol:null;break;case\"polyline\":s=\"lineSymbol\"in l?l.lineSymbol:null;break;case\"polygon\":s=\"polygonSymbol\"in l?l.polygonSymbol:null}const i=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&i&&a.infos.push({label:e.label,symbol:s})}else if(be(e)){e.outputUnit&&(this.title=\"(\"+e.toJSON().outputUnit+\")\"),a.title=e.attributeField;const t=e.getClassBreakInfos();t?.length?t.forEach((e=>{a.infos.push({label:e.minValue+\" - \"+e.maxValue,symbol:e.symbol})})):a.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else ve(e)&&n.push(await this._getStretchLegendElements(e,{min:0,max:255}));const d=e.defaultSymbol;!d||u||we(e)||o&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||n.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:d}]}),a.infos.length&&n.unshift(a);const y=null==t.opacity?this.opacity:t.opacity,h=this._isTallSymbol(\"visualVariables\"in e?e.visualVariables:null),m=Be(this.layer)||qe(this.layer),p=n.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol)).filter((e=>{if(\"cim\"===e.symbol.type){const{minScale:t,maxScale:s}=e.symbol.data;if(t&&t<this.scale||s&&s>this.scale)return!1}return!0})).map((e=>this._getSymbolPreview(e,y,{isDefault:e.symbol===d,applyScaleDrivenSize:!c.has(e.symbol),symbolConfig:{isTall:h,isSquareFill:m},effectList:c.has(e.symbol)?null:this.effectList})));return e=null,await Promise.allSettled(p),n}_checkDefinitionExpression(e,t){return!e||\"string\"!=typeof e||!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature({[e]:t})}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){const t=e?.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}async _constructTileImageryStretchRendererElements(e){const t=this.layer,s=t.symbolizer.rasterInfo??t.raster.rasterInfo;let i,l;const r=e?.statistics?.length?e.statistics:s?.statistics;if(r){const e=r[0];Y(e)?(i=e.min,l=e.max):[i,l]=e}else{const e=E(s.pixelType);i=e[0],l=e[1]}if(t.hasStandardTime()&&(i=t.getStandardTimeValue(i),l=t.getStandardTimeValue(l)),1===s.bandCount||1===t.bandIds?.length)return this._getStretchLegendElements(e,{min:i,max:l});const n=(t?.bandIds?.length?t.bandIds:Array.from(Array(Math.min(s.bandCount,3)).keys())).map((e=>s.bandInfos[e].name));return n.length<3?n.push(n[1]):n.length>3&&n.splice(3),this._createSymbolTableElementMultiBand(n)}async _getStretchLegendElements(e,t){const s=e.colorRamp,i=B(s,t);return{type:\"stretch-ramp\",title:\"\",infos:i,preview:D(i.map((e=>e.color)),{ariaLabel:await Je(\"previewColorRampAriaLabel\")})}}_getClusterSymbol(){const e=this.layer,t=\"featureReduction\"in e&&e.featureReduction,s=t&&\"symbol\"in t&&t.renderer;return s&&!0!==s?.authoringInfo?.isAutoGenerated?null:t&&\"symbol\"in t?t.symbol:null}async _getSizeLegendElement(e,t,s,i){return{type:\"size-ramp\",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await W(s,t,await ee(s),this.scale,this.view,i,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],s=[\"red\",\"green\",\"blue\"];return e.forEach(((e,i)=>{t.push({label:{colorName:s[i],bandName:e},src:te[i],opacity:this.opacity??1})})),t}_updateInfosForClassedSizeRenderer(e,t){const s=e.authoringInfo&&\"class-breaks-size\"===e.authoringInfo.type,i=e.classBreakInfos.some((e=>A(e.symbol)));if(s&&i){const s=G,i=J,l=e.classBreakInfos.length,r=(s-i)/(l>1?l-1:l);t.forEach(((e,t)=>{e.size=s-r*t}))}}_isTallSymbol(e){let t=!1,s=!1;if(e)for(let i=0;i<e.length&&(!t||!s);i++){const l=e[i];\"size\"===l.type&&(\"height\"===l.axis&&(t=!0),\"width-and-depth\"===l.axis&&(s=!0))}return t&&s}async _getSymbolPreview(e,t,s){let i=!s?.isDefault&&null==e.size&&this._hasSizeRamp?m(z.size):e.size;if(this._scaleDrivenSizeVariable&&s?.applyScaleDrivenSize){const{getSize:t}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");i=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:\"simple-marker\"===e.symbol.type?e.symbol.style:null})}const l=!s?.isDefault&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!s?.applyScaleDrivenSize);return P(e.symbol,{size:i,opacity:t,scale:!1,symbolConfig:s?.symbolConfig,effectView:s?.effectList,style:\"legend\",cimOptions:{allowScalingUp:l,viewParams:this.isScaleDriven?{viewingMode:\"2d\"===this.view?.type?\"map\":this.view?.viewingMode,scale:this.view?.scale}:null},ariaLabel:e.label&&\"string\"!=typeof e.label?null:await Je(\"previewTemplateAriaLabel\",e.label)}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}_getClusterRenderer(e){this._hasClusterSizeVariable=!1;const t=\"renderer\"in this.layer?this.layer.renderer:null,s=e.renderer?.clone()||t?.clone(),i=M(e,this.layerView,this.view);if(i&&null!=s&&\"visualVariables\"in s){const t=s.visualVariables?.some((e=>\"size\"===e.type&&\"outline\"!==e.target&&!he.test(e.valueExpression)));if(!t){if(\"clusterMinSize\"in e&&\"clusterMaxSize\"in e){const{clusterMinSize:t,clusterMaxSize:s}=e;i.legendOptions=new F({showLegend:t!==s})}const t=s.visualVariables||[];s.visualVariables=t.concat([i]),this._hasClusterSizeVariable=!0}}return s}async _loadRenderer(e){const t=[],s=e.clone(),i=await ee(s);if(Le(s)||Ee(s)){const e=(s.classBreakInfos||s.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,i).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(t,e)}return t.push(this._fetchSymbol(s.symbol||s.defaultSymbol,s.defaultSymbol?null:i).then((e=>{this._applySymbolToRenderer(s,e,we(s))})).catch((()=>{this._applySymbolToRenderer(s,null,we(s))}))),await Promise.allSettled(t),s}_applySymbolToRenderer(e,t,s){s?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(\"web-style\"===e.type){const s=this._webStyleSymbolCache;try{const i=await(\"2d\"===this.view.type?e.fetchCIMSymbol({cache:s}):e.fetchSymbol({cache:s}));return this._getAppliedCloneSymbol(i,t)}catch{throw o.getLogger(this).warn(\"Fetching web-style failed!\"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,s){if(!e||!s)return e;const i=e.clone(),l=s&&s.toRgba();return i.type.includes(\"3d\")?this._applyColorTo3dSymbol(i,l):\"cim\"===i.type?x(i,s):i.color&&(i.color=new t(l||i.color)),i}_applyColorTo3dSymbol(e,s){s&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new t(s))}))}async _getVisualVariableLegendElements(e,t){if(!(\"visualVariables\"in e)||\"vector-field\"===e.type)return null;const s=e.visualVariables??[],i=[],l=[],n=[],a=K(e);if(2===a?.sizeStops?.length&&(Le(e)||Ee(e))){const[t,s]=a.sizeStops;l.push(new R({field:e.field,normalizationField:\"normalizationField\"in e?e.normalizationField:null,minSize:t.size,maxSize:s.size,minDataValue:t.value,maxDataValue:s.value}))}for(const r of s)\"color\"===r.type?i.push(r):\"size\"===r.type?l.push(r):\"opacity\"===r.type&&n.push(r);const o=[...i,...l,...n];let u,c;if(0===i.length&&Le(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];u=t&&t.symbol}if(0===i.length&&we(e)&&(u=e.symbol),u)if(u.type.includes(\"3d\")){const e=u.symbolLayers.at(0);\"water\"===e.type?null!=e.color&&(c=e.color):null!=e.material?.color&&(c=e.material.color)}else u.url||(c=u.color);const d=this.effectList;return(await Promise.all(o.map((async s=>{if(!s.legendOptions||!1!==s.legendOptions.showLegend){const i=ge(e)?s.field:this._getRampTitle(s,t);let l=null;const r=se(t,s,this.view.timeZone);if(\"color\"===s.type){const e=await q(s,null,r)??[];l={type:\"color-ramp\",title:i,infos:e,preview:D(e.map((e=>e.color)),{effectList:d,ariaLabel:await Je(\"previewColorRampAriaLabel\")})},this._hasColorRamp||(this._hasColorRamp=e.length>0)}else if(\"size\"===s.type&&\"outline\"!==s.target)he.test(s.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=s):(l=await this._getSizeLegendElement(i,s,e,r),this._hasSizeRamp||(this._hasSizeRamp=!(null==l.infos||!l.infos.length)));else if(\"opacity\"===s.type){const e=await q(s,c,r)??[];l={type:\"opacity-ramp\",title:i,infos:e,preview:D(e.map((e=>e.color)),{effectList:d,ariaLabel:await Je(\"previewColorRampAriaLabel\")})},this._hasOpacityRamp||(this._hasOpacityRamp=e.length>0)}return l&&l.infos?l:null}})))).filter(r)}_getDomainName(e,t,s){if(e&&\"function\"!=typeof e){const i=\"getField\"in s&&s.getField?.(e),l=i&&\"getFieldDomain\"in s&&s.getFieldDomain?s.getFieldDomain(i.name):null;return\"coded-value\"===l?.type?l.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,s=e.field;if(\"featureReduction\"in t&&t.featureReduction&&\"cluster\"===t.featureReduction.type){const e=t.featureReduction,i=\"popupTemplate\"in e&&e.popupTemplate,l=i&&i.fieldInfos;if(l)for(const t of l)if(t.fieldName===s)return\"cluster_count\"===s?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(e,t){let s=e.field,i=e.normalizationField,l=!1,r=!1,n=!1,a=null;s=\"function\"==typeof s?null:s,i=\"function\"==typeof i?null:i;const o=e.legendOptions?.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if(\"renderer\"in t&&t.renderer&&\"authoringInfo\"in t.renderer&&t.renderer.authoringInfo?.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const s=e[t];if(\"color\"===s.type){if(\"ratio\"===s.style){l=!0;break}if(\"percent\"===s.style){r=!0;break}if(\"percent-of-total\"===s.style){n=!0;break}}}}a={field:s&&this._getFieldAlias(s,t),normField:i&&this._getFieldAlias(i,t),ratio:l,ratioPercent:r,ratioPercentTotal:n}}return a}_getRendererTitle(e,t){const s=e;if(s.legendOptions?.title)return s.legendOptions.title;if(s.valueExpressionTitle)return s.valueExpressionTitle;let i=s.field,l=null,r=null;if(Le(s)&&(l=s.normalizationField,r=\"percent-of-total\"===s.normalizationType),i=\"function\"==typeof i?null:i,l=\"function\"==typeof l?null:l,Ee(s)){const{field2:e,field3:l,fieldDelimiter:r}=s;let n=i&&this._getFieldAlias(i,t);return e&&(n=`<${n}>${r}<${this._getFieldAlias(e,t)}>`,l&&(n=`${n}${r}<${this._getFieldAlias(l,t)}>`)),n}let n=null;return(i||l)&&(n={field:i&&this._getFieldAlias(i,t),normField:l&&this._getFieldAlias(l,t),normByPct:r}),n}_getFieldAlias(e,t){const s=\"popupTemplate\"in t?t.popupTemplate:null,i=s?.fieldInfos;let l=i?.find((t=>e===t.fieldName)),r=null;\"getField\"in t&&t.getField?r=t.getField(e):\"fieldsIndex\"in t&&t.fieldsIndex&&(r=t.fieldsIndex.get(e));let n=null;const a=\"featureReduction\"in t&&t.featureReduction;a&&(l??=\"popupTemplate\"in a?a.popupTemplate?.fieldInfos?.find((t=>e?.toLowerCase()===t.fieldName?.toLowerCase())):void 0,\"fields\"in a&&a.fields&&(n=a.fields.find((t=>t.name?.toLowerCase()===e?.toLowerCase()))));const o=l||r||n;let u=null;return o&&(u=l?.label||r?.alias||n?.alias||\"name\"in o&&o.name||\"fieldName\"in o&&o.fieldName||null),u}_isUnclassedRenderer(e){const t=e.visualVariables;let s=!1;return Le(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(s=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),s}};e([g()],Ke.prototype,\"children\",void 0),e([g({readOnly:!0})],Ke.prototype,\"effectList\",null),e([g()],Ke.prototype,\"layerView\",void 0),e([g()],Ke.prototype,\"layer\",void 0),e([g()],Ke.prototype,\"legendElements\",void 0),e([g({readOnly:!0})],Ke.prototype,\"opacity\",null),e([g()],Ke.prototype,\"parent\",void 0),e([g({readOnly:!0,dependsOn:[]})],Ke.prototype,\"ready\",null),e([g()],Ke.prototype,\"hideLayersNotInCurrentView\",void 0),e([g()],Ke.prototype,\"keepCacheOnDestroy\",void 0),e([g()],Ke.prototype,\"respectLayerDefinitionExpression\",void 0),e([g()],Ke.prototype,\"respectLayerVisibility\",void 0),e([g({readOnly:!0})],Ke.prototype,\"scale\",null),e([g()],Ke.prototype,\"sublayerIds\",void 0),e([g({readOnly:!0})],Ke.prototype,\"isScaleDriven\",null),e([g()],Ke.prototype,\"title\",void 0),e([g({readOnly:!0,dependsOn:[\"ready\"],value:0})],Ke.prototype,\"version\",null),e([g()],Ke.prototype,\"view\",void 0),Ke=e([b(\"esri.widgets.Legend.support.ActiveLayerInfo\")],Ke);const Xe=Ke;export{Xe as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../intl.js\";import i from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import{watch as t,initial as s,when as a}from\"../../core/reactiveUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{get as l}from\"../../core/accessorSupport/get.js\";import{getEffectiveFeatureReduction as y}from\"../../views/2d/layers/features/layerAdapters/featureReductionUtils.js\";import d from\"./support/ActiveLayerInfo.js\";import{onLocaleChange as h}from\"../../intl/locale.js\";const c={state:\"state\",view:\"view\",allLayerViews:\"all-layer-views\",legendProperties:\"legend-properties\"},L=r.ofType(d),u=new Set([\"esri.layers.BuildingSceneLayer\",\"esri.layers.CSVLayer\",\"esri.layers.FeatureLayer\",\"esri.layers.GeoJSONLayer\",\"esri.layers.GeoRSSLayer\",\"esri.layers.GroupLayer\",\"esri.layers.HeatmapLayer\",\"esri.layers.ImageryLayer\",\"esri.layers.ImageryTileLayer\",\"esri.layers.MapImageLayer\",\"esri.layers.OGCFeatureLayer\",\"esri.layers.OrientedImageryLayer\",\"esri.layers.PointCloudLayer\",\"esri.layers.StreamLayer\",\"esri.layers.SceneLayer\",\"esri.layers.SubtypeGroupLayer\",\"esri.layers.TileLayer\",\"esri.layers.VoxelLayer\",\"esri.layers.WFSLayer\",\"esri.layers.WMSLayer\",\"esri.layers.WMTSLayer\",\"esri.layers.WCSLayer\",\"esri.layers.LinkChartLayer\",\"esri.layers.knowledgeGraph.KnowledgeGraphSublayer\"]),p=\"view.basemapView.baseLayerViews\",f=\"view.groundView.layerViews\",v=\"view.basemapView.referenceLayerViews\",_=[p,f,\"view.layerViews\",v];let w=class extends i{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new r,this.activeLayerInfos=new L,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(t((()=>this.view),(()=>this._viewHandles()),s),c.view),this.addHandles(h((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){return this.view?.ready?\"ready\":\"disabled\"}_viewHandles(){this.removeHandles(c.state),this.view&&this.addHandles(t((()=>this.state),(()=>this._stateHandles()),s),c.state)}_stateHandles(){this._resetAll(),\"ready\"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([c.allLayerViews,c.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i?.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on(\"change\",(e=>this._propertiesChangeHandle())),c.allLayerViews),this.addHandles(t((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),c.legendProperties)}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach((i=>{if(!i.parent){const t=i.layer.parent,s=t&&\"uid\"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&e.includes(a)&&(r.push(i),i.parent=a,a.children.add(i),this._sortActiveLayerInfos(a.children))}})),e.removeMany(r);const t={};i.allLayerViews.forEach(((e,i)=>t[e.layer.uid]=i)),e.sort(((e,i)=>{const r=t[e.layer.uid]||0;return(t[i.layer.uid]||0)-r}))}_generateLayerViews(){const e=[];return _.filter(this._filterLayerViews,this).map((e=>l(this,e))).filter((e=>null!=e)).forEach(this._collectLayerViews(\"layerViews\",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===p||e===v),r=!this.groundLegendVisible&&e===f;return!i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach((t=>{i.push(t),r(t[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return!!u.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(t((()=>[e.legendEnabled,e.layer?.legendEnabled]),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}_buildActiveLayerInfo(e){const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let o=this._activeLayerInfosByLayerViewId[r];if(!o){const t=void 0!==n?.title&&n.layer.uid===i.uid;o=new d({layer:i,layerView:e,title:t?n.title:i.title,view:this.view,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:n?.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[r]=o}const l=i.parent&&\"uid\"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;if(o.parent=this._activeLayerInfosByLayerViewId[l?.uid],!this.hasHandles(r)){const n=[t((()=>i.title),(e=>this._titleHandle(e,o))),t((()=>[i.opacity,\"renderer\"in i&&i.renderer,\"pointSymbol\"in i&&i.pointSymbol,\"lineSymbol\"in i&&i.lineSymbol,\"polygonSymbol\"in i&&i.polygonSymbol]),(()=>this._constructLegendElements(o))),a((()=>!0===this.view?.stationary),(()=>this._scaleHandle(o)),s),t((()=>e.layer?y(e.layer,e.view):null),(()=>this._constructLegendElements(o))),t((()=>e.updating),(()=>{if(null==e.layer)return;null!=y(e.layer,e.view)&&this._constructLegendElements(o)})),t((()=>\"effect\"in i&&i.effect),(()=>this._constructLegendElements(o))),a((()=>this.view?.timeZone),(()=>this._constructLegendElements(o)),s)];if(this.respectLayerVisibility){const r=t((()=>e.legendEnabled),(e=>this._legendEnabledHandle(e,o))),s=t((()=>i.legendEnabled),(e=>this._legendEnabledHandle(e,o)));n.push(r,s)}this.addHandles(n,r)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const i=e.parent;if(i)i.children.includes(e)||i.children.push(e),this._sortActiveLayerInfos(i.children);else{const i=this.layerInfos?.some((e=>e.layer.uid===r.uid));r.parent&&\"uid\"in r.parent&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,t=r&&\"uid\"in r?this._layerViewByLayerId[r?.uid]:null,s=this._activeLayerInfosByLayerViewId[t?.uid];s&&(e.push(i),i.parent=s)})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;\"featureCollections\"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):\"featureReduction\"in i&&i.featureReduction&&\"renderer\"in i.featureReduction&&(\"binning\"===i.featureReduction.type||\"cluster\"===i.featureReduction.type)&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):\"renderer\"in i&&i.renderer&&!(\"sublayers\"in i)?e.buildLegendElementsForRenderer(i.renderer):\"url\"in i&&i.url?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};e([n({type:L})],w.prototype,\"activeLayerInfos\",void 0),e([n()],w.prototype,\"basemapLegendVisible\",void 0),e([n()],w.prototype,\"groundLegendVisible\",void 0),e([n()],w.prototype,\"hideLayersNotInCurrentView\",void 0),e([n()],w.prototype,\"keepCacheOnDestroy\",void 0),e([n()],w.prototype,\"respectLayerDefinitionExpression\",void 0),e([n()],w.prototype,\"respectLayerVisibility\",void 0),e([n()],w.prototype,\"layerInfos\",void 0),e([n({readOnly:!0})],w.prototype,\"state\",null),e([n()],w.prototype,\"view\",void 0),w=e([o(\"esri.widgets.Legend.LegendViewModel\")],w);const I=w;export{I as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend--card\",a=\"esri-legend\",r={activated:`${e}__carousel-indicator--activated`,base:e,stacked:`${a}--stacked`,carouselTitle:`${e}__carousel-title`,indicator:`${e}__carousel-indicator`,intervalSeparator:`${e}__interval-separator`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageLabel:`${e}__image-label`,layerCaption:`${e}__layer-caption`,labelElement:`${e}__label-element`,layerRow:`${e}__layer-row`,labelCell:`${e}__label-cell`,message:`${e}__message`,rampLabel:`${e}__ramp-label`,section:`${e}__section`,relationshipSection:`${e}__relationship-section`,serviceCaptionText:`${e}__service-caption-text`,serviceContent:`${e}__service-content`,service:`${e}__service`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,symbol:`${e}__symbol`,sizeRampRow:`${e}__size-ramp-row`,symbolRow:`${e}__symbol-row`,symbolCell:`${e}__symbol-cell`,indicatorContainer:`${e}__carousel-indicator-container`,intervalSeparatorsContainer:`${e}__interval-separators-container`,relationshipLabelContainer:`${e}__relationship-label-container`,labelContainer:`${e}__label-container`,serviceCaptionContainer:`${e}__service-caption-container`,symbolContainer:`${e}__symbol-container`,sizeRampContainer:`${e}__size-ramp-container`,sizeRampPreview:`${e}__size-ramp-preview`,pieChartRampPreview:`${e}__pie-chart-ramp-preview`,rampContainer:`${a}__ramps`,sizeRampHorizontal:`${a}__size-ramp--horizontal`,rampLabelsContainer:`${a}__ramp-labels`,layerInfo:`${a}__layer-cell ${a}__layer-cell--info`,univariateAboveAndBelowColorRamp:\"esri-univariate-above-and-below-ramp__color--card\"};export{r as css};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import\"../../../../libs/maquette/projection.js\";import{createProjector as t}from\"../../../../libs/maquette/projector.js\";import{renderColorRampPreviewHTML as o}from\"../../../../symbols/support/symbolUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as i}from\"../../../support/jsxFactory.js\";const l=t(),n=10,r=20,s=10,a=20,c={univariateAboveAndBelowSymbol:\"esri-univariate-above-and-below-ramp__symbol\",colorRamp:\"esri-legend__color-ramp\"};function f(e=\"vertical\"){const t=\"stroke:rgb(200, 200, 200);stroke-width:1\";return\"vertical\"===e?i(\"svg\",{height:\"4\",width:\"10\"},i(\"line\",{style:t,x1:\"0\",x2:\"10\",y1:\"2\",y2:\"2\"})):i(\"svg\",{height:\"10\",width:\"10\"},i(\"line\",{style:t,x1:\"5\",x2:\"5\",y1:\"0\",y2:\"10\"}))}function p(e,t=\"vertical\"){const o=document.createElement(\"div\");return o.style.height=`${r}px`,o.className=c.univariateAboveAndBelowSymbol,null!=e&&(o.style.opacity=e.toString()),l.append(o,f.bind(null,t)),o}function m(t,o,i=\"vertical\",l){t.infos.forEach(((t,n)=>{if(l&&2===n)t.preview=p(o,i);else{const o=e(t.size)+(\"horizontal\"===i?a:s),l=t.preview,n=\"div\"===l?.tagName.toLowerCase(),r=n?l:document.createElement(\"div\");r.className=c.univariateAboveAndBelowSymbol,\"horizontal\"===i?r.style.width=`${o}px`:r.style.height=`${o}px`,!n&&l&&r.appendChild(l),t.preview=r}}))}function u(t,o=\"classic\"){const i=t.infos;return\"classic\"===o?(e(i[0].size)+s)/2:(e(i[0].size)-e(i[i.length-1].size))/2}function h(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=o(\"full\"===t.type?i:\"above\"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return l.className=c.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function v(t,o,i,l=\"vertical\"){let c=0;const f=t.infos,p=Math.floor(f.length/2),m=\"full\"===o||\"above\"===o?0:p,u=\"full\"===o||\"below\"===o?f.length-1:p;for(let h=m;h<=u;h++)if(i&&h===p)c+=\"horizontal\"===l?n:r;else{c+=e(f[h].size)+(\"horizontal\"===l?a:s)}return Math.round(c)}function y(t,o,i,l=\"vertical\"){const c=v(t,o,i,l),f=t.infos,p=Math.floor(f.length/2),m=\"full\"===o||\"above\"===o?0:p,u=\"full\"===o||\"below\"===o?f.length-1:p,h=\"full\"===o?f[m].size+f[u].size:\"above\"===o?f[m].size:f[u].size,y=i?\"vertical\"===l?r:n:0,d=\"vertical\"===l?s*(\"full\"===o?2:1):a*(\"full\"===o?2:1);return Math.round(c-(e(h)/2+y/2+d/2))}function d(e,t,o=\"vertical\"){const i=e.infos;let l=i.find((({type:e})=>\"size-ramp\"===e)),n=i.find((({type:e})=>\"color-ramp\"===e));return l&&(l={...l},l.infos=[...l.infos],m(l,t,o,!0)),n&&(n={...n},n.infos=[...n.infos]),\"horizontal\"===o&&(l?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:l,colorRampElement:n}}function b(e,t=\"vertical\"){const o=e.infos;let i=o.find((({type:e})=>\"size-ramp\"===e)),l=o.find((({type:e})=>\"color-ramp\"===e));return i&&(i={...i},i.infos=[...i.infos],m(i,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),\"horizontal\"===t&&(i?.infos.reverse(),l?.infos.reverse()),{sizeRampElement:i,colorRampElement:l}}export{d as getUnivariateAboveAndBelowRampElements,u as getUnivariateColorRampMargin,h as getUnivariateColorRampPreview,y as getUnivariateColorRampSize,b as getUnivariateColorSizeRampElements,v as getUnivariateSizeRampSize};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../../intl.js\";import{stripHTML as e}from\"../../../core/string.js\";import{substitute as t}from\"../../../intl/substitute.js\";import{formatNumber as n}from\"../../../intl/number.js\";function r(e,t){return t}function i(e){const t=this;e.appendChild(t)}function o(n,i,o){if(!i)return;if(\"number\"==typeof i)return i;if(\"string\"==typeof i)return e(i);if(\"value\"in i||\"unit\"in i)return t(n.dotValue,i);if(\"colorName\"in i&&\"bandName\"in i)return n[i.colorName]+\": \"+(n[i.bandName]||i.bandName);if(\"showCount\"in i)return i.showCount?n.clusterCountTitle:void 0;let u=null;return r(i,o)?u=i.ratioPercentTotal?\"showRatioPercentTotal\":i.ratioPercent?\"showRatioPercent\":i.ratio?\"showRatio\":i.normField?\"showNormField\":i.field?\"showField\":null:l(i,o)&&(u=i.normField?\"showNormField\":i.normByPct?\"showNormPct\":i.field?\"showField\":null),u?t(\"showField\"===u?\"{field}\":n[u],{field:i.field,normField:i.normField}):void 0}function l(e,t){return!t}function u(e,t){return!!(t&&\"Stretched\"===t&&e.version>=10.3&&\"esri.layers.ImageryLayer\"===e.declaredClass)}function a(e,t){return e.label?t[e.label]+\": \"+(\"string\"==typeof e.value?e.value:n(e.value??0,{style:\"decimal\",notation:e.value?.toString().toLowerCase().includes(\"e\")?\"scientific\":\"standard\"})):\"\"}export{i as attachToNode,a as getStretchStopLabel,o as getTitle,u as isImageryStretchedLegend,l as isRendererTitle};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../intl.js\";import{watch as t}from\"../../../core/reactiveUtils.js\";import{pt2px as s}from\"../../../core/screenUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{renderSVG as r}from\"../../../symbols/support/svgUtils.js\";import{getCSSFilterFromEffectList as o}from\"../../../symbols/support/utils.js\";import l from\"../../Widget.js\";import{css as n}from\"./CardCSS.js\";import{renderRelationshipRamp as c}from\"./support/relationshipUtils.js\";import{getUnivariateAboveAndBelowRampElements as p,getUnivariateSizeRampSize as d,getUnivariateColorRampSize as m,getUnivariateColorRampPreview as h,getUnivariateColorRampMargin as y,getUnivariateColorSizeRampElements as g}from\"./support/univariateUtils.js\";import{getTitle as v,attachToNode as f,isImageryStretchedLegend as u,getStretchStopLabel as b}from\"../support/styleUtils.js\";import{Heading as _,incrementHeadingLevel as w}from\"../../support/Heading.js\";import{accessibleHandler as L}from\"../../support/decorators/accessibleHandler.js\";import{messageBundle as S}from\"../../support/decorators/messageBundle.js\";import{tsx as x}from\"../../support/jsxFactory.js\";import{isRTL as C}from\"../../support/widgetUtils.js\";import{substitute as R}from\"../../../intl/substitute.js\";const $=25,k=25,z=768,I=100;var N;!function(e){e.Auto=\"auto\",e.Stack=\"stack\",e.SideBySide=\"side-by-side\"}(N||(N={}));const A=\"#ddd\",j=window.devicePixelRatio;function E(e){if(e){if(e.type.includes(\"3d\")){const t=e.symbolLayers?.length;if(!t)return;const s=e.symbolLayers.at(t-1),i=s.resource?.primitive;return\"circle\"===i||\"cross\"===i||\"kite\"===i||\"sphere\"===i||\"cube\"===i||\"diamond\"===i}{const t=e.style;return\"circle\"===t||\"diamond\"===t||\"cross\"===t}}}function F(e){if(e){if(e.type.includes(\"3d\")){const t=e.symbolLayers?.length;if(!t)return;const s=e.symbolLayers.at(t-1).get(\"resource.primitive\");return\"triangle\"===s||\"cone\"===s||\"tetrahedron\"===s}return\"triangle\"===e.style}}let T=class extends l{constructor(e,t){super(e,t),this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=N.Stack,this.messages=null,this.messagesCommon=null,this.type=\"card\",this.view=null}initialize(){this.addHandles(t((()=>this.activeLayerInfos),(e=>{this.removeAllHandles(),this._watchForSectionChanges(e)})))}render(){const{view:e}=this;this._hasIndicators=this.layout===N.Auto&&e&&e.container.clientWidth<=z||this.layout===N.Stack;const t=this.activeLayerInfos,s=t&&t.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const i=this._sectionNames.length,a=this._sectionNames.map(((e,t)=>{const s=R(this.messagesCommon.pagination.pageText,{index:t+1,total:i});return x(\"div\",{\"aria-controls\":`${e}-panel`,\"aria-label\":s,\"aria-selected\":(this._selectedSectionName===e).toString(),bind:this,class:this.classes(n.indicator,{[n.activated]:this._selectedSectionName===e}),\"data-section-name\":e,id:e,key:e,onclick:this._selectSection,onkeydown:this._focusSection,role:\"tab\",tabIndex:this._selectedSectionName===e?0:-1,title:s})})),r=this._hasIndicators&&i>1?x(\"div\",{class:n.indicatorContainer,key:\"carousel-navigation\",role:\"tablist\"},a):null,o=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):s&&s.length?s:null,l={[n.stacked]:this._hasIndicators};return x(\"div\",{class:this.classes(n.base,l)},o||x(\"div\",{class:n.message},this.messages.noLegend),r)}_selectSection(e){const t=e.target.getAttribute(\"data-section-name\");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case\"ArrowLeft\":case\"ArrowRight\":this._switchSectionOnArrowPress(e);break;case\"Enter\":case\" \":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,s=\"ArrowLeft\"===t?-1:1,i=e.target.getAttribute(\"data-section-name\"),a=this._sectionNames.indexOf(i),r=this._sectionNames;let o=null;-1!==a&&(r[a+s]?o=document.getElementById(r[a+s]):\"ArrowLeft\"===t?o=document.getElementById(r[r.length-1]):\"ArrowRight\"===t&&(o=document.getElementById(r[0])),o?.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach((e=>{const s=`activeLayerInfo-${e.layer.uid}-version-change`;this.removeHandles(s),this._watchForSectionChanges(e.children),this.addHandles(t((()=>e.version),(()=>this._generateSectionNames())),s)}));const s=\"activeLayerInfos-collection-change\";this.removeHandles(s),this.addHandles(e.on(\"change\",(()=>this._watchForSectionChanges(e))),s)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,s){return`${this.id}${e.uid}-type-${t.type}-${s}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach(((t,s)=>{this._sectionNames.push(this._getSectionName(e.layer,t,s))}))}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return x(\"div\",{class:this.classes(n.service,n.groupLayer),key:e.layer.uid},x(\"div\",{class:n.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const s=t.some((e=>\"relationship-ramp\"===e.type)),i=t.map(((t,i)=>this._renderLegendForElement(t,e,i,s))).filter((e=>!!e));if(!i.length)return null;const a={[n.groupLayerChild]:!!e.parent};return x(\"div\",{class:this.classes(n.service,a),key:e.layer.uid},x(\"div\",{class:n.serviceCaptionContainer},x(\"div\",{class:n.serviceCaptionText},e.title)),x(\"div\",{class:n.serviceContent},i))}}_renderLegendForElement(e,t,s,i=!1,a=!1){const r=\"color-ramp\"===e.type,o=\"opacity-ramp\"===e.type,l=t.layer;let p=null;if(\"string\"==typeof e.title)p=e.title;else if(e.title){const t=e.title,s=v(this.messages,t,r||o);p=t.title?`${t.title} (${s})`:s}const d=this._getSectionName(l,e,s),m=this._hasIndicators&&!a?x(\"div\",null,x(_,{class:n.carouselTitle,level:this.headingLevel},t.title),x(_,{class:n.layerCaption,level:w(this.headingLevel)},p)):p?x(_,{class:n.layerCaption,level:this.headingLevel},p):null,h=t.effectList;let y=null;switch(e.type){case\"symbol-table\":{const s=e.infos.map(((s,i)=>this._renderLegendForElementInfo(s,t,e.legendType,i))).filter((e=>!!e));if(s.length){const e=s[0].properties.classes?.[n.symbolRow],t={[n.labelContainer]:!e&&!i,[n.relationshipLabelContainer]:i};y=x(\"div\",{class:this.classes(t)},s)}break}case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":y=this._renderLegendForRamp(e,l.opacity,h);break;case\"size-ramp\":y=this._renderSizeRamp(e,l.opacity);break;case\"pie-chart-ramp\":y=this._renderPieChartRamp(e);break;case\"relationship-ramp\":y=c(e,this.id,{opacity:l.opacity,effectList:h,ariaLabel:this.messages.previewRelationshipRampAriaLabel});break;case\"univariate-above-and-below-ramp\":y=this._renderUnivariateAboveAndBelowRamp(e,l.opacity,h);break;case\"univariate-color-size-ramp\":y=this._renderUnivariateColorSizeRamp(e,l.opacity,h)}if(!y)return null;const g=x(\"div\",{\"aria-labelledby\":d,class:n.section,id:`${d}-panel`,key:d,role:\"tabpanel\",tabIndex:0},[m,y]);return a||this._sectionMap.set(d,g),g}_renderPieChartRamp(e){return x(\"div\",{afterCreate:f,bind:e.preview,class:n.pieChartRampPreview})}_renderUnivariateAboveAndBelowRamp(e,t,s){const{sizeRampElement:i,colorRampElement:a}=p(e,t,\"horizontal\");if(!i)return null;const r=d(i,\"full\",!0,\"horizontal\"),o=m(i,\"above\",!0,\"horizontal\"),l=m(i,\"below\",!0,\"horizontal\"),c=12,g=this.messages?.previewColorRampAriaLabel,v=h(a,{width:o,height:c,rampAlignment:\"horizontal\",opacity:t,type:\"above\",effectList:s,ariaLabel:g}),u=h(a,{width:l,height:c,rampAlignment:\"horizontal\",opacity:t,type:\"below\",effectList:s,ariaLabel:g}),b=y(i,\"card\"),_=i.infos.map((e=>e.label)),w=_.length-1,L=_.map(((e,t)=>0===t||t===w?x(\"div\",{key:t},e):null)),S={display:\"flex\",flexDirection:\"column\"},R={display:\"flex\",flexDirection:\"row\"},$={marginTop:\"3px\",display:\"flex\"};C(this.container)?$.marginRight=`${b}px`:$.marginLeft=`${b}px`;const k={width:`${r}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return x(\"div\",{class:n.layerRow,key:\"size-ramp-preview\",styles:S},x(\"div\",{class:this.classes(n.symbolContainer,n.sizeRampHorizontal),styles:R},i.infos.map(((e,t)=>x(\"div\",{afterCreate:f,bind:e.preview,class:n.symbol,key:t})))),v?x(\"div\",{class:n.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:$},x(\"div\",{afterCreate:f,bind:v}),x(\"div\",{afterCreate:f,bind:u})):null,x(\"div\",{class:n.layerInfo},x(\"div\",{class:n.rampLabelsContainer,styles:k},L)))}_renderUnivariateColorSizeRamp(e,t,s){const{sizeRampElement:i,colorRampElement:a}=g(e,\"horizontal\");if(!i)return null;const r=d(i,\"full\",!1,\"horizontal\"),o=m(i,\"full\",!1,\"horizontal\"),l=h(a,{width:o,height:12,rampAlignment:\"horizontal\",opacity:t,type:\"full\",effectList:s,ariaLabel:this.messages?.previewColorRampAriaLabel}),c=y(i,\"card\"),p=i.infos.length-1,v=i.infos.map(((e,t)=>0===t||t===p?x(\"div\",{key:t},e.label):null)),u={display:\"flex\",flexDirection:\"column\"},b={display:\"flex\",flexDirection:\"row\"},_={marginTop:\"3px\",display:\"flex\"};C(this.container)?_.marginRight=`${c}px`:_.marginLeft=`${c}px`;const w={width:`${r}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return x(\"div\",{class:n.layerRow,key:\"size-ramp-preview\",styles:u},x(\"div\",{class:this.classes(n.symbolContainer,n.sizeRampHorizontal),styles:b},i.infos.map(((e,t)=>x(\"div\",{afterCreate:f,bind:e.preview,class:n.symbol,key:t})))),x(\"div\",{class:n.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:_},x(\"div\",{afterCreate:f,bind:l})),x(\"div\",{class:n.layerInfo},x(\"div\",{class:n.rampLabelsContainer,styles:w},v)))}_renderLegendForElementInfo(e,t,s,i){const a=t.layer;if(e.type)return this._renderLegendForElement(e,t,i,!1,!0);const r=u(a,s),l=v(this.messages,e.label,!1)??\"\";if(e.preview){if(!e.symbol?.type.includes(\"simple-fill\")){if(!e.label)return x(\"div\",{afterCreate:f,bind:e.preview,key:i});const t={[n.symbolCell]:this._hasIndicators};return x(\"div\",{class:this.classes(n.layerRow,{[n.symbolRow]:this._hasIndicators}),key:i},x(\"div\",{afterCreate:f,bind:e.preview,class:this.classes(t)}),x(\"div\",{class:this.classes(n.imageLabel,{[n.labelCell]:this._hasIndicators})},l))}let s=255,r=255,c=255,p=0,d=255,m=255,h=255,y=0;const g=e.symbol.color?.a,v=e.symbol.outline?.color?.a;g&&(s=e.symbol.color.r,r=e.symbol.color.g,c=e.symbol.color.b,p=e.symbol.color.a*a.opacity),v&&(d=e.symbol.outline.color.r,m=e.symbol.outline.color.g,h=e.symbol.outline.color.b,y=e.symbol.outline.color.a*a.opacity);const u=e.symbol.color?.isBright??!0,b=u?\"rgba(255, 255, 255, .6)\":\"rgba(0, 0, 0, .6)\",_={background:g?`rgba(${s}, ${r}, ${c}, ${p})`:\"none\",color:u?\"black\":\"white\",textShadow:`-1px -1px 0 ${b},\\n                                              1px -1px 0 ${b},\\n                                              -1px 1px 0 ${b},\\n                                              1px 1px 0 ${b}`,border:v?`1px solid rgba(${d}, ${m}, ${h}, ${y})`:\"none\",filter:o(t.effectList)??void 0};return x(\"div\",{class:n.layerRow,key:i},x(\"div\",{class:n.labelElement,styles:_},l))}if(e.src){const t=this._renderImage(e,a,r);return x(\"div\",{class:n.layerRow,key:i},t,x(\"div\",{class:n.imageLabel},l))}}_renderImage(e,t,s){const{label:i,src:a,opacity:r}=e,o={[n.imageryLayerStretchedImage]:s,[n.symbol]:!s},l={opacity:`${null!=r?r:t.opacity}`};return x(\"img\",{alt:v(this.messages,i,!1),\"aria-label\":v(this.messages,i,!1),border:0,class:this.classes(o),height:e.height,src:a,styles:l,width:e.width})}_renderSizeRampLines(e){const t=e.infos,i=t[0],a=t[t.length-1],r=i.symbol,o=this._hasIndicators,l=s(i.size+i.outlineSize)*j,n=s(a.size+a.outlineSize)*j,c=o?l:l+50*j,p=o?l/2+50*j:l,d=F(r),m=E(r),h=document.createElement(\"canvas\");h.width=c,h.height=p,h.style.width=h.width/j+\"px\",h.style.height=h.height/j+\"px\";const y=h.getContext(\"2d\");if(o){y.beginPath();const e=0,t=0,s=c/2-n/2,i=p;y.moveTo(e,t),y.lineTo(s,i);const a=c,r=0,o=c/2+n/2,l=p;y.moveTo(a,r),y.lineTo(o,l)}else{y.beginPath();const e=0,t=p/2-n/2,s=c,i=0;y.moveTo(e,t),y.lineTo(s,i);const a=0,r=p/2+n/2,o=c,l=p;y.moveTo(a,r),y.lineTo(o,l)}return y.strokeStyle=A,y.stroke(),x(\"div\",{afterCreate:f,bind:h,styles:o?{display:\"flex\",marginTop:`-${d?0:m?l/2:0}px`,marginBottom:`-${d?n:m?n/2:0}px`}:{display:\"flex\",marginRight:`-${d?0:m?l/2:0}px`,marginLeft:`-${d?0:m?n/2:0}px`}})}_renderSizeRamp(e,t){const s=e.infos,i=s[0].label,a=s[s.length-1].label;let r=s[0].preview,o=s[s.length-1].preview;const l=this._hasIndicators,c={\"flex-direction\":l?\"column\":\"row-reverse\"};r&&(r=r.cloneNode(!0),r.style.display=\"flex\"),o&&(o=o.cloneNode(!0),o.style.display=\"flex\");const p={opacity:null!=t?`${t}`:\"\"};return x(\"div\",{class:this.classes(n.layerRow,{[n.sizeRampRow]:l})},x(\"div\",{class:n.rampLabel},l?i:a),x(\"div\",{class:n.sizeRampContainer,styles:c},x(\"div\",{afterCreate:f,bind:r,class:n.sizeRampPreview,styles:p}),this._renderSizeRampLines(e),x(\"div\",{afterCreate:f,bind:o,class:n.sizeRampContainer,styles:p})),x(\"div\",{class:n.rampLabel},l?a:i))}_getRampStopLabel(e,t){switch(t){case\"heatmap-ramp\":return this.messages[e.label];case\"stretch-ramp\":return b(e,this.messages);default:return e.label}}_renderLegendForRamp(e,t,s){const i=e.infos,a=e.type,l=\"heatmap-ramp\"===a,c=i.length-1,p=k,d=c>2&&!l?$*c:I,m=d+20,h=10,y=i.slice(0).reverse(),g=y.length-1,v=y.length%2!=0?y[y.length/2|0]:null,f=v&&x(\"div\",{class:n.intervalSeparatorsContainer},x(\"div\",{class:n.intervalSeparator},\"|\"),x(\"div\",{class:n.rampLabel},this._getRampStopLabel(v,a))),u=[[{shape:{type:\"path\",path:`M0 ${p/2} L${h} 0 L${h} ${p} Z`},fill:y[0].color,stroke:{width:0}},{shape:{type:\"rect\",x:h,y:0,width:d,height:p},fill:{type:\"linear\",x1:h,y1:0,x2:d+h,y2:0,colors:y.map(((e,t)=>({color:e.color,offset:l&&\"ratio\"in e?e.ratio:t/c})))},stroke:{width:0}},{shape:{type:\"path\",path:`M${d+h} 0 L${m} ${p/2} L${d+h} ${p} Z`},fill:y[g].color,stroke:{width:0}}]],b=r(u,m,p),_={filter:o(s)??void 0,opacity:null==t?void 0:`${t}`},w={justifyContent:\"center\"};return x(\"div\",{class:n.layerRow,styles:w},x(\"div\",{class:n.rampLabel},this._getRampStopLabel(y[0],a)),x(\"div\",{class:n.symbolContainer},x(\"div\",{styles:_},b),f),x(\"div\",{class:n.rampLabel},this._getRampStopLabel(y[g],a)))}};e([i()],T.prototype,\"activeLayerInfos\",void 0),e([i()],T.prototype,\"headingLevel\",void 0),e([i()],T.prototype,\"layout\",void 0),e([i(),S(\"esri/widgets/Legend/t9n/Legend\")],T.prototype,\"messages\",void 0),e([i(),S(\"esri/t9n/common\")],T.prototype,\"messagesCommon\",void 0),e([i({readOnly:!0})],T.prototype,\"type\",void 0),e([i()],T.prototype,\"view\",void 0),e([L()],T.prototype,\"_selectSection\",null),T=e([a(\"esri.widgets.Legend.styles.Card\")],T);const B=T;export{B as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend\",a={service:`${e}__service`,label:`${e}__service-label`,layer:`${e}__layer`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,layerTable:`${e}__layer-table`,layerTableSizeRamp:`${e}__layer-table--size-ramp`,layerChildTable:`${e}__layer-child-table`,layerCaption:`${e}__layer-caption`,layerBody:`${e}__layer-body`,layerRow:`${e}__layer-row`,layerCell:`${e}__layer-cell`,layerInfo:`${e}__layer-cell ${e}__layer-cell--info`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${e}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${e}__imagery-layer-info--stretched`,symbolContainer:`${e}__layer-cell ${e}__layer-cell--symbols`,symbol:`${e}__symbol`,rampContainer:`${e}__ramps`,sizeRamp:`${e}__size-ramp`,colorRamp:`${e}__color-ramp`,opacityRamp:`${e}__opacity-ramp`,borderlessRamp:`${e}__borderless-ramp`,rampTick:`${e}__ramp-tick`,rampFirstTick:`${e}__ramp-tick-first`,rampLastTick:`${e}__ramp-tick-last`,rampLabelsContainer:`${e}__ramp-labels`,rampLabel:`${e}__ramp-label`,message:`${e}__message`,univariateAboveAndBelowLabel:\"esri-univariate-above-and-below-ramp__label\"};export{a as css,e as legend};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../Widget.js\";import{css as r,legend as i}from\"./ClassicCSS.js\";import{renderRelationshipRamp as l}from\"./support/relationshipUtils.js\";import{getUnivariateAboveAndBelowRampElements as o,getUnivariateColorRampSize as n,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as d,getUnivariateColorSizeRampElements as m}from\"./support/univariateUtils.js\";import{getTitle as c,isRendererTitle as y,attachToNode as v,getStretchStopLabel as h,isImageryStretchedLegend as g}from\"../support/styleUtils.js\";import{globalCss as u}from\"../../support/globalCss.js\";import{Heading as b}from\"../../support/Heading.js\";import\"../../support/widgetUtils.js\";import{messageBundle as f}from\"../../support/decorators/messageBundle.js\";import{tsx as L}from\"../../support/jsxFactory.js\";const w=`${i}__`,C=24,R={display:\"flex\",alignItems:\"flex-start\"},A={marginLeft:\"3px\"},_={display:\"table-cell\",verticalAlign:\"middle\"};let j=class extends a{constructor(e,s){super(e,s),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type=\"classic\"}render(){const e=this.activeLayerInfos,s=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));return L(\"div\",null,s&&s.length?s:L(\"div\",{class:r.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const s=!!e.children.length,t=`${w}${e.layer.uid}-version-${e.version}`,a=e.title?b({level:this.headingLevel,class:this.classes(u.heading,r.label)},e.title):null;if(s){const s=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return L(\"div\",{class:this.classes(r.service,r.groupLayer),key:t},a,s)}{const s=e.legendElements;if(s&&!s.length)return null;const i=s.map((s=>this._renderLegendForElement(s,e.layer,e.effectList))).filter((e=>!!e));if(!i.length)return null;const l={[r.groupLayerChild]:!!e.parent};return L(\"div\",{class:this.classes(r.service,l),key:t},a,L(\"div\",{class:r.layer},i))}}_renderLegendForElement(e,s,t,a){const i=\"color-ramp\"===e.type,o=\"opacity-ramp\"===e.type,n=\"size-ramp\"===e.type;let p=null;if(\"symbol-table\"===e.type||n){const a=e.infos.map((a=>this._renderLegendForElementInfo(a,s,t,n,e.legendType))).filter((e=>!!e));a.length&&(p=L(\"div\",{class:r.layerBody},a))}else\"color-ramp\"===e.type||\"opacity-ramp\"===e.type||\"heatmap-ramp\"===e.type||\"stretch-ramp\"===e.type?p=this._renderLegendForRamp(e,s.opacity):\"relationship-ramp\"===e.type?p=l(e,this.id,{opacity:s.opacity,effectList:t,ariaLabel:this.messages.previewRelationshipRampAriaLabel}):\"pie-chart-ramp\"===e.type?p=this._renderPieChartRamp(e):\"univariate-above-and-below-ramp\"===e.type?p=this._renderUnivariateAboveAndBelowRamp(e,s.opacity,t):\"univariate-color-size-ramp\"===e.type&&(p=this._renderUnivariateColorSizeRamp(e,s.opacity,t));if(!p)return null;const d=e.title;let m=null;if(\"string\"==typeof d)m=d;else if(d){const e=c(this.messages,d,i||o);m=y(d,i||o)&&d.title?`${d.title} (${e})`:e}const v=a?r.layerChildTable:r.layerTable,h=m?L(\"div\",{class:r.layerCaption},m):null,g={[r.layerTableSizeRamp]:n||!a};return L(\"div\",{class:this.classes(v,g)},h,p)}_renderPieChartRamp(e){return L(\"div\",{afterCreate:v,bind:e.preview})}_renderUnivariateAboveAndBelowRamp(e,s,t){const{sizeRampElement:a,colorRampElement:i}=o(e,s);if(!a)return null;const l=this.messages?.previewColorRampAriaLabel,m=n(a,\"above\",!0),c=n(a,\"below\",!0),y=12,h=p(i,{width:y,height:m,rampAlignment:\"vertical\",opacity:s,type:\"above\",effectList:t,ariaLabel:l}),g=p(i,{width:y,height:c,rampAlignment:\"vertical\",opacity:s,type:\"below\",effectList:t,ariaLabel:l}),u=d(a),b=a.infos.map((e=>e.label)),f=b.map(((e,s)=>{const t=2===s;return 0===s?L(\"div\",{class:e?h?r.univariateAboveAndBelowLabel:r.rampLabel:void 0,key:s},e):t?L(\"div\",null):null})),w=b.length-1,C=Math.floor(b.length/2),j=b.map(((e,s)=>s===C||s===w?L(\"div\",{class:e?h?r.univariateAboveAndBelowLabel:r.rampLabel:void 0,key:s},e):null)),$={display:\"table-cell\",verticalAlign:\"middle\"},I={marginTop:`${u}px`},x={height:`${m}px`},F={height:`${c}px`};return L(\"div\",{key:\"univariate-above-and-below-ramp-preview\",styles:R},L(\"div\",{class:r.layerBody},a.infos.map(((e,s)=>L(\"div\",{class:this.classes(r.layerRow,r.sizeRamp)},L(\"div\",{afterCreate:v,bind:e.preview,class:r.symbol,styles:$}),h||s%2!=0?null:L(\"div\",{class:r.layerInfo},b[s]))))),h?L(\"div\",{key:\"color-ramp-preview\",styles:I},L(\"div\",{styles:A},L(\"div\",{styles:_},L(\"div\",{afterCreate:v,bind:h,class:r.rampContainer})),L(\"div\",{styles:_},L(\"div\",{class:r.rampLabelsContainer,styles:x},f))),L(\"div\",{styles:A},L(\"div\",{styles:_},L(\"div\",{afterCreate:v,bind:g,class:r.rampContainer})),L(\"div\",{styles:_},L(\"div\",{class:r.rampLabelsContainer,styles:F},j)))):null)}_renderUnivariateColorSizeRamp(e,s,t){const{sizeRampElement:a,colorRampElement:i}=m(e);if(!a)return null;const l=d(a),o=12,c=n(a,\"full\",!1),y=p(i,{width:o,height:c,rampAlignment:\"vertical\",opacity:s,type:\"full\",effectList:t,ariaLabel:this.messages?.previewColorRampAriaLabel}),h=a.infos.length-1,g=a.infos.map(((e,s)=>0===s||s===h?L(\"div\",{class:e.label?i?r.univariateAboveAndBelowLabel:r.rampLabel:void 0,key:s},e.label):null)),u={display:\"table-cell\",verticalAlign:\"middle\"},b={marginTop:`${l}px`},f={height:`${c}px`};return L(\"div\",{key:\"univariate-above-and-below-ramp-preview\",styles:R},L(\"div\",{class:r.layerBody},a.infos.map((e=>L(\"div\",{class:this.classes(r.layerRow,r.sizeRamp)},L(\"div\",{afterCreate:v,bind:e.preview,class:r.symbol,styles:u}))))),L(\"div\",{key:\"color-ramp-preview\",styles:b},L(\"div\",{styles:A},L(\"div\",{styles:_},L(\"div\",{afterCreate:v,bind:y,class:r.rampContainer})),L(\"div\",{styles:_},L(\"div\",{class:r.rampLabelsContainer,styles:f},g)))))}_renderLegendForRamp(e,s){const t=e.infos,a=\"opacity-ramp\"===e.type,i=\"heatmap-ramp\"===e.type,l=\"stretch-ramp\"===e.type,o=e.preview,n=a?r.opacityRamp:\"\";o.className=`${r.colorRamp} ${n}`,null!=s&&(o.style.opacity=s.toString());const p=t.map((e=>L(\"div\",{class:e.label?r.rampLabel:void 0},i?this.messages[e.label]||e.label:l?h(e,this.messages):e.label))),d={width:`${C}px`},m={height:o.style.height};return L(\"div\",{class:r.layerRow},L(\"div\",{class:r.symbolContainer,styles:d},L(\"div\",{afterCreate:v,bind:o,class:r.rampContainer})),L(\"div\",{class:r.layerInfo},L(\"div\",{class:r.rampLabelsContainer,styles:m},p)))}_renderLegendForElementInfo(e,s,t,a,i){if(e.type)return this._renderLegendForElement(e,s,t,!0);let l=null;const o=g(s,i);if(e.preview?l=L(\"div\",{afterCreate:v,bind:e.preview,class:r.symbol}):e.src&&(l=this._renderImage(e,s,o)),!l)return null;const n={[r.imageryLayerInfoStretched]:o},p={[r.imageryLayerInfoStretched]:o,[r.sizeRamp]:!o&&a};return L(\"div\",{class:r.layerRow},L(\"div\",{class:this.classes(r.symbolContainer,p)},l),L(\"div\",{class:this.classes(r.layerInfo,n)},c(this.messages,e.label,!1)||\"\"))}_renderImage(e,s,t){const{label:a,src:i,opacity:l}=e,o={[r.imageryLayerStretchedImage]:t,[r.symbol]:!t},n={opacity:`${null!=l?l:s.opacity}`};return L(\"img\",{alt:c(this.messages,a,!1),\"aria-label\":c(this.messages,a,!1),border:0,class:this.classes(o),height:e.height,src:i,styles:n,width:e.width})}};e([s()],j.prototype,\"activeLayerInfos\",void 0),e([s()],j.prototype,\"headingLevel\",void 0),e([s(),f(\"esri/widgets/Legend/t9n/Legend\")],j.prototype,\"messages\",void 0),e([s({readOnly:!0})],j.prototype,\"type\",void 0),j=e([t(\"esri.widgets.Legend.styles.Classic\")],j);const $=j;export{$ as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{on as t,watch as s,initial as i}from\"../core/reactiveUtils.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{cast as o}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/RandomLCG.js\";import\"../core/has.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"./Widget.js\";import l from\"./Legend/LegendViewModel.js\";import d from\"./Legend/styles/Card.js\";import p from\"./Legend/styles/Classic.js\";import{globalCss as c}from\"./support/globalCss.js\";import\"./support/widgetUtils.js\";import{messageBundle as y}from\"./support/decorators/messageBundle.js\";import{tsx as h}from\"./support/jsxFactory.js\";const v={base:\"esri-legend\"};let g=class extends a{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.style=new p,this.viewModel=new l}initialize(){this.addHandles([t((()=>this.view),\"resize\",(()=>this.scheduleRender())),t((()=>this.activeLayerInfos),\"change\",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),s((()=>this.headingLevel),(e=>{const{style:t}=this;t&&(t.headingLevel=e)})),s((()=>this.style),((e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,\"card\"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)}),i)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return\"legend\"}set icon(e){this._overrideIfSome(\"icon\",e)}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof d||e instanceof p)return e;if(\"string\"==typeof e)return\"card\"===e?new d:new p;if(e&&\"string\"==typeof e.type){const t={...e};delete t.type;return new(\"card\"===e.type?d:p)(t)}return new p}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return h(\"div\",{class:this.classes(v.base,c.widget,this.style instanceof p?c.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach((e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const r=s((()=>e.version),(()=>this.scheduleRender()));this.addHandles(r,`version_${e.layer.uid}`);const o=t((()=>e.children),\"change\",(()=>e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))),i);this.addHandles(o,`version_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};e([r()],g.prototype,\"activeLayerInfos\",null),e([r()],g.prototype,\"basemapLegendVisible\",null),e([r()],g.prototype,\"groundLegendVisible\",null),e([r()],g.prototype,\"headingLevel\",void 0),e([r()],g.prototype,\"hideLayersNotInCurrentView\",null),e([r()],g.prototype,\"keepCacheOnDestroy\",null),e([r()],g.prototype,\"respectLayerDefinitionExpression\",null),e([r()],g.prototype,\"respectLayerVisibility\",null),e([r()],g.prototype,\"icon\",null),e([r()],g.prototype,\"label\",null),e([r()],g.prototype,\"layerInfos\",null),e([r(),y(\"esri/widgets/Legend/t9n/Legend\")],g.prototype,\"messages\",void 0),e([r()],g.prototype,\"style\",void 0),e([o(\"style\")],g.prototype,\"castStyle\",null),e([r()],g.prototype,\"view\",null),e([r()],g.prototype,\"viewModel\",void 0),g=e([n(\"esri.widgets.Legend\")],g);const u=g;export{u as default};\n"],
  "mappings": "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",
  "names": ["l", "i", "s", "a", "n", "e", "t", "u", "r", "f", "o", "n", "y", "S", "e", "t", "s", "i", "h", "l", "k", "r", "a", "v", "m", "u", "o", "c", "d", "b", "f", "p", "_e", "w", "_a", "V", "c", "L", "u", "p", "f", "v", "w", "e", "i", "r", "t", "s", "a", "n", "o", "l", "_a", "I", "e", "a", "r", "l", "n", "r", "s", "a", "c", "f", "e", "t", "p", "o", "m", "i", "u", "h", "v", "y", "d", "b", "r", "e", "t", "i", "o", "n", "s", "u", "l", "a", "k", "I", "e", "t", "s", "i", "a", "n", "r", "o", "l", "p", "d", "m", "h", "y", "g", "v", "c", "u", "b", "_", "w", "L", "S", "R", "$", "_e", "f", "e", "a", "w", "e", "C", "A", "_", "j", "s", "n", "a", "t", "i", "l", "o", "p", "h", "d", "m", "v", "g", "y", "c", "u", "b", "f", "$", "I", "F", "v", "g", "e", "t", "$", "I", "n", "r", "o", "u"]
}
