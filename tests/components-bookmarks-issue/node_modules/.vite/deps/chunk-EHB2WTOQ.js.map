{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/TextureBackedBuffer/SimpleIndexManager.js", "../../@arcgis/core/views/3d/webgl-engine/lib/TextureBackedBuffer/TextureBackedBuffer.js", "../../@arcgis/core/views/3d/webgl-engine/lib/TextureBackedBuffer/ManagedTextureBackedBuffer.js", "../../@arcgis/core/views/3d/webgl-engine/lib/TextureBackedBuffer/BufferManager.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this._maxCount=e,this._nextIndex=0,this._recycledIndices=[]}get activeCount(){return this._nextIndex-this._recycledIndices.length}get availableCount(){return this._recycledIndices.length+this._maxCount-this._nextIndex}acquire(){return this._recycledIndices.length>0?this._recycledIndices.pop():this.availableCount?this._nextIndex++:void 0}release(e){this._recycledIndices.push(e)}}export{e as SimpleIndexManager};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{BufferViewVec4u8 as t}from\"../../../../../geometry/support/buffer/BufferView.js\";import{TextureSamplingMode as e,TextureWrapMode as i}from\"../../../../webgl/enums.js\";import{Texture as s}from\"../../../../webgl/Texture.js\";import{TextureDescriptor as r}from\"../../../../webgl/TextureDescriptor.js\";class h{constructor(h,a=1){this._rctx=h,this._fieldCount=a,this.textureWidth=4096,this._dirty=!0;const d=new r(this.textureWidth,1);d.samplingMode=e.NEAREST,d.wrapMode=i.CLAMP_TO_EDGE,this._texture=new s(this._rctx,d),this._data=new t(new ArrayBuffer(4*this.textureWidth))}dispose(){this._texture.dispose(),this._texture=void 0,this._data=void 0}setData(t,e,i,s,r,h){const a=t*this._fieldCount+e;this._dirty=!0,this._data.set(a,0,i),this._data.set(a,1,s),this._data.set(a,2,r),this._data.set(a,3,h)}setDataElement(t,e,i,s){const r=t*this._fieldCount+e;this._dirty=!0,this._data.set(r,i,s)}getDataElement(t,e,i){const s=t*this._fieldCount+e;return this._dirty=!0,this._data.get(s,i)}resizeToFit(e){const i=(e+1)*this._fieldCount;if(i>this._data.count){const e=Math.ceil(i/this.textureWidth)*this.textureWidth,s=new t(new ArrayBuffer(4*e));s.typedBuffer.set(this._data.typedBuffer),this._data=s}}updateTexture(){if(!this._dirty)return;const t=this._texture.descriptor.width,e=this._texture.descriptor.height;this._data.count>t*e&&this._texture.resize(t,this._data.count/t),this._texture.setData(this._data.typedBuffer),this._dirty=!1}get texture(){return this._texture}}export{h as TextureBackedBuffer};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{SimpleIndexManager as e}from\"./SimpleIndexManager.js\";import{TextureBackedBuffer as t}from\"./TextureBackedBuffer.js\";const r=65536;class i{constructor(i,a=1){this.textureBuffer=new t(i,a),this._indexManager=new e(r)}dispose(){this.textureBuffer.dispose(),this.textureBuffer=void 0}get availableCount(){return this._indexManager.availableCount}get activeCount(){return this._indexManager.activeCount}acquireIndex(){const e=this._indexManager.acquire();return this.textureBuffer.resizeToFit(e),e}releaseIndex(e){this._indexManager.release(e)}}export{i as ManagedTextureBackedBuffer,r as maxIndexCount};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{maxIndexCount as t,ManagedTextureBackedBuffer as e}from\"./ManagedTextureBackedBuffer.js\";class r{constructor(t,e=1){this._rctx=t,this._fieldCount=e,this._buffers=[]}garbageCollect(){this._buffers=this._buffers.filter((t=>0!==t.activeCount||(t.dispose(),!1)))}destroy(){this._buffers.forEach((t=>t.dispose())),this._buffers=[]}getBuffer(r){for(const t of this._buffers)if(t.availableCount>=r)return t;if(r>t)return null;const s=new e(this._rctx,this._fieldCount);return this._buffers.push(s),s}updateTextures(){for(const t of this._buffers)t.textureBuffer.updateTexture()}}export{r as BufferManager};\n"],
  "mappings": "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",
  "names": ["e", "h", "e", "i", "r", "i", "e", "r", "e"]
}
