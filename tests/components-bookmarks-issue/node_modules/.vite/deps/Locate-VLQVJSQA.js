import {
  b as b2
} from "./chunk-3RDP2KYO.js";
import {
  p
} from "./chunk-RIBUBPHP.js";
import {
  r as r2
} from "./chunk-7TMUM6KU.js";
import "./chunk-IKON42NH.js";
import {
  e as e4
} from "./chunk-D5LHX57G.js";
import {
  i
} from "./chunk-WK2KEW7P.js";
import {
  e as e3
} from "./chunk-EAAEPSBY.js";
import "./chunk-5T2QNVDA.js";
import "./chunk-PCKG3UTS.js";
import "./chunk-QYC3GV65.js";
import {
  P
} from "./chunk-ETHGDNE6.js";
import "./chunk-X2GCSX3A.js";
import "./chunk-I2X6UR6L.js";
import "./chunk-QX66UTIR.js";
import "./chunk-ZIJHDTB7.js";
import "./chunk-ZU6I4R6T.js";
import "./chunk-JI3AZJ7K.js";
import "./chunk-A5Q7MMP6.js";
import "./chunk-326OSIM5.js";
import "./chunk-R4CJB3GP.js";
import "./chunk-HTKSTTSR.js";
import "./chunk-6IED7TER.js";
import "./chunk-X7VSXJWW.js";
import "./chunk-VEODBKUJ.js";
import "./chunk-AG6JXA4M.js";
import "./chunk-B647DRFJ.js";
import "./chunk-PJNK3TLV.js";
import "./chunk-J7AMTUNG.js";
import "./chunk-G5EVVNIJ.js";
import "./chunk-HU5IGOTI.js";
import "./chunk-C24MEKSO.js";
import "./chunk-WDPG5BMO.js";
import "./chunk-TGXFDJCS.js";
import "./chunk-BOAEEYBE.js";
import "./chunk-VBUVOOM6.js";
import "./chunk-UMXV3EBO.js";
import "./chunk-ONK5AE7R.js";
import "./chunk-CZSTCON2.js";
import "./chunk-HV6S3GY2.js";
import "./chunk-IGR2BTWR.js";
import "./chunk-C7NPPGFR.js";
import "./chunk-ZPYA32PH.js";
import "./chunk-OCF7OAES.js";
import "./chunk-JZBR4X6W.js";
import "./chunk-OIJCMME5.js";
import "./chunk-4KLYOMH2.js";
import {
  D,
  e2,
  r
} from "./chunk-RGCWZ2KZ.js";
import {
  n as n2
} from "./chunk-5VMSFOCB.js";
import "./chunk-LGQXPGTM.js";
import "./chunk-2SDMYJDE.js";
import "./chunk-TPLOIZC7.js";
import "./chunk-C62RZQQX.js";
import {
  h
} from "./chunk-6Z6C6JVV.js";
import "./chunk-QLL2YG25.js";
import "./chunk-Z2PDA67N.js";
import "./chunk-IZKCZQUY.js";
import "./chunk-M5ZB5S5C.js";
import "./chunk-MBGZKT2Z.js";
import "./chunk-UWQ3OYA5.js";
import "./chunk-ORO4D3FB.js";
import "./chunk-YOPMY6TS.js";
import "./chunk-VIN55KNF.js";
import "./chunk-NIDZ6R4E.js";
import "./chunk-IOB3DJMR.js";
import "./chunk-BPRXWDBO.js";
import {
  f
} from "./chunk-7MT4ACA4.js";
import "./chunk-RUN6MNXL.js";
import "./chunk-SAYWXQVM.js";
import "./chunk-SBL4URUW.js";
import "./chunk-Z4Y53NDM.js";
import "./chunk-PVUNFEWX.js";
import "./chunk-TXBMNSNF.js";
import "./chunk-BVQWKK2V.js";
import "./chunk-D25BO7X7.js";
import {
  o,
  y2 as y
} from "./chunk-NDIXNREV.js";
import {
  a3 as a
} from "./chunk-I2RC5KWA.js";
import "./chunk-SSFWZSUM.js";
import {
  e
} from "./chunk-2F6FFF5T.js";
import "./chunk-C26KUZ46.js";
import {
  b
} from "./chunk-JGDJR5EV.js";
import "./chunk-QHK5ZYFW.js";
import "./chunk-L65HKN25.js";
import {
  n2 as n,
  s
} from "./chunk-7RBRCL6S.js";
import "./chunk-J2EGIWT6.js";
import "./chunk-MDRC3XUT.js";
import "./chunk-NCF6OYL5.js";
import "./chunk-Z4ZPL3B3.js";

// node_modules/@arcgis/core/widgets/Locate/LocateViewModel.js
async function d() {
  const t = await h("esri/widgets/Locate/t9n/Locate");
  return new P({ title: t.currentLocation, fieldInfos: [{ fieldName: "timestamp", label: t.timestamp, format: { dateFormat: "short-date-short-time" } }, { fieldName: "latitude", label: t.latitude, format: { places: 4, digitSeparator: true } }, { fieldName: "longitude", label: t.longitude, format: { places: 4, digitSeparator: true } }, { fieldName: "accuracy", label: t.accuracy, format: { places: 0, digitSeparator: true } }, { fieldName: "altitude", label: t.altitude, format: { places: 0, digitSeparator: true } }, { fieldName: "altitudeAccuracy", label: t.altitudeAccuracy, format: { places: 0, digitSeparator: true } }, { fieldName: "heading", label: t.heading, format: { places: 0, digitSeparator: true } }, { fieldName: "speed", label: t.speed, format: { places: 0, digitSeparator: true } }], actions: [r2.clone()], content: [{ type: "fields" }] });
}
var u = class extends b2 {
  constructor(t) {
    super(t), this._locateController = null, this.error = void 0, this.popupEnabled = true, this.locate = this.locate.bind(this);
  }
  initialize() {
    this.addHandles([f(() => {
      var _a;
      const { graphic: t, view: e5 } = this;
      if (!t)
        return;
      const o2 = (_a = e5 == null ? void 0 : e5.graphics) == null ? void 0 : _a.includes(t);
      o2 && this._updatePopupTemplate(t);
    })]);
  }
  destroy() {
    this.cancelLocate();
  }
  get state() {
    var _a;
    return this._geolocationUsable ? ((_a = this.view) == null ? void 0 : _a.ready) ? this._locateController ? "locating" : null != this.error ? "error" : "ready" : "disabled" : "feature-unsupported";
  }
  async locate() {
    if (this.cancelLocate(), "disabled" === this.state)
      throw new s("locate:disabled-state", "Cannot locate when disabled.");
    if ("feature-unsupported" === this.state)
      throw new s("locate:feature-unsupported-state", "Cannot locate in unsecure domain.");
    const t = new AbortController();
    this._locateController = t, this.error = void 0;
    try {
      const e5 = await p(this.geolocationOptions);
      if (await this.updatePosition(e5, t), this._locateController !== t)
        return null;
      const { graphic: o2 } = this;
      return o2 && await this._updatePopupTemplate(o2), this._addGraphic(), this.emit("locate", { position: e5 }), this._locateController = null, e5;
    } catch (e5) {
      if (b(e5))
        return null;
      throw t === this._locateController && (this._locateController = null), this.error = e5, this.emit("locate-error", { error: e5 }), e5;
    }
  }
  cancelLocate() {
    this._clearGraphic(), this._locateController && this._locateController.abort(), this._locateController = null;
  }
  async _updatePopupTemplate(t) {
    if (!this.popupEnabled)
      return;
    const e5 = await d(), o2 = t !== this.graphic;
    this.destroyed || o2 || (t.popupTemplate = e5);
  }
};
e([y()], u.prototype, "_locateController", void 0), e([y()], u.prototype, "error", void 0), e([y()], u.prototype, "popupEnabled", void 0), e([y({ readOnly: true })], u.prototype, "state", null), e([y()], u.prototype, "locate", null), e([y()], u.prototype, "cancelLocate", null), u = e([a("esri.widgets.Locate.LocateViewModel")], u);
var m = u;

// node_modules/@arcgis/core/widgets/Locate.js
var g = { base: "esri-locate" };
var u2 = "gps-off";
var v = class extends D {
  constructor(e5, o2) {
    super(e5, o2), this.messages = null, this.messagesCommon = null, this.viewModel = new m(), this._locate = () => {
      const { viewModel: e6 } = this;
      "locating" === e6.state ? e6.cancelLocate() : e6.locate().catch(() => {
      });
    };
  }
  loadDependencies() {
    return r({ button: () => import("./calcite-button-V4T5NPWY.js"), loader: () => import("./calcite-loader-64JUXTQT.js"), tooltip: () => import("./calcite-tooltip-TDDUGVK4.js") });
  }
  get geolocationOptions() {
    return this.viewModel.geolocationOptions;
  }
  set geolocationOptions(e5) {
    this.viewModel.geolocationOptions = e5;
  }
  get goToLocationEnabled() {
    return this.viewModel.goToLocationEnabled;
  }
  set goToLocationEnabled(e5) {
    this.viewModel.goToLocationEnabled = e5;
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e5) {
    this.viewModel.goToOverride = e5;
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e5) {
    this.viewModel.graphic = e5;
  }
  get icon() {
    return "compass";
  }
  set icon(e5) {
    this._overrideIfSome("icon", e5);
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e5) {
    this._overrideIfSome("label", e5);
  }
  get popupEnabled() {
    return this.viewModel.popupEnabled;
  }
  set popupEnabled(e5) {
    this.viewModel.popupEnabled = e5;
  }
  get rotationEnabled() {
    return o(n.getLogger(this), "rotationEnabled", { replacement: "use Track widget", version: "4.29", warnOnce: true }), this.viewModel.rotationEnabled;
  }
  set rotationEnabled(e5) {
    o(n.getLogger(this), "rotationEnabled", { replacement: "use Track widget", version: "4.29", warnOnce: true }), this.viewModel.rotationEnabled = e5;
  }
  get scale() {
    return this.viewModel.scale;
  }
  set scale(e5) {
    this.viewModel.scale = e5;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e5) {
    this.viewModel.view = e5;
  }
  cancelLocate() {
    this.viewModel.cancelLocate();
  }
  locate() {
    return this.viewModel.locate();
  }
  render() {
    var _a;
    const { viewModel: e5, icon: o2 } = this, { state: t } = e5, i2 = "locating" === t, s2 = i2 ? this.messagesCommon.cancel : this.messages.title, r3 = "feature-unsupported" === t, l = void 0 === i ? u2 : void 0, n3 = this._localizeError((_a = this.viewModel) == null ? void 0 : _a.error);
    return n2("div", { class: this.classes(g.base, e3.widget) }, !r3 && n2("calcite-button", { class: e3.widgetButton, disabled: "disabled" === t, iconStart: i2 ? void 0 : o2 ?? l, kind: "neutral", label: s2, onclick: this._locate, title: s2 }, i2 ? n2("calcite-loader", { inline: true, label: "" }) : null), n3 ? n2("calcite-tooltip", { open: true, overlayPositioning: "fixed", referenceElement: this.container }, n3) : null);
  }
  _localizeError(e5) {
    var _a, _b, _c;
    return e5 instanceof GeolocationPositionError ? e5.code === GeolocationPositionError.PERMISSION_DENIED ? (_a = this.messages) == null ? void 0 : _a.permissionError : e5.code === GeolocationPositionError.TIMEOUT ? (_b = this.messages) == null ? void 0 : _b.timeoutError : (_c = this.messages) == null ? void 0 : _c.positionUnavailable : e5 instanceof Error ? e5.message : void 0;
  }
};
e([y()], v.prototype, "geolocationOptions", null), e([y()], v.prototype, "goToLocationEnabled", null), e([y()], v.prototype, "goToOverride", null), e([y()], v.prototype, "graphic", null), e([y()], v.prototype, "icon", null), e([y()], v.prototype, "label", null), e([y(), e2("esri/widgets/Locate/t9n/Locate")], v.prototype, "messages", void 0), e([y(), e2("esri/t9n/common")], v.prototype, "messagesCommon", void 0), e([y()], v.prototype, "popupEnabled", null), e([y()], v.prototype, "rotationEnabled", null), e([y()], v.prototype, "scale", null), e([y()], v.prototype, "view", null), e([y({ type: m }), e4(["locate", "locate-error"])], v.prototype, "viewModel", void 0), v = e([a("esri.widgets.Locate")], v);
var h2 = v;
export {
  h2 as default
};
//# sourceMappingURL=Locate-VLQVJSQA.js.map
