{
  "version": 3,
  "sources": ["../../@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js", "../../@arcgis/core/rest/query/executeQueryPBF.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{assertIsSome as e}from\"../../../core/maybe.js\";import{getGeometryZScaler as t}from\"../../../geometry/support/zscale.js\";import{unquantizeOptimizedGeometry as r,convertToGeometry as s}from\"../../../layers/graphics/featureConversionUtils.js\";function o(e,t){return t}function i(e,t,r,s){switch(r){case 0:return u(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?u(e,t+s,1):l(e,t+s,1)}}function n(e,t,r,s){return 2===r?u(e,t,2):i(e,t,r,s)}function a(e,t,r,s){return 2===r?0===t?0:u(e,t,3):i(e,t,r,s)}function h(e,t,r,s){return 3===r?0===t?0:u(e,t,3):n(e,t,r,s)}function u({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l({translate:e,scale:t},r,s){return e[s]-r*t[s]}class d{constructor(e){this._options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=o,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const r=t(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=r)for(const t of e.features)r(t.geometry)}createSpatialReference(){return{}}addField(t,r){const s=t.fields;e(s),s.push(r);const o=s.map((e=>e.name));this._attributesConstructor=function(){for(const e of o)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:o,queryGeometryType:i}=t,n=r(o.clone(),o,!1,!1,this._transform),a=s(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const s=this._transform;switch(t=this._applyTransform(s,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:\"z\"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const s=this._transform;return null===this._mValueOffset||0!==e||t%this._mValueOffset?this._applyTransform(s,e,t,r):0}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?n:r?a:i}}export{d as JSONFeatureSetParserContext};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{JSONFeatureSetParserContext as e}from\"./operations/pbfJSONFeatureSet.js\";import{executeQueryPBF as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import a from\"../support/Query.js\";async function s(r,e,t){const s=await n(r,a.from(e),t);return o.fromJSON(s)}async function n(o,s,n){const p=r(o),i={...n},u=a.from(s),m=!u.quantizationParameters,{data:f}=await t(p,u,new e({sourceSpatialReference:u.sourceSpatialReference,applyTransform:m}),i);return f}export{s as executeQueryPBF,n as executeRawQueryPBF};\n"],
  "mappings": "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",
  "names": ["o", "n", "e", "i", "a", "n", "o", "i", "u", "f"]
}
