{
  "version": 3,
  "sources": ["../../@arcgis/core/core/imageUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from\"../request.js\";import e from\"./Error.js\";import{isAbortError as r}from\"./promiseUtils.js\";import{dataComponents as a}from\"./urlUtils.js\";import{base64ToArrayBuffer as n}from\"../support/base64Utils.js\";let i=null,o=!0;function s(t,e,r){if(!t||!e)throw new Error(\"Cannot construct image data without dimensions\");if(o)try{return new ImageData(t,e)}catch(a){o=!1}return m(t,e,r)}function c(t,e,r,a){if(!e||!r)throw new Error(\"Cannot construct image data without dimensions\");if(o)try{return new ImageData(t,e,r)}catch(i){o=!1}const n=m(e,r,a);return n.data.set(t,0),n}function f(){return i||(i=document.createElement(\"canvas\"),i.width=1,i.height=1),i}function m(t,e,r){return r||(r=f()),r.getContext(\"2d\").createImageData(t,e)}async function u(a,n){const i=window.URL.createObjectURL(a);try{const{data:e}=await t(i,{...n,responseType:\"image\"});return e}catch(o){if(!r(o))throw new e(\"invalid-image\",`Could not fetch requested image at ${i}`);throw o}finally{window.URL.revokeObjectURL(i)}}async function p(t,e){const{arrayBuffer:r,mediaType:a}=await d(t,e),n=\"image/png\"===a;if(\"image/gif\"===a){const{isAnimatedGIF:t,parseGif:a}=await import(\"./image/gif.js\");if(t(r))return a(r,e)}if(n){const{isAnimatedPNG:t,parseApng:a}=await import(\"./image/apng.js\");if(t(r))return a(r,e)}return u(new Blob([r],{type:a}),e)}async function d(e,r){const i=a(e);if(i?.isBase64)return{arrayBuffer:n(i.data),mediaType:i.mediaType};const o=await t(e,{responseType:\"array-buffer\",...r});return{arrayBuffer:o.data,mediaType:o.getHeader?.(\"Content-Type\")??\"\"}}export{s as createEmptyImageData,p as getImageData,c as wrapImageData};\n"],
  "mappings": ";;;;;;;;;;;;;AAIuN,IAAI,IAAE;AAAN,IAAW,IAAE;AAAG,SAASA,GAAEC,IAAE,GAAE,GAAE;AAAC,MAAG,CAACA,MAAG,CAAC;AAAE,UAAM,IAAI,MAAM,gDAAgD;AAAE,MAAG;AAAE,QAAG;AAAC,aAAO,IAAI,UAAUA,IAAE,CAAC;AAAA,IAAC,SAAO,GAAE;AAAC,UAAE;AAAA,IAAE;AAAC,SAAO,EAAEA,IAAE,GAAE,CAAC;AAAC;AAAC,SAAS,EAAEA,IAAE,GAAE,GAAE,GAAE;AAAC,MAAG,CAAC,KAAG,CAAC;AAAE,UAAM,IAAI,MAAM,gDAAgD;AAAE,MAAG;AAAE,QAAG;AAAC,aAAO,IAAI,UAAUA,IAAE,GAAE,CAAC;AAAA,IAAC,SAAOC,IAAE;AAAC,UAAE;AAAA,IAAE;AAAC,QAAM,IAAE,EAAE,GAAE,GAAE,CAAC;AAAE,SAAO,EAAE,KAAK,IAAID,IAAE,CAAC,GAAE;AAAC;AAAC,SAAS,IAAG;AAAC,SAAO,MAAI,IAAE,SAAS,cAAc,QAAQ,GAAE,EAAE,QAAM,GAAE,EAAE,SAAO,IAAG;AAAC;AAAC,SAAS,EAAEA,IAAE,GAAE,GAAE;AAAC,SAAO,MAAI,IAAE,EAAE,IAAG,EAAE,WAAW,IAAI,EAAE,gBAAgBA,IAAE,CAAC;AAAC;AAAC,eAAe,EAAE,GAAE,GAAE;AAAC,QAAMC,KAAE,OAAO,IAAI,gBAAgB,CAAC;AAAE,MAAG;AAAC,UAAK,EAAC,MAAK,EAAC,IAAE,MAAM,EAAEA,IAAE,EAAC,GAAG,GAAE,cAAa,QAAO,CAAC;AAAE,WAAO;AAAA,EAAC,SAAOC,IAAE;AAAC,QAAG,CAAC,EAAEA,EAAC;AAAE,YAAM,IAAI,EAAE,iBAAgB,sCAAsCD,EAAC,EAAE;AAAE,UAAMC;AAAA,EAAC,UAAC;AAAQ,WAAO,IAAI,gBAAgBD,EAAC;AAAA,EAAC;AAAC;AAAC,eAAe,EAAED,IAAE,GAAE;AAAC,QAAK,EAAC,aAAY,GAAE,WAAU,EAAC,IAAE,MAAM,EAAEA,IAAE,CAAC,GAAE,IAAE,gBAAc;AAAE,MAAG,gBAAc,GAAE;AAAC,UAAK,EAAC,eAAcA,IAAE,UAASG,GAAC,IAAE,MAAM,OAAO,mBAAgB;AAAE,QAAGH,GAAE,CAAC;AAAE,aAAOG,GAAE,GAAE,CAAC;AAAA,EAAC;AAAC,MAAG,GAAE;AAAC,UAAK,EAAC,eAAcH,IAAE,WAAUG,GAAC,IAAE,MAAM,OAAO,oBAAiB;AAAE,QAAGH,GAAE,CAAC;AAAE,aAAOG,GAAE,GAAE,CAAC;AAAA,EAAC;AAAC,SAAO,EAAE,IAAI,KAAK,CAAC,CAAC,GAAE,EAAC,MAAK,EAAC,CAAC,GAAE,CAAC;AAAC;AAAC,eAAe,EAAE,GAAE,GAAE;AAJh0C;AAIi0C,QAAMF,KAAE,GAAE,CAAC;AAAE,MAAGA,MAAA,gBAAAA,GAAG;AAAS,WAAM,EAAC,aAAY,EAAEA,GAAE,IAAI,GAAE,WAAUA,GAAE,UAAS;AAAE,QAAMC,KAAE,MAAM,EAAE,GAAE,EAAC,cAAa,gBAAe,GAAG,EAAC,CAAC;AAAE,SAAM,EAAC,aAAYA,GAAE,MAAK,aAAU,KAAAA,GAAE,cAAF,wBAAAA,IAAc,oBAAiB,GAAE;AAAC;",
  "names": ["s", "t", "i", "o", "a"]
}
