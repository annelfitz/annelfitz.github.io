{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/support/overlayImageUtils.js", "../../@arcgis/core/views/3d/layers/DynamicLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{width as t,height as e,intersects as r}from\"../../../../geometry/support/aaBoundingRect.js\";import{newDoubleArray as o}from\"../../../../geometry/support/DoubleArray.js\";import{newFloatArray as n}from\"../../../../geometry/support/FloatArray.js\";import{Attribute as i}from\"../../webgl-engine/lib/Attribute.js\";import{Geometry as m}from\"../../webgl-engine/lib/Geometry.js\";import{createSquareGeometry as h}from\"../../webgl-engine/lib/GeometryUtil.js\";import{VertexAttribute as g}from\"../../webgl-engine/lib/VertexAttribute.js\";function u(r,o,n){const i=t(r)/e(r),m={width:n,height:n};return i>1.0001?m.height=n/i:i<.9999&&(m.width=n*i),m.width=Math.round(m.width/(t(r)/t(o))),m.height=Math.round(m.height/(e(r)/e(o))),m}function l(t,e){return h(t,[[e[0],e[1],-1],[e[2],e[1],-1],[e[2],e[3],-1],[e[0],e[3],-1]])}function s(t,e,h){if(!r(e,h))return l(t,h);const u=[e[1]-h[1],Math.min(e[3],h[3])-Math.max(e[1],h[1]),h[3]-e[3],123456],s=[e[0]-h[0],Math.min(e[2],h[2])-Math.max(e[0],h[0]),h[2]-e[2],123456],f=h[2]-h[0],p=h[3]-h[1],w=s[0]>0&&s[2]>0?3:2,b=u[0]>0&&u[2]>0?3:2,c=(b+1)*(w+1),y=o(3*c),d=n(2*c),j=new Array(6*(b*w-1));let A=0,M=0,x=0,O=0,G=0;for(let r=0;r<4;r++){const t=u[r];if(t<=0)continue;let e=0;for(let o=0;o<4;o++){const t=s[o];t<=0||(y[M++]=h[0]+e,y[M++]=h[1]+A,y[M++]=-1,d[x++]=e/f,d[x++]=A/p,o<3&&r<3&&(1!==o||1!==r)&&(j[G++]=O,j[G++]=O+1,j[G++]=O+w+1,j[G++]=O+1,j[G++]=O+w+2,j[G++]=O+w+1),O++,e+=t)}A+=t}const I=new Array(j.length);return new m(t,[[g.POSITION,new i(y,j,3,!0)],[g.NORMAL,new i(a,I,3,!0)],[g.UV0,new i(d,j,2,!0)]])}const a=[0,0,1];export{u as computeImageExportSize,l as createGeometryForExtent,s as createOuterImageGeometry};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{forEach as t,result as r}from\"../../../core/asyncUtils.js\";import{makeHandle as i}from\"../../../core/handleUtils.js\";import a from\"../../../core/Logger.js\";import{abortMaybe as s}from\"../../../core/maybe.js\";import{debounce as n,isAbortError as o,onAbort as l,isAborted as h,createAbortError as m,throwIfAborted as d}from\"../../../core/promiseUtils.js\";import{whenOnce as c}from\"../../../core/reactiveUtils.js\";import{property as g}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as u}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{equals as f,create as y,width as _,height as w,copy as x,intersection as R}from\"../../../geometry/support/aaBoundingRect.js\";import{DrapeSourceType as v}from\"./interfaces.js\";import{LayerView3D as S}from\"./LayerView3D.js\";import{computeImageExportSize as b,createGeometryForExtent as E,createOuterImageGeometry as j}from\"./support/overlayImageUtils.js\";import{toViewIfLocal as I}from\"./support/projectExtentUtils.js\";import{debugFlags as A}from\"../support/debugFlags.js\";import{OverlayIndex as L}from\"../terrain/interfaces.js\";import{DirtyOperation as D}from\"../webgl-engine/lib/ModelDirtyTypes.js\";import{RenderGeometry as M}from\"../webgl-engine/lib/RenderGeometry.js\";import{Texture as C}from\"../webgl-engine/lib/Texture.js\";import{UpdatePolicy as G}from\"../webgl-engine/lib/UpdatePolicy.js\";import{ImageMaterial as P}from\"../webgl-engine/materials/ImageMaterial.js\";import T from\"../../layers/LayerView.js\";import O from\"../../layers/RefreshableLayerView.js\";import{isScaleRangeActive as H}from\"../../support/layerViewUtils.js\";import{TextureWrapMode as U}from\"../../webgl/enums.js\";let V=class extends(O(S(T))){constructor(){super(...arguments),this.drapeSourceType=v.RasterImage,this.updatePolicy=G.SYNC,this.fullExtentInLocalViewSpatialReference=null,this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this.updateWhenStationary=!0,this._drapeSourceRenderer=null,this.refreshDebounced=n((async e=>{this.destroyed||await this._doRefresh(e).catch((e=>{o(e)||a.getLogger(this).error(e)}))}),2e3)}initialize(){this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.addHandles(i((()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this)))),this.addResolvingPromise(I(this).then((e=>this._set(\"fullExtentInLocalViewSpatialReference\",e)))),this._updatingHandles.add((()=>this.suspended),(()=>this._suspendedChangeHandler())),this.addHandles(this.view.resourceController.scheduler.registerIdleStateCallbacks((()=>{this._isScaleRangeActive()&&this.notifyChange(\"suspended\")}),(()=>{}))),this._isScaleRangeLayer()&&this._updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this.notifyChange(\"suspended\")))}destroy(){this.clear()}setDrapingExtent(e,t){this._spatialReference=t,e.forEach(((e,t)=>{this._overlays[t]=e,this._updateImageExtent(e,t)}))}_updateImageExtent(e,t){const r=this._clippedExtent(e.extent,z);if(null==r)return;const i=b(e.extent,r,e.resolution);let s=e.pixelRatio*this.view.state.pixelRatio;const{layer:n}=this;if(\"imageMaxWidth\"in n&&null!=n.imageMaxWidth||\"imageMaxHeight\"in n&&null!=n.imageMaxHeight){const e=n.imageMaxWidth,t=n.imageMaxHeight;if(i.width>e){const t=e/i.width;i.height=Math.floor(i.height*t),i.width=e,s*=t}if(i.height>t){const e=t/i.height;i.width=Math.floor(i.width*e),i.height=t,s*=e}}const l=this._extents[t];l&&f(l.extent,r)&&this._imageSizeEquals(r,l.imageSize,i)||(this._extents[t]={extent:y(r),imageSize:i,pixelRatio:s},this.suspended||this._fetch(t).catch((e=>{o(e)||a.getLogger(this).error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(){return this._doRefresh()}async _doRefresh(e){if(this.suspended)return;const t=[];for(let r=0;r<this._extents.length;r++)this._extents[r]&&t.push(this._fetch(r,e));await Promise.allSettled(t)}canResume(){if(!super.canResume())return!1;const e=this.layer;if(this._isScaleRangeActive()){const{minScale:t,maxScale:r}=e.effectiveScaleRange,i=this.view.scale;if(i<r||t>0&&i>t)return!1}return!0}async processResult(e,t,r){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const r=t.extent;if(new p(r[0],r[1],r[2],r[3],this._spatialReference).contains(e))return t}return null}getFetchOptions(){}async redraw(e,r){await t(this._images,(async(t,i)=>{t&&(await e(t,r),await this._createStageObjects(i,t.image,r))}))}_imageSizeEquals(e,t,r){if(!this.maximumDataResolution)return!1;const i=_(e)/this.maximumDataResolution.x,a=w(e)/this.maximumDataResolution.y,s=i/t.width,n=a/t.height,o=i/r.width,l=a/r.height,h=Math.abs(s-o),m=Math.abs(n-l),d=A.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return h<=d&&m<=d}async _fetch(e,t){if(this.suspended)return;const r=this._extents[e],i=r.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:y(i)});const n=this._images[e];n.loadingAbortController=s(n.loadingAbortController);const c=new p(i[0],i[1],i[2],i[3],this._spatialReference);if(0===c.width||0===c.height)return void this._clearImage(e);const g=new AbortController;n.loadingAbortController=g,l(t,(()=>g.abort()));const u=g.signal,f=this._waitFetchReady(u).then((async()=>{const t={requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio,...this.getFetchOptions(),signal:u},{height:i,width:a}=r.imageSize;return this.layer.fetchImage(c,a,i,t)})).then((e=>{if(h(u))throw a.getLogger(this).warnOnce(\"A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true.\"),m();return this.processResult(n,e)})).then((()=>{x(n.renderExtent,i)}));n.loadingPromise=f,await this._updatingHandles.addPromise(f.then((async()=>{d(u),await this._createStageObjects(e,n.image,u)})).catch((e=>{throw e&&!o(e)&&a.getLogger(this).error(e),e})).finally((()=>{f===n.loadingPromise&&(n.loadingPromise=null,n.loadingAbortController=null)})))}_clearImage(e){const t=this._images[e];if(t){null!=t.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],D.UPDATE),t.renderGeometry=null);const e=this.view._stage,r=t.texture;r?.unload(),e.remove(r),t.texture=null,e.remove(t.material),t.material=null,t.loadingAbortController=s(t.loadingAbortController),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t,i){const a=this.view._stage,s=this._images[e],n=()=>{s.texture?.unload(),a.remove(s.texture),s.texture=null,s.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([s.renderGeometry],D.UPDATE),s.renderGeometry=null)};if(t){const o=new C(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:U.CLAMP_TO_EDGE,t:U.CLAMP_TO_EDGE}});let l;if(await r(this._images[e===L.INNER?L.OUTER:L.INNER].loadingPromise),d(i),n(),await a.schedule((()=>o.load(a.renderView.renderingContext)),i),a.add(o),s.texture=o,null==s.material?(s.material=new P({transparent:!0,textureId:o.id}),a.add(s.material)):s.material.setParameters({textureId:o.id}),e===L.INNER)l=E(s.material,s.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void n();l=j(s.material,e,s.renderExtent)}s.renderGeometry=new M(l),s.renderGeometry.localOrigin=this._overlays[e].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([s.renderGeometry],D.UPDATE)}else n(),a.remove(s.material),s.material=null}_isScaleRangeLayer(){return\"effectiveScaleRange\"in this.layer}_isScaleRangeActive(){const e=this.layer;if(!this._isScaleRangeLayer())return!1;const{minScale:t,maxScale:r}=e.effectiveScaleRange;return H(t,r)}_clippedExtent(e,t){if(\"local\"!==this.view.viewingMode)return x(t,e);const r=this.view.basemapTerrain;return r.ready?R(e,r.extent,t):x(t,e)}_suspendedChangeHandler(){this.suspended?this.clear():this.refreshDebounced()}async _waitFetchReady(e){await c((()=>this.view.stationary),e),d(e)}};e([g()],V.prototype,\"layer\",void 0),e([g()],V.prototype,\"suspended\",void 0),e([g({readOnly:!0})],V.prototype,\"fullExtentInLocalViewSpatialReference\",void 0),e([g()],V.prototype,\"updating\",void 0),V=e([u(\"esri.views.3d.layers.DynamicLayerView3D\")],V);const N=V,z=y();export{N as default};\n"],
  "mappings": "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",
  "names": ["u", "n", "i", "s", "m", "l", "t", "e", "w", "b", "c", "y", "M", "I", "a", "n", "u", "e", "t", "i", "s", "l", "w", "a", "m", "c", "E", "N"]
}
