{
  "version": 3,
  "sources": ["../../@arcgis/core/rest/featureService/FeatureService.js", "../../@arcgis/core/rest/featureService/utils.js", "../../@arcgis/core/versionManagement/support/EditMomentStack.js", "../../@arcgis/core/versionManagement/VersionManagementService.js", "../../@arcgis/core/widgets/VersionManagement/VersionManagementViewModel.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import{isSome as s}from\"../../core/arrayUtils.js\";import r from\"../../core/Error.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import{JSONSupportMixin as a}from\"../../core/JSONSupport.js\";import{clone as o}from\"../../core/lang.js\";import n from\"../../core/Loadable.js\";import{property as u}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{reader as d}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import p from\"../../geometry/SpatialReference.js\";import{getFeatureJSON as c,getFeatureIds as m,getAttachmentEditsJSON as y,isProtectedOrPrivateVersionError as f,unpackEditResultData as h,createEditedFeatures as S}from\"../../layers/graphics/applyEditsUtils.js\";import{checkEditingCapabilities as v,normalizeEdits as g,normalizeGeometries as b}from\"../../layers/graphics/editingSupport.js\";import{emitApplyEditsEvent as R}from\"../../layers/mixins/EditBusLayer.js\";import{parseUrl as E,asValidOptions as j,encode as w}from\"../utils.js\";import{unapplyEditsZUnitScaling as F}from\"../query/operations/editsZScale.js\";import{readBoolean as A,readNumber as k}from\"../support/jsonUtils.js\";import{isSafeToEditVersion as O,isVersionInEditSession as V,currentSessionId as C}from\"../../versionManagement/support/versionManagementUtils.js\";function I(e){return{data:M(e),sync:x(e),operations:D(e.capabilities,e),query:N(e),editing:U(e)}}function M(e){return{isDataVersioned:A(e,\"hasVersionedData\",!1)}}function D(e,t){const s=e?e.toLowerCase().split(\",\").map((e=>e.trim())):[],r=s.includes(\"query\"),i=s.includes(\"editing\")&&!t.datesInUnknownTimezone;let a=i&&s.includes(\"create\"),o=i&&s.includes(\"delete\"),n=i&&s.includes(\"update\");return i&&!(a||o||n)&&(a=o=n=!0),{supportsAdd:a,supportsDelete:o,supportsEditing:i,supportsChangeTracking:s.includes(\"changetracking\"),supportsQuery:r,supportsQueryDataElements:A(t,\"supportsQueryDataElements\",!1),supportsQueryDomains:A(t,\"supportsQueryDomains\",!1),supportsQueryContingentValues:A(t,\"supportsQueryContingentValues\",!1),supportsSync:s.includes(\"sync\"),supportsUpdate:n}}function N(e){return{maxRecordCountFactor:k(e,\"maxRecordCountFactor\",void 0),maxRecordCount:k(e,\"maxRecordCount\",void 0)}}function U(e){const t=e?.advancedEditingCapabilities;return{supportsGlobalId:A(e,\"supportsApplyEditsWithGlobalIds\",!1),supportsReturnServiceEditsInSourceSpatialReference:A(t,\"supportsReturnServiceEditsInSourceSR\",!1),supportsSplit:A(t,\"supportsSplit\",!1),supportsAsyncApplyEdits:A(t,\"supportsAsyncApplyEdits\",!1)}}function x(e){const t=e?.syncCapabilities,s=t?.supportedSyncDataOptions;return{supportsAsync:A(t,\"supportsAsync\",!1),supportedSyncDataOptions:{annotations:!(1&~s),dimensions:!(2&~s),contingentValues:!(4&~s),attributeRules:!(8&~s),utilityNetworkSystem:!(16&~s),annotationFullModel:!(32&~s),include3DObjects:!(64&~s),utilityNetworkMissingLayers:!(128&~s),preserveTrueCurves:!(256&~s)}}}let J=class extends(a(i(n))){constructor(e){super(e),this.url=null,this.sourceJSON=null,this.userTypeExtensions=[],this.layerInfos=[],this.tableInfos=[],this.capabilities=null}read(e,t){this.sourceJSON=e,super.read(e,t)}get utilityNetworkUrl(){for(const e of this.sourceJSON.layers)if(\"Utility Network Layer\"===e.type)return`${this.url}/${e.id}`;return null}get versionManagementServiceUrl(){return this.sourceJSON.hasBranchVersionedData?this.url.replace(/\\/FeatureServer/i,\"/VersionManagementServer\"):null}readCapabilities(e,t){return I(t)}load(e){return this.addResolvingPromise(this._fetchService(this.url,e)),Promise.resolve(this)}async applyEdits(e,t){let s=null;try{const{results:r,edits:i,editedFeatures:a}=await this._internalApplyEdits(e,t),n=e=>e.filter((e=>!e.error)).map(o);let u=0;return r.map((e=>{s=R(this.url,e.id,t?.gdbVersion,!0);const r={edits:i[u],addedFeatures:n(e.addFeatureResults),updatedFeatures:n(e.updateFeatureResults),deletedFeatures:n(e.deleteFeatureResults),addedAttachments:n(e.addAttachmentResults),updatedAttachments:n(e.updateAttachmentResults),deletedAttachments:n(e.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:e.editMoment?new Date(e.editMoment):null};u+=1,a.length>0&&(r.editedFeatures=a),s.resolve(r),s=null})),r}catch(r){throw s&&s.reject(r),r}}async _internalApplyEdits(e,r){const i=r?.globalIdUsed??!1,a=p.fromJSON(this.sourceJSON.spatialReference),{edits:o,options:n}=await this._processApplyEditsParams(e,r),u=await Promise.all(o.map((async e=>{const t=e.addFeatures?.map((e=>c({spatialReference:a},e,null)))??[],r=(await Promise.all(t)).filter(s),o=e.updateFeatures?.map((e=>c({spatialReference:a},e,null)))??[],n=(await Promise.all(o)).filter(s),u=m(e.identifierFields,e.deleteFeatures,i);F(r,n,a);const d=await y(e.identifierFields,e);return{id:e.id,adds:r,updates:n,deletes:u,attachments:d}}))),d={gdbVersion:n?.gdbVersion,rollbackOnFailure:!0,useGlobalIds:i,returnEditMoment:!0,honorSequenceOfEdits:n?.honorSequenceOfEdits,usePreviousEditMoment:n?.usePreviousEditMoment,returnServiceEditsInSourceSR:n?.returnServiceEditsInSourceSR,returnServiceEditsOption:\"originalAndCurrentFeatures\",async:!1};await O(this.url,r?.gdbVersion,!0);const l=V(this.url,r?.gdbVersion||null);d.edits=JSON.stringify(u);const h=E(this.url),S=j(h.query,{query:w({...d,f:\"json\"}),method:\"post\"});let v;l&&(S.authMode=\"immediate\",S.query.sessionId=C);try{v=await t(this.url+\"/applyEdits\",S)}catch(g){if(!f(g))throw g;S.authMode=\"immediate\",v=await t(this.url+\"/applyEdits\",S)}return{...q(v),edits:o}}async _processApplyEditsParams(e,t){const s={...t};return{edits:await Promise.all(e.map((async e=>{const s=this.capabilities,i=e&&(e.addFeatures||e.updateFeatures||e.deleteFeatures),a=e&&(e.addAttachments||e.updateAttachments||e.deleteAttachments);if(v(e,s,t,!!i,!!a,\"feature-service\"),!s.data.isDataVersioned&&t?.gdbVersion)throw new r(\"feature-service:invalid-parameter\",\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");const o=g(e,s,\"feature-service\");return{...await b(o),id:e.id,identifierFields:e.identifierFields}}))),options:s}}async _fetchService(e,s){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:\"service\",url:E(e)});const r=await t(e,{responseType:\"json\",query:{f:\"json\"},...s});this.read(r.data)}};function q(e){const t=e.data,s=[];return{results:t.map((e=>{const t={addResults:e.addResults??[],updateResults:e.updateResults??[],deleteResults:e.deleteResults??[],attachments:e.attachments,editMoment:e.editMoment},r=h(t),i=e.editedFeatures,a=i?.spatialReference?new p({wkid:i?.spatialReference.wkid,wkt:i?.spatialReference.wkt,latestWkid:i?.spatialReference.latestWkid,latestVcsWkid:i?.spatialReference.latestVcsWkid,vcsWkid:i?.spatialReference.vcsWkid}):null,o=i?S(i,a):null;return o&&s.push({layerId:e.id,editedFeatures:o}),{id:e.id,editedFeatures:o,...r}})),editedFeatures:s}}e([u()],J.prototype,\"url\",void 0),e([u()],J.prototype,\"sourceJSON\",void 0),e([u({readOnly:!0})],J.prototype,\"utilityNetworkUrl\",null),e([u({readOnly:!0})],J.prototype,\"versionManagementServiceUrl\",null),e([u()],J.prototype,\"userTypeExtensions\",void 0),e([u({json:{read:{source:\"layers\"}}})],J.prototype,\"layerInfos\",void 0),e([u({json:{read:{source:\"tables\"}}})],J.prototype,\"tableInfos\",void 0),e([u({readOnly:!0,json:{read:{source:[\"hasVersionedData\",\"capabilities\",\"supportsQueryDataElements\",\"supportsQueryDomains\",\"supportsQueryContingentValues\",\"maxRecordCountFactor\",\"maxRecordCount\",\"advancedEditingCapabilities\",\"supportsApplyEditsWithGlobalIds\",\"syncCapabilities\",\"datesInUnknownTimezone\"]}}})],J.prototype,\"capabilities\",void 0),e([d(\"service\",\"capabilities\")],J.prototype,\"readCapabilities\",null),J=e([l(\"esri.rest.featureService.FeatureService\")],J);const P=J;export{P as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{parse as e}from\"../../layers/support/arcgisLayerUrl.js\";import r from\"./FeatureService.js\";const t=(s,o)=>{for(const u of s)if(\"feature\"===u.type||\"subtype-group\"===u.type){if(!u.url)continue;const t=e(u.url).url.path,s=o.get(t);if(s)s.layers.push(u);else{const e=new r({url:t}),s=[u];o.set(t,{featureService:e,layers:s})}}else\"group\"===u.type&&t(u.layers,o)};function s(e){const r=new Map;return t(e,r),r}export{s as createFeatureServices};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this.moments=[],this.forwardMoments=[],this.moments.push(t)}push(t){return this.forwardMoments.length,this.moments.push(t)}pop(){if(!(this.forwardMoments.length>0))return this.moments.pop()}undo(){if(!this.canUndo())return;const t=this.moments.pop();return this.forwardMoments.push(t),t}peek(){return this.moments.at(-1)}canUndo(){return this.moments.length>1}canRedo(){return this.hasForwardEdits()}redo(){if(!this.canRedo())return;const t=this.forwardMoments.pop();return this.moments.push(t),t}size(){return this.moments.length+this.forwardMoments.length}hasForwardEdits(){return this.forwardMoments.length>0}clearForwardEdits(){this.forwardMoments=[]}}export{t as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../request.js\";import r from\"../core/Error.js\";import{JSONSupportMixin as i}from\"../core/JSONSupport.js\";import s from\"../core/Loadable.js\";import{removeTrailingSlash as n,Url as o}from\"../core/urlUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{reader as l}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import{onApplyEditsEvent as c,emitUpdateMomentEvent as m}from\"../layers/mixins/EditBusLayer.js\";import{parseUrl as g}from\"../rest/utils.js\";import p from\"./support/EditMomentStack.js\";import{versionCollection as f,versionCollectionCount as h,defaultVersionNameLookup as V,currentSessionId as v}from\"./support/versionManagementUtils.js\";let y=class extends(i(s)){constructor(e){super(e),this.url=null,this.sourceJSON=null,this.name=null,this.defaultVersionIdentifier=null,this.capabilities=null,this._applyEditsHandler=e=>{const{serviceUrl:t,gdbVersion:r,result:i}=e;t===this._featureServiceUrl&&i.then((e=>{const t=e.historicMoment;t&&this._addMomentToVersionItem(r,t)}))}}initialize(){this.url=n(this.url),this._featureServiceUrl=this.url.replace(/\\/VersionManagementServer/i,\"/FeatureServer\"),f.has(this.url)||f.set(this.url,new Map);const e=(h.get(this.url)??0)+1;h.set(this.url,e),this.when().then((()=>this.addHandles(c(this._applyEditsHandler))),(()=>{}))}destroy(){const e=(h.get(this.url)??1)-1;h.set(this.url,e),0===e&&f.delete(this.url),V.delete(this._featureServiceUrl)}read(e,t){this.sourceJSON=e,super.read(e,t)}readDefaultVersionIdentifier(e,t){return{name:t.defaultVersionName,guid:t.defaultVersionGuid}}writeDefaultVersionIdentifier(e,t){t.defaultVersionName=e.name,t.defaultVersionGuid=e.guid}load(e){return this.addResolvingPromise(this._fetchService(this.url,e)),Promise.resolve(this)}async createVersion(e){const[{createVersion:t},{default:r}]=await Promise.all([import(\"../rest/versionManagement/createVersion.js\"),import(\"../rest/versionManagement/support/CreateVersionParameters.js\")]),i=r.from(e);return t(this.url,i)}async deleteVersion(e){const[{deleteVersion:t},{default:r}]=await Promise.all([import(\"../rest/versionManagement/deleteVersion.js\"),import(\"../rest/versionManagement/support/DeleteVersionParameters.js\")]);let i;e.guid&&f.get(this.url)?.has(e.guid)&&(i=v??void 0);const s=new r({versionName:e.name,sessionId:i});return t(this.url,s)}async getVersionInfoExtended(e){const{getVersion:t}=await import(\"../rest/versionManagement/getVersion.js\");return t(this.url,e.guid)}async getVersionInfos(e={}){const[{getVersionInfos:t},{default:r}]=await Promise.all([import(\"../rest/versionManagement/getVersionInfos.js\"),import(\"../rest/versionManagement/support/GetVersionInfosParameters.js\")]),i=r.from(e);return t(this.url,i)}async reconcile(e,t={}){const[{reconcile:r},{default:i}]=await Promise.all([import(\"../rest/versionManagement/gdbVersion/reconcile.js\"),import(\"../rest/versionManagement/gdbVersion/support/ReconcileParameters.js\")]),s=i.from(t);return s.sessionId=v,r(this.url,e.guid,s)}async post(e){const[{post:t},{default:r}]=await Promise.all([import(\"../rest/versionManagement/gdbVersion/post.js\"),import(\"../rest/versionManagement/gdbVersion/support/PostParameters.js\")]),i=r.from({sessionId:v});return t(this.url,e.guid,i)}async alterVersion(e,t){const[{alterVersion:r},{default:i}]=await Promise.all([import(\"../rest/versionManagement/gdbVersion/alterVersion.js\"),import(\"../rest/versionManagement/gdbVersion/support/AlterVersionParameters.js\")]),s=i.from(t);return r(this.url,e.guid,s)}async startReading(e){const{startReading:t}=await import(\"../rest/versionManagement/gdbVersion/startReading.js\"),r=await t(this.url,e.guid,v);if(r){const t=await this.getVersionInfoExtended(e),r=new Date(t.modifiedDate),i={name:t.versionIdentifier.name,moment:r,lockType:\"read\"};this._addOrUpdateItem(e.guid,i),m(this._featureServiceUrl,null,e.name,r)}return r}async stopReading(e){const{stopReading:t}=await import(\"../rest/versionManagement/gdbVersion/stopReading.js\"),r=await t(this.url,e.guid,v);return r&&(f.get(this.url)?.delete(e.guid),m(this._featureServiceUrl,null,e.name,null)),r}async startEditing(e){const{startEditing:t}=await import(\"../rest/versionManagement/gdbVersion/startEditing.js\"),r=await t(this.url,e.guid,v);if(r){const t=await this.getVersionInfoExtended(e),r=new Date(t.modifiedDate),i=new p(r),s={name:e.name,moment:r,lockType:\"edit\",stack:i};this._addOrUpdateItem(e.guid,s),m(this._featureServiceUrl,null,e.name,r)}return r}async stopEditing(e,t){if(t){const t=f.get(this.url)?.get(e.guid);if(t?.stack?.canRedo()){const[{deleteForwardEdits:r},{default:i}]=await Promise.all([import(\"../rest/versionManagement/gdbVersion/deleteForwardEdits.js\"),import(\"../rest/versionManagement/gdbVersion/support/DeleteForwardEditsParameters.js\")]);if(!await r(this.url,e.guid,new i({sessionId:v,moment:t.moment})))return!1}}const{stopEditing:r}=await import(\"../rest/versionManagement/gdbVersion/stopEditing.js\"),i=await r(this.url,e.guid,v,t);if(i){const t=await this.getVersionInfoExtended(e),r=new Date(t.modifiedDate);this._addOrUpdateItem(e.guid,{name:e.name,moment:r,lockType:\"read\",editMomentStack:void 0}),m(this._featureServiceUrl,null,e.name,r)}return i}getLockType(e){const t=f.get(this.url)?.get(e.guid)?.lockType;return t??\"none\"}changeVersionInternal(e,t,r){let i=null,s=null,n=null,o=null;const a=e=>!e||e===this.defaultVersionIdentifier.name,l=e=>{const t=f?.get(this.url)?.get(e.guid);n=e.name,o=t?.moment??null},u=(e,t)=>!e&&!t||!(!e||!t)&&e.toISOString()===t.toISOString();if(\"name\"in t){if(\"none\"!==this.getLockType(t))return!1;i=t.name,s=null,\"name\"in r?l(r):(n=this.defaultVersionIdentifier.name,o=r)}else i=this.defaultVersionIdentifier.name,s=t,\"name\"in r?l(r):(n=this.defaultVersionIdentifier.name,o=r);return(a(i)&&a(e.gdbVersion)&&u(e.historicMoment,s)||i===e.gdbVersion&&u(e.historicMoment,s))&&(e.gdbVersion=n,e.historicMoment=o),!0}async changeVersion(e,t,i){if(\"name\"in i&&!await this.getVersionInfoExtended(i))throw new r(\"version-management-service:invalid-version\",\"version does not exist\");if(\"networkServiceUrl\"in e){if(this._featureServiceUrl.toLowerCase()===e.featureServiceUrl.toLowerCase())return this.changeVersionInternal(e,t,i)}else{let r;\"layers\"in e?(r=e.allTables.concat(e.allLayers),e.utilityNetworks&&e.utilityNetworks.forEach((e=>{this._featureServiceUrl.toLowerCase()===e.featureServiceUrl.toLowerCase()&&this.changeVersionInternal(e,t,i)}))):r=e;for(const e of r)if(\"feature\"===e.type||\"subtype-group\"===e.type){const r=/^(.*\\/FeatureServer)\\/\\d+$/,s=e.url.replace(r,\"$1\");if(this._featureServiceUrl.toLowerCase()===s.toLowerCase()&&!this.changeVersionInternal(e,t,i))return!1}else if(\"group\"===e.type){const r=e.allTables.concat(e.allLayers);for(const e of r)if(\"feature\"===e.type||\"subtype-group\"===e.type){const r=/^(.*\\/FeatureServer)\\/\\d+$/,s=e.url.replace(r,\"$1\");if(this._featureServiceUrl.toLowerCase()===s.toLowerCase()&&!this.changeVersionInternal(e,t,i))return!1}}}return!0}async getVersionIdentifierFromName(e){try{const t=await this.getVersionInfos({includeHidden:!0});return t.find((t=>t.versionIdentifier.name===e))?.versionIdentifier||null}catch{return null}}async getVersionIdentifierFromGuid(e){const{getVersion:t}=await import(\"../rest/versionManagement/getVersion.js\");try{return(await t(this.url,e)).versionIdentifier}catch{return null}}canUndo(e){const t=f.get(this.url)?.get(e.guid);return!!t?.stack?.canUndo()}canRedo(e){const t=f.get(this.url)?.get(e.guid);return!!t?.stack?.canRedo()}undo(e){const t=f.get(this.url)?.get(e.guid),r=t?.stack?.undo()||void 0;if(t&&r){const r=t.stack.peek();m(this._featureServiceUrl,null,e.name,r),f.get(this.url)?.set(e.guid,{...t,moment:r})}}redo(e){const t=f.get(this.url)?.get(e.guid),r=t?.stack?.redo()||void 0;t&&r&&(m(this._featureServiceUrl,null,e.name,r),f.get(this.url)?.set(e.guid,{...t,moment:r}))}_addMomentToVersionItem(e,t){const r=f.get(this.url);if(r)for(const[i,s]of r){s.name===e&&this._addToStack(i,t)}}_addToStack(e,t){const r=f.get(this.url),i=r?.get(e);return!!i?.stack&&(w(i.stack.peek(),t)&&i.stack.push(t),r.set(e,{...i,moment:t}),!0)}_addOrUpdateItem(e,t){const r=f.get(this.url),i=r?.get(e);return i?(r.set(e,{...i,...t}),!0):!(!t.name||!t.lockType)&&(r?.set(e,{...t,lockType:t.lockType}),!0)}async _fetchService(e,r){if(this.sourceJSON){this.read(this.sourceJSON,{origin:\"service\",url:g(e)});const t=new o(this.url).host;return void V.set(t,this.defaultVersionIdentifier.name)}const i=await t(e,{responseType:\"json\",query:{f:\"json\"},...r});this.read(i.data)}};function w(e,t){if(e){return e.getTime()<t.getTime()}return!0}e([a()],y.prototype,\"url\",void 0),e([a()],y.prototype,\"sourceJSON\",void 0),e([a({type:String,json:{write:!0}})],y.prototype,\"name\",void 0),e([a({json:{write:{target:{defaultVersionName:{type:String},defaultVersionGuid:{type:String}}},read:{source:[\"defaultVersionName\",\"defaultVersionGuid\"]}}})],y.prototype,\"defaultVersionIdentifier\",void 0),e([l(\"defaultVersionIdentifier\",[\"defaultVersionName\",\"defaultVersionGuid\"])],y.prototype,\"readDefaultVersionIdentifier\",null),e([d(\"defaultVersionIdentifier\",{defaultVersionName:{type:String},defaultVersionGuid:{type:String}})],y.prototype,\"writeDefaultVersionIdentifier\",null),e([a({json:{write:!0}})],y.prototype,\"capabilities\",void 0),y=e([u(\"esri.versionManagement.VersionManagementService\")],y);const S=y;export{S as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import o from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{watch as t,initial as s}from\"../../core/reactiveUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as d}from\"../../core/support/UpdatingHandles.js\";import u from\"../../portal/Portal.js\";import{hasUserTypeExtension as p}from\"../../portal/support/utils.js\";import{createFeatureServices as c}from\"../../rest/featureService/utils.js\";import h from\"../../versionManagement/VersionManagementService.js\";let l=class extends r{constructor(e){super(e),this._initialValidationsFinished=!1,this._portalLookup=new Map,this._updatingHandles=new d,this._validConstructProperties=!0,this.advancedEditingUserTypeExtensionLookup=new Map,this.executionError=void 0,this.featureServiceLookup=new Map,this.loadError=void 0,this.serverVersionLookup=new Map,this.serviceNameLookup=new Map,this.userLookup=new Map,this.versionIdentifierLookup=new Map,this.versionInfoLookup=new Map,this.versionManagementServiceLookup=new Map}initialize(){this.addHandles([t((()=>this.view?.map.layers.toArray()),(async()=>{await this._onLayersChange()}),s)])}destroy(){this._updatingHandles.destroy()}get state(){return this.loadError||!this._validConstructProperties?\"disabled\":this.executionError?\"failed\":this._updatingHandles.updating?\"executing\":this._initialValidationsFinished?\"ready\":\"loading\"}set view(e){this._get(\"view\")!==e&&this._set(\"view\",e)}async alterVersion(e){\"disabled\"!==this.state?await this._updatingHandles.addPromise((async()=>{this._setExecutionError();const r=this.versionManagementServiceLookup.get(e.featureServerUrl);if(!r)return void this._logNoVersionManagementServiceFoundError();if(!this.serverVersionLookup.has(e.featureServerUrl)||this.serverVersionLookup.get(e.featureServerUrl)<=11.1)return void this._logError(\"execution-error\",\"no-valid-enterprise-version\");if(!this.advancedEditingUserTypeExtensionLookup.get(e.featureServerUrl))return void this._logError(\"execution-error\",\"no-advanced-editing-user-type-extension\");const{featureServerUrl:o,versionIdentifier:i,...t}=e;await r.alterVersion(i,t).catch((async e=>{await this.getVersionInfos(o,!0),this._logExecutionError(e)}))})()):this._logError(\"load-error\",this.loadError)}async changeVersion(e,r,o){\"disabled\"!==this.state?await this._updatingHandles.addPromise((async()=>{this._setExecutionError();const i=this.versionManagementServiceLookup.get(e);if(!i)return void this._logNoVersionManagementServiceFoundError();const t=this.versionIdentifierLookup.get(e)??{name:i.defaultVersionIdentifier.name,guid:i.defaultVersionIdentifier.guid},s={name:r,guid:o};await i.changeVersion(this.view?.map,t,s).catch((e=>{this._logExecutionError(e)}))&&this.versionIdentifierLookup.set(e,s)})()):this._logError(\"load-error\",this.loadError)}async createVersion(e){\"disabled\"!==this.state?await this._updatingHandles.addPromise((async()=>{this._setExecutionError();const r=e.featureServerUrl,o=this.versionManagementServiceLookup.get(r);if(!o)return void this._logNoVersionManagementServiceFoundError();const i=this.advancedEditingUserTypeExtensionLookup.get(e.featureServerUrl),t=this.userLookup.get(r).toUpperCase(),s=this._isEmptyString(e.ownerName)?t:e.ownerName?.trim().toUpperCase();if(s!==t){if(this.serverVersionLookup.get(r)<=11.1)return void this._logError(\"execution-error\",\"versioning-api-error\");if(!i)return void this._logError(\"execution-error\",\"no-advanced-editing-user-type-extension\")}if(\"SDE\"===s?.toUpperCase()&&\"DEFAULT\"===e.versionName.toUpperCase()||this.versionInfoLookup.get(r)?.find((r=>r.versionIdentifier.name.toUpperCase()===(s+\".\"+e.versionName).toUpperCase()||r.versionIdentifier.name.toUpperCase()===(t+\".\"+e.versionName).toUpperCase())))return void this._logError(\"execution-error\",\"no-valid-version-name\");const n=await o.createVersion({versionName:e.versionName,access:s!==t?\"public\":e.access,description:e.description}).catch((e=>{this._logExecutionError(e)}));if(!this.executionError&&s!==t){const{guid:o,name:i}=n.versionIdentifier,a={featureServerUrl:r,versionIdentifier:{guid:o,name:i},access:e.access,ownerName:s};await this.alterVersion(a),this.executionError&&this.deleteVersion(r,t+\".\"+e.versionName,n.versionIdentifier.guid)}await this.getVersionInfos(r,!0)})()):this._logError(\"load-error\",this.loadError)}async deleteVersion(e,r,o){\"disabled\"!==this.state?await this._updatingHandles.addPromise((async()=>{this._setExecutionError();const i=this.versionManagementServiceLookup.get(e);if(!i)return void this._logNoVersionManagementServiceFoundError();if(this.serverVersionLookup.get(e)<=11.1)return void this._logError(\"execution-error\",\"versioning-api-error\");if(!this.advancedEditingUserTypeExtensionLookup.get(e))return void this._logError(\"execution-error\",\"no-advanced-editing-user-type-extension\");const t={name:r,guid:o};await i.deleteVersion(t).catch((e=>{this._logExecutionError(e)}))&&await this.getVersionInfos(e,!0).catch((e=>{this._logExecutionError(e)}))})()):this._logError(\"load-error\",this.loadError)}async getVersionInfos(e,r){if(\"disabled\"!==this.state)return await this._updatingHandles.addPromise((async()=>{this._setExecutionError();const o=this.featureServiceLookup.get(e)?.featureService;if(!o)return void this._logError(\"execution-error\",\"no-feature-service-found\");if(!o.loaded){await o.load().catch((e=>{this._logExecutionError(e)}));const r=o.url;this.serverVersionLookup.set(r,o.sourceJSON?.currentVersion??0),this.serverVersionLookup.get(r)<=11.1&&this.advancedEditingUserTypeExtensionLookup.set(r,!1);const i=this.userLookup.get(e);this._portalLookup.get(e)&&i?this.advancedEditingUserTypeExtensionLookup.set(r,await p(this._portalLookup.get(e),i,\"advediting\")):this.advancedEditingUserTypeExtensionLookup.set(r,!1)}o.versionManagementServiceUrl&&this.versionManagementServiceLookup.set(o.url,new h({url:o.versionManagementServiceUrl}));const i=this.versionManagementServiceLookup.get(e);if(i){if(i.loaded||await i.load().catch((e=>{this._logExecutionError(e)})),!this.versionInfoLookup.get(e)||r){const r=await i.getVersionInfos().catch((e=>{this._logExecutionError(e)}));this.versionInfoLookup.set(e,r)}}else this._logNoVersionManagementServiceFoundError()})()),this.versionInfoLookup.get(e);this._logError(\"load-error\",this.loadError)}_isEmptyString(e){return!e||0===e.trim().length}_logError(e,r){switch(e){case\"load-error\":this._setLoadError(r),i.getLogger(this).error(new o(e,r));break;case\"execution-error\":this._setExecutionError(r),i.getLogger(this).error(new o(e,r))}}_logExecutionError(e){this._logError(\"execution-error\",e.message)}_logNoVersionManagementServiceFoundError(){this._logError(\"execution-error\",\"no-version-management-service-found\")}async _onLayersChange(){if(this._initialValidationsFinished=!1,this._setLoadError(),this._validConstructProperties=!0,!this.view)return this._logError(\"load-error\",\"no-view-property\"),void(this._validConstructProperties=!1);if(this.featureServiceLookup=c(this.view.map.layers),!this.featureServiceLookup.size)return this._logError(\"load-error\",\"no-feature-services\"),void(this._validConstructProperties=!1);for(const e of this.featureServiceLookup.keys())if(!this.serviceNameLookup.has(e)){this.serviceNameLookup.set(e,e.split(\"/\").at(-2));const r=new u({authMode:\"immediate\",url:new URL(e).origin+\"/portal\"});await r.load(),this._portalLookup.set(e,r);const o=r?.user?.username;o&&this.userLookup.set(e,o)}this._initialValidationsFinished=!0}_setExecutionError(e){this._set(\"executionError\",e)}_setLoadError(e){this._set(\"loadError\",e)}};e([n()],l.prototype,\"_initialValidationsFinished\",void 0),e([n({readOnly:!0})],l.prototype,\"advancedEditingUserTypeExtensionLookup\",void 0),e([n({readOnly:!0})],l.prototype,\"executionError\",void 0),e([n()],l.prototype,\"featureServiceLookup\",void 0),e([n({readOnly:!0})],l.prototype,\"loadError\",void 0),e([n({readOnly:!0})],l.prototype,\"serverVersionLookup\",void 0),e([n()],l.prototype,\"serviceNameLookup\",void 0),e([n({readOnly:!0})],l.prototype,\"state\",null),e([n({readOnly:!0})],l.prototype,\"userLookup\",void 0),e([n({readOnly:!0})],l.prototype,\"versionIdentifierLookup\",void 0),e([n()],l.prototype,\"versionInfoLookup\",void 0),e([n()],l.prototype,\"versionManagementServiceLookup\",void 0),e([n()],l.prototype,\"view\",null),l=e([a(\"esri.widgets.VersionManagement.VersionManagementViewModel\")],l);const v=l;export{v as default};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIs8C,SAASA,GAAEC,IAAE;AAAC,SAAM,EAAC,MAAKC,GAAED,EAAC,GAAE,MAAKE,GAAEF,EAAC,GAAE,YAAWG,GAAEH,GAAE,cAAaA,EAAC,GAAE,OAAM,EAAEA,EAAC,GAAE,SAAQI,GAAEJ,EAAC,EAAC;AAAC;AAAC,SAASC,GAAED,IAAE;AAAC,SAAM,EAAC,iBAAgBK,GAAEL,IAAE,oBAAmB,KAAE,EAAC;AAAC;AAAC,SAASG,GAAEH,IAAEM,IAAE;AAAC,QAAMC,KAAEP,KAAEA,GAAE,YAAY,EAAE,MAAM,GAAG,EAAE,IAAK,CAAAA,OAAGA,GAAE,KAAK,CAAE,IAAE,CAAC,GAAEQ,KAAED,GAAE,SAAS,OAAO,GAAEE,KAAEF,GAAE,SAAS,SAAS,KAAG,CAACD,GAAE;AAAuB,MAAII,KAAED,MAAGF,GAAE,SAAS,QAAQ,GAAEI,KAAEF,MAAGF,GAAE,SAAS,QAAQ,GAAEF,KAAEI,MAAGF,GAAE,SAAS,QAAQ;AAAE,SAAOE,MAAG,EAAEC,MAAGC,MAAGN,QAAKK,KAAEC,KAAEN,KAAE,OAAI,EAAC,aAAYK,IAAE,gBAAeC,IAAE,iBAAgBF,IAAE,wBAAuBF,GAAE,SAAS,gBAAgB,GAAE,eAAcC,IAAE,2BAA0BH,GAAEC,IAAE,6BAA4B,KAAE,GAAE,sBAAqBD,GAAEC,IAAE,wBAAuB,KAAE,GAAE,+BAA8BD,GAAEC,IAAE,iCAAgC,KAAE,GAAE,cAAaC,GAAE,SAAS,MAAM,GAAE,gBAAeF,GAAC;AAAC;AAAC,SAAS,EAAEL,IAAE;AAAC,SAAM,EAAC,sBAAqBQ,GAAER,IAAE,wBAAuB,MAAM,GAAE,gBAAeQ,GAAER,IAAE,kBAAiB,MAAM,EAAC;AAAC;AAAC,SAASI,GAAEJ,IAAE;AAAC,QAAMM,KAAEN,MAAA,gBAAAA,GAAG;AAA4B,SAAM,EAAC,kBAAiBK,GAAEL,IAAE,mCAAkC,KAAE,GAAE,oDAAmDK,GAAEC,IAAE,wCAAuC,KAAE,GAAE,eAAcD,GAAEC,IAAE,iBAAgB,KAAE,GAAE,yBAAwBD,GAAEC,IAAE,2BAA0B,KAAE,EAAC;AAAC;AAAC,SAASJ,GAAEF,IAAE;AAAC,QAAMM,KAAEN,MAAA,gBAAAA,GAAG,kBAAiBO,KAAED,MAAA,gBAAAA,GAAG;AAAyB,SAAM,EAAC,eAAcD,GAAEC,IAAE,iBAAgB,KAAE,GAAE,0BAAyB,EAAC,aAAY,EAAE,IAAE,CAACC,KAAG,YAAW,EAAE,IAAE,CAACA,KAAG,kBAAiB,EAAE,IAAE,CAACA,KAAG,gBAAe,EAAE,IAAE,CAACA,KAAG,sBAAqB,EAAE,KAAG,CAACA,KAAG,qBAAoB,EAAE,KAAG,CAACA,KAAG,kBAAiB,EAAE,KAAG,CAACA,KAAG,6BAA4B,EAAE,MAAI,CAACA,KAAG,oBAAmB,EAAE,MAAI,CAACA,IAAE,EAAC;AAAC;AAAC,IAAI,IAAE,cAAc,EAAEA,GAAE,CAAC,CAAC,EAAE;AAAA,EAAC,YAAYP,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,MAAI,MAAK,KAAK,aAAW,MAAK,KAAK,qBAAmB,CAAC,GAAE,KAAK,aAAW,CAAC,GAAE,KAAK,aAAW,CAAC,GAAE,KAAK,eAAa;AAAA,EAAI;AAAA,EAAC,KAAKA,IAAEM,IAAE;AAAC,SAAK,aAAWN,IAAE,MAAM,KAAKA,IAAEM,EAAC;AAAA,EAAC;AAAA,EAAC,IAAI,oBAAmB;AAAC,eAAUN,MAAK,KAAK,WAAW;AAAO,UAAG,4BAA0BA,GAAE;AAAK,eAAM,GAAG,KAAK,GAAG,IAAIA,GAAE,EAAE;AAAG,WAAO;AAAA,EAAI;AAAA,EAAC,IAAI,8BAA6B;AAAC,WAAO,KAAK,WAAW,yBAAuB,KAAK,IAAI,QAAQ,oBAAmB,0BAA0B,IAAE;AAAA,EAAI;AAAA,EAAC,iBAAiBA,IAAEM,IAAE;AAAC,WAAOP,GAAEO,EAAC;AAAA,EAAC;AAAA,EAAC,KAAKN,IAAE;AAAC,WAAO,KAAK,oBAAoB,KAAK,cAAc,KAAK,KAAIA,EAAC,CAAC,GAAE,QAAQ,QAAQ,IAAI;AAAA,EAAC;AAAA,EAAC,MAAM,WAAWA,IAAEM,IAAE;AAAC,QAAIC,KAAE;AAAK,QAAG;AAAC,YAAK,EAAC,SAAQC,IAAE,OAAMC,IAAE,gBAAeC,GAAC,IAAE,MAAM,KAAK,oBAAoBV,IAAEM,EAAC,GAAED,KAAE,CAAAL,OAAGA,GAAE,OAAQ,CAAAA,OAAG,CAACA,GAAE,KAAM,EAAE,IAAI,CAAC;AAAE,UAAIY,KAAE;AAAE,aAAOJ,GAAE,IAAK,CAAAR,OAAG;AAAC,QAAAO,KAAE,EAAE,KAAK,KAAIP,GAAE,IAAGM,MAAA,gBAAAA,GAAG,YAAW,IAAE;AAAE,cAAME,KAAE,EAAC,OAAMC,GAAEG,EAAC,GAAE,eAAcP,GAAEL,GAAE,iBAAiB,GAAE,iBAAgBK,GAAEL,GAAE,oBAAoB,GAAE,iBAAgBK,GAAEL,GAAE,oBAAoB,GAAE,kBAAiBK,GAAEL,GAAE,oBAAoB,GAAE,oBAAmBK,GAAEL,GAAE,uBAAuB,GAAE,oBAAmBK,GAAEL,GAAE,uBAAuB,GAAE,uBAAsB,OAAG,gBAAeA,GAAE,aAAW,IAAI,KAAKA,GAAE,UAAU,IAAE,KAAI;AAAE,QAAAY,MAAG,GAAEF,GAAE,SAAO,MAAIF,GAAE,iBAAeE,KAAGH,GAAE,QAAQC,EAAC,GAAED,KAAE;AAAA,MAAI,CAAE,GAAEC;AAAA,IAAC,SAAOA,IAAE;AAAC,YAAMD,MAAGA,GAAE,OAAOC,EAAC,GAAEA;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,oBAAoBR,IAAEQ,IAAE;AAAC,UAAMC,MAAED,MAAA,gBAAAA,GAAG,iBAAc,OAAGE,KAAE,EAAE,SAAS,KAAK,WAAW,gBAAgB,GAAE,EAAC,OAAMC,IAAE,SAAQN,GAAC,IAAE,MAAM,KAAK,yBAAyBL,IAAEQ,EAAC,GAAEI,KAAE,MAAM,QAAQ,IAAID,GAAE,IAAK,OAAMX,OAAG;AAJx+I;AAIy+I,YAAMM,OAAE,KAAAN,GAAE,gBAAF,mBAAe,IAAK,CAAAA,OAAGa,GAAE,EAAC,kBAAiBH,GAAC,GAAEV,IAAE,IAAI,OAAK,CAAC,GAAEQ,MAAG,MAAM,QAAQ,IAAIF,EAAC,GAAG,OAAO,CAAC,GAAEK,OAAE,KAAAX,GAAE,mBAAF,mBAAkB,IAAK,CAAAA,OAAGa,GAAE,EAAC,kBAAiBH,GAAC,GAAEV,IAAE,IAAI,OAAK,CAAC,GAAEK,MAAG,MAAM,QAAQ,IAAIM,EAAC,GAAG,OAAO,CAAC,GAAEC,KAAE,EAAEZ,GAAE,kBAAiBA,GAAE,gBAAeS,EAAC;AAAE,MAAAA,GAAED,IAAEH,IAAEK,EAAC;AAAE,YAAMI,KAAE,MAAMC,GAAEf,GAAE,kBAAiBA,EAAC;AAAE,aAAM,EAAC,IAAGA,GAAE,IAAG,MAAKQ,IAAE,SAAQH,IAAE,SAAQO,IAAE,aAAYE,GAAC;AAAA,IAAC,CAAE,CAAC,GAAEA,KAAE,EAAC,YAAWT,MAAA,gBAAAA,GAAG,YAAW,mBAAkB,MAAG,cAAaI,IAAE,kBAAiB,MAAG,sBAAqBJ,MAAA,gBAAAA,GAAG,sBAAqB,uBAAsBA,MAAA,gBAAAA,GAAG,uBAAsB,8BAA6BA,MAAA,gBAAAA,GAAG,8BAA6B,0BAAyB,8BAA6B,OAAM,MAAE;AAAE,UAAMI,GAAE,KAAK,KAAID,MAAA,gBAAAA,GAAG,YAAW,IAAE;AAAE,UAAMQ,KAAE,EAAE,KAAK,MAAIR,MAAA,gBAAAA,GAAG,eAAY,IAAI;AAAE,IAAAM,GAAE,QAAM,KAAK,UAAUF,EAAC;AAAE,UAAMK,KAAEC,GAAE,KAAK,GAAG,GAAEC,KAAE,EAAEF,GAAE,OAAM,EAAC,OAAMV,GAAE,EAAC,GAAGO,IAAE,GAAE,OAAM,CAAC,GAAE,QAAO,OAAM,CAAC;AAAE,QAAIM;AAAE,IAAAJ,OAAIG,GAAE,WAAS,aAAYA,GAAE,MAAM,YAAU;AAAG,QAAG;AAAC,MAAAC,KAAE,MAAM,EAAE,KAAK,MAAI,eAAcD,EAAC;AAAA,IAAC,SAAOE,IAAE;AAAC,UAAG,CAACJ,GAAEI,EAAC;AAAE,cAAMA;AAAE,MAAAF,GAAE,WAAS,aAAYC,KAAE,MAAM,EAAE,KAAK,MAAI,eAAcD,EAAC;AAAA,IAAC;AAAC,WAAM,EAAC,GAAG,EAAEC,EAAC,GAAE,OAAMT,GAAC;AAAA,EAAC;AAAA,EAAC,MAAM,yBAAyBX,IAAEM,IAAE;AAAC,UAAMC,KAAE,EAAC,GAAGD,GAAC;AAAE,WAAM,EAAC,OAAM,MAAM,QAAQ,IAAIN,GAAE,IAAK,OAAMA,OAAG;AAAC,YAAMO,KAAE,KAAK,cAAaE,KAAET,OAAIA,GAAE,eAAaA,GAAE,kBAAgBA,GAAE,iBAAgBU,KAAEV,OAAIA,GAAE,kBAAgBA,GAAE,qBAAmBA,GAAE;AAAmB,UAAG,EAAEA,IAAEO,IAAED,IAAE,CAAC,CAACG,IAAE,CAAC,CAACC,IAAE,iBAAiB,GAAE,CAACH,GAAE,KAAK,oBAAiBD,MAAA,gBAAAA,GAAG;AAAW,cAAM,IAAI,EAAE,qCAAoC,4GAA4G;AAAE,YAAMK,KAAE,EAAEX,IAAEO,IAAE,iBAAiB;AAAE,aAAM,EAAC,GAAG,MAAM,EAAEI,EAAC,GAAE,IAAGX,GAAE,IAAG,kBAAiBA,GAAE,iBAAgB;AAAA,IAAC,CAAE,CAAC,GAAE,SAAQO,GAAC;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcP,IAAEO,IAAE;AAAC,QAAG,KAAK;AAAW,aAAO,KAAK,KAAK,KAAK,KAAK,YAAW,EAAC,QAAO,WAAU,KAAIW,GAAElB,EAAC,EAAC,CAAC;AAAE,UAAMQ,KAAE,MAAM,EAAER,IAAE,EAAC,cAAa,QAAO,OAAM,EAAC,GAAE,OAAM,GAAE,GAAGO,GAAC,CAAC;AAAE,SAAK,KAAKC,GAAE,IAAI;AAAA,EAAC;AAAC;AAAE,SAAS,EAAER,IAAE;AAAC,QAAMM,KAAEN,GAAE,MAAKO,KAAE,CAAC;AAAE,SAAM,EAAC,SAAQD,GAAE,IAAK,CAAAN,OAAG;AAAC,UAAMM,KAAE,EAAC,YAAWN,GAAE,cAAY,CAAC,GAAE,eAAcA,GAAE,iBAAe,CAAC,GAAE,eAAcA,GAAE,iBAAe,CAAC,GAAE,aAAYA,GAAE,aAAY,YAAWA,GAAE,WAAU,GAAEQ,KAAE,EAAEF,EAAC,GAAEG,KAAET,GAAE,gBAAeU,MAAED,MAAA,gBAAAA,GAAG,oBAAiB,IAAI,EAAE,EAAC,MAAKA,MAAA,gBAAAA,GAAG,iBAAiB,MAAK,KAAIA,MAAA,gBAAAA,GAAG,iBAAiB,KAAI,YAAWA,MAAA,gBAAAA,GAAG,iBAAiB,YAAW,eAAcA,MAAA,gBAAAA,GAAG,iBAAiB,eAAc,SAAQA,MAAA,gBAAAA,GAAG,iBAAiB,QAAO,CAAC,IAAE,MAAKE,KAAEF,KAAE,EAAEA,IAAEC,EAAC,IAAE;AAAK,WAAOC,MAAGJ,GAAE,KAAK,EAAC,SAAQP,GAAE,IAAG,gBAAeW,GAAC,CAAC,GAAE,EAAC,IAAGX,GAAE,IAAG,gBAAeW,IAAE,GAAGH,GAAC;AAAA,EAAC,CAAE,GAAE,gBAAeD,GAAC;AAAC;AAAC,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,OAAM,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,EAAE,WAAU,qBAAoB,IAAI,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,EAAE,WAAU,+BAA8B,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,sBAAqB,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,MAAK,EAAC,MAAK,EAAC,QAAO,SAAQ,EAAC,EAAC,CAAC,CAAC,GAAE,EAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,MAAK,EAAC,MAAK,EAAC,QAAO,SAAQ,EAAC,EAAC,CAAC,CAAC,GAAE,EAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,MAAG,MAAK,EAAC,MAAK,EAAC,QAAO,CAAC,oBAAmB,gBAAe,6BAA4B,wBAAuB,iCAAgC,wBAAuB,kBAAiB,+BAA8B,mCAAkC,oBAAmB,wBAAwB,EAAC,EAAC,EAAC,CAAC,CAAC,GAAE,EAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAAC,EAAE,WAAU,cAAc,CAAC,GAAE,EAAE,WAAU,oBAAmB,IAAI,GAAE,IAAE,EAAE,CAACG,GAAE,yCAAyC,CAAC,GAAE,CAAC;AAAE,IAAMY,KAAE;;;ACAnlP,IAAMC,KAAE,CAACC,IAAEC,OAAI;AAAC,aAAUC,MAAKF;AAAE,QAAG,cAAYE,GAAE,QAAM,oBAAkBA,GAAE,MAAK;AAAC,UAAG,CAACA,GAAE;AAAI;AAAS,YAAMH,KAAE,EAAEG,GAAE,GAAG,EAAE,IAAI,MAAKF,KAAEC,GAAE,IAAIF,EAAC;AAAE,UAAGC;AAAE,QAAAA,GAAE,OAAO,KAAKE,EAAC;AAAA,WAAM;AAAC,cAAMC,KAAE,IAAIC,GAAE,EAAC,KAAIL,GAAC,CAAC,GAAEC,KAAE,CAACE,EAAC;AAAE,QAAAD,GAAE,IAAIF,IAAE,EAAC,gBAAeI,IAAE,QAAOH,GAAC,CAAC;AAAA,MAAC;AAAA,IAAC;AAAK,kBAAUE,GAAE,QAAMH,GAAEG,GAAE,QAAOD,EAAC;AAAC;AAAE,SAASD,GAAEG,IAAE;AAAC,QAAME,KAAE,oBAAI;AAAI,SAAON,GAAEI,IAAEE,EAAC,GAAEA;AAAC;;;ACA5Z,IAAMC,KAAN,MAAO;AAAA,EAAC,YAAYA,IAAE;AAAC,SAAK,UAAQ,CAAC,GAAE,KAAK,iBAAe,CAAC,GAAE,KAAK,QAAQ,KAAKA,EAAC;AAAA,EAAC;AAAA,EAAC,KAAKA,IAAE;AAAC,WAAO,KAAK,eAAe,QAAO,KAAK,QAAQ,KAAKA,EAAC;AAAA,EAAC;AAAA,EAAC,MAAK;AAAC,QAAG,EAAE,KAAK,eAAe,SAAO;AAAG,aAAO,KAAK,QAAQ,IAAI;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,QAAG,CAAC,KAAK,QAAQ;AAAE;AAAO,UAAMA,KAAE,KAAK,QAAQ,IAAI;AAAE,WAAO,KAAK,eAAe,KAAKA,EAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,WAAO,KAAK,QAAQ,GAAG,EAAE;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,WAAO,KAAK,QAAQ,SAAO;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,WAAO,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,QAAG,CAAC,KAAK,QAAQ;AAAE;AAAO,UAAMA,KAAE,KAAK,eAAe,IAAI;AAAE,WAAO,KAAK,QAAQ,KAAKA,EAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,WAAO,KAAK,QAAQ,SAAO,KAAK,eAAe;AAAA,EAAM;AAAA,EAAC,kBAAiB;AAAC,WAAO,KAAK,eAAe,SAAO;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,SAAK,iBAAe,CAAC;AAAA,EAAC;AAAC;;;ACAgS,IAAIC,KAAE,cAAc,EAAE,CAAC,EAAE;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,MAAI,MAAK,KAAK,aAAW,MAAK,KAAK,OAAK,MAAK,KAAK,2BAAyB,MAAK,KAAK,eAAa,MAAK,KAAK,qBAAmB,CAAAA,OAAG;AAAC,YAAK,EAAC,YAAWC,IAAE,YAAWC,IAAE,QAAOC,GAAC,IAAEH;AAAE,MAAAC,OAAI,KAAK,sBAAoBE,GAAE,KAAM,CAAAH,OAAG;AAAC,cAAMC,KAAED,GAAE;AAAe,QAAAC,MAAG,KAAK,wBAAwBC,IAAED,EAAC;AAAA,MAAC,CAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,SAAK,MAAI,GAAE,KAAK,GAAG,GAAE,KAAK,qBAAmB,KAAK,IAAI,QAAQ,8BAA6B,gBAAgB,GAAEG,GAAE,IAAI,KAAK,GAAG,KAAGA,GAAE,IAAI,KAAK,KAAI,oBAAI,KAAG;AAAE,UAAMJ,MAAGK,GAAE,IAAI,KAAK,GAAG,KAAG,KAAG;AAAE,IAAAA,GAAE,IAAI,KAAK,KAAIL,EAAC,GAAE,KAAK,KAAK,EAAE,KAAM,MAAI,KAAK,WAAW,EAAE,KAAK,kBAAkB,CAAC,GAAI,MAAI;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,UAAMA,MAAGK,GAAE,IAAI,KAAK,GAAG,KAAG,KAAG;AAAE,IAAAA,GAAE,IAAI,KAAK,KAAIL,EAAC,GAAE,MAAIA,MAAGI,GAAE,OAAO,KAAK,GAAG,GAAEE,GAAE,OAAO,KAAK,kBAAkB;AAAA,EAAC;AAAA,EAAC,KAAKN,IAAEC,IAAE;AAAC,SAAK,aAAWD,IAAE,MAAM,KAAKA,IAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,6BAA6BD,IAAEC,IAAE;AAAC,WAAM,EAAC,MAAKA,GAAE,oBAAmB,MAAKA,GAAE,mBAAkB;AAAA,EAAC;AAAA,EAAC,8BAA8BD,IAAEC,IAAE;AAAC,IAAAA,GAAE,qBAAmBD,GAAE,MAAKC,GAAE,qBAAmBD,GAAE;AAAA,EAAI;AAAA,EAAC,KAAKA,IAAE;AAAC,WAAO,KAAK,oBAAoB,KAAK,cAAc,KAAK,KAAIA,EAAC,CAAC,GAAE,QAAQ,QAAQ,IAAI;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcA,IAAE;AAAC,UAAK,CAAC,EAAC,eAAcC,GAAC,GAAE,EAAC,SAAQC,GAAC,CAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,OAAO,6BAA4C,GAAE,OAAO,uCAA8D,CAAC,CAAC,GAAEC,KAAED,GAAE,KAAKF,EAAC;AAAE,WAAOC,GAAE,KAAK,KAAIE,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcH,IAAE;AAJtvE;AAIuvE,UAAK,CAAC,EAAC,eAAcC,GAAC,GAAE,EAAC,SAAQC,GAAC,CAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,OAAO,6BAA4C,GAAE,OAAO,uCAA8D,CAAC,CAAC;AAAE,QAAIC;AAAE,IAAAH,GAAE,UAAM,KAAAI,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE,WAAQG,KAAE,KAAG;AAAQ,UAAME,KAAE,IAAIH,GAAE,EAAC,aAAYF,GAAE,MAAK,WAAUG,GAAC,CAAC;AAAE,WAAOF,GAAE,KAAK,KAAII,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,uBAAuBL,IAAE;AAAC,UAAK,EAAC,YAAWC,GAAC,IAAE,MAAM,OAAO,0BAAyC;AAAE,WAAOA,GAAE,KAAK,KAAID,GAAE,IAAI;AAAA,EAAC;AAAA,EAAC,MAAM,gBAAgBA,KAAE,CAAC,GAAE;AAAC,UAAK,CAAC,EAAC,iBAAgBC,GAAC,GAAE,EAAC,SAAQC,GAAC,CAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,OAAO,+BAA8C,GAAE,OAAO,yCAAgE,CAAC,CAAC,GAAEC,KAAED,GAAE,KAAKF,EAAC;AAAE,WAAOC,GAAE,KAAK,KAAIE,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,UAAUH,IAAEC,KAAE,CAAC,GAAE;AAAC,UAAK,CAAC,EAAC,WAAUC,GAAC,GAAE,EAAC,SAAQC,GAAC,CAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,OAAO,yBAAmD,GAAE,OAAO,mCAAqE,CAAC,CAAC,GAAEE,KAAEF,GAAE,KAAKF,EAAC;AAAE,WAAOI,GAAE,YAAU,GAAEH,GAAE,KAAK,KAAIF,GAAE,MAAKK,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,KAAKL,IAAE;AAAC,UAAK,CAAC,EAAC,MAAKC,GAAC,GAAE,EAAC,SAAQC,GAAC,CAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,OAAO,oBAA8C,GAAE,OAAO,8BAAgE,CAAC,CAAC,GAAEC,KAAED,GAAE,KAAK,EAAC,WAAU,EAAC,CAAC;AAAE,WAAOD,GAAE,KAAK,KAAID,GAAE,MAAKG,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaH,IAAEC,IAAE;AAAC,UAAK,CAAC,EAAC,cAAaC,GAAC,GAAE,EAAC,SAAQC,GAAC,CAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,OAAO,4BAAsD,GAAE,OAAO,sCAAwE,CAAC,CAAC,GAAEE,KAAEF,GAAE,KAAKF,EAAC;AAAE,WAAOC,GAAE,KAAK,KAAIF,GAAE,MAAKK,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaL,IAAE;AAAC,UAAK,EAAC,cAAaC,GAAC,IAAE,MAAM,OAAO,4BAAsD,GAAEC,KAAE,MAAMD,GAAE,KAAK,KAAID,GAAE,MAAK,CAAC;AAAE,QAAGE,IAAE;AAAC,YAAMD,KAAE,MAAM,KAAK,uBAAuBD,EAAC,GAAEE,KAAE,IAAI,KAAKD,GAAE,YAAY,GAAEE,KAAE,EAAC,MAAKF,GAAE,kBAAkB,MAAK,QAAOC,IAAE,UAAS,OAAM;AAAE,WAAK,iBAAiBF,GAAE,MAAKG,EAAC,GAAEI,GAAE,KAAK,oBAAmB,MAAKP,GAAE,MAAKE,EAAC;AAAA,IAAC;AAAC,WAAOA;AAAA,EAAC;AAAA,EAAC,MAAM,YAAYF,IAAE;AAJljI;AAImjI,UAAK,EAAC,aAAYC,GAAC,IAAE,MAAM,OAAO,2BAAqD,GAAEC,KAAE,MAAMD,GAAE,KAAK,KAAID,GAAE,MAAK,CAAC;AAAE,WAAOE,QAAI,KAAAE,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,OAAOJ,GAAE,OAAMO,GAAE,KAAK,oBAAmB,MAAKP,GAAE,MAAK,IAAI,IAAGE;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaF,IAAE;AAAC,UAAK,EAAC,cAAaC,GAAC,IAAE,MAAM,OAAO,4BAAsD,GAAEC,KAAE,MAAMD,GAAE,KAAK,KAAID,GAAE,MAAK,CAAC;AAAE,QAAGE,IAAE;AAAC,YAAMD,KAAE,MAAM,KAAK,uBAAuBD,EAAC,GAAEE,KAAE,IAAI,KAAKD,GAAE,YAAY,GAAEE,KAAE,IAAIF,GAAEC,EAAC,GAAEG,KAAE,EAAC,MAAKL,GAAE,MAAK,QAAOE,IAAE,UAAS,QAAO,OAAMC,GAAC;AAAE,WAAK,iBAAiBH,GAAE,MAAKK,EAAC,GAAEE,GAAE,KAAK,oBAAmB,MAAKP,GAAE,MAAKE,EAAC;AAAA,IAAC;AAAC,WAAOA;AAAA,EAAC;AAAA,EAAC,MAAM,YAAYF,IAAEC,IAAE;AAJnoJ;AAIooJ,QAAGA,IAAE;AAAC,YAAMA,MAAE,KAAAG,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE;AAAM,WAAG,KAAAC,MAAA,gBAAAA,GAAG,UAAH,mBAAU,WAAU;AAAC,cAAK,CAAC,EAAC,oBAAmBC,GAAC,GAAE,EAAC,SAAQC,GAAC,CAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,OAAO,kCAA4D,GAAE,OAAO,4CAA8E,CAAC,CAAC;AAAE,YAAG,CAAC,MAAMD,GAAE,KAAK,KAAIF,GAAE,MAAK,IAAIG,GAAE,EAAC,WAAU,GAAE,QAAOF,GAAE,OAAM,CAAC,CAAC;AAAE,iBAAM;AAAA,MAAE;AAAA,IAAC;AAAC,UAAK,EAAC,aAAYC,GAAC,IAAE,MAAM,OAAO,2BAAqD,GAAEC,KAAE,MAAMD,GAAE,KAAK,KAAIF,GAAE,MAAK,GAAEC,EAAC;AAAE,QAAGE,IAAE;AAAC,YAAMF,KAAE,MAAM,KAAK,uBAAuBD,EAAC,GAAEE,KAAE,IAAI,KAAKD,GAAE,YAAY;AAAE,WAAK,iBAAiBD,GAAE,MAAK,EAAC,MAAKA,GAAE,MAAK,QAAOE,IAAE,UAAS,QAAO,iBAAgB,OAAM,CAAC,GAAEK,GAAE,KAAK,oBAAmB,MAAKP,GAAE,MAAKE,EAAC;AAAA,IAAC;AAAC,WAAOC;AAAA,EAAC;AAAA,EAAC,YAAYH,IAAE;AAJh1K;AAIi1K,UAAMC,MAAE,WAAAG,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE,UAAvB,mBAA8B;AAAS,WAAOC,MAAG;AAAA,EAAM;AAAA,EAAC,sBAAsBD,IAAEC,IAAEC,IAAE;AAAC,QAAIC,KAAE,MAAKE,KAAE,MAAKC,KAAE,MAAKF,KAAE;AAAK,UAAMI,KAAE,CAAAR,OAAG,CAACA,MAAGA,OAAI,KAAK,yBAAyB,MAAKS,KAAE,CAAAT,OAAG;AAJzgL;AAI0gL,YAAMC,MAAE,WAAAG,OAAA,mBAAG,IAAI,KAAK,SAAZ,mBAAkB,IAAIJ,GAAE;AAAM,MAAAM,KAAEN,GAAE,MAAKI,MAAEH,MAAA,gBAAAA,GAAG,WAAQ;AAAA,IAAI,GAAES,KAAE,CAACV,IAAEC,OAAI,CAACD,MAAG,CAACC,MAAG,EAAE,CAACD,MAAG,CAACC,OAAID,GAAE,YAAY,MAAIC,GAAE,YAAY;AAAE,QAAG,UAASA,IAAE;AAAC,UAAG,WAAS,KAAK,YAAYA,EAAC;AAAE,eAAM;AAAG,MAAAE,KAAEF,GAAE,MAAKI,KAAE,MAAK,UAASH,KAAEO,GAAEP,EAAC,KAAGI,KAAE,KAAK,yBAAyB,MAAKF,KAAEF;AAAA,IAAE;AAAM,MAAAC,KAAE,KAAK,yBAAyB,MAAKE,KAAEJ,IAAE,UAASC,KAAEO,GAAEP,EAAC,KAAGI,KAAE,KAAK,yBAAyB,MAAKF,KAAEF;AAAG,YAAOM,GAAEL,EAAC,KAAGK,GAAER,GAAE,UAAU,KAAGU,GAAEV,GAAE,gBAAeK,EAAC,KAAGF,OAAIH,GAAE,cAAYU,GAAEV,GAAE,gBAAeK,EAAC,OAAKL,GAAE,aAAWM,IAAEN,GAAE,iBAAeI,KAAG;AAAA,EAAE;AAAA,EAAC,MAAM,cAAcJ,IAAEC,IAAEE,IAAE;AAAC,QAAG,UAASA,MAAG,CAAC,MAAM,KAAK,uBAAuBA,EAAC;AAAE,YAAM,IAAI,EAAE,8CAA6C,wBAAwB;AAAE,QAAG,uBAAsBH,IAAE;AAAC,UAAG,KAAK,mBAAmB,YAAY,MAAIA,GAAE,kBAAkB,YAAY;AAAE,eAAO,KAAK,sBAAsBA,IAAEC,IAAEE,EAAC;AAAA,IAAC,OAAK;AAAC,UAAID;AAAE,kBAAWF,MAAGE,KAAEF,GAAE,UAAU,OAAOA,GAAE,SAAS,GAAEA,GAAE,mBAAiBA,GAAE,gBAAgB,QAAS,CAAAA,OAAG;AAAC,aAAK,mBAAmB,YAAY,MAAIA,GAAE,kBAAkB,YAAY,KAAG,KAAK,sBAAsBA,IAAEC,IAAEE,EAAC;AAAA,MAAC,CAAE,KAAGD,KAAEF;AAAE,iBAAUA,MAAKE;AAAE,YAAG,cAAYF,GAAE,QAAM,oBAAkBA,GAAE,MAAK;AAAC,gBAAME,KAAE,8BAA6BG,KAAEL,GAAE,IAAI,QAAQE,IAAE,IAAI;AAAE,cAAG,KAAK,mBAAmB,YAAY,MAAIG,GAAE,YAAY,KAAG,CAAC,KAAK,sBAAsBL,IAAEC,IAAEE,EAAC;AAAE,mBAAM;AAAA,QAAE,WAAS,YAAUH,GAAE,MAAK;AAAC,gBAAME,KAAEF,GAAE,UAAU,OAAOA,GAAE,SAAS;AAAE,qBAAUA,MAAKE;AAAE,gBAAG,cAAYF,GAAE,QAAM,oBAAkBA,GAAE,MAAK;AAAC,oBAAME,KAAE,8BAA6BG,KAAEL,GAAE,IAAI,QAAQE,IAAE,IAAI;AAAE,kBAAG,KAAK,mBAAmB,YAAY,MAAIG,GAAE,YAAY,KAAG,CAAC,KAAK,sBAAsBL,IAAEC,IAAEE,EAAC;AAAE,uBAAM;AAAA,YAAE;AAAA,QAAC;AAAA,IAAC;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,MAAM,6BAA6BH,IAAE;AAJnlO;AAIolO,QAAG;AAAC,YAAMC,KAAE,MAAM,KAAK,gBAAgB,EAAC,eAAc,KAAE,CAAC;AAAE,eAAO,KAAAA,GAAE,KAAM,CAAAA,OAAGA,GAAE,kBAAkB,SAAOD,EAAE,MAAxC,mBAA2C,sBAAmB;AAAA,IAAI,QAAM;AAAC,aAAO;AAAA,IAAI;AAAA,EAAC;AAAA,EAAC,MAAM,6BAA6BA,IAAE;AAAC,UAAK,EAAC,YAAWC,GAAC,IAAE,MAAM,OAAO,0BAAyC;AAAE,QAAG;AAAC,cAAO,MAAMA,GAAE,KAAK,KAAID,EAAC,GAAG;AAAA,IAAiB,QAAM;AAAC,aAAO;AAAA,IAAI;AAAA,EAAC;AAAA,EAAC,QAAQA,IAAE;AAJ76O;AAI86O,UAAMC,MAAE,KAAAG,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE;AAAM,WAAM,CAAC,GAAC,KAAAC,MAAA,gBAAAA,GAAG,UAAH,mBAAU;AAAA,EAAS;AAAA,EAAC,QAAQD,IAAE;AAJz/O;AAI0/O,UAAMC,MAAE,KAAAG,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE;AAAM,WAAM,CAAC,GAAC,KAAAC,MAAA,gBAAAA,GAAG,UAAH,mBAAU;AAAA,EAAS;AAAA,EAAC,KAAKD,IAAE;AAJlkP;AAImkP,UAAMC,MAAE,KAAAG,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE,OAAME,OAAE,KAAAD,MAAA,gBAAAA,GAAG,UAAH,mBAAU,WAAQ;AAAO,QAAGA,MAAGC,IAAE;AAAC,YAAMA,KAAED,GAAE,MAAM,KAAK;AAAE,MAAAM,GAAE,KAAK,oBAAmB,MAAKP,GAAE,MAAKE,EAAC,IAAE,KAAAE,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE,MAAK,EAAC,GAAGC,IAAE,QAAOC,GAAC;AAAA,IAAE;AAAA,EAAC;AAAA,EAAC,KAAKF,IAAE;AAJjwP;AAIkwP,UAAMC,MAAE,KAAAG,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE,OAAME,OAAE,KAAAD,MAAA,gBAAAA,GAAG,UAAH,mBAAU,WAAQ;AAAO,IAAAA,MAAGC,OAAIK,GAAE,KAAK,oBAAmB,MAAKP,GAAE,MAAKE,EAAC,IAAE,KAAAE,GAAE,IAAI,KAAK,GAAG,MAAd,mBAAiB,IAAIJ,GAAE,MAAK,EAAC,GAAGC,IAAE,QAAOC,GAAC;AAAA,EAAG;AAAA,EAAC,wBAAwBF,IAAEC,IAAE;AAAC,UAAMC,KAAEE,GAAE,IAAI,KAAK,GAAG;AAAE,QAAGF;AAAE,iBAAS,CAACC,IAAEE,EAAC,KAAIH,IAAE;AAAC,QAAAG,GAAE,SAAOL,MAAG,KAAK,YAAYG,IAAEF,EAAC;AAAA,MAAC;AAAA,EAAC;AAAA,EAAC,YAAYD,IAAEC,IAAE;AAAC,UAAMC,KAAEE,GAAE,IAAI,KAAK,GAAG,GAAED,KAAED,MAAA,gBAAAA,GAAG,IAAIF;AAAG,WAAM,CAAC,EAACG,MAAA,gBAAAA,GAAG,WAAQ,EAAEA,GAAE,MAAM,KAAK,GAAEF,EAAC,KAAGE,GAAE,MAAM,KAAKF,EAAC,GAAEC,GAAE,IAAIF,IAAE,EAAC,GAAGG,IAAE,QAAOF,GAAC,CAAC,GAAE;AAAA,EAAG;AAAA,EAAC,iBAAiBD,IAAEC,IAAE;AAAC,UAAMC,KAAEE,GAAE,IAAI,KAAK,GAAG,GAAED,KAAED,MAAA,gBAAAA,GAAG,IAAIF;AAAG,WAAOG,MAAGD,GAAE,IAAIF,IAAE,EAAC,GAAGG,IAAE,GAAGF,GAAC,CAAC,GAAE,QAAI,EAAE,CAACA,GAAE,QAAM,CAACA,GAAE,cAAYC,MAAA,gBAAAA,GAAG,IAAIF,IAAE,EAAC,GAAGC,IAAE,UAASA,GAAE,SAAQ,IAAG;AAAA,EAAG;AAAA,EAAC,MAAM,cAAcD,IAAEE,IAAE;AAAC,QAAG,KAAK,YAAW;AAAC,WAAK,KAAK,KAAK,YAAW,EAAC,QAAO,WAAU,KAAIS,GAAEX,EAAC,EAAC,CAAC;AAAE,YAAMC,KAAE,IAAI,EAAE,KAAK,GAAG,EAAE;AAAK,aAAO,KAAKK,GAAE,IAAIL,IAAE,KAAK,yBAAyB,IAAI;AAAA,IAAC;AAAC,UAAME,KAAE,MAAM,EAAEH,IAAE,EAAC,cAAa,QAAO,OAAM,EAAC,GAAE,OAAM,GAAE,GAAGE,GAAC,CAAC;AAAE,SAAK,KAAKC,GAAE,IAAI;AAAA,EAAC;AAAC;AAAE,SAAS,EAAEH,IAAEC,IAAE;AAAC,MAAGD,IAAE;AAAC,WAAOA,GAAE,QAAQ,IAAEC,GAAE,QAAQ;AAAA,EAAC;AAAC,SAAM;AAAE;AAAC,EAAE,CAAC,EAAE,CAAC,GAAEF,GAAE,WAAU,OAAM,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,MAAK,QAAO,MAAK,EAAC,OAAM,KAAE,EAAC,CAAC,CAAC,GAAEA,GAAE,WAAU,QAAO,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,MAAK,EAAC,OAAM,EAAC,QAAO,EAAC,oBAAmB,EAAC,MAAK,OAAM,GAAE,oBAAmB,EAAC,MAAK,OAAM,EAAC,EAAC,GAAE,MAAK,EAAC,QAAO,CAAC,sBAAqB,oBAAoB,EAAC,EAAC,EAAC,CAAC,CAAC,GAAEA,GAAE,WAAU,4BAA2B,MAAM,GAAE,EAAE,CAAC,EAAE,4BAA2B,CAAC,sBAAqB,oBAAoB,CAAC,CAAC,GAAEA,GAAE,WAAU,gCAA+B,IAAI,GAAE,EAAE,CAAC,EAAE,4BAA2B,EAAC,oBAAmB,EAAC,MAAK,OAAM,GAAE,oBAAmB,EAAC,MAAK,OAAM,EAAC,CAAC,CAAC,GAAEA,GAAE,WAAU,iCAAgC,IAAI,GAAE,EAAE,CAAC,EAAE,EAAC,MAAK,EAAC,OAAM,KAAE,EAAC,CAAC,CAAC,GAAEA,GAAE,WAAU,gBAAe,MAAM,GAAEA,KAAE,EAAE,CAACS,GAAE,iDAAiD,CAAC,GAAET,EAAC;AAAE,IAAMa,KAAEb;;;ACApoR,IAAIc,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,8BAA4B,OAAG,KAAK,gBAAc,oBAAI,OAAI,KAAK,mBAAiB,IAAIC,MAAE,KAAK,4BAA0B,MAAG,KAAK,yCAAuC,oBAAI,OAAI,KAAK,iBAAe,QAAO,KAAK,uBAAqB,oBAAI,OAAI,KAAK,YAAU,QAAO,KAAK,sBAAoB,oBAAI,OAAI,KAAK,oBAAkB,oBAAI,OAAI,KAAK,aAAW,oBAAI,OAAI,KAAK,0BAAwB,oBAAI,OAAI,KAAK,oBAAkB,oBAAI,OAAI,KAAK,iCAA+B,oBAAI;AAAA,EAAG;AAAA,EAAC,aAAY;AAAC,SAAK,WAAW,CAAC,EAAG,MAAE;AAJ9wC;AAIgxC,wBAAK,SAAL,mBAAW,IAAI,OAAO;AAAA,OAAY,YAAS;AAAC,YAAM,KAAK,gBAAgB;AAAA,IAAC,GAAG,CAAC,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,iBAAiB,QAAQ;AAAA,EAAC;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK,aAAW,CAAC,KAAK,4BAA0B,aAAW,KAAK,iBAAe,WAAS,KAAK,iBAAiB,WAAS,cAAY,KAAK,8BAA4B,UAAQ;AAAA,EAAS;AAAA,EAAC,IAAI,KAAKD,IAAE;AAAC,SAAK,KAAK,MAAM,MAAIA,MAAG,KAAK,KAAK,QAAOA,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaA,IAAE;AAAC,mBAAa,KAAK,QAAM,MAAM,KAAK,iBAAiB,YAAY,YAAS;AAAC,WAAK,mBAAmB;AAAE,YAAME,KAAE,KAAK,+BAA+B,IAAIF,GAAE,gBAAgB;AAAE,UAAG,CAACE;AAAE,eAAO,KAAK,KAAK,yCAAyC;AAAE,UAAG,CAAC,KAAK,oBAAoB,IAAIF,GAAE,gBAAgB,KAAG,KAAK,oBAAoB,IAAIA,GAAE,gBAAgB,KAAG;AAAK,eAAO,KAAK,KAAK,UAAU,mBAAkB,6BAA6B;AAAE,UAAG,CAAC,KAAK,uCAAuC,IAAIA,GAAE,gBAAgB;AAAE,eAAO,KAAK,KAAK,UAAU,mBAAkB,yCAAyC;AAAE,YAAK,EAAC,kBAAiBG,IAAE,mBAAkBC,IAAE,GAAGC,GAAC,IAAEL;AAAE,YAAME,GAAE,aAAaE,IAAEC,EAAC,EAAE,MAAO,OAAML,OAAG;AAAC,cAAM,KAAK,gBAAgBG,IAAE,IAAE,GAAE,KAAK,mBAAmBH,EAAC;AAAA,MAAC,CAAE;AAAA,IAAC,GAAG,CAAC,IAAE,KAAK,UAAU,cAAa,KAAK,SAAS;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcA,IAAEE,IAAEC,IAAE;AAAC,mBAAa,KAAK,QAAM,MAAM,KAAK,iBAAiB,YAAY,YAAS;AAJvhF;AAIwhF,WAAK,mBAAmB;AAAE,YAAMC,KAAE,KAAK,+BAA+B,IAAIJ,EAAC;AAAE,UAAG,CAACI;AAAE,eAAO,KAAK,KAAK,yCAAyC;AAAE,YAAMC,KAAE,KAAK,wBAAwB,IAAIL,EAAC,KAAG,EAAC,MAAKI,GAAE,yBAAyB,MAAK,MAAKA,GAAE,yBAAyB,KAAI,GAAEE,KAAE,EAAC,MAAKJ,IAAE,MAAKC,GAAC;AAAE,YAAMC,GAAE,eAAc,UAAK,SAAL,mBAAW,KAAIC,IAAEC,EAAC,EAAE,MAAO,CAAAN,OAAG;AAAC,aAAK,mBAAmBA,EAAC;AAAA,MAAC,CAAE,KAAG,KAAK,wBAAwB,IAAIA,IAAEM,EAAC;AAAA,IAAC,GAAG,CAAC,IAAE,KAAK,UAAU,cAAa,KAAK,SAAS;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcN,IAAE;AAAC,mBAAa,KAAK,QAAM,MAAM,KAAK,iBAAiB,YAAY,YAAS;AAJ7jG;AAI8jG,WAAK,mBAAmB;AAAE,YAAME,KAAEF,GAAE,kBAAiBG,KAAE,KAAK,+BAA+B,IAAID,EAAC;AAAE,UAAG,CAACC;AAAE,eAAO,KAAK,KAAK,yCAAyC;AAAE,YAAMC,KAAE,KAAK,uCAAuC,IAAIJ,GAAE,gBAAgB,GAAEK,KAAE,KAAK,WAAW,IAAIH,EAAC,EAAE,YAAY,GAAEI,KAAE,KAAK,eAAeN,GAAE,SAAS,IAAEK,MAAE,KAAAL,GAAE,cAAF,mBAAa,OAAO;AAAc,UAAGM,OAAID,IAAE;AAAC,YAAG,KAAK,oBAAoB,IAAIH,EAAC,KAAG;AAAK,iBAAO,KAAK,KAAK,UAAU,mBAAkB,sBAAsB;AAAE,YAAG,CAACE;AAAE,iBAAO,KAAK,KAAK,UAAU,mBAAkB,yCAAyC;AAAA,MAAC;AAAC,UAAG,WAAQE,MAAA,gBAAAA,GAAG,kBAAe,cAAYN,GAAE,YAAY,YAAY,OAAG,UAAK,kBAAkB,IAAIE,EAAC,MAA5B,mBAA+B,KAAM,CAAAA,OAAGA,GAAE,kBAAkB,KAAK,YAAY,OAAKI,KAAE,MAAIN,GAAE,aAAa,YAAY,KAAGE,GAAE,kBAAkB,KAAK,YAAY,OAAKG,KAAE,MAAIL,GAAE,aAAa,YAAY;AAAI,eAAO,KAAK,KAAK,UAAU,mBAAkB,uBAAuB;AAAE,YAAMO,KAAE,MAAMJ,GAAE,cAAc,EAAC,aAAYH,GAAE,aAAY,QAAOM,OAAID,KAAE,WAASL,GAAE,QAAO,aAAYA,GAAE,YAAW,CAAC,EAAE,MAAO,CAAAA,OAAG;AAAC,aAAK,mBAAmBA,EAAC;AAAA,MAAC,CAAE;AAAE,UAAG,CAAC,KAAK,kBAAgBM,OAAID,IAAE;AAAC,cAAK,EAAC,MAAKF,IAAE,MAAKC,GAAC,IAAEG,GAAE,mBAAkBC,KAAE,EAAC,kBAAiBN,IAAE,mBAAkB,EAAC,MAAKC,IAAE,MAAKC,GAAC,GAAE,QAAOJ,GAAE,QAAO,WAAUM,GAAC;AAAE,cAAM,KAAK,aAAaE,EAAC,GAAE,KAAK,kBAAgB,KAAK,cAAcN,IAAEG,KAAE,MAAIL,GAAE,aAAYO,GAAE,kBAAkB,IAAI;AAAA,MAAC;AAAC,YAAM,KAAK,gBAAgBL,IAAE,IAAE;AAAA,IAAC,GAAG,CAAC,IAAE,KAAK,UAAU,cAAa,KAAK,SAAS;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcF,IAAEE,IAAEC,IAAE;AAAC,mBAAa,KAAK,QAAM,MAAM,KAAK,iBAAiB,YAAY,YAAS;AAAC,WAAK,mBAAmB;AAAE,YAAMC,KAAE,KAAK,+BAA+B,IAAIJ,EAAC;AAAE,UAAG,CAACI;AAAE,eAAO,KAAK,KAAK,yCAAyC;AAAE,UAAG,KAAK,oBAAoB,IAAIJ,EAAC,KAAG;AAAK,eAAO,KAAK,KAAK,UAAU,mBAAkB,sBAAsB;AAAE,UAAG,CAAC,KAAK,uCAAuC,IAAIA,EAAC;AAAE,eAAO,KAAK,KAAK,UAAU,mBAAkB,yCAAyC;AAAE,YAAMK,KAAE,EAAC,MAAKH,IAAE,MAAKC,GAAC;AAAE,YAAMC,GAAE,cAAcC,EAAC,EAAE,MAAO,CAAAL,OAAG;AAAC,aAAK,mBAAmBA,EAAC;AAAA,MAAC,CAAE,KAAG,MAAM,KAAK,gBAAgBA,IAAE,IAAE,EAAE,MAAO,CAAAA,OAAG;AAAC,aAAK,mBAAmBA,EAAC;AAAA,MAAC,CAAE;AAAA,IAAC,GAAG,CAAC,IAAE,KAAK,UAAU,cAAa,KAAK,SAAS;AAAA,EAAC;AAAA,EAAC,MAAM,gBAAgBA,IAAEE,IAAE;AAAC,QAAG,eAAa,KAAK;AAAM,aAAO,MAAM,KAAK,iBAAiB,YAAY,YAAS;AAJxvK;AAIyvK,aAAK,mBAAmB;AAAE,cAAMC,MAAE,UAAK,qBAAqB,IAAIH,EAAC,MAA/B,mBAAkC;AAAe,YAAG,CAACG;AAAE,iBAAO,KAAK,KAAK,UAAU,mBAAkB,0BAA0B;AAAE,YAAG,CAACA,GAAE,QAAO;AAAC,gBAAMA,GAAE,KAAK,EAAE,MAAO,CAAAH,OAAG;AAAC,iBAAK,mBAAmBA,EAAC;AAAA,UAAC,CAAE;AAAE,gBAAME,KAAEC,GAAE;AAAI,eAAK,oBAAoB,IAAID,MAAE,KAAAC,GAAE,eAAF,mBAAc,mBAAgB,CAAC,GAAE,KAAK,oBAAoB,IAAID,EAAC,KAAG,QAAM,KAAK,uCAAuC,IAAIA,IAAE,KAAE;AAAE,gBAAME,KAAE,KAAK,WAAW,IAAIJ,EAAC;AAAE,eAAK,cAAc,IAAIA,EAAC,KAAGI,KAAE,KAAK,uCAAuC,IAAIF,IAAE,MAAMG,GAAE,KAAK,cAAc,IAAIL,EAAC,GAAEI,IAAE,YAAY,CAAC,IAAE,KAAK,uCAAuC,IAAIF,IAAE,KAAE;AAAA,QAAC;AAAC,QAAAC,GAAE,+BAA6B,KAAK,+BAA+B,IAAIA,GAAE,KAAI,IAAIM,GAAE,EAAC,KAAIN,GAAE,4BAA2B,CAAC,CAAC;AAAE,cAAMC,KAAE,KAAK,+BAA+B,IAAIJ,EAAC;AAAE,YAAGI,IAAE;AAAC,cAAGA,GAAE,UAAQ,MAAMA,GAAE,KAAK,EAAE,MAAO,CAAAJ,OAAG;AAAC,iBAAK,mBAAmBA,EAAC;AAAA,UAAC,CAAE,GAAE,CAAC,KAAK,kBAAkB,IAAIA,EAAC,KAAGE,IAAE;AAAC,kBAAMA,KAAE,MAAME,GAAE,gBAAgB,EAAE,MAAO,CAAAJ,OAAG;AAAC,mBAAK,mBAAmBA,EAAC;AAAA,YAAC,CAAE;AAAE,iBAAK,kBAAkB,IAAIA,IAAEE,EAAC;AAAA,UAAC;AAAA,QAAC;AAAM,eAAK,yCAAyC;AAAA,MAAC,GAAG,CAAC,GAAE,KAAK,kBAAkB,IAAIF,EAAC;AAAE,SAAK,UAAU,cAAa,KAAK,SAAS;AAAA,EAAC;AAAA,EAAC,eAAeA,IAAE;AAAC,WAAM,CAACA,MAAG,MAAIA,GAAE,KAAK,EAAE;AAAA,EAAM;AAAA,EAAC,UAAUA,IAAEE,IAAE;AAAC,YAAOF,IAAE;AAAA,MAAC,KAAI;AAAa,aAAK,cAAcE,EAAC,GAAE,EAAE,UAAU,IAAI,EAAE,MAAM,IAAI,EAAEF,IAAEE,EAAC,CAAC;AAAE;AAAA,MAAM,KAAI;AAAkB,aAAK,mBAAmBA,EAAC,GAAE,EAAE,UAAU,IAAI,EAAE,MAAM,IAAI,EAAEF,IAAEE,EAAC,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,mBAAmBF,IAAE;AAAC,SAAK,UAAU,mBAAkBA,GAAE,OAAO;AAAA,EAAC;AAAA,EAAC,2CAA0C;AAAC,SAAK,UAAU,mBAAkB,qCAAqC;AAAA,EAAC;AAAA,EAAC,MAAM,kBAAiB;AAJzyN;AAI0yN,QAAG,KAAK,8BAA4B,OAAG,KAAK,cAAc,GAAE,KAAK,4BAA0B,MAAG,CAAC,KAAK;AAAK,aAAO,KAAK,UAAU,cAAa,kBAAkB,GAAE,MAAK,KAAK,4BAA0B;AAAI,QAAG,KAAK,uBAAqBM,GAAE,KAAK,KAAK,IAAI,MAAM,GAAE,CAAC,KAAK,qBAAqB;AAAK,aAAO,KAAK,UAAU,cAAa,qBAAqB,GAAE,MAAK,KAAK,4BAA0B;AAAI,eAAUN,MAAK,KAAK,qBAAqB,KAAK;AAAE,UAAG,CAAC,KAAK,kBAAkB,IAAIA,EAAC,GAAE;AAAC,aAAK,kBAAkB,IAAIA,IAAEA,GAAE,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC;AAAE,cAAME,KAAE,IAAI,EAAE,EAAC,UAAS,aAAY,KAAI,IAAI,IAAIF,EAAC,EAAE,SAAO,UAAS,CAAC;AAAE,cAAME,GAAE,KAAK,GAAE,KAAK,cAAc,IAAIF,IAAEE,EAAC;AAAE,cAAMC,MAAE,KAAAD,MAAA,gBAAAA,GAAG,SAAH,mBAAS;AAAS,QAAAC,MAAG,KAAK,WAAW,IAAIH,IAAEG,EAAC;AAAA,MAAC;AAAC,SAAK,8BAA4B;AAAA,EAAE;AAAA,EAAC,mBAAmBH,IAAE;AAAC,SAAK,KAAK,kBAAiBA,EAAC;AAAA,EAAC;AAAA,EAAC,cAAcA,IAAE;AAAC,SAAK,KAAK,aAAYA,EAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAED,GAAE,WAAU,+BAA8B,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,0CAAyC,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,kBAAiB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,wBAAuB,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,aAAY,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,uBAAsB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,qBAAoB,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,SAAQ,IAAI,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,2BAA0B,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,qBAAoB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,kCAAiC,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,QAAO,IAAI,GAAEA,KAAE,EAAE,CAACS,GAAE,2DAA2D,CAAC,GAAET,EAAC;AAAE,IAAM,IAAEA;",
  "names": ["I", "e", "M", "x", "D", "U", "n", "t", "s", "r", "i", "a", "o", "u", "p", "d", "m", "l", "h", "f", "S", "v", "g", "P", "t", "s", "o", "u", "e", "P", "r", "t", "y", "e", "t", "r", "i", "o", "s", "n", "c", "a", "l", "u", "f", "S", "l", "e", "h", "r", "o", "i", "t", "s", "n", "a", "S"]
}
