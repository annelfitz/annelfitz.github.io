{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js", "../../@arcgis/core/views/3d/layers/support/TemporalSceneLayerView.js", "../../@arcgis/core/core/maybeUpdating.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Logger.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&i.getLogger(this).error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&i.getLogger(this).error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer?.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return i.getLogger(this).error(\"definitionExpression is using non standard function\"),null;const e=[],s=r.fieldNames;return n(s,this.i3slayer.fields,{missingFields:e}),e.length>0?(i.getLogger(this).error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return i.getLogger(this).error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,i){try{return r.testFeature(i)}catch(e){return this.logError(e),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const i=this.i3slayer.definitionExpression,e=r.clone();return e.where?e.where=`(${i}) AND (${e.where})`:e.where=i,e}};return r([e({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([e({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{t as DefinitionExpressionSceneLayerView};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getTimeOperator as s}from\"../../../../layers/graphics/data/timeSupport.js\";import{combinedViewLayerTimeExtentProperty as i}from\"../../../../layers/support/commonProperties.js\";import o from\"../../../../layers/support/FeatureFilter.js\";import{filterInPlace as n,getCachedAttributeValue as l}from\"../i3s/I3SUtil.js\";const u=s=>{let n=class extends s{constructor(){super(...arguments),this.timeExtent=null}get mergedFilter(){const{filter:t,timeExtent:e}=this;if(null==e)return t;const r=t?.clone()??new o;return null!=e&&(r.timeExtent=r.timeExtent?.intersection(e)??e),r}getTimeFilterDependencies(){const{timeInfo:t}=this.i3slayer;if(null==t)return[];const{startField:e,endField:r}=t;return[e,r]}addTimeFilter(t,e){if(null==e)return;const{timeInfo:r}=this.i3slayer;if(null==r)return;const{startField:s,endField:i,useTime:o}=r;if(!o||null==s&&null==i)return;const n=r.toJSON(),l=e.toJSON();t.push(((t,e)=>m(t,e,n,l)))}};return t([e(i)],n.prototype,\"timeExtent\",void 0),t([e()],n.prototype,\"mergedFilter\",null),n=t([r(\"esri.views.3d.layers.support.TemporalSceneLayerView\")],n),n};function m(t,e,r,i){const o=e.attributeInfo?.attributeData;if(null==o)return;const{startTimeField:l,endTimeField:u}=r;if(!!(null!=l&&null==o[l]||null!=u&&null==o[u]))return;const m=s(r,i,new a(o));if(null==m)return;const{featureIds:c}=e;n(t,c,m)}class a{constructor(t){this.attributeData=t}getAttribute(t,e){return l(this.attributeData[e],t)}getAttributeAsTimestamp(t,e){const r=this.getAttribute(t,e);return\"string\"==typeof r?new Date(r).getTime():\"number\"==typeof r||null==r?r:null}}export{u as TemporalSceneLayerView};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst n=\"updating\";function t(n){return\"updating\"===n?null:n}function u(n){return\"updating\"===n}export{u as isUpdating,t as unwrapUpdating,n as updating};\n"],
  "mappings": "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",
  "names": ["t", "e", "n", "t", "e", "s", "u", "m", "a", "n", "t", "u"]
}
