{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/graphics/polygonUtils.js", "../../@arcgis/core/geometry/support/triangulationUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import{deg2rad as t}from\"../../../../core/mathUtils.js\";import{getMetersPerUnitForSR as e,getMetersPerVerticalUnitForSR as r}from\"../../../../core/unitUtils.js\";import{e as o}from\"../../../../chunks/earcut.js\";import{s as i}from\"../../../../chunks/vec32.js\";import{Axis as n}from\"../../../../geometry/support/Axis.js\";import{getZeroIndexArray as a}from\"../../../../geometry/support/Indices.js\";import{create as s,fromManyPoints as u,getNormal as c}from\"../../../../geometry/support/plane.js\";import{Attribute as m}from\"../../webgl-engine/lib/Attribute.js\";import{ContentObjectType as p}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Geometry as l}from\"../../webgl-engine/lib/Geometry.js\";import{VertexAttribute as b}from\"../../webgl-engine/lib/VertexAttribute.js\";import f from\"../../../../geometry/Extent.js\";import g from\"../../../../geometry/Polygon.js\";function h(t,o,n,a){const s=(t=>!Array.isArray(t[0]))(o)?(t,e)=>o[3*t+e]:(t,e)=>o[t][e],c=a?e(a)/r(a):1;return u(t,((t,e)=>i(t,s(e,0)*c,s(e,1)*c,s(e,2))),n)}function j(e,r,o){const i=h(y,e,r,o)?c(y):[0,0,1];return Math.abs(i[2])>Math.cos(t(80))?n.Z:Math.abs(i[1])>Math.abs(i[0])?n.Y:n.X}const y=s();function w(t,e,r){const i=j(t,(e.length>0?e[0]:t.length/3)-1,r);if(i!==n.Z){t=t.slice();for(let e=0;e<t.length;e+=3)t[e+i]=t[e+2]}return o(t,e,3)}function d(t){const e=[[b.POSITION,new m(t.attributeData.position,t.indices,3,!0)]],r=a(t.indices.length);return null!=t.attributeData.colorFeature?e.push([b.COLORFEATUREATTRIBUTE,new m([t.attributeData.colorFeature],r,1,!0)]):t.attributeData.color&&e.push([b.COLOR,new m(t.attributeData.color,r,4,!0)]),t.attributeData.uvMapSpace&&e.push([b.UVMAPSPACE,new m(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push([b.BOUNDINGRECT,new m(t.attributeData.boundingRect,t.indices,9,!0)]),new l(t.material,e,t.mapPositions,p.Mesh,t.attributeData.objectAndLayerIdColor)}function D(t,e=null){const r=[[b.POSITION,new m(t.attributeData.position,t.indices,3,!0)],[b.UV0,new m(t.attributeData.uv0,t.indices,2,!0)]];return new l(t.material,r,t.mapPositions,p.Mesh,e)}function A(t){switch(t.type){case\"extent\":if(t instanceof f)return g.fromExtent(t);break;case\"polygon\":return t}return null}class O{constructor(t,e,r){this.renderData=t,this.layerUid=e,this.graphicUid=r,this.outGeometries=new Array}}export{O as PolygonCreationDataBase,d as createColorGeometry,w as createIndices3D,D as createWaterGeometry,h as fitPlane,A as geometryAsPolygon,j as leastSignificantAxis};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{e as n}from\"../../chunks/earcut.js\";import{Axis as t}from\"./Axis.js\";import{isClockwise as e}from\"./coordsUtils.js\";import{doubleSubArray as o,doubleArrayFrom as r,newDoubleArray as s}from\"./DoubleArray.js\";import{compactIndices as i}from\"./Indices.js\";import{deduplicate as l}from\"./meshUtils/deduplicate.js\";import{leastSignificantAxis as c}from\"../../views/3d/layers/graphics/polygonUtils.js\";function f(t){const e=g(t.rings,t.hasZ,u.CCW_IS_HOLE,t.spatialReference),s=new Array;let c=0,f=0;for(const r of e.polygons){const t=r.count,l=r.index,h=o(e.position,3*l,3*t),g=r.holeIndices.map((n=>n-l)),a=i(n(h,g,3));s.push({position:h,faces:a}),c+=h.length,f+=a.length}const a=h(s,c,f),p=Array.isArray(a.position)?l(a.position,3,{originalIndices:a.faces}):l(a.position.buffer,6,{originalIndices:a.faces});return a.position=r(new Float64Array(p.buffer)),a.faces=p.indices,a}function h(n,t,e){if(1===n.length)return n[0];const o=s(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3}return{position:o,faces:i(r)}}function g(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0,h=0,g=0,d=0;for(let s=0;s<r;++s)d+=n[s].length;const m=s(3*d);let y=0;for(let s=r-1;s>=0;s--){const d=n[s],A=e===u.CCW_IS_HOLE&&p(d,t,o);if(A&&1!==r)i[f++]=d;else{let n=d.length;for(let t=0;t<f;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(f+1),count:n,holeIndices:new Array(f)};e.pathLengths[0]=d.length,d.length>0&&(c[g++]={index:y,count:d.length}),y=A?a(d,d.length-1,-1,m,y,d.length,t):a(d,0,1,m,y,d.length,t);for(let o=0;o<f;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}f=0,e.count>0&&(l[h++]=e)}}for(let s=0;s<f;++s){const n=i[s];n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}return l.length=h,c.length=g,{position:m,polygons:l,outlines:c}}function a(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i?s[2]:0,t+=e}return r/3}function p(n,o,r){if(o){const o=n.length-1,s=c(n,o,r);if(s===t.X)return!e(n,t.Y,t.Z);if(s===t.Y)return!e(n,t.X,t.Z)}return!e(n,t.X,t.Y)}var u;!function(n){n[n.NONE=0]=\"NONE\",n[n.CCW_IS_HOLE=1]=\"CCW_IS_HOLE\"}(u||(u={}));export{u as CounterClockwiseMode,p as isCounterClockwise,g as pathsToTriangulationInfo,f as triangulate};\n"],
  "mappings": "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",
  "names": ["h", "t", "o", "n", "a", "e", "j", "i", "w", "A", "t", "e", "f", "h", "a", "g", "n", "p", "o", "i", "d", "y", "A", "s", "j"]
}
