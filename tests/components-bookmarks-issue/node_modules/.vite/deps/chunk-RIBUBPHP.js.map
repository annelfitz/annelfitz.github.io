{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/support/geolocationUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../config.js\";import t from\"../../core/Error.js\";import has from\"../../core/has.js\";import o from\"../../core/Logger.js\";import r from\"../../geometry/Point.js\";import{geographicToWebMercator as i}from\"../../geometry/support/webMercatorUtils.js\";import n from\"../../portal/Portal.js\";import{project as c}from\"../../rest/geometryService/project.js\";import s from\"../../rest/support/ProjectParameters.js\";const u=()=>o.getLogger(\"esri.widgets.support.geolocationUtils\"),a={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function m(){const e=has(\"esri-geolocation\");return e||u().warn(\"geolocation-unsupported\",\"Geolocation unsupported.\"),e}function l(){const e=window.isSecureContext;return e||u().warn(\"insecure-context\",\"Geolocation requires a secure origin.\"),e}function g(){return m()&&l()}function p(e){const o=15e3;return e||(e=a),new Promise(((r,i)=>{setTimeout((()=>i(new t(\"geolocation:timeout\",\"getting the current geolocation position timed out\"))),o),navigator.geolocation.getCurrentPosition(r,i,e??void 0)}))}let d;function f(e,o){if(d)return d(e,o);const{position:r,view:i}=e,n=v(r),c=n?.coords;if(!c)throw new t(\"geometry-service:no-coords\",\"Geolocation has no coordinates\");return h(y(c),i,o)}function w(e){d=e}function v(e){const t=e&&e.coords||{},o={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:o,timestamp:e.timestamp}:e}function y({longitude:e,latitude:t,altitude:o}){return new r({longitude:e,latitude:t,z:o||void 0,spatialReference:{wkid:4326}})}function h(e,o,r){if(!o)return Promise.resolve(e);const n=o.spatialReference;return n.isWGS84?Promise.resolve(e):n.isWebMercator?Promise.resolve(i(e)):j(r).then((o=>{if(!o)throw new t(\"geometry-service:missing-url\",\"Geometry service URL is missing\");const i=new s({geometries:[e],outSpatialReference:n});return c(o,i,r).then((e=>e[0]))}))}function j(t){if(e.geometryServiceUrl)return Promise.resolve(e.geometryServiceUrl);const o=n.getDefault();return o.load(t).catch((()=>{})).then((()=>o.helperServices?.geometry?.url))}export{p as getCurrentPosition,w as overridePositionToPoint,f as positionToPoint,g as supported};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAIka,IAAM,IAAE,MAAI,EAAE,UAAU,uCAAuC;AAA/D,IAAiE,IAAE,EAAC,YAAW,GAAE,SAAQ,MAAK,oBAAmB,KAAE;AAAE,SAAS,IAAG;AAAC,QAAM,IAAE,IAAI,kBAAkB;AAAE,SAAO,KAAG,EAAE,EAAE,KAAK,2BAA0B,0BAA0B,GAAE;AAAC;AAAC,SAAS,IAAG;AAAC,QAAM,IAAE,OAAO;AAAgB,SAAO,KAAG,EAAE,EAAE,KAAK,oBAAmB,uCAAuC,GAAE;AAAC;AAAC,SAAS,IAAG;AAAC,SAAO,EAAE,KAAG,EAAE;AAAC;AAAC,SAASA,GAAE,GAAE;AAAC,QAAM,IAAE;AAAK,SAAO,MAAI,IAAE,IAAG,IAAI,QAAS,CAACC,IAAE,MAAI;AAAC,eAAY,MAAI,EAAE,IAAI,EAAE,uBAAsB,oDAAoD,CAAC,GAAG,CAAC,GAAE,UAAU,YAAY,mBAAmBA,IAAE,GAAE,KAAG,MAAM;AAAA,EAAC,CAAE;AAAC;AAAC,IAAIC;AAAE,SAAS,EAAE,GAAE,GAAE;AAAC,MAAGA;AAAE,WAAOA,GAAE,GAAE,CAAC;AAAE,QAAK,EAAC,UAASD,IAAE,MAAK,EAAC,IAAE,GAAEE,KAAE,EAAEF,EAAC,GAAE,IAAEE,MAAA,gBAAAA,GAAG;AAAO,MAAG,CAAC;AAAE,UAAM,IAAI,EAAE,8BAA6B,gCAAgC;AAAE,SAAO,EAAE,EAAE,CAAC,GAAE,GAAE,CAAC;AAAC;AAAmB,SAAS,EAAE,GAAE;AAAC,QAAM,IAAE,KAAG,EAAE,UAAQ,CAAC,GAAE,IAAE,EAAC,UAAS,EAAE,UAAS,UAAS,EAAE,UAAS,kBAAiB,EAAE,kBAAiB,SAAQ,EAAE,SAAQ,UAAS,EAAE,UAAS,WAAU,EAAE,WAAU,OAAM,EAAE,MAAK;AAAE,SAAO,IAAE,EAAC,QAAO,GAAE,WAAU,EAAE,UAAS,IAAE;AAAC;AAAC,SAAS,EAAE,EAAC,WAAU,GAAE,UAAS,GAAE,UAAS,EAAC,GAAE;AAAC,SAAO,IAAI,EAAE,EAAC,WAAU,GAAE,UAAS,GAAE,GAAE,KAAG,QAAO,kBAAiB,EAAC,MAAK,KAAI,EAAC,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE,GAAEC,IAAE;AAAC,MAAG,CAAC;AAAE,WAAO,QAAQ,QAAQ,CAAC;AAAE,QAAMC,KAAE,EAAE;AAAiB,SAAOA,GAAE,UAAQ,QAAQ,QAAQ,CAAC,IAAEA,GAAE,gBAAc,QAAQ,QAAQ,EAAE,CAAC,CAAC,IAAE,EAAED,EAAC,EAAE,KAAM,CAAAE,OAAG;AAAC,QAAG,CAACA;AAAE,YAAM,IAAI,EAAE,gCAA+B,iCAAiC;AAAE,UAAM,IAAE,IAAI,EAAE,EAAC,YAAW,CAAC,CAAC,GAAE,qBAAoBD,GAAC,CAAC;AAAE,WAAOA,GAAEC,IAAE,GAAEF,EAAC,EAAE,KAAM,CAAAG,OAAGA,GAAE,CAAC,CAAE;AAAA,EAAC,CAAE;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,MAAG,EAAE;AAAmB,WAAO,QAAQ,QAAQ,EAAE,kBAAkB;AAAE,QAAM,IAAE,EAAE,WAAW;AAAE,SAAO,EAAE,KAAK,CAAC,EAAE,MAAO,MAAI;AAAA,EAAC,CAAE,EAAE,KAAM,MAAE;AAJ5iE;AAI8iE,yBAAE,mBAAF,mBAAkB,aAAlB,mBAA4B;AAAA,GAAI;AAAC;",
  "names": ["p", "r", "d", "n", "r", "n", "o", "e"]
}
