import {
  G
} from "./chunk-CF4VCIGH.js";
import "./chunk-QJHIIUXI.js";
import "./chunk-3IAZNUQL.js";
import "./chunk-5P57RIA4.js";
import "./chunk-AC67ONZX.js";
import "./chunk-ZOUC7PLM.js";
import "./chunk-F2EHRKUX.js";
import "./chunk-ZECONJNT.js";
import "./chunk-UWZ4CRJK.js";
import "./chunk-2636VFVY.js";
import "./chunk-252ISA6Z.js";
import "./chunk-TLTAGTBA.js";
import "./chunk-2QPP5AGU.js";
import "./chunk-2C26DRKK.js";
import "./chunk-M4RFJU4F.js";
import {
  T
} from "./chunk-BMB27ANS.js";
import "./chunk-3FOBZIUS.js";
import "./chunk-WTKF56EK.js";
import "./chunk-QJRGTKPN.js";
import "./chunk-VIH3KDZO.js";
import "./chunk-LA365FE7.js";
import "./chunk-ONKWNPIN.js";
import {
  D
} from "./chunk-DIT542IP.js";
import "./chunk-HFYOMP47.js";
import "./chunk-TOKUWZQG.js";
import "./chunk-JNGJWHJD.js";
import {
  i
} from "./chunk-QMPD4WXY.js";
import {
  e as e5
} from "./chunk-OF4YIONV.js";
import "./chunk-YBPOKK6D.js";
import {
  l
} from "./chunk-AHEDDTVZ.js";
import {
  c as c3
} from "./chunk-Z4ALW6LX.js";
import {
  c as c2
} from "./chunk-H4O73SDK.js";
import {
  p as p2
} from "./chunk-UVXSAP7V.js";
import "./chunk-IZ3VJLQ6.js";
import "./chunk-DRC4XSYG.js";
import {
  s as s2
} from "./chunk-IHQNQQJC.js";
import {
  i as i2
} from "./chunk-4IKPTZ53.js";
import {
  C
} from "./chunk-DXMBDX2I.js";
import {
  m as m2
} from "./chunk-TUVEYM7U.js";
import "./chunk-5S637BGW.js";
import "./chunk-BFOJPIF7.js";
import {
  f as f2
} from "./chunk-7UUNSIMA.js";
import "./chunk-GMRQGGML.js";
import "./chunk-BYK4ZOU2.js";
import {
  p
} from "./chunk-OHYLFFUW.js";
import {
  e as e4
} from "./chunk-XW3FDKYP.js";
import "./chunk-Y7RXGLGH.js";
import "./chunk-3JC3OUNW.js";
import "./chunk-RO3CTAP7.js";
import "./chunk-GKMVTGGM.js";
import "./chunk-XGTCDM4C.js";
import "./chunk-QNG4TY7L.js";
import {
  e as e3
} from "./chunk-RW5QMWE6.js";
import "./chunk-LGMX4E7L.js";
import "./chunk-2QCWKZIQ.js";
import {
  Q
} from "./chunk-2NPNEA6N.js";
import "./chunk-U34ZXOJT.js";
import "./chunk-OKRW5W44.js";
import "./chunk-RGAA5Z76.js";
import "./chunk-Q6RZBEZ6.js";
import "./chunk-PC66NY33.js";
import "./chunk-YY2VB3AE.js";
import "./chunk-VEYMN5N3.js";
import "./chunk-H6NTWZSO.js";
import "./chunk-BMT3OVAP.js";
import {
  b as b2
} from "./chunk-W5ALAOW2.js";
import "./chunk-FHDHOWK5.js";
import "./chunk-Y546C2O5.js";
import "./chunk-IYKBAIQE.js";
import "./chunk-BDRVHR2K.js";
import "./chunk-DVIGFJWY.js";
import "./chunk-AKEHDP75.js";
import "./chunk-5MMGIT64.js";
import "./chunk-AKQ765JR.js";
import "./chunk-ERD6I7QP.js";
import "./chunk-EZL4LTMD.js";
import "./chunk-F3BQGS35.js";
import "./chunk-Z3NX5DTX.js";
import "./chunk-J4RP32NG.js";
import "./chunk-6NLHKXEW.js";
import "./chunk-LMO6NZJA.js";
import "./chunk-A5QTLE4Y.js";
import "./chunk-SCHTG6ZQ.js";
import "./chunk-KMK4SMGY.js";
import "./chunk-YUUTEPX2.js";
import "./chunk-G7YFDDME.js";
import "./chunk-PCKG3UTS.js";
import "./chunk-3VMVD66K.js";
import "./chunk-OHE3HDFF.js";
import "./chunk-QYC3GV65.js";
import {
  P
} from "./chunk-ETHGDNE6.js";
import "./chunk-X2GCSX3A.js";
import "./chunk-I2X6UR6L.js";
import {
  j
} from "./chunk-4ZLXDMI5.js";
import {
  f
} from "./chunk-EMYOYGGK.js";
import {
  n as n2
} from "./chunk-6PMFOUWZ.js";
import "./chunk-3KPZ3BQR.js";
import "./chunk-5JYVZQZR.js";
import {
  t
} from "./chunk-UUG4W2PI.js";
import {
  u
} from "./chunk-WW22JHXA.js";
import {
  S as S2
} from "./chunk-ZAM62XN5.js";
import {
  I as I2,
  c,
  g,
  m,
  y as y2
} from "./chunk-RKVEKQ5O.js";
import "./chunk-P7J4JFEH.js";
import {
  b
} from "./chunk-G7FOE26O.js";
import "./chunk-USOPZ2Q6.js";
import "./chunk-S5I4QKJD.js";
import "./chunk-LSM34QAB.js";
import "./chunk-HWHMO3CO.js";
import "./chunk-NCRCDVOW.js";
import "./chunk-QX66UTIR.js";
import "./chunk-JW7VBMHD.js";
import "./chunk-GLLRUDMY.js";
import "./chunk-ZIJHDTB7.js";
import "./chunk-ZU6I4R6T.js";
import "./chunk-JI3AZJ7K.js";
import "./chunk-A5Q7MMP6.js";
import "./chunk-326OSIM5.js";
import "./chunk-R4CJB3GP.js";
import "./chunk-HTKSTTSR.js";
import "./chunk-6IED7TER.js";
import "./chunk-X7VSXJWW.js";
import "./chunk-VEODBKUJ.js";
import "./chunk-AG6JXA4M.js";
import "./chunk-B647DRFJ.js";
import "./chunk-PJNK3TLV.js";
import "./chunk-J7AMTUNG.js";
import "./chunk-G5EVVNIJ.js";
import "./chunk-HU5IGOTI.js";
import "./chunk-C24MEKSO.js";
import "./chunk-WDPG5BMO.js";
import "./chunk-TGXFDJCS.js";
import "./chunk-BOAEEYBE.js";
import "./chunk-VBUVOOM6.js";
import "./chunk-AKLOTDO2.js";
import "./chunk-6AQIVLDN.js";
import "./chunk-I5RCKVDX.js";
import "./chunk-6CWL7BCV.js";
import "./chunk-LBXFRGMS.js";
import "./chunk-VTH4DAHQ.js";
import {
  a as a3
} from "./chunk-GWC53NTZ.js";
import "./chunk-HLDUDRTD.js";
import {
  S
} from "./chunk-SLQA5YBV.js";
import {
  Q as Q2
} from "./chunk-UMXV3EBO.js";
import "./chunk-ONK5AE7R.js";
import "./chunk-CZSTCON2.js";
import "./chunk-2ICUS4HL.js";
import "./chunk-ZXJ6I4RF.js";
import "./chunk-GBF2OQAY.js";
import "./chunk-WNNYD62G.js";
import "./chunk-HV6S3GY2.js";
import "./chunk-IGR2BTWR.js";
import "./chunk-C7NPPGFR.js";
import "./chunk-ZPYA32PH.js";
import "./chunk-OCF7OAES.js";
import "./chunk-JZBR4X6W.js";
import "./chunk-OIJCMME5.js";
import "./chunk-4KLYOMH2.js";
import "./chunk-TPLOIZC7.js";
import "./chunk-C62RZQQX.js";
import "./chunk-6Z6C6JVV.js";
import "./chunk-QLL2YG25.js";
import "./chunk-Z2PDA67N.js";
import "./chunk-5LSHHVQ5.js";
import "./chunk-IZKCZQUY.js";
import "./chunk-M5ZB5S5C.js";
import "./chunk-MBGZKT2Z.js";
import "./chunk-UWQ3OYA5.js";
import "./chunk-ORO4D3FB.js";
import "./chunk-YOPMY6TS.js";
import "./chunk-VIN55KNF.js";
import "./chunk-NIDZ6R4E.js";
import "./chunk-IOB3DJMR.js";
import "./chunk-BPRXWDBO.js";
import "./chunk-7MT4ACA4.js";
import "./chunk-RUN6MNXL.js";
import "./chunk-BIAXSBMP.js";
import {
  I,
  U,
  V as V2
} from "./chunk-SAYWXQVM.js";
import "./chunk-SBL4URUW.js";
import "./chunk-Z4Y53NDM.js";
import {
  V
} from "./chunk-PVUNFEWX.js";
import "./chunk-TXBMNSNF.js";
import "./chunk-BVQWKK2V.js";
import "./chunk-D25BO7X7.js";
import {
  y2 as y
} from "./chunk-NDIXNREV.js";
import {
  a3 as a2,
  r2 as r
} from "./chunk-I2RC5KWA.js";
import "./chunk-SSFWZSUM.js";
import {
  e
} from "./chunk-2F6FFF5T.js";
import "./chunk-C26KUZ46.js";
import {
  a,
  e as e2
} from "./chunk-JGDJR5EV.js";
import "./chunk-QHK5ZYFW.js";
import "./chunk-L65HKN25.js";
import {
  n2 as n,
  s
} from "./chunk-7RBRCL6S.js";
import "./chunk-J2EGIWT6.js";
import "./chunk-Z4ZPL3B3.js";

// node_modules/@arcgis/core/layers/catalog/CatalogDynamicGroupLayer.js
var g2 = class {
  constructor(e6, r2) {
    this.objectId = e6, this.itemSource = r2, this.count = 0, this.layer = null, this.sortValue = void 0;
  }
};
var _ = new e3(20, (e6) => e6.destroy());
var L = class extends t(n2(S2(b))) {
  static clearLayerCache() {
    _.clear();
  }
  constructor(e6) {
    super(e6), this._oidToReference = /* @__PURE__ */ new Map(), this._layerToReference = /* @__PURE__ */ new Map(), this._portals = /* @__PURE__ */ new Map(), this.layers = new V(), this.maximumVisibleSublayers = 10, this.opacity = 1, this.title = "Layers In View", this.type = "catalog-dynamic-group", this.visible = true;
  }
  load(e6) {
    return this.addResolvingPromise(this.parent.load()), Promise.resolve(this);
  }
  get _orderBy() {
    var _a;
    return ((_a = this.parent.orderBy) == null ? void 0 : _a.find((e6) => !e6.valueExpression && e6.field)) ?? new c2({ field: this.parent.objectIdField });
  }
  get _referenceComparator() {
    const e6 = this._orderBy, r2 = this.parent.fieldsIndex.get(e6.field), t2 = T(r2 == null ? void 0 : r2.toJSON().type, "descending" === e6.order);
    return (e7, r3) => {
      const o = t2(e7.sortValue, r3.sortValue);
      return o || e7.objectId - e7.objectId;
    };
  }
  acquireLayer(e6) {
    const r2 = e6.getObjectId(), o = r(this._oidToReference, r2, () => this._createLayerReference(e6));
    return o.count++, e2(() => {
      o.count--, o.count || this._disposeLayerReference(o);
    });
  }
  _createLayerReference(e6) {
    const r2 = e6.getObjectId(), t2 = e6.getAttribute(this.parent.itemSourceField), i3 = new g2(r2, t2);
    if (_.get(t2))
      return this._addLayer(_.pop(t2), i3, e6), i3;
    let s3;
    try {
      s3 = JSON.parse(t2);
    } catch (a4) {
      return n.getLogger(this).error(a4), i3;
    }
    return this._createLayer(s3).then((r3) => {
      this._configureLayer(r3, e6), this.destroyed || 0 === i3.count ? (_.get(t2) || _.put(i3.itemSource, r3), i3.layer = null) : this._addLayer(r3, i3, e6);
    }).catch(() => {
    }), i3;
  }
  _addLayer(e6, r2, t2) {
    this._layerToReference.set(e6, r2), r2.sortValue = t2.getAttribute(this._orderBy.field), r2.layer = e6, e6.parent = this, this.layers.add(e6), this.layers.sort((e7, r3) => this._referenceComparator(this._layerToReference.get(e7), this._layerToReference.get(r3)));
  }
  _disposeLayerReference(e6) {
    e6.layer && (this._layerToReference.delete(e6.layer), this.layers.remove(e6.layer), _.put(e6.itemSource, e6.layer)), this._oidToReference.delete(e6.objectId);
  }
  async _createLayer(e6) {
    if (S3(e6)) {
      const { itemId: r2, portalUrl: t2 } = e6, o = r(this._portals, t2, () => new Q2({ url: t2 }));
      return b.fromPortalItem(new S({ id: r2, portal: o }));
    }
    if (R(e6))
      return b.fromArcGISServerUrl({ url: e6.url });
    return new (await a3.UnsupportedLayer())();
  }
  _configureLayer(e6, r2) {
    const { parent: t2 } = this, o = r2.getAttribute(t2.itemNameField);
    o && (e6.title = o);
    const i3 = r2.getAttribute(t2.maxScaleField);
    null != i3 && "maxScale" in e6 && (e6.maxScale = i3);
    const s3 = r2.getAttribute(t2.minScaleField);
    null != s3 && "minScale" in e6 && (e6.minScale = s3);
  }
};
e([y()], L.prototype, "_orderBy", null), e([y()], L.prototype, "_referenceComparator", null), e([y({ readOnly: true })], L.prototype, "layers", void 0), e([y()], L.prototype, "maximumVisibleSublayers", void 0), e([y(g)], L.prototype, "opacity", void 0), e([y({ type: String, json: { name: "title", write: true } })], L.prototype, "title", void 0), e([y({ json: { read: false } })], L.prototype, "type", void 0), e([y({ type: Boolean, json: { name: "visibility", write: true } })], L.prototype, "visible", void 0), L = e([a2("esri.layers.catalog.CatalogDynamicGroupLayer")], L);
var b3 = L;
function S3(e6) {
  return "object" == typeof e6 && null != e6 && "itemId" in e6 && "portalUrl" in e6;
}
function R(e6) {
  return "object" == typeof e6 && null != e6 && "url" in e6;
}

// node_modules/@arcgis/core/layers/catalog/CatalogFootprintLayer.js
var h = class extends t(p2(n2(S2(b)))) {
  constructor(e6) {
    super(e6), this.labelingInfo = null, this.labelsVisible = true, this.legendEnabled = true, this.opacity = 1, this.popupEnabled = true, this.popupTemplate = null, this.renderer = null, this.title = "Footprints", this.type = "catalog-footprint", this.visible = true;
  }
  load(e6) {
    return this.addResolvingPromise(this.parent.load()), Promise.resolve(this);
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  get fields() {
    return this.parent.fields;
  }
  get fieldsIndex() {
    return this.parent.fieldsIndex;
  }
  get geometryType() {
    return this.parent.geometryType;
  }
  get objectIdField() {
    return this.parent.objectIdField;
  }
  get orderBy() {
    return this.parent.orderBy;
  }
  createPopupTemplate(e6) {
    const r2 = { fields: this.parent.fields, objectIdField: this.parent.objectIdField, title: this.title };
    return p(r2, e6);
  }
  createQuery() {
    return this.parent.createQuery();
  }
  queryFeatures(e6, r2) {
    return this.parent.queryFeatures(e6, r2);
  }
};
e([y({ readOnly: true })], h.prototype, "defaultPopupTemplate", null), e([y({ type: [C], json: { name: "layerDefinition.drawingInfo.labelingInfo", read: i2, write: true } })], h.prototype, "labelingInfo", void 0), e([y(m)], h.prototype, "labelsVisible", void 0), e([y(c)], h.prototype, "legendEnabled", void 0), e([y(g)], h.prototype, "opacity", void 0), e([y(y2)], h.prototype, "popupEnabled", void 0), e([y({ type: P, json: { name: "popupInfo", write: true } })], h.prototype, "popupTemplate", void 0), e([y({ types: m2, json: { name: "layerDefinition.drawingInfo.renderer" } })], h.prototype, "renderer", void 0), e([y({ json: { read: false } })], h.prototype, "type", void 0), e([y({ type: Boolean, json: { name: "visibility", write: true } })], h.prototype, "visible", void 0), h = e([a2("esri.layers.catalog.CatalogFootprintLayer")], h);
var g3 = h;

// node_modules/@arcgis/core/layers/CatalogLayer.js
var b4 = s2();
function q() {
  return { renderer: { type: "simple", symbol: { type: "esriSFS", style: "esriSFSSolid", color: [96, 96, 96, 0], outline: { type: "esriSLS", style: "esriSLSSolid", width: 0.75, color: [96, 96, 96, 191] } } } };
}
var E = class extends D(n2(c3(f2(t(f(l(u(j(S2(e4(i(b)))))))))))) {
  constructor(e6) {
    super(e6), this.dynamicGroupLayer = new b3({ parent: this }), this.fields = null, this.fieldsIndex = null, this.footprintLayer = new g3({ parent: this }), this.itemNameField = "cd_itemname", this.itemSourceField = "cd_itemsource", this.itemTypeField = "cd_itemtype", this.layers = new V([this.dynamicGroupLayer, this.footprintLayer]), this.maxScaleField = "cd_maxscale", this.minScaleField = "cd_minscale", this.supportedSourceTypes = /* @__PURE__ */ new Set(["Catalog Layer"]), this.source = new G({ layer: this, supportedSourceTypes: this.supportedSourceTypes }), this.type = "catalog";
  }
  load(e6) {
    const r2 = null != e6 ? e6.signal : null, t2 = this.loadFromPortal({ supportedTypes: ["Feature Service"] }, e6).catch(a).then(async () => {
      const { url: e7, source: t3, portalItem: i3 } = this;
      if (!e7)
        throw new s("catalog-layer:missing-url", "Catalog layer must be created with a url");
      if (null == this.layerId) {
        const t4 = await this._fetchFirstValidLayerId(r2);
        if (null == t4)
          throw new s("catalog-layer:missing-layerId", "There is no Catalog Layer in the service", { service: e7 });
        this.layerId = t4;
      }
      await t3.load({ signal: r2 });
      const { sourceJSON: s3 } = t3;
      s3 && (this.sourceJSON = s3, this.read(s3, { origin: "service", portalItem: i3, portal: i3 == null ? void 0 : i3.portal, url: this.parsedUrl }));
    }).then(() => Q(this, "load", e6));
    return this.addResolvingPromise(t2), Promise.resolve(this);
  }
  get createQueryVersion() {
    return this.commitProperty("definitionExpression"), this.commitProperty("timeExtent"), this.commitProperty("timeOffset"), this.commitProperty("geometryType"), this.commitProperty("capabilities"), (this._get("createQueryVersion") ?? 0) + 1;
  }
  get parsedUrl() {
    const e6 = I(this.url);
    return null != e6 && null != this.layerId && (e6.path = V2(e6.path, this.layerId.toString())), e6;
  }
  createQuery() {
    var _a;
    const e6 = new b2(), r2 = (_a = this.capabilities) == null ? void 0 : _a.query;
    e6.returnGeometry = true, r2 && (e6.compactGeometryEnabled = r2.supportsCompactGeometry, e6.defaultSpatialReferenceEnabled = r2.supportsDefaultSpatialReference), e6.outFields = ["*"];
    const { timeOffset: t2, timeExtent: o } = this;
    return e6.timeExtent = null != t2 && null != o ? o.offset(-t2.value, t2.unit) : o || null, e6;
  }
  getField(e6) {
    return this.fieldsIndex.get(e6);
  }
  getFieldDomain(e6, r2) {
    var _a;
    return (_a = this.fieldsIndex.get(e6)) == null ? void 0 : _a.domain;
  }
  async queryFeatures(e6, r2) {
    const t2 = await this.load(), o = await t2.source.queryFeatures(b2.from(e6) ?? t2.createQuery(), r2);
    if (o == null ? void 0 : o.features)
      for (const i3 of o.features)
        i3.layer = i3.sourceLayer = t2.footprintLayer;
    return o;
  }
  async queryObjectIds(e6, r2) {
    return (await this.load()).source.queryObjectIds(b2.from(e6) ?? this.createQuery(), r2);
  }
  async queryFeatureCount(e6, r2) {
    return (await this.load()).source.queryFeatureCount(b2.from(e6) ?? this.createQuery(), r2);
  }
  async queryExtent(e6, r2) {
    return (await this.load()).source.queryExtent(b2.from(e6) ?? this.createQuery(), r2);
  }
  serviceSupportsSpatialReference(e6) {
    return this.loaded && e5(this, e6);
  }
  read(e6, r2) {
    super.read(e6, r2);
    let t2 = e6.footprintLayer;
    t2 || "service" !== (r2 == null ? void 0 : r2.origin) || (t2 = { layerDefinition: { drawingInfo: q() } }), this.footprintLayer.read(t2, r2);
  }
  async _fetchFirstValidLayerId(e6) {
    var _a;
    const { data: t2 } = await U(this.url, { query: { f: "json", ...this.customParameters, token: this.apiKey }, responseType: "json", signal: e6 });
    if (Array.isArray(t2 == null ? void 0 : t2.layers))
      return (_a = t2.layers.find(({ type: e7 }) => this.supportedSourceTypes.has(e7))) == null ? void 0 : _a.id;
  }
};
e([y({ readOnly: true })], E.prototype, "createQueryVersion", null), e([y({ ...b4.fields, json: { origins: { service: { name: "fields" } } } })], E.prototype, "fields", void 0), e([y(b4.fieldsIndex)], E.prototype, "fieldsIndex", void 0), e([y({ json: { read: false, write: false } })], E.prototype, "footprintLayer", void 0), e([y(I2)], E.prototype, "id", void 0), e([y()], E.prototype, "itemNameField", void 0), e([y()], E.prototype, "itemSourceField", void 0), e([y()], E.prototype, "itemTypeField", void 0), e([y()], E.prototype, "layers", void 0), e([y()], E.prototype, "maxScaleField", void 0), e([y()], E.prototype, "minScaleField", void 0), e([y({ value: "CatalogLayer", type: ["CatalogLayer"] })], E.prototype, "operationalLayerType", void 0), e([y()], E.prototype, "outFields", void 0), e([y({ readOnly: true })], E.prototype, "parsedUrl", null), e([y()], E.prototype, "source", void 0), e([y({ json: { read: false } })], E.prototype, "type", void 0), E = e([a2("esri.layers.CatalogLayer")], E);
var Q3 = E;
export {
  Q3 as default
};
//# sourceMappingURL=CatalogLayer-TEUOM2LW.js.map
