import {
  getSupportedLocale
} from "./chunk-XFVJO746.js";
import {
  Build,
  getAssetPath
} from "./chunk-NCF6OYL5.js";

// node_modules/@esri/calcite-components/dist/components/t9n.js
var componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch(getAssetPath(`./assets/${component}/t9n/messages_${lang}.json`)).then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  }).catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides
  };
}
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  if (!Build.isBrowser) {
    return {};
  }
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle(getSupportedLocale(lang, "t9n"), componentName);
}
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
function disconnectMessages(component) {
  component.onMessagesChange = void 0;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}

export {
  setUpMessages,
  updateMessages,
  connectMessages,
  disconnectMessages
};
/*! Bundled license information:

@esri/calcite-components/dist/components/t9n.js:
  (*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
   * v2.6.0
   *)
*/
//# sourceMappingURL=chunk-WJ3GFKCF.js.map
