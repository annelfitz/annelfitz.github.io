{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/i3s/enums.js", "../../@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js", "../../@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js", "../../@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js", "../../@arcgis/core/views/3d/layers/i3s/ValidatedNode.js", "../../@arcgis/core/views/3d/layers/i3s/I3SIndex.js", "../../@arcgis/core/views/3d/layers/support/I3SLayerView.js", "../../@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js", "../../@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js", "../../@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js", "../../@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js", "../../@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js", "../../@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js", "../../@arcgis/core/views/3d/layers/i3s/I3SOverrides.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar e,s;!function(e){e[e.KTX2=1]=\"KTX2\",e[e.Basis=2]=\"Basis\",e[e.DDS_S3TC=4]=\"DDS_S3TC\",e[e.PNG=8]=\"PNG\",e[e.JPG=16]=\"JPG\",e[e.KTX_ETC2=32]=\"KTX_ETC2\"}(e||(e={})),function(e){e[e.None=0]=\"None\",e[e.Color=1]=\"Color\",e[e.MetallicRoughness=2]=\"MetallicRoughness\",e[e.Normal=4]=\"Normal\",e[e.Occlusion=8]=\"Occlusion\",e[e.Emissive=16]=\"Emissive\",e[e.AlphaMask=32]=\"AlphaMask\",e[e.ColorTextures=19]=\"ColorTextures\",e[e.GeometryTextures=36]=\"GeometryTextures\",e[e.GeometryTexturesPBR=44]=\"GeometryTexturesPBR\",e[e.AllTextures=37]=\"AllTextures\",e[e.AllTexturesPBR=63]=\"AllTexturesPBR\"}(s||(s={}));export{e as TextureEncoding,s as TextureUsage};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import o from\"../../../../core/Error.js\";import{loadImageAsync as t}from\"../../../../support/requestUtils.js\";import{EncodedMeshTexture as r}from\"../../glTF/internal/resourceUtils.js\";import{TextureUsage as s,TextureEncoding as a}from\"./enums.js\";import{CullFaceOptions as l}from\"../../webgl-engine/lib/basicInterfaces.js\";import{downsampleImage as n}from\"../../webgl-engine/lib/textureUtils.js\";import{useSchematicPBR as i,defaultSchematicMRRFactors as u}from\"../../webgl-engine/materials/pbrUtils.js\";async function c(o){const t=[],r=[];if(null==o){return{material:{alphaMode:\"opaque\",alphaCutoff:.1,doubleSided:!0,cullFace:0,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[1,1,1,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6000000238418579},wrapTextures:!1,hasParametersFromSource:!0},requiredTextures:t,textureData:r}}const a=d(o);\"auto\"===o.alphaMode&&console.warn('alphaMode \"auto\" not supported by I3S PBRMaterial - defaulting to \"blend\".');const n=i({normalTexture:o.normalTexture,emissiveTexture:a?o.emissiveTexture:null,emissiveFactor:a?e.toUnitRGB(o.emissiveColor):null,occlusionTexture:a?o.occlusionTexture:null,metallicRoughnessTexture:a?o.metallicRoughnessTexture:null,metallicFactor:a?o.metallic:null,roughnessFactor:a?o.roughness:null}),c=n?u[0]:a?o.metallic:0,g=n?u[1]:a?o.roughness:0;return{material:{alphaMode:\"auto\"===o.alphaMode?\"blend\":o.alphaMode,alphaCutoff:o.alphaCutoff,doubleSided:o.doubleSided,cullFace:o.doubleSided?l.None:l.Back,normalTextureId:await m(o.normalTexture,t,r,s.Normal),emissiveTextureId:a?await m(o.emissiveTexture,t,r,s.Emissive):-1,occlusionTextureId:a?await m(o.occlusionTexture,t,r,s.Occlusion):-1,emissiveFactor:a&&null!=o.emissiveColor?e.toUnitRGB(o.emissiveColor):[0,0,0],metallicRoughness:{baseColorFactor:null!=o.color?e.toUnitRGBA(o.color):[1,1,1,1],baseColorTextureId:await m(o.colorTexture,t,r,s.Color),metallicRoughnessTextureId:a?await m(o.metallicRoughnessTexture,t,r,s.MetallicRoughness):-1,metallicFactor:c,roughnessFactor:g},wrapTextures:!0,hasParametersFromSource:n},requiredTextures:t,textureData:r}}async function m(e,s,l,i){if(null==e)return-1;const u=l.length,c=e.data,m=e.url;if(null!=c){if(c instanceof HTMLImageElement||c instanceof HTMLCanvasElement){const e=n(c);return l.push({id:u,usage:i,data:e,encoding:a.PNG,downsampled:!1}),s.push({id:u,usage:i,encodings:[{name:void 0,encoding:a.PNG}]}),u}if(c instanceof HTMLVideoElement)return-1;if(c instanceof ImageData)throw new o(\"ImageData textures not supported yet for client side I3S nodes\");if(c instanceof r)throw new o(\"EncodedMeshTexture textures not supported yet for client side I3S nodes\")}else if(null!=m){const e=new Image;e.src=m;const o=await t(e,e.src,!1,void 0),r=n(o);return l.push({id:u,usage:i,data:r,encoding:a.PNG,downsampled:!1}),s.push({id:u,usage:i,encodings:[{name:void 0,encoding:a.PNG}]}),u}return-1}function d(e){return e.hasOwnProperty(\"metallicRoughnessTexture\")}export{c as convertMeshMaterialToPBRMaterial};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{assertIsSome as t}from\"../../../../core/maybe.js\";import{MinPriority as o}from\"../../../../core/MemCache.js\";import{throwIfAborted as r}from\"../../../../core/promiseUtils.js\";import{generateUUID as n}from\"../../../../core/uuid.js\";import{normalFromMat4 as s}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{j as i}from\"../../../../chunks/vec32.js\";import{ONES as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{projectBoundingSphere as d}from\"../../../../geometry/projection/projectBoundingSphere.js\";import{isRelativeVertexSpace as u}from\"../../../../geometry/support/meshVertexSpaceUtils.js\";import{k as c}from\"../../../../chunks/sphere.js\";import{convertMeshMaterialToPBRMaterial as m}from\"./I3SClientMaterialUtil.js\";class h{constructor(e,t,o,r){this._uid=e,this._worker=r,this._id2Meta=new Map,this._oid2Meta=new Map,this._indexSR=t.indexSR,this._vertexSR=t.vertexSR,this._renderSR=t.renderSR,this._localMode=t.localMode,this._memCache=o.newCache(`sl-client-mesh-data-${this._uid}`)}get uid(){return this._uid}get worker(){return this._worker}get indexSR(){return this._indexSR}get renderSR(){return this._renderSR}createMeshNodeInfo(e,t){const o=`mesh${t}`,r=e.extent,n=r.spatialReference,s=this._indexSR,a=p(r,e.origin);d(a,n,a,s);return{type:\"mesh\",id:o,version:M(e),oid:t,mbs:a,componentNodeIds:[],unloadedMesh:e,nodeIndex:null,loadMeshPromise:null}}addMeshNode(t,o){if(null!=this.getMeshNodeIndex(o.oid))throw new e(`I3SClientNodeLoader: client side mesh for feature oid=${o.oid} already exists`);o.nodeIndex=t,this._id2Meta.set(o.id,o),this._oid2Meta.set(o.oid,o)}getMeshNodeIndex(e){const t=this._oid2Meta.get(e);return null==t||\"mesh\"!==t.type?null:t.nodeIndex}getMeshNodeInfo(e){const t=this._oid2Meta.values();for(const o of t)if(\"mesh\"===o.type&&o.id===e)return o;return null}removeNode(e){const t=this._id2Meta.get(e);null!=t&&(this._id2Meta.delete(e),\"mesh\"===t.type&&this._oid2Meta.delete(t.oid))}async loadNodeJSON(t){const o=this._id2Meta.get(t);if(null==o)throw new e(`I3SClientNodeLoader::loadNodeJSON unable to find node ${t}`);switch(o.type){case\"mesh\":return this._loadMeshNodeJSON(o);case\"mesh-component\":return f(o);default:throw new e(`I3SClientNodeLoader::loadNodeJSON unable to handle node ${t}`)}}async _loadMeshNodeJSON(e){const t=e.id,o=(await this._getMeshData(e)).loadedMesh;if(null==o.components||0===o.components.length)return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null};const r=[],n=o.components;for(let s=0;s<n.length;++s){const o=`${t}-component${s}`,n={type:\"mesh-component\",id:o,mbs:e.mbs,componentIndex:s,meshNodeInfo:e,textureData:new Map};this._id2Meta.set(n.id,n),e.componentNodeIds.push(o),r.push({id:n.id,href:null,mbs:n.mbs,obb:null})}return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:r}}updateNodeIndex(e,t,o){const r=this._id2Meta.get(e);r&&\"mesh\"===r.type&&(r.nodeIndex=o)}async loadNodeData(o,n){const s=this._id2Meta.get(o);if(null==s||\"mesh-component\"!==s.type)throw new e(`Failed to load client node data for node ${o} (unexpected node info)`);const a=s.meshNodeInfo,i=await this._getMeshData(a),l=i.loadedMesh,d=a.oid;if(null==l.components)throw new e(`Failed to load client node data for node ${o} (unexpected null reference)`);const u=l.components[s.componentIndex],{material:c,requiredTextures:h,textureData:f}=await m(u.material);if(null!=f)for(const e of f)null!=e&&s.textureData.set(e.id,e);const p={params:{material:c},type:\"ArrayBufferView\"},{vertexSpace:g,origin:M,transform:_}=l,w=[M.x,M.y,M.z??0],S={featureDataPosition:w,featureIds:[],geometries:[p]},b={attributeData:{},loadedAttributes:[]};i.projectionPromise||(t(this._worker,\"SceneLayerWorker is needed to project mesh\"),i.projectionPromise=this._worker.project({positions:l.vertexAttributes.position,localMatrix:_?.localMatrix,vertexSpace:g.toJSON(),origin:w,inSpatialReference:l.spatialReference.toJSON(),outSpatialReference:this._vertexSR.toJSON(),localMode:this._localMode},n));const{projected:N,original:v}=await i.projectionPromise;l.vertexAttributes.position=v;const{transformed:D,original:I}=await x(u,i,this._worker,n);l.vertexAttributes.normal=I,r(n);const{geometryBuffer:j,geometryDescriptor:R}=y(N,u.faces,D,l.vertexAttributes.uv,l.vertexAttributes.color,d);return{geometryData:S,attributeDataInfo:b,geometryBuffer:j,geometryDescriptor:R,requiredTextures:h,textureData:f,normalReferenceFrame:this._vertexSR.isGeographic?\"east-north-up\":\"vertex-reference-frame\"}}async loadAttributes(e,t,o){const r=e.numFeatures,n={};for(const{field:{name:s}}of t)n[s]=new Array(r);return n}async loadTextures(e,t,o){const r=e.id,n=this._id2Meta.get(r);if(null==n||\"mesh-component\"!==n.type)throw new Error(`Failed to load textures for node ${e.id} (unexpected node info)`);const s=[];for(const a of t)s.push(n.textureData.get(a.id)||null);return s}async _getMeshData(e){const t=e.version,r=this._memCache.get(t);if(null==r){if(null!=e.loadMeshPromise)return e.loadMeshPromise;const r=async(r,n)=>{const s=e.unloadedMesh.clone();try{await s.load()}catch(l){n(l)}const a=s.memoryUsage,i={loadedMesh:s,projectionPromise:null,normalsTransformPromise:null,usedMemoryInBytes:a};this._memCache.put(t,i,a,o),e.loadMeshPromise=null,r(i)};return e.loadMeshPromise=new Promise(((e,t)=>r(e,t))),e.loadMeshPromise}return r}}async function f(e){return{id:e.id,version:e.meshNodeInfo.version,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null,isEmpty:!1}}function p(e,t){const{spatialReference:o}=e,r=[1,-1],n=[.5*e.width,.5*e.height,e.hasZ?.5*(e.zmax-e.zmin):0],s=o.isGeographic?o.metersPerUnit:1,a=e.center;let i=0;if(e.hasZ)for(let l=0;l<2;++l)for(let e=0;e<2;++e)for(let o=0;o<2;++o){const d=(a.x+r[l]*n[0]-t.x)*s,u=(a.y+r[e]*n[1]-t.y)*s,c=a.z+r[o]*n[2]-t.z;i=Math.max(d*d+u*u+c*c,i)}else for(let l=0;l<2;++l)for(let e=0;e<2;++e){const o=(a.x+r[l]*n[0]-t.x)*s,d=(a.y+r[e]*n[1]-t.y)*s;i=Math.max(o*o+d*d,i)}return c([t.x,t.y,t.z],Math.sqrt(i))}async function x(e,o,r,n){const{transform:d,vertexAttributes:u}=o.loadedMesh,c=\"source\"===e.shading?u.normal:null;if(!(null!=c&&null!=d&&(0!==d.rotationAngle||!i(d.scale,l))))return{transformed:c,original:u.normal};if(!o.normalsTransformPromise){t(r,\"SceneLayerWorker is needed to transform mesh normals\");const e=a();s(e,d.localMatrix),o.normalsTransformPromise=r.transformNormals({normalMatrix:e,normals:c},n)}return o.normalsTransformPromise}function y(e,t,o,r,n,s){const a=1,i=t.length/3,l=3*i;let d=0,u=0,c=!1,m=0,h=!1,f=0,p=!1,x=0,y=0,M=0;d+=_,d+=_,u=d,d+=3*l*w,null!=o&&(c=!0,m=d,d+=3*l*w),null!=r&&(h=!0,f=d,d+=2*l*w),null!=n&&(p=!0,x=d,d+=4*l*S),y=d,d+=a*b,M=d,d+=2*a*_;const N=new ArrayBuffer(d),v=new Uint8Array(N);g(v,0,l),g(v,_,a);const D=new Float32Array(N,u),I=null!=o?new Float32Array(N,m):null,j=null!=r?new Float32Array(N,f):null,R=null!=n?new Uint8Array(N,x):null;for(let g=0;g<i;++g){const s=3*g;for(let a=0;a<3;++a){const i=t[s+a],l=3*i,d=9*g+3*a;if(D[d]=e[l],D[d+1]=e[l+1],D[d+2]=e[l+2],null!=I&&(I[d]=o[l],I[d+1]=o[l+1],I[d+2]=o[l+2]),null!=j){const e=2*i,t=6*g+2*a;j[t]=r[e],j[t+1]=r[e+1]}if(null!=R){const e=4*i,t=12*g+4*a;R[t]=n[e],R[t+1]=n[e+1],R[t+2]=n[e+2],R[t+3]=n[e+3]}}}g(v,y,s),g(v,y+_,s/2**32),g(v,M,0),g(v,M+_,i-1);return{geometryBuffer:N,geometryDescriptor:{isDraco:!1,isLegacy:!0,color:p,normal:c,uv0:h,uvRegion:!1,featureIndex:!0}}}function g(e,t,o){e[t]=255&o,e[t+1]=255&o>>8,e[t+2]=255&o>>16,e[t+3]=255&o>>24}function M(e){const t=e.metadata.displaySource?.source;if(null==t||!Array.isArray(t)||!t.length||t[0]instanceof File)return n();const o=t;let r=\"\";for(const n of o)r+=n.makeHash();return r+JSON.stringify(null!=e.transform?e.transform.toJSON():\"\")+(u(e.vertexSpace)?JSON.stringify(e.vertexSpace.origin):\"\")}const _=4,w=4,S=1,b=8;export{h as I3SClientNodeLoader,p as createSphereFromExtent,w as sizeOfFloat32,_ as sizeOfInt32,b as sizeOfUInt64,S as sizeOfUInt8,x as transformNormals};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Accessor.js\";import{removeUnordered as t}from\"../../../../core/arrayUtils.js\";import{makeHandle as e}from\"../../../../core/handleUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{TaskPriority as i}from\"../../../support/Scheduler.js\";let a=class extends s{constructor(){super(),this.referenceCount=0,this.callbacks=new Array,this.runIndex=0}get running(){return this.callbacks.some((r=>r.running))}runTask(r){this._sort();const s=this.callbacks,t={numIndexLoading:0,numNodesLoading:0};for(let e=0;e<s.length&&!r.done;++e)s[e].priority=s[e].runTask(r,t),this.runIndex=e}_sort(){const r=this.callbacks;let s=r.length;for(let t=this.runIndex;t>0;t--){const e=r[t-1];let o=t;for(;o<r.length&&e.priority<=r[o].priority&&(o!==s||e.priority<r[o].priority);)r[o-1]=r[o],o++;r[o-1]=e,s=o-1}this.runIndex=0}add(r){this._sort(),r.priority=1/0,this.callbacks.unshift(r),this.notifyChange(\"running\")}remove(r){t(this.callbacks,r),this.runIndex=this.callbacks.length,this._sort(),this.notifyChange(\"running\")}};r([o({readOnly:!0})],a.prototype,\"running\",null),a=r([n(\"esri.views.3d.layers.i3s.I3SFrameTask\")],a);class l{constructor(r,s){this.task=r,this.handle=s}}const c=new Map;function h(r,s){let t=c.get(r);if(null==t){const s=new a,e=r.registerTask(i.I3S_CONTROLLER,s);t=new l(s,e),c.set(r,t)}return t.task.add(s),e((()=>{if(null==t)return;t.task.remove(s);t.task.callbacks.length>0||(c.delete(r),t.handle.remove(),t.task.destroy()),t=null}))}export{h as addCallback};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass s{constructor(s,t,i,e,h,o,r,c){this.id=s,this.mbs=t,this.obb=i,this.version=e,this.resources=h,this.children=o,this.lodSelection=r,this.numFeatures=c}}export{s as ValidatedNode};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import e from\"../../../../core/PooledArray.js\";import{isAbortError as t}from\"../../../../core/promiseUtils.js\";import{projectBoundingSphere as i}from\"../../../../geometry/projection/projectBoundingSphere.js\";import{k as n,a as s,u as o,c as r}from\"../../../../chunks/sphere.js\";import{i3sPatchingEnabled as a}from\"../../../../support/featureFlags.js\";import{LodMetric as d,NodeBase as l,Node as h,NodeFilterImpact as u,NodeIMModificationImpact as c,NodeTraversalState as g}from\"./I3SNode.js\";import{invalidateMbs as _,addWraparound as f}from\"./I3SUtil.js\";import{ValidatedNode as m}from\"./ValidatedNode.js\";import{ElevationRange as v}from\"../../support/ElevationRange.js\";import{Obb as N}from\"../../support/orientedBoundingBox.js\";class p{constructor(e,t,i,n,s){this.childOffset=e,this.childCount=t,this.visibilityCache=i,this.ref=n,this.node=s,this.useAsHole=0,this.filterImpact=u.NotChecked,this.traversalState=null,this.parent=-1}invalidateBounds(){this.node?.invalidateServiceBVsInRenderSR(),this.ref?.invalidateServiceBVsInRenderSR()}}class b{constructor(e=new Array,t=new Array){this.nodes=e,this.children=t,this.lastTraversed=0,this.numNodesWithLoadedChildren=0}}class I{get _useNodePages(){return this._pageSize>0}constructor(t,i,n,s,o,r,l,h,u,c,g,_,f,m,v,N){this.viewingMode=t,this._layer=i,this._streamDataController=s,this._clientNodeLoader=o,this._viewportQueries=r,this._logger=l,this.holeFilling=h,this._isLoaded=u,this._isReloading=c,this._isSelected=g,this._enable=_,this._needsUpdate=f,this._canRequest=m,this._computeVisibilityObb=v,this._computeNodeFiltering=N,this._dirty=!0,this._nodePages=new Map,this._clientNodePage=null,this._pageSize=0,this._rootIndex=0,this._lodMetric=d.None,this._lodConversion=e=>e,this._isEditable=!1,this._urlPrefix=\"\",this._loadingNodes=new Set,this._loadingPages=new Set,this._failedNodes=new Set,this._failedPages=new Set,this._indexMissing=1,this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.POSITIVE_INFINITY,this._version=S(0),this._visibilityCacheVersion=S(0),this._maxLevel=1,this._featureEstimate={estimate:0,leavesReached:!1},this._unloadedMemoryEstimate=0,this._missingPagesAndNodes=new e({deallocator:null}),this._prefetchNodes=new e({deallocator:null}),this._updates=new y(this._missingPagesAndNodes),this._imModificationUncategorized=new e({deallocator:null}),this.ignoreServiceObb=!1,this.progressiveLoadPenalty=0,this._pageQueue=new Array,this._newPages=new Array,this.needNodeElevationRange=!1,this.layerHasModifications=!1,this._layerHasFilter=!1,this._frameNumber=0,this._traverseDescendantsQueue=[0],this._traverseDescendantsNestingLevel=0,this._isEditable=a()&&null!=i.associatedLayer?.infoFor3D,i.serviceUpdateTimeStamp?.lastUpdate&&(this._lastUpdate=`${i.serviceUpdateTimeStamp.lastUpdate}`),this._maxLodLevel=this._viewportQueries?this._viewportQueries.maxLodLevel:1,this._init(n)}_init(e){if(\"page\"===e.type){const t=e.rootPage;switch(this._urlPrefix=e.urlPrefix,this._pageSize=e.pageSize,e.lodMetric){case\"maxScreenThreshold\":this._lodMetric=d.MaxScreenThreshold;break;case\"maxScreenThresholdSQ\":this._lodMetric=d.MaxScreenThreshold,this._lodConversion=k}if(this._isEditable){this._rootIndex=-1;const i=M(e.rootIndex,e.pageSize),n=t.nodes[i],s={nodes:[{index:this._rootIndex,children:[e.rootIndex],mesh:void 0,obb:n.obb,lodThreshold:n.lodThreshold}]};this._addPage(E(this._rootIndex,this._pageSize),s),this.getNode(-1).serviceObbInIndexSR=void 0}else this._rootIndex=e.rootIndex;this._addPage(E(e.rootIndex,this._pageSize),t),this._updateParentsAndLevel()}else if(\"node\"===e.type){this._urlPrefix=e.urlPrefix;const t=new b;if(this._nodePages.set(0,t),this._isEditable){this._clientNodePage=new b;const t={id:\"-1\",version:null,mbs:e.rootNode.mbs,obb:e.rootNode.obb,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:[{id:\"root\",href:\"../root\",mbs:e.rootNode.mbs,obb:e.rootNode.obb}]};this._rootIndex=this._makeClientRefNode(new l(t.id,null),-1);const i=this._validateNode(t.id,t);i&&this._addNode(i,this._rootIndex)}else this._rootIndex=this._makeRefNode(new l(e.rootNode.id,null),-1);const i=this._validateNode(e.rootNode.id,e.rootNode);i&&this._addNode(i,0)}}addClientNodeToIndex(e,t){const i=-1,n=new l(e,t),s=this._makeClientRefNode(n,i);return this._linkChildToParentNode(i,s),this.requestUpdate(),s}removeClientNodeFromIndex(e,t,i){this._destroyClientRefNode(e,t,i),this.requestUpdate()}_loadPage(e){this._loadingPages.add(e);const i=this._urlPrefix+e;this._streamDataController.request(i,\"json\").then((t=>{this._pageQueue.push({pageIndex:e,page:t})})).catch((i=>{this._loadingPages.delete(e),t(i)||(this._failedPages.add(e),this._logger.error(\"#loadPage()\",this._layer,`Error when loading page ${e}`,i))}))}_addQueuedPages(e){for(;this._pageQueue.length>0&&!e.done;){const{pageIndex:t,page:i}=this._pageQueue.shift();this._addPage(t,i),this._loadingPages.delete(t),e.madeProgress(),this.needNodeElevationRange&&this._newPages.push(t)}this._updateParentsAndLevel()}_invalidateElevationRangeForNewPages(e){if(this.needNodeElevationRange)for(;this._newPages.length>0&&!e.done;){const e=this._nodePages.get(this._newPages.shift());e?.nodes.forEach((e=>{let t=e.parent;for(;null!=t&&t!==this._rootIndex;){const e=this.getNode(t);e&&!Number.isNaN(e?.elevationRangeMin)&&(e.invalidateElevationRange(),this.invalidateBoundingVolumeCache(t)),t=this.getParentIndex(t)}}))}}_addPage(e,t){const i=[],s=[],o=t.nodes.map(((t,o)=>{const r=i.length,a=t.children?t.children.length:0;s.push(this._rootIndex);for(let e=0;e<a;e++)i.push(t.children[e]);const d=`${t.index}`,l=N.fromJSON(t.obb),u=n(l.center,l.radius),c=t.mesh?.attribute,g=t.mesh?.geometry,_=t.mesh?.material,f={hasSharedResource:!1,isEmpty:null==g,attributes:null!=c?.resource?`${c.resource}`:void 0,geometry:null!=g?.resource?`${g.resource}`:void 0,texture:null!=_?.resource?`${_.resource}`:void 0,geometryDefinition:g?g.definition:-1,materialDefinition:_?_.definition:-1},m=new h(d,O(o,e,this._pageSize),u,a,0,f,this._lastUpdate,this._lodMetric,this._lodConversion(t.lodThreshold),g?g.featureCount:null);return m.serviceObbInIndexSR=l,m.visibilityObbInRenderSR=this._computeVisibilityObb(m),m.vertexCount=g?g.vertexCount:0,new p(r,a,x(this._visibilityCacheVersion),null,m)})),r=new b(o,i);-1===e?this._clientNodePage=r:this._nodePages.set(e,r)}_updateParentsAndLevel(){const e=new Array,t=(t,i,n)=>{const s=this._getPage(t);if(null!=s){const o=M(t,this._pageSize),r=s.nodes[o];r.parent=null!=i?i:-1;const a=r.node;null!=a&&(a.level=n,e.push(t))}};for(t(this._rootIndex,null,0);e.length;){const i=e.pop(),n=this.getNode(i);if(null!=n)for(let e=0;e<n.childCount;e++){t(this.getChildIndex(n.index,e),i,n.level+1),this._maxLevel=Math.max(this._maxLevel,n.level+1)}}}_getPage(e){const t=E(e,this._pageSize);return this._getPageFromPageIndex(t)}_getPageFromPageIndex(e){return e<0?this._clientNodePage:this._nodePages.get(e)}_getNodeInternal(e){const t=this._getPage(e);return null==t?null:(t.lastTraversed=this._frameNumber,t.nodes[M(e,this._pageSize)])}_addNode(e,t){e.children&&this.populateChildren(t,e.children);const i=this.getParent(t),n=null!=i?i.level+1:0;this._maxLevel=Math.max(this._maxLevel,e.children?n+1:n);const{lodMetric:s,maxError:o}=A(e.lodSelection),r=this._getNodeInternal(t),a=new h(e.id,t,e.mbs,r.childCount,n,e.resources,e.version,s,o,e.numFeatures);r.node=a,e.obb&&(a.serviceObbInIndexSR=N.fromJSON(e.obb)),a.visibilityObbInRenderSR=this._computeVisibilityObb(a);const d=r.ref;return null!=d&&(null==d.serviceMbsInIndexSR&&(d.serviceMbsInIndexSR=e.mbs),a.shareServiceBVsInRenderSRWith(d),d.visibilityObbInRenderSR=a.visibilityObbInRenderSR),a}_makeRefNode(e,t){const i=this._nodePages.get(0);if(t<-1)return this._makeClientRefNode(e,t);if(null==i)return-1;const n=i.nodes.length,s=new p(0,0,x(this._visibilityCacheVersion),e,null);return i.nodes.push(s),s.parent=t,e.invalidateServiceBVsInRenderSR(),n}_makeClientRefNode(e,t){const i=this._clientNodePage;if(null==i)return-1;if(t>=0)throw new Error(\"I3SIndex::client side nodes can not be made children of service side nodes.\");const n=-(i.nodes.length+1),s=new p(0,0,x(this._visibilityCacheVersion),e,null);return i.nodes.push(s),s.parent=t,e.invalidateServiceBVsInRenderSR(),n}_linkChildToParentNode(e,t){const i=this._clientNodePage;if(null==i||e>=0)return;const n=M(e,this._pageSize),s=M(t,this._pageSize),o=i.nodes[n],r=o.childOffset;i.children.splice(o.childOffset+o.childCount,0,t);const a=1;o.childCount+=a,null!=o.node&&(o.node.childCount+=a);for(const d of i.nodes)d.childOffset>r&&(d.childOffset+=a);i.nodes[s].parent=e,this._updateParentBoundingInformation(e)}_destroyClientRefNode(e,t,i){const n=this._clientNodePage;if(null==n)return;const s=this.getParentIndex(e);if(null==s)return;const o=new Set,r=new Map,a=e=>{const i=M(e,this._pageSize),s=n.nodes[i];if(s.childCount>0)for(let t=s.childOffset;t<s.childOffset+s.childCount;++t)a(n.children[t]);const r=s.node?.id??s.ref?.id;if(null==r)throw new Error(\"Node has no id\");t(r,e),o.add(s)};a(e);const d=n.nodes,l=n.children,h=n.nodes.map((()=>-1)),u=[],c=[];for(let g=0;g<d.length;++g){const e=d[g];if(o.has(e))continue;const t=u.length,n=O(g,-1,this._pageSize),s=O(t,-1,this._pageSize);if(e.node&&(e.node.index=s),h[g]=s,u.push(e),n!==s){const t=e.node?.id??e.ref?.id;if(null==t)throw new Error(\"Node has no id\");i(t,n,s),r.set(n,s)}}for(let g=0;g<u.length;++g){const e=O(g,-1,this._pageSize),t=u[g],i=c.length;for(let n=t.childOffset;n<t.childOffset+t.childCount;++n){const t=l[n];if(t>=0)c.push(t);else{const i=M(t,this._pageSize),n=d[i];if(o.has(n))continue;const s=h[i];c.push(s),n.parent=e}}t.childOffset=i,t.childCount=c.length-i,t.node&&(t.node.childCount=t.childCount)}n.nodes=u,n.children=c,this._updateParentBoundingInformation(h[M(s,this._pageSize)])}_updateParentBoundingInformation(e){let t=e;do{let e=null;const n=this._clientNodeLoader.indexSR,a=this._clientNodeLoader.renderSR,d=this._getNodeInternal(t);if(null==d)return;for(let r=0;r<d.childCount;r++){const d=this.getChildIndex(t,r),l=this._getNodeInternal(d),h=null!=l?l.ref||l.node:null;if(null!=h&&h.serviceMbsInIndexSR[3]>0)if(null==e)e=s(h.serviceMbsInIndexSR,D);else{const t=F,s=z,r=T;i(h.serviceMbsInIndexSR,n,t,a),i(e,n,s,a),o(t,s,r),i(r,a,e,n)}}const l=d.ref||d.node;null!=l&&(null!=e?(l.serviceMbsInIndexSR??=r(),s(e,l.serviceMbsInIndexSR)):_(l.serviceMbsInIndexSR),l.invalidateServiceBVsInRenderSR(),l.geometryObbInRenderSR=null),this.invalidateNodeVisibilityCacheInternal(d),t=this.getParentIndex(t)}while(null!=t)}populateChildren(e,t){const i=this._getNodeInternal(e),n=this._getPage(e);i.childOffset=n.children.length,i.childCount=t.length;for(let s=0;s<t.length;s++){const i=this._makeRefNode(t[s],e);n.children.push(i)}}getNode(e){const t=this._getNodeInternal(e);return null!=t?t.node:null}getIndexById(e){let t;return this._forAllNodes(((i,n)=>{(null!=i.node&&i.node.id===e||null!=i.ref&&i.ref.id===e)&&(t=n)})),t}getNodeById(e){const t=this.getIndexById(e);return null!=t&&t>=0?this.getNode(t):null}getChildIndex(e,t){const i=this._getPage(e);if(null==i)return-1;const n=i.nodes[M(e,this._pageSize)];return i.children[n.childOffset+t]}getParentIndex(e){const t=this._getPage(e);return null!=t&&e!==this._rootIndex?t.nodes[M(e,this._pageSize)].parent:null}getParent(e){const t=this.getParentIndex(e);return null!=t?this.getNode(t):null}isLeaf(e){const t=this._getNodeInternal(e);return null!=t&&0===t.childCount}get rootNode(){return this.getNode(this._rootIndex)}get isEditable(){return this._isEditable}removeAllGeometryObbs(){this._forAllNodes((e=>{null!=e.node&&(e.node.geometryObbInRenderSR=null)}))}invalidateVisibilityCache(){this._visibilityCacheVersion=S(this._visibilityCacheVersion)}invalidateNodeVisibilityCache(e){const t=this._getNodeInternal(e);null!=t&&this.invalidateNodeVisibilityCacheInternal(t)}invalidateNodeVisibilityCacheInternal(e){e.visibilityCache=x(this._visibilityCacheVersion)}invalidateBoundingVolumeCache(e){const t=this._getNodeInternal(e);null!=t&&(t?.invalidateBounds(),this.invalidateNodeVisibilityCacheInternal(t))}updateElevationChanged(e){const t=this._getNodeInternal(e);if(null==t)return;if(!this.needNodeElevationRange)return void this.invalidateBoundingVolumeCache(e);const i=null!=t.node?t.node:t.ref;null!=i&&i.invalidateElevationRange()}invalidateGeometryVisibility(e){const t=this._getNodeInternal(e),i=t?.node;i&&(i.geometryObbInRenderSR=null,i.invalidateServiceBVsInRenderSR())}invalidateVisibilityObbs(){null!=this.rootNode&&this.traverse(this.rootNode,(e=>(e.visibilityObbInRenderSR=this._computeVisibilityObb(e),e.geometryObbInRenderSR=null,!0)))}_isElevationRangeUpToDate(e){if(!this.needNodeElevationRange)return!0;const t=e?.node??e?.ref;return!t||t.elevationRangeValid}updateElevationRange(e){this._updateElevationRangeInternal(e,null)}_updateElevationRangeInternal(e,t){const i=this._getNodeInternal(e);if(!i)return!1;const n=i?.node??i?.ref;if(!n)return!1;if(n.elevationRangeValid)return t?.expandElevationRange(n),!0;const s=new v;let o=!1;for(let d=0;d<i.childCount;d++){const t=this.getChildIndex(e,d),i=this._updateElevationRangeInternal(t,s);o=o||!i}if(0===i.childCount||o){const e=!i.node?.resources.isEmpty;this._viewportQueries.expandElevationRange(n,e,s)}const r=n.elevationRangeMin,a=n.elevationRangeMax;return r===s.elevationRangeMin&&a===s.elevationRangeMax?(t?.expandElevationRange(n),!0):(i.node?.setElevationRange(s),i.ref?.setElevationRange(s),this.invalidateBoundingVolumeCache(e),t?.expandElevationRange(n),!0)}isNodeVisible(e){const t=this._getNodeInternal(e);if(null==t)return!0;const i=t.ref;if(null!=i&&!i.serviceMbsInIndexSR)return!0;if(this._isElevationRangeUpToDate(t)&&C(t.visibilityCache,this._visibilityCacheVersion))return w(t.visibilityCache);const n=t.node,s=this._viewportQueries;if(n){const e=s.ensureElevationAgnosticBoundingVolume(n),i=s.isElevationAgnosticBoundingVolumeVisible(e);let o=i;if(this.needNodeElevationRange&&i){const t=s.getNodeObbInRenderSRIndependentOfElevationOffset(n);null!=t&&(o=s.isObbVisibleIndependentOfElevation(e,t))}if(!o)return t.visibilityCache=R(!1,this._visibilityCacheVersion),!1}if(this._layerHasFilter&&this._computeNodeFiltering&&(null!=n||null!=i)&&t.filterImpact===u.NotChecked){const e=null!=n?n.serviceMbsInIndexSR:null!=i?i.serviceMbsInIndexSR:null;t.filterImpact=null!=e?this._computeNodeFiltering(e):u.Unmodified}const o=null!=n&&t.filterImpact===u.Culled;let r=!(null!=n&&n.imModificationImpact===c.Culled)&&!o;if(r){const t=!n||i&&!n.visibilityObbInRenderSR?i??null:n;if(null!=t){this.needNodeElevationRange&&this.updateElevationRange(e);r=s.isNodeVisible(t)}}return t.visibilityCache=R(r,this._visibilityCacheVersion),r}isGeometryVisible(e){if(!this.isNodeVisible(e))return!1;const t=this._getNodeInternal(e);return!!(null==t?.node?.geometryObbInRenderSR||this.layerHasModifications&&t.node.imModificationImpact===c.NotChecked)||this._viewportQueries.isGeometryVisible(t.node)}_traverseCoverage(e,t,i,n,s){const o=this._getPage(e);if(null==o||0===t.childCount)return;const r=t.childOffset+t.childCount,a=new Array;for(let d=t.childOffset;d<r;++d){const e=o.children[d],t=this._getNodeInternal(e);null!=t?.node&&this.isGeometryVisible(e)&&a.push(t)}n/=a.length;for(const d of a){const e=d.node.index;this._isLoaded(e)||this._isReloading(e)?(s.delta=Math.max(s.delta,i),s.coverage+=n):this._traverseCoverage(e,d,i+1,n,s)}}useNodeAsHole(e){if(\"off\"===this.holeFilling)return!1;const t=this._getNodeInternal(e);if(null==t)return!1;if(\"always\"===this.holeFilling)return!0;if(C(t.useAsHole,this._version))return w(t.useAsHole);const i={delta:0,coverage:0};this._traverseCoverage(e,t,0,1,i);const n=i.delta*i.coverage<=.5;return t.useAsHole=R(n,this._version),n}get maxLevel(){return this._maxLevel}get dirty(){return this._dirty}destroy(){this._updates.add.prune(),this._updates.update.prune()}requestUpdate(){this._dirty=!0,this._indexMissing=1,this._version=S(this._version)}imModificationsChanged(e){this.layerHasModifications=e,this._forAllNodes((({node:e})=>{null!=e&&(e.imModificationImpact=c.NotChecked,e.visibilityObbInRenderSR=this._computeVisibilityObb(e),e.hasModifications&&this.invalidateGeometryVisibility(e.index))})),this.invalidateVisibilityCache()}layerFilterChanged(e){this._layerHasFilter=e,this._forAllNodes((e=>{if(null!=e){e.filterImpact=u.NotChecked;const t=e.node;null!=t&&this.invalidateNodeVisibilityCache(t.index)}})),this.invalidateVisibilityCache()}update(e,t,i){if(!this._dirty)return;this._pageQueue.length>0&&this._addQueuedPages(t),this._invalidateElevationRangeForNewPages(t),this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.NEGATIVE_INFINITY,this._missingPagesAndNodes.clear(),this._prefetchNodes.clear(),this._updates.reset(e),P.clear();let n=!0;const s=new L,o=new L,r=this._imModificationUncategorized;r.clear();const a=new Set;let d=0;const l=(a,l,h)=>{const u=E(a,this._pageSize);if(null==l){let e=this._entryPriority(a);return e===1/0&&(e=this._entryPriority(h)),P.set(u,Math.max(e,P.get(u)||0)),this._loadingPages.has(u)||this._failedPages.has(u)||(this._missingPagesAndNodes.push(u),++d),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const g=l.node;if(this._updateNodeFeatureEstimate(g,o),null==g){const e=this._entryPriority(a);return this._loadingNodes.has(a)||this._failedNodes.has(a)||(this._missingPagesAndNodes.push(a),P.set(a,e)),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const _=this._getPage(a);if(0===this._missingPagesAndNodes.length&&!this._useNodePages)for(let e=0;e<l.childCount;e++){const t=_.children[l.childOffset+e],i=this._getNodeInternal(t);null==i||i.node||this._loadingNodes.has(t)||this._failedNodes.has(t)||(P.set(t,this._entryPriority(t)),this._prefetchNodes.push(t))}if(g.failed||g.resources.isEmpty)return void(n&&l.childCount>0&&this._isSelected(g)&&(n=!1));if(this._isLoaded(a)){if(s.known+=g.memory,++s.knownNodes,this._isSelected(g)?l.childCount>0&&(n=!1):(s.unremoved+=g.memory,n=!1),this._needsUpdate(g)){const e=this._entryPriority(a);P.set(a,e),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e),this._updates.update.push(a)}return}if(g.memory&&(s.known+=g.memory,++s.knownNodes),!this._isSelected(g))return void(this._isReloading(a)&&this._updates.remove.push(a));if(l.childCount>0&&(n=!1),g.memory?(s.missing+=g.memory,s.known+=g.memory,++s.knownNodes):++s.missingNodes,e.includes(g.index))return this._maxProcessingPrio=Math.max(this._maxProcessingPrio,this._entryPriority(a)),void(this._updates.cancel=this._updates.cancel.filter((e=>e!==g.index)));if(!t.done&&this._enable(g))return void t.madeProgress();const f=this._entryPriority(a);P.set(a,f),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,f),this._updates.add.push(a),this.layerHasModifications&&i&&null!=g&&g.imModificationImpact===c.NotChecked&&r.push(a)};this.traverseVisible(l,a),this._frameNumber++,this._missingPagesAndNodes.sort(((e,t)=>e-t)),this._missingPagesAndNodes.filterInPlace(((e,t)=>t<1||this._missingPagesAndNodes.data[t-1]!==e)),this._missingPagesAndNodes.sort(((e,t)=>P.get(e)-P.get(t))),this._missingPagesAndNodes.length>0&&(this._maxUnloadedPrio=P.get(this._missingPagesAndNodes.back()),this._prefetchNodes.clear()),this._removeUnusedNodePages(a,d);const h=this._updates.add;h.length>0&&this.layerHasModifications&&(r.length>0&&i?.(r),h.filterInPlace((e=>{const t=this._getNodeInternal(e),i=null==t?.node||t.node.imModificationImpact!==c.Culled;return i||this.invalidateNodeVisibilityCache(e),i}))),this._unloadedMemoryEstimate=s.missing-s.unremoved,s.knownNodes>3&&s.missingNodes>0&&(this._unloadedMemoryEstimate+=s.known/s.knownNodes*s.missingNodes),this._unloadedMemoryEstimate=.8*Math.max(0,this._unloadedMemoryEstimate),this._featureEstimate.estimate=this._computeFeatureEstimate(o),this._featureEstimate.leavesReached=n,this._updates.add.filterInPlace((e=>P.get(e)>=this._maxUnloadedPrio)).sort(((e,t)=>P.get(e)-P.get(t))),this._updates.update.sort(((e,t)=>P.get(e)-P.get(t))),this._indexMissing=this._loadingPages.size+this._loadingNodes.size+this._missingPagesAndNodes.length,this._dirty=this._indexMissing>0,P.clear()}checkFeatureTarget(e,t){const i=this._viewportQueries.updateScreenSpaceErrorBias(t);let n=t,s=t,o=i,r=10;for(;r--;){const i=new L;this._updateFeatureEstimate(n,i);if(this._computeFeatureEstimate(i)<=e){if(n>=t||i.missingNodes>0||0===r)break;o=n,n=.5*(n+s)}else s=n,n=.5*(n+o)}return this._version=S(this._version),this._viewportQueries.updateScreenSpaceErrorBias(i),Math.min(t,n)}_removeUnusedNodePages(e,t){if(!this._useNodePages)return;const i=e.size,n=this._nodePages,s=n.size+this._loadingPages.size+t;if(s>B&&s>i){const t=new Array;for(const[i,s]of n)0!==s.numNodesWithLoadedChildren||e.has(i)||t.push([s.lastTraversed,i]);t.sort(((e,t)=>e[0]-t[0])).some((e=>{const t=e[1];return this._deleteNodePage(t),n.size<=B}))}}_updateFeatureEstimate(e,t){this._version=S(this._version),this._viewportQueries.updateScreenSpaceErrorBias(e),this.traverseVisible(((e,i)=>this._updateNodeFeatureEstimate(null!=i?i.node:void 0,t)))}_updateNodeFeatureEstimate(e,t){null==e||e.failed||null==e.numFeatures||this._isSelected(e)&&(null!=e.numFeatures?(t.missing+=e.numFeatures,t.known+=e.numFeatures,++t.knownNodes):++t.missingNodes)}_computeFeatureEstimate(e){let t=e.known-e.unremoved;return e.knownNodes>3&&e.missingNodes>0&&(t+=e.known/e.knownNodes*e.missingNodes),Math.max(0,t)}load(){return this._load(this._missingPagesAndNodes)}prefetch(){return this._prefetchNodes.sort(((e,t)=>P.get(e)-P.get(t))),this._load(this._prefetchNodes)}_load(e){if(0===e.length||!this._canRequest())return!1;for(;e.length>0&&this._canRequest();){const t=e.pop();this._useNodePages&&t>=0?this._loadPage(t):this._loadNode(t)}return!0}get isLoading(){return this._indexMissing>0}get isPrefetching(){return this._prefetchNodes.length>0}get indexLoading(){return this._loadingPages.size+this._loadingNodes.size}get indexMissing(){return this._indexMissing}get unloadedMemoryEstimate(){return this._unloadedMemoryEstimate}get updates(){return this._updates}get featureEstimate(){return this._featureEstimate}get maxPriority(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)}nodeTraversalState(e){if(null==e)return null;const t=e.index,i=this._getNodeInternal(t);if(!i)return null;let n=i?.traversalState;if(n&&C(n.version,this._version))return n;const s=this._viewportQueries.getLodLevel(e),o=this._viewportQueries.hasLOD(e);let r=!0;if(o){const e=this.getParentIndex(t);if(null!=e){const t=this._getNodeInternal(e),i=t?.traversalState;r=!!i&&s>i.lodLevel}else r=s>0}else r=0===e.childCount;return n?(n.lodLevel=s,n.isChosen=r,n.version=R(!0,this._version),n):(n=new g(o,r,s,R(!0,this._version)),i.traversalState=n,n)}async _loadNode(e){this._loadingNodes.add(e);const i=this._getNodeInternal(e).ref;if(null==i)return void this._failedNodes.add(e);const n=i.id,s=this._urlPrefix+n,o=()=>{this._loadingNodes.delete(e),0===this._missingPagesAndNodes.length&&0===this._loadingNodes.size&&this.requestUpdate()};let r=null;try{r=e>=0?await this._streamDataController.request(s,\"json\"):await this._clientNodeLoader.loadNodeJSON(n)}catch(l){return o(),void(t(l)||(this._logger.error(\"#loadNode()\",this._layer,\"Error loading node: \"+s),this._failedNodes.add(e)))}o();const a=this._validateNode(n,r);if(null==a)return;a.obb&&this.invalidateNodeVisibilityCache(e);const d=this._addNode(a,e);this.nodeTraversalState(d)}_validateNode(e,t){if(null==t||\"object\"!=typeof t||t.id!==e)return this._logger.error(\"#validateNode()\",this._layer,`Invalid node. Wrong type or wrong id \"${e}\"`),null;if(!Array.isArray(t.mbs))return this._logger.error(\"#validateNode()\",this._layer,`Invalid bounding volume on node ${e}.`),null;t.sharedResource&&\"./shared\"!==t.sharedResource.href&&\"./shared/\"!==t.sharedResource.href&&this._logger.warn(\"#validateNode()\",this._layer,`Invalid shared resource href on node \"${e}\"`);const i=t.geometryData;null==i||Array.isArray(i)&&0===i.length||Array.isArray(i)&&1===i.length&&\"./geometries/0\"===i[0].href||this._logger.warn(\"#validateNode()\",this._layer,`Invalid geometry data on node \"${e}\"`);const n=t.attributeData,s=this._layer.attributeStorageInfo;null==n||Array.isArray(n)&&!n.some(((e,t)=>e.href!==`./attributes/${s?.[t]?.key??`f_${t}`}/0`))||this._logger.warn(\"#validateNode()\",this._layer,`Invalid attribute data on node \"${e}\"`),t.featureData&&t.featureData.length>1&&this._logger.warn(\"#validateNode()\",this._layer,`Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);const o=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:void 0,r=t.featureData&&1===t.featureData.length&&t.featureData[0].featureRange?t.featureData[0].featureRange[1]-t.featureData[0].featureRange[0]+1:void 0,a=t=>{if(null==t)return null;const i=t=>this._logger.error(\"#validateNode()\",this._layer,`Invalid node reference on node ${e}: ${t}`);if(\"number\"==typeof t.id)i(`id ${t.id} is a number instead of a string.`);else if(\"string\"!=typeof t.id||!Array.isArray(t.mbs))return i(\"Missing or invalid id.\"),null;if(!Array.isArray(t.mbs))return i(`Invalid bounding volume on reference ${t.id}.`),null;t.href&&t.href!==\"../\"+t.id&&this._logger.error(\"#validateNode()\",this._layer,`Invalid node href on node \"${e}\"`);const n=new l(`${t.id}`,t.mbs);return n.serviceObbInIndexSR=!this.ignoreServiceObb&&t.hasOwnProperty(\"obb\")&&t.obb?N.fromJSON(t.obb):null,n.visibilityObbInRenderSR=this._computeVisibilityObb(n),n},d=Array.isArray(t.children)?t.children.map(a).filter((e=>null!=e)):null,h=t.featureData?.length??!1,u=!0===t.isEmpty;return new m(e,t.mbs,o,\"string\"==typeof t.version?t.version:null,{isEmpty:!h&&u,hasSharedResource:null!=t.sharedResource,attributes:t.attributeData?e:void 0,texture:t.textureData&&t.textureData.length>0?e:void 0,geometry:null!=t.geometryData?e:void 0},d,Array.isArray(t.lodSelection)?t.lodSelection:null,r)}resetFailedNodes(){this._failedNodes.clear(),this._failedPages.clear(),this._forAllNodes((e=>{null!=e.node&&(e.node.failed=!1)}))}_entryPriority(e){const t=this._getNodeInternal(e),i=this.getParentIndex(e);if(null==t||null==i&&null==t.node)return null==i?1/0:this._entryPriority(i);let n=0;if(t.node&&null!=i){const e=this._getNodeInternal(i).traversalState;null!=e&&(n=e.lodLevel)}let s=this.progressiveLoadPenalty;for(let r=e;null!=r;r=this.getParentIndex(r))if(this._isLoaded(r)){s=0;break}const o=null!=t.ref?this._viewportQueries.distToPOI(t.ref):null!=t.node?this._viewportQueries.distToPOI(t.node):0;return-o-n*(o+this.progressiveLoadPenalty)+s}traverseVisible(e,t){const i=this._getNodeInternal(this._rootIndex);null!=i?this._traverseVisible(this._rootIndex,null,i,e,t):e(this._rootIndex,null,null)}_traverseVisible(e,t,i,n,s){const o=E(e,this._pageSize);if(s&&s.add(o),i.node&&0===i.childCount)return void(this.isGeometryVisible(e)&&n(e,i,t));if(!this.isNodeVisible(e))return;if(n(e,i,t),null==i.node)return;const r=this.nodeTraversalState(i.node);if(r?.nodeHasLOD&&r.lodLevel===this._maxLodLevel)return;const a=this._getPageFromPageIndex(o);for(let d=0;d<i.childCount;d++){const t=a.children[i.childOffset+d],o=this._getNodeInternal(t);if(o)this._traverseVisible(t,e,o,n,s);else{if(s){const e=E(t,this._pageSize);s.add(e)}n(t,null,e)}}}traverse(e,t){t(e)&&this.traverseDescendants(e,t)}traverseDescendants(e,t){++this._traverseDescendantsNestingLevel;const i=e.index,n=this._pageSize,s=E(i,n),o=this._getPageFromPageIndex(s);if(null==o)return;const r=this._frameNumber,a=this._nodePages;o.lastTraversed=r;const d=M(i,n),l=o.nodes[d],{childCount:h}=l;if(0===h)return;const u=1===this._traverseDescendantsNestingLevel?this._traverseDescendantsQueue:[0];let c=0;const g=[];{const{childOffset:e,childCount:t}=l,{children:i}=o;u.length=2**Math.ceil(Math.log2(c+t));for(let n=e;n<e+t;++n){const e=i[n];e>=0?(u[c]=e,++c):g.push(e)}}if(g.length>0){const e=this._clientNodePage;if(e){const i=e.children;let n=0;for(;n<g.length;){const s=g[n];++n;const o=-s-1,r=e.nodes[o],a=r.node;if(!a)continue;if(!t(a))continue;const{childCount:d}=r;if(0===d)continue;const{childOffset:l}=r,h=l+d;for(let e=l;e<h;++e)g.push(i[e])}}}if(c>0){let e=0;if(n>0){let i=s*n,d=o,l=d.nodes;for(;e<c;){const s=u[e];let o;if(++e,i<=s&&s<i+n)o=d;else{const e=s/n|0,t=a.get(e);if(void 0===t)continue;o=t,o.lastTraversed=r,d=o,l=d.nodes,i=n*e}const h=l[s-i],g=h.node;if(null==g)continue;if(!1===t(g))continue;const{childCount:_}=h;if(0===_)continue;const f=c+_;for(u.length<f&&(u.length=2**Math.ceil(Math.log2(c+_)));u.length<c+_;)u.length+=u.length;const m=o.children,{childOffset:v}=h,N=v+_;for(let e=v;e<N;++e)u[c]=m[e],++c}}else{const i=a.get(0);if(i)for(;e<c;){const n=u[e];++e;const s=i.nodes[n],o=s.node;if(!o)continue;if(!t(o))continue;const{childCount:r}=s;if(0===r)continue;u.length=Math.max(u.length,2**Math.ceil(Math.log2(c+r)));const a=i.children,{childOffset:d}=s,l=d+r;for(let e=d;e<l;++e)u[c]=a[e],++c}}}--this._traverseDescendantsNestingLevel}updateChildrenLoaded(e,t){let i=this.getNode(e);for(;null!=i;){const e=i.childrenLoaded,n=e+t;i.childrenLoaded=n;const s=0===e?1:0===n?-1:0,o=i.index;if(0!==s){this._getPage(o).numNodesWithLoadedChildren+=s}i=this.getParent(o)}}checkChildrenLoadedInvariant(){if(null==this.rootNode)return!0;const e=[],t=i=>{let n=this._isLoaded(i.index)||this._isReloading(i.index)?1:0;return this.traverseDescendants(i,(e=>(n+=t(e),!1))),i.childrenLoaded!==n&&e.push(i.index),n};return t(this.rootNode),e.length&&this._logger.error(\"childrenLoaded invariant broken at following nodes: \"+e.join(\",\")),e.length>0}updateElevationInfo(e,t){this.needNodeElevationRange=t&&!!e&&(\"relative-to-ground\"===e.mode||\"on-the-ground\"===e.mode),this._viewportQueries.updateElevationInfo(e),this.invalidateAllElevationRanges()}invalidateAllElevationRanges(){this._forAllNodes((e=>{e?.invalidateBounds(),e.node?.invalidateElevationRange(),e.ref?.invalidateElevationRange()}))}_forAllNodes(e){if(null!=this._clientNodePage){const t=this._clientNodePage;for(let i=0;i<t.nodes.length;i++)e(t.nodes[i],-(i+1))}for(const[t,i]of this._nodePages){const n=t*this._pageSize;for(let t=0;t<i.nodes.length;t++)e(i.nodes[t],n+t)}}clearCaches(){if(this._useNodePages){const e=this._nodePages,t=new Set;this.traverseVisible((e=>t.add(E(e,this._pageSize))));for(const[i,n]of e)if(0!==n.numNodesWithLoadedChildren||t.has(i))for(const e of n.nodes)e.traversalState=null;else this._deleteNodePage(i)}}_deleteNodePage(e){this._nodePages.delete(e)}get test(){return{addNode:(e,t)=>this._addNode(this._validateNode(e.id,e),t),getNodeInternal:e=>this._getNodeInternal(e),getPageIndex:e=>E(e,this._pageSize),getIndexWithinPage:e=>M(e,this._pageSize),getNodePage:e=>e<0?this._clientNodePage:this._nodePages.get(e),getChildIndices:e=>{const t=this._getNodeInternal(e),i=this._getPage(e);if(null==t||null==i)return[];const n=[];for(let s=t.childOffset;s<t.childOffset+t.childCount;++s)n.push(i.children[s]);return n},rootIndex:this._rootIndex,clientNodePage:this._clientNodePage,nodePages:this._nodePages}}}const P=new Map;class y{constructor(t){this.missing=t,this.update=new e({deallocator:null}),this.add=new e({deallocator:null}),this.remove=new e({deallocator:null}),this.cancel=[]}reset(e){this.add.clear(),this.update.clear(),this.cancel=e}}function x(e){return f(e,-2)}function S(e){return f(e,2)}function R(e,t){return t+(e?1:0)}function C(e,t){return(-2&e)===t}function w(e){return!(1&~e)}function E(e,t){return e<0?-1:t>0?e/t|0:0}function M(e,t){return e<0?-e-1:0===t?e:e%t}function O(e,t,i){return-1===t?-(e+1):0===i?e:t*i+e}const V=[[\"maxScreenThreshold\",d.MaxScreenThreshold],[\"screenSpaceRelative\",d.ScreenSpaceRelative],[\"removedFeatureDiameter\",d.RemovedFeatureDiameter],[\"distanceRangeFromDefaultCamera\",d.DistanceRangeFromDefaultCamera]];function A(e){if(e)for(let t=0;t<e.length;t++)for(const i of V)if(i[0]===e[t].metricType)return{lodMetric:i[1],maxError:e[t].maxError};return{lodMetric:d.None,maxError:0}}class L{constructor(){this.known=0,this.knownNodes=0,this.missing=0,this.missingNodes=0,this.unremoved=0}}function k(e){return Math.sqrt(e*(4/Math.PI))}const D=r(),F=r(),z=r(),T=r(),B=has(\"esri-mobile\")?100:300;export{I as I3SIndex,A as selectErrorMetric};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.FadeIn=0]=\"FadeIn\",a[a.FadeOut=1]=\"FadeOut\"}(a||(a={}));export{a as FadeDirection};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/PooledArray.js\";import{NodeState as i}from\"./I3SNode.js\";import{FadeDirection as s}from\"../support/I3SLayerView.js\";class o{constructor(e){this._layerView=e,this._lodGlobalDirty=!1}startNodeLoading(e,i,s,o){this._maxLodLevel=o.maxLodLevel,this._index=s,this._isNodeInScaleBounds=e,this._removeNodes=i}shouldLoadNode(e){if(null==e)return!1;const i=this._index.nodeTraversalState(e);return!!this._isChosenMaxLOD(i)||!!i.isChosen&&this._childrenRequireLoading(e)}setLodGlobalDirty(){this._lodGlobalDirty=!0}get requiresLODGlobalHandling(){return null!=this._index&&!0===this._lodGlobalDirty}lodGlobalHandling(e){if(!this.requiresLODGlobalHandling)return!1;this._lodGlobalDirty=!1;const i=this._layerView.view.resourceController.memoryController.usedMemory,s=Math.max(0,Math.floor(10*(i-1)));d.clear(),this._lodGlobalHandling(this._index.rootNode,s,!1,!!this._layerView.nodeCrossfadingEnabled);const o=d.length;this._removeNodes(d,e);const t=d.length<o;return 0!==d.length&&(this._lodGlobalDirty=!0),d.clear(),t}_lodGlobalHandling(e,o,t,n){if(null==e)return!1;const l=e.index,r=this._index,a=this._layerView,h=r.nodeTraversalState(e),u=this._isChosenMaxLOD(h),_=e.resources.isEmpty;if(u&&_)return e.childrenLoaded>0&&this._removeChildrenRecursive(e),!0;const c=a.isNodeLoaded(l);if(n&&c&&u){const i=!t&&this.hasNoVisibleChildren(e);a.fadeNode(l,s.FadeIn,!i)}const x=c&&(!a.isNodeFullyFadedIn||a.isNodeFullyFadedIn(l));if(c&&(a.updateNodeState(l,u?i.Leaf:i.Hole),u))return x&&this._removeChildrenRecursive(e),x;const L=e.childCount>0;let y=L;if(L)for(let i=0;i<e.childCount;i++){const e=r.getChildIndex(l,i),s=r.getNode(e);if(null!=s){!(!r.isGeometryVisible(e)||this._lodGlobalHandling(s,o,t||x,n))&&this._isNodeInScaleBounds(s)&&(y=!1)}else r.isNodeVisible(e)&&(y=!1)}const N=c&&!u&&(y||d.length<o);N&&d.push(l),!n||N||!c||t||y||a.fadeNode(l,s.FadeIn,!1);const m=e.resources.isEmpty;return y||x&&!N||m}_removeChildrenRecursive(e){this._index.traverseDescendants(e,(e=>((this._layerView.isNodeLoaded(e.index)||this._layerView.isNodeReloading(e.index))&&d.push(e.index),e.childrenLoaded>0)))}hasNoVisibleChildren(e){let i=!0;return this._index.traverseDescendants(e,(e=>!(!i||!this._index.isNodeVisible(e.index))&&(this._layerView.isNodeLoaded(e.index)?(i=!1,!1):e.childrenLoaded>0))),i}_childrenRequireLoading(e){let i=!1,s=!0;return this._index.traverseDescendants(e,(e=>{if(!s||!this._index.isNodeVisible(e.index))return!1;const o=this._index.nodeTraversalState(e);return this._isChosenMaxLOD(o)&&this._index.isGeometryVisible(e.index)&&(i=!0),this._layerView.isNodeLoaded(e.index)?(s=!1,!1):e.childrenLoaded>0})),s&&i}_isChosenMaxLOD(e){return e.isChosen&&(!e.nodeHasLOD||e.lodLevel===this._maxLodLevel)}}const d=new e({deallocator:null});export{o as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clamp as e}from\"../../../../core/mathUtils.js\";import{TextureEncoding as o,TextureUsage as r}from\"./enums.js\";import{RenderTexture as a}from\"../../webgl-engine/core/material/RenderTexture.js\";import{defaultMaskAlphaCutoff as s}from\"../../webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{getEllipsoidMode as t}from\"../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js\";import{TextureEncodingMimeType as l,CullFaceOptions as n,AlphaDiscardMode as i}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Texture as u}from\"../../webgl-engine/lib/Texture.js\";import{useSchematicPBRI3S as c,useSchematicPBR as m,defaultSchematicMRRFactors as d,defaultAdvancedMRRFactors as g}from\"../../webgl-engine/materials/pbrUtils.js\";import{TextureWrapMode as p}from\"../../../webgl/enums.js\";function h(e,o,a){const s=new Map,t=(e,o)=>{if(null==e)return-1;const r=s.get(e.id);if(r)return r.usage|=o,r.id;const a=s.size;return s.set(e.id,{id:a,usage:o}),a},l=o.pbrMetallicRoughness,i=l?.baseColorFactor,u=o.emissiveFactor,p=has(\"disable-feature:diffuse-rendering-i3s\")||a?c({normalTexture:o.normalTexture,emissiveTexture:o.emissiveTexture,emissiveFactor:o.emissiveFactor,occlusionTexture:o.occlusionTexture,metallicRoughnessTexture:l?.metallicRoughnessTexture,metallicFactor:l?.metallicFactor,roughnessFactor:l?.roughnessFactor}):m({normalTexture:o.normalTexture,emissiveTexture:o.emissiveTexture,emissiveFactor:o.emissiveFactor,occlusionTexture:o.occlusionTexture,metallicRoughnessTexture:l?.metallicRoughnessTexture,metallicFactor:l?.metallicFactor,roughnessFactor:l?.roughnessFactor}),h=p?d[0]:l?.metallicFactor??g[0],x=p?d[1]:l?.roughnessFactor??g[1],F=\"mask\"===o.alphaMode?r.Color|r.AlphaMask:r.Color,b={baseColorFactor:i?[i[0],i[1],i[2],i[3]]:[1,1,1,1],baseColorTextureId:t(l?.baseColorTexture,F),metallicRoughnessTextureId:t(l?.metallicRoughnessTexture,r.MetallicRoughness),metallicFactor:h,roughnessFactor:x},C={alphaMode:o.alphaMode,alphaCutoff:o.alphaCutoff,doubleSided:o.doubleSided,cullFace:\"none\"===o.cullFace?n.None:\"back\"===o.cullFace?n.Back:\"front\"===o.cullFace?n.Front:n.None,normalTextureId:t(o.normalTexture,r.Normal),emissiveTextureId:t(o.emissiveTexture,r.Emissive),occlusionTextureId:t(o.occlusionTexture,r.Occlusion),emissiveFactor:u?[u[0],u[1],u[2]]:[0,0,0],metallicRoughness:b,wrapTextures:!1,hasParametersFromSource:p},P=[];return s.forEach((({usage:o},r)=>{const a=null!=e&&e[r]&&e[r].formats,s=a?T(a.map((({name:e,format:o})=>({name:e,encoding:f[o]})))):[];P.push({id:r,usage:o,encodings:s})})),{material:C,textures:P}}function T(e){return e.sort(((e,o)=>e.encoding-o.encoding))}const f={ktx2:o.KTX2,basis:o.Basis,dds:o.DDS_S3TC,png:o.PNG,jpg:o.JPG,\"ktx-etc2\":o.KTX_ETC2},x={[l.KTX2_ENCODING]:o.Basis,[l.BASIS_ENCODING]:o.Basis,[l.DDS_ENCODING]:o.DDS_S3TC,\"image/png\":o.PNG,\"image/jpg\":o.JPG,\"image/jpeg\":o.JPG,\"image/ktx\":o.KTX_ETC2};function F(o){const a=o?.materialDefinitions?Object.keys(o.materialDefinitions)[0]:null,s=o?.textureDefinitions?Object.keys(o.textureDefinitions)[0]:null,t=a?o.materialDefinitions?.[a]:null,l=s?o.textureDefinitions?.[s]:null,i=b();if(null!=t){const o=t.params;o.diffuse&&(i.metallicRoughness.baseColorFactor=[o.diffuse[0],o.diffuse[1],o.diffuse[2],1]),null!=o.doubleSided&&(i.doubleSided=o.doubleSided,i.cullFace=o.doubleSided?n.None:n.Back),\"none\"!==o.cullFace&&\"front\"!==o.cullFace&&\"back\"!==o.cullFace||(i.cullFace=\"none\"===o.cullFace?n.None:\"back\"===o.cullFace?n.Back:n.Front),o.transparency&&(i.metallicRoughness.baseColorFactor[3]=e(1-o.transparency,0,1)),(o.useVertexColorAlpha||i.metallicRoughness.baseColorFactor[3]<1)&&(i.alphaMode=\"blend\")}const u=[];if(null!=l){const e=0;!l.wrap||\"repeat\"!==l.wrap[0]&&\"repeat\"!==l.wrap[1]||(i.wrapTextures=!0);let o=r.Color;\"rgba\"===l.channels&&(i.alphaMode=\"blend\",o|=r.AlphaMask);const a=l.images.length-1,s=l.images[a],t=e=>e?.split(\"/\").pop(),n=Array.isArray(l.encoding)?T(l.encoding.map(((e,o)=>({name:t(s.href[o]),encoding:x[e]||0})))):[{name:t(s.href),encoding:x[l.encoding]||0}];u.push({id:e,usage:o,encodings:n}),i.metallicRoughness.baseColorTextureId=e}return{material:i,textures:u}}const b=()=>({alphaMode:\"opaque\",alphaCutoff:s,doubleSided:!0,cullFace:n.None,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[.8,.8,.8,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6},wrapTextures:!1,hasParametersFromSource:!0});function C(e,o,a,s){if(null==e?.data)return null;const t=e.data,l=s.renderingContext.parameters.maxMaxAnisotropy,n=l>1,i=a||!o.wrapTextures?P:S,c=N(e.encoding),m=e.usage&r.Color?\"opaque\"===o.alphaMode?3:4:3;return new u(t,{mipmap:n,maxAnisotropy:l,encoding:c,wrap:i,components:m,noUnpackFlip:!0})}const P={s:p.CLAMP_TO_EDGE,t:p.CLAMP_TO_EDGE},S={s:p.REPEAT,t:p.REPEAT};function M(o,l,n,u,c,m){const p=m.rendererTextureUsage,h=e=>w(u,n,e&p),T=l.metallicRoughness.baseColorFactor,f=e(l.metallicRoughness.baseColorFactor[3],0,1);o.baseColor=[T[0],T[1],T[2],f],o.hasParametersFromSource=!!l.hasParametersFromSource,o.usePBR=m.usePBR,o.mrrFactors=[l.metallicRoughness.metallicFactor,l.metallicRoughness.roughnessFactor,l.hasParametersFromSource?d[2]:g[2]],o.emissiveFactor=l.emissiveFactor,o.isIntegratedMesh=m.isIntegratedMesh,o.textureAlphaCutoff=\"mask\"===l.alphaMode?l.alphaCutoff:s,o.alphaDiscardMode=\"opaque\"===l.alphaMode?i.Opaque:\"mask\"===l.alphaMode?i.Mask:i.MaskBlend;const x=[],F=h(r.Color|r.AlphaMask);null!=F&&(o.baseColorTexture=new a(c,F),x.push(o.baseColorTexture.loadPromise));const b=h(r.MetallicRoughness);null!=b&&(o.metallicRoughnessTexture=new a(c,b),x.push(o.metallicRoughnessTexture.loadPromise));const C=h(r.Emissive);null!=C&&(o.emissionTexture=new a(c,C),x.push(o.emissionTexture.loadPromise));const P=h(r.Occlusion);null!=P&&(o.occlusionTexture=new a(c,P),x.push(o.occlusionTexture.loadPromise));const S=h(r.Normal);return null!=S&&(o.normalTexture=new a(c,S),x.push(o.normalTexture.loadPromise)),o.commonMaterialParameters.hasSlicePlane=m.slicePlaneEnabled,o.commonMaterialParameters.doubleSided=l.doubleSided,o.commonMaterialParameters.cullFace=l.cullFace,o.ellipsoidMode=t(m.viewSpatialReference),Promise.all(x)}function R(e){const r=!!e.compressedTextureS3TC,a=!!e.compressedTextureETC,s=has(\"disable-feature:i3s-basis\")?0:o.Basis|o.KTX2,t=o.JPG|o.PNG,l=s|o.DDS_S3TC;return t|(r?l:0)|(a?s:0)}function D(e,o){if(null!=o)return e.find((e=>!!(e.encoding&o)))}function w(e,o,a){if(null==e||a===r.None)return null;for(let r=0;r<e.length;r++){const s=e[r];if(null!=s&&s.usage&a){const e=o[r];return null!=e?e.id:null}}return null}function N(e){switch(e){case o.KTX2:return l.KTX2_ENCODING;case o.Basis:return l.BASIS_ENCODING;case o.DDS_S3TC:return l.DDS_ENCODING;case o.PNG:return\"image/png\";case o.JPG:return\"image/jpeg\";case o.KTX_ETC2:return\"image/ktx\";default:return\"\"}}export{M as configureMaterial,C as createTexture,b as defaultMaterial,h as getMaterialAndTextures,F as getMaterialAndTexturesFromShared,R as getSupportedEncodings,D as selectEncoding};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{result as e,assertResult as t}from\"../../../../core/asyncUtils.js\";import has from\"../../../../core/has.js\";import{clone as r}from\"../../../../core/lang.js\";import{throwIfAbortError as i}from\"../../../../core/promiseUtils.js\";import{makeAbsolute as o}from\"../../../../core/urlUtils.js\";import{TextureEncoding as n}from\"./enums.js\";import{readBinaryAttribute as s,createGeometryDescriptor as a}from\"./I3SBinaryReader.js\";import{getMaterialAndTextures as u,getMaterialAndTexturesFromShared as l,selectEncoding as f}from\"./I3SMaterialUtil.js\";class d{constructor(e,t,r,i,o,n){if(this._streamDataController=t,this._logger=r,this._defaultGeometrySchema=i,this._requiredAttributes=o,this._options=n,this._logLayer=e,this._layerUrl=e.parsedUrl.path,this._geometryDefinitions=e.geometryDefinitions,e.materialDefinitions){const t=e.textureSetDefinitions;this._materialAndTextures=e.materialDefinitions.map((r=>u(t,r,\"integrated-mesh\"===e.type)))}}_load(e,t,r){return this._streamDataController.request(e,t,r)}_loadAttribute(e,t,r){const i=`${this._layerUrl}/nodes/${e.resources.attributes}/attributes/${t.key}/0`;return this._load(i,\"binary\",r).then((e=>s(t,e)))}async loadAttributes(e,t,r){const o=await Promise.allSettled(t.map((t=>this._loadAttribute(e,t.attributeStorageInfo,r)))),n={};for(let s=0;s<t.length;++s){const r=o[s],a=t[s];if(\"fulfilled\"===r.status){const e=r.value;n[a.name]=e}else{const t=r.reason;i(t),this._logger.error(\"#loadAttributes\",this._logLayer,`Failed to load attributeData for '${a.name}' on node '${e.id}'`,t)}}return n}async loadNodeData(r,i){const o=null!=this._requiredAttributes&&r.resources.attributes?e(this.loadAttributes(r,this._requiredAttributes,i)):null,{bufferDefinition:n,bufferIndex:s}=_(this._geometryDefinitions,r),u=!!r.resources.geometry,f=u?e(this._loadGeometry(r.resources.geometry,s,i)):null,d=r.resources.hasSharedResource?await this._loadShared(r,i):null,y=r.resources.materialDefinition,b=this._materialAndTextures&&null!=y&&y>=0?this._materialAndTextures[y]:null!=d?l(d):null,D=b?.material,p=b?.textures??[],x=`${r.id}`,A=!u&&this._options.loadFeatureData,w=A?await this._loadFeatureData(x,i):null,T=A?m(w):c(D),$=null==T?h(w):null,j=p.length>0?e(this.loadTextures(r,p,i)):null;let I=null,S=null;if(f){I=t(await f);const e=g(this._defaultGeometrySchema,d);S=a(n,e)}const U=j?t(await j):null,q=o?t(await o):{},B=q?{attributeData:q,loadedAttributes:this._requiredAttributes}:null;if(null!=T)return{geometryData:T,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:S,requiredTextures:p,textureData:U};if(null!=$)return{pointData:$,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:S,requiredTextures:p,textureData:U};throw new Error}static _addAbsoluteHrefTexture(e,t){const r=e.textureDefinitions;if(null!=r)for(const i of Object.keys(r))for(const e of r[i].images)Array.isArray(e.href)?e.hrefConcat=e.href.map((e=>o(e,t))):e.hrefConcat=o(e.href,t)}static _fixTextureEncodings(e){const t=e.textureDefinitions;if(null!=t)for(const r in t){const e=t[r];if(Array.isArray(e.encoding))for(let t=0;t<e.encoding.length;t++){const r=e.encoding[t];\"data:\"===r.substring(0,5)&&(e.encoding[t]=r.substring(5))}else{const t=e.encoding;\"data:\"===t.substring(0,5)&&(e.encoding=t.substring(5))}}}async _loadShared(e,t){if(null==e.resources.geometry)return{};const r=`${this._layerUrl}/nodes/${e.resources.geometry}/shared`,i=await this._load(r,\"json\",t);return d._fixTextureEncodings(i),d._addAbsoluteHrefTexture(i,r),i}_loadTexture(e,t,r,i,o,s){let a=!1;return o===n.DDS_S3TC||o===n.KTX2||o===n.Basis?this._load(e,\"binary\",s).then((e=>({id:t,usage:r,data:e,encoding:o,downsampled:a}))):this._load(e,\"image\",s).then((e=>{let n=e;const s=4096,u=2;if(i&&e.width*e.height>=s){const t=Math.ceil(e.width/u),r=Math.ceil(e.height/u),i=document.createElement(\"canvas\");i.width=t,i.height=r;i.getContext(\"2d\").drawImage(e,0,0,t,r),n=i,a=!0}return{id:t,usage:r,data:n,encoding:o,downsampled:a}}))}loadTextures(e,t,r){const i=!!this._options.uncompressedTextureDownsamplingEnabled,o=this._options.textureUsageMask;return Promise.all(t.map((t=>{if(!(t.usage&o))return null;const n=f(t.encodings,this._options.textureEncodings);if(null==n)return this._logger.error(\"#loadTextures\",this._logLayer,`No known encoding for texture found on node ${e.id}`),Promise.reject();const s=e.resources.texture||e.id,a=`${this._layerUrl}/nodes/${s}/textures/${n.name}`;return this._loadTexture(a,t.id,t.usage,i,n.encoding,r)})))}_loadFeatureData(e,t){const r=`${this._layerUrl}/nodes/${e}/features/0`;return this._load(r,\"json\",t)}_loadGeometry(e,t,r){const i=`${this._layerUrl}/nodes/${e}/geometries/${t}`;return this._load(i,\"binary\",r)}}function c(e){return{featureIds:[],geometries:[{type:\"ArrayBufferView\",params:{material:e}}],featureDataPosition:[0,0,0]}}function m(e){if(!e)return null;for(const t of e.featureData){const e=t.geometries;if(null!=e)for(const r of e)return{featureIds:[t.id],featureDataPosition:t.position,geometries:[r]}}return null}function h(e){if(!e)return null;const t=new Array;for(const r of e.featureData)null!=r.position&&t.push({featureIds:[r.id],featureDataPosition:r.position,geometries:[]});return t}function g(e,t){if(!e||!t?.materialDefinitions)return e;const i=Object.keys(t.materialDefinitions)[0];return!t.materialDefinitions[i].params.vertexRegions&&e.vertexAttributes.region&&delete(e=r(e)).vertexAttributes.region,e}function _(e,t){const r={bufferDefinition:null,bufferIndex:0},i=t.resources.geometryDefinition;if(null==e||null==i||i<0)return r;const o=i>=0?e[i].geometryBuffers:null;if(null==o)return r;for(let n=0;n<o.length;n++){const e=o[n];if(null==e.compressedAttributes)r.bufferIndex=n,r.bufferDefinition=o[n];else if(\"draco\"===e.compressedAttributes.encoding&&!has(\"disable-feature:i3s-draco\"))return r.bufferIndex=n,r.bufferDefinition=e,r}return r}export{d as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{onAbortOrThrow as e,always as t}from\"../../../../core/promiseUtils.js\";class r{constructor(e,t,r){this._requester=e,this._customParameters=t,this._apiKey=r,this._activeRequests=new Set}get busy(){return this._requester.busy}request(r,s,o){const a=new AbortController,l=e(o,(()=>a.abort())),i={signal:a.signal,query:{...this._customParameters,token:this._apiKey}},n=this._requester.request(r,s,i),u={response:n,abortController:a,abortHandle:l};return this._activeRequests.add(u),t(n,(()=>{u.abortController=null,u.abortHandle?.remove(),u.abortHandle=null,this._activeRequests.delete(u)})),n}cancelAll(){this._activeRequests.forEach((e=>{e.abortController?.abort(),e.abortController=null,e.abortHandle?.remove()})),this._activeRequests.clear()}}export{r as I3SStreamDataController};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{n as e,z as t,k as i,r as s,c as n,H as r,w as o,h as a,o as c,a as u,q as h,l,p as d,f as m,g as _}from\"../../../../chunks/vec32.js\";import{create as p}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{c as f,h as v}from\"../../../../chunks/vec42.js\";import{create as g}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{getReferenceEllipsoid as b}from\"../../../../geometry/ellipsoidUtils.js\";import{getSphericalPCPF as R}from\"../../../../geometry/spatialReferenceEllipsoidUtils.js\";import{projectBoundingSphere as S}from\"../../../../geometry/projection/projectBoundingSphere.js\";import{getProjector as M}from\"../../../../geometry/projection/projectors.js\";import{create as x,fromMatrix as C,intersectsSphere as I,createPoints as P}from\"../../../../geometry/support/frustum.js\";import{signedDistance as E,getNormal as D}from\"../../../../geometry/support/plane.js\";import{isPlateCarree as F}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{g as O,w as B}from\"../../../../chunks/sphere.js\";import{makeDehydratedPoint as V}from\"../../../../layers/graphics/dehydratedPoint.js\";import{ViewingMode as j}from\"../../../ViewingMode.js\";import{evaluateElevationAlignmentAtPoint as A}from\"../graphics/elevationAlignmentUtils.js\";import{ElevationContext as L}from\"../graphics/ElevationContext.js\";import{createContextWithoutExpressionSupport as y,extractExpressionInfo as w}from\"../graphics/featureExpressionInfoUtils.js\";import{LodMetric as G}from\"./I3SNode.js\";import{isValidMbs as N,intersectBoundingRectWithMbs as U,MbsIntersectResult as k}from\"./I3SUtil.js\";import{Obb as q,computeOffsetObb as z}from\"../../support/orientedBoundingBox.js\";const T=1e5;class H{get _frustumMbsCenter(){return this._frustumMbs}get _frustumMbsRadius(){return this._frustumMbs[3]}get _frustumPlanes(){return this._frustum}constructor(e,t,i,s,n,r,o,a,c={}){this._indexSR=e,this._renderCoordsHelper=t,this._clippingArea=n,this._elevationProvider=r,this._viewingMode=o,this._options=c,this._frustum=x(),this._frustumMbs=g(),this._useFrustumCulling=!1,this._poi=p(),this._elevationContext=null,this.minDistance=1/0,this.maxDistance=0,this.maxLodLevel=2,this._tmpObb=new q,this._tmp1=p(),this._tmp2=p(),this._tmp3=p(),this._tmp0=p(),this._screenspaceErrorBias=c.screenspaceErrorBias||1,this._progressiveLoadFactor=c.progressiveLoadFactor||1,this.updateCamera(i,s);const u=this._renderCoordsHelper.spatialReference;this._renderSR=u,this._renderSRSphericalPCPF=R(u),this._isGlobalMode=u===this._renderSRSphericalPCPF,this.updateElevationInfo(a),this._tmpPoint=V(0,0,0,e),this._isECEFOBBInLocalMode=this._indexSR.isWGS84&&(u.isWebMercator||F(u)),this._indexSREllipsoidRadius=b(this._indexSR).radius,this._indexSRSphericalPCPF=R(e),this._projectorIndexSRToIndexSRSphericalPCPF=M(this._indexSR,this._indexSRSphericalPCPF)}updateElevationInfo(e){null!=e?(this._elevationContext=L.fromElevationInfo(e),this._elevationContext.updateFeatureExpressionInfoContext(y(w(e,!1)))):this._elevationContext=null}updateCamera(n,r){if(this._useFrustumCulling=r,r){C(n.viewMatrix,n.projectionMatrix,this._frustum,X);{const r=n.eye,o=Z;e(o,n.viewForward);const a=Y;t(a,X[4],r);const c=.5*i(a,a)/i(o,a),u=this._frustumMbs;s(u,r,o,c);const h=1+c;u[3]=h}}this._screenSizeFactor=1/(n.perScreenPixelRatio/2),this._camPos=n.eye,this.minDistance=1/0,this.maxDistance=0}setPointOfInterest(e){this._poi=e}updateScreenSpaceErrorBias(e){const t=this._screenspaceErrorBias;return this._screenspaceErrorBias=e,t}updateClippingArea(e){this._clippingArea=e}expandElevationRange(e,t,i){if(null==this._elevationContext)return;const s=e.serviceMbsInIndexSR;if(!s)return;const n=\"relative-to-scene\"===this._elevationContext.mode?\"scene\":\"ground\";if(this._elevationProvider.getSphereElevationBounds){const e=this._elevationProvider.getSphereElevationBounds(s,this._indexSR,n);return void(e&&i.expandElevationRange(e))}const r=s[0],o=s[1],a=s[2],c=this._elevationProvider.getElevation(r,o,a,this._indexSR,n);c&&i.expandElevationRangeValues(c,c);const u=t?null:this._elevationProvider.getRootElevationBounds?.();u&&i.expandElevationRange(u)}getServiceMbsInRenderSR(e){const t=e.serviceMbsInRenderSR;if(N(t))return t;e.serviceMbsInIndexSR&&f(t,e.serviceMbsInIndexSR);const i=e.elevationRangeMin;if(this._elevationContext&&Number.isFinite(i)){let s=0,n=0;const r=e.elevationRangeMax;switch(this._elevationContext.mode){case\"relative-to-ground\":s=this._elevationContext.geometryZWithOffset(t[2],this._renderCoordsHelper)+i-t[2],n=r-i;break;case\"on-the-ground\":s=i-t[2],n=r-i}t[2]+=s+.5*n,t[3]+=.5*n}else this._elevationContext&&t[3]<T&&(this._tmpPoint.x=t[0],this._tmpPoint.y=t[1],this._tmpPoint.z=t[2],t[2]=A(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper));return S(t,this._indexSR,t,this._renderSR),t}getAndUpdateVisibilityObbInRenderSR(e){{const t=e.visibilityObbInRenderSR;if(t)return t}const t=.01*this._indexSREllipsoidRadius,{serviceMbsInIndexSR:i,serviceObbInIndexSR:s}=e;if(null==s||!i||!s.isValid||this._isECEFOBBInLocalMode&&(s.halfSizeX>t||s.halfSizeY>t||s.halfSizeZ>t))return null;{let t=e.serviceObbInRenderSR;if(null==t)t=new q,e.serviceObbInRenderSR=t;else if(t.isValid)return t;const n=i[3];let r=0,o=0;const a=s.centerZ,c=this._renderCoordsHelper,u=this._elevationContext;if(u&&e.elevationRangeValid){const t=e.elevationRangeMin,i=e.elevationRangeMax;switch(u.mode){case\"relative-to-ground\":r=u.geometryZWithOffset(a,c)+t-a,o=i-t;break;case\"on-the-ground\":r=t-a,o=i-t}}else if(u&&n<T){const e=this._tmpPoint;e.x=s.centerX,e.y=s.centerY,e.z=a,r=A(e,this._elevationProvider,u,c)-a}const h=o>0,l=h?this._tmpObb:t;return s.transform(l,this._indexSR,this._renderSR,r,this._renderSRSphericalPCPF,this._indexSRSphericalPCPF,this._projectorIndexSRToIndexSRSphericalPCPF),h&&z(l,0,o,this._viewingMode,t),t}}getNodeObbInRenderSRIndependentOfElevationOffset(e){{const t=e.visibilityObbInRenderSR??e.serviceObbInRenderSR??null;if(t?.isValid)return t}const t=e.serviceObbInIndexSR;return t?(t.transform(ee,this._indexSR,this._renderSR,void 0,this._renderSRSphericalPCPF,this._indexSRSphericalPCPF,this._projectorIndexSRToIndexSRSphericalPCPF),ee):null}ensureElevationAgnosticBoundingVolume(e){return-1===e.elevationAgnosticBoundingVolume[3]&&e.level>0&&(this._viewingMode===j.Global?this._updateElevationAgnosticBoundingVolumeGlobal(e):this._updateElevationAgnosticBoundingVolumeLocal(e)),e.elevationAgnosticBoundingVolume}_updateElevationAgnosticBoundingVolumeGlobal(t){const s=this.getNodeObbInRenderSRIndependentOfElevationOffset(t),o=t.elevationAgnosticBoundingVolume;let a,c=-1;if(s){const t=te;s.getCenter(t),e(t,t),a=t,s.getCorners(ie);for(const s of ie){e(s,s);const n=i(s,t);if(n<=0)return void(o[3]=-1);const r=Math.sqrt(1-n*n);c=Math.max(c,r)}}else{const i=t.serviceMbsInRenderSR;if(!N(i))return void(o[3]=-1);{const t=n(te,O(i)),s=i[3],o=r(t);c=0===s?0:o<s?-1:s/o,e(t,t),a=t}}v(o,a);const u=.001;o[3]=c+u}_updateElevationAgnosticBoundingVolumeLocal(e){const t=e.elevationAgnosticBoundingVolume,i=this.getNodeObbInRenderSRIndependentOfElevationOffset(e);if(i){const e=i.getCenter(te);e[2]=0,v(t,e);let s=0;const n=se;i.getCorners(ie);for(const t of ie){t[2]=0;const e=o(n,t);s=Math.max(s,e)}t[3]=Math.sqrt(s)}else{const i=e.serviceMbsInRenderSR;if(N(i)){const e=n(te,O(i));e[2]=0,v(t,e),t[3]=i[3]}}}isNodeVisible(e){const t=this.getServiceMbsInRenderSR(e);if(!this._isMBSinClippingArea(t))return!1;if(!this._useFrustumCulling)return!0;const i=this.getAndUpdateVisibilityObbInRenderSR(e);return i?i.doesIntersectFrustumConservativeApproximation(this._frustum):I(this._frustum,B(t))}isElevationAgnosticBoundingVolumeVisible(e){return!this._useFrustumCulling||(-1===e[3]||(this._viewingMode===j.Global?this._isConeVisibleInFrustum(e):this._isCylinderVisibleInFrustum(e)))}_isConeVisibleInFrustum(n){if(!this._isConeVisibleInFrustumMbs(n))return!1;const r=n[3];if(-1===r||r>.9)return!0;const o=this._frustumPlanes,c=this._frustumMbsCenter,u=n,h=i(u,c),l=this._frustumMbsRadius,d=h-l,m=h+l;if(d<=0)return!0;const _=a(K,u,d),p=a(Q,u,m),f=r/Math.sqrt(1-r*r);for(const v of o){const n=D(v),r=e($,n),o=i(r,u);if(Math.abs(1-o)<.01)continue;const c=ne;a(c,u,o),t(c,c,r),e(c,c);const h=re;s(h,_,c,d*f);if(E(v,h)<=0)continue;s(h,p,c,m*f);if(E(v,h)<=0)continue;return!1}return!0}_isConeVisibleInFrustumMbs(e){const t=e[3];if(t>.9)return!0;const s=this._frustumMbsRadius,n=this._frustumMbsCenter,o=r(n);if(o<=s)return!0;const u=e,h=i(u,n);{const e=a(J,u,h);if(c(e,n)<s)return!0}const l=h/o;if(h<=0){return-l<s}const d=Math.sqrt(1-l*l);if(d<t)return!0;const m=s/o;return d*Math.sqrt(1-m*m)-m*l<t}isObbVisibleIndependentOfElevation(e,t){if(!this._useFrustumCulling)return!0;if(-1===e[3])return!0;const s=this._frustumMbsRadius,n=this._frustumMbsCenter,r=this._frustumPlanes,o=ie;if(t.getCorners(o),this._viewingMode===j.Global){const t=e,c=i(t,n),u=c-s,h=c+s;if(u<=0)return!0;for(const e of r){let s=!0;for(const n of o){const r=i(n,t),o=oe;if(a(o,n,u/r),E(e,o)<=0){s=!1;break}const c=oe;if(a(c,n,h/r),E(e,c)<=0){s=!1;break}}if(s)return!1}}else{const e=n[2]-s,t=n[2]+s;for(const i of r){let s=!0;const n=D(i),r=n[0],a=n[1],c=n[2],u=i[3];for(const i of o){const n=r*i[0]+a*i[1]+u;if(n+c*e<=0||n+c*t<=0){s=!1;break}}if(s)return!1}}return!0}_isCylinderVisibleInFrustum(e){const t=this._frustumMbsCenter,i=this._frustumMbsRadius,s=n(J,t);s[2]=0;const r=e[3];return c(s,e)<=r+i}isGeometryVisible(e){if(!this._useFrustumCulling)return!0;const t=e.geometryObbInRenderSR;return t?.doesIntersectFrustumConservativeApproximation(this._frustum)??this.isNodeVisible(e)}_isMBSinClippingArea(e){return null==this._clippingArea||U(this._clippingArea,e)!==k.OUTSIDE}_screenSpaceDiameterMbs(e,t){const i=this.getServiceMbsInRenderSR(e),s=Math.sqrt(u(O(i),this._camPos)),n=s-i[3];return this._updateMinMaxDistance(s),n<0?.5*Number.MAX_VALUE:t/n*this._screenSizeFactor}calcCameraDistance(e){return this.calcCameraDistanceToCenter(e)-this.getServiceMbsInRenderSR(e)[3]}calcCameraDistanceToCenter(e){const t=this.getServiceMbsInRenderSR(e),i=h(O(t),this._camPos);return this._updateMinMaxDistance(i),i}calcAngleDependentLoD(e){const t=this.getServiceMbsInRenderSR(e),i=t[3],s=(Math.abs(t[0]*(t[0]-this._camPos[0])+t[1]*(t[1]-this._camPos[1])+t[2]*(t[2]-this._camPos[2]))/l(O(t))+i)/h(O(t),this._camPos);return Math.min(1,s)}hasLOD(e){return e.lodMetric!==G.None}_getDistanceGlobeMode(e,t){const s=l(O(t)),n=l(e)-s;a(this._tmp0,e,i(e,O(t))/d(e));const r=u(O(t),this._tmp0),o=t[3];if(r<=o*o)return Math.abs(n);{const r=a(this._tmp0,O(t),1/s),c=s,u=o*o/2/c,d=a(this._tmp1,r,c-u),p=e,f=m(this._tmp2,p,d),v=m(this._tmp2,f,a(this._tmp3,r,i(r,f))),g=_(this._tmp2,d,a(this._tmp2,v,o/l(v)));let b=h(p,g);if(n>=2e5){const e=m(this._tmp1,p,g);let t=i(e,r)/l(e);t<.08&&(t=1e-4),b/=t}return b}}_getDistance(e,t){return this._isGlobalMode?this._getDistanceGlobeMode(e,t):W(e,t)}_updateMinMaxDistance(e){e>0?(this.minDistance=Math.min(this.minDistance,e),this.maxDistance=Math.max(this.maxDistance,e)):(this.minDistance=0,this.maxDistance=Math.max(this.maxDistance,-e))}getLodLevel(e){if(e.lodMetric===G.None)return 0;if(0===e.childCount)return this.maxLodLevel;if(this._useFrustumCulling&&this._progressiveLoadFactor<1){const t=this._progressiveLoadFactor*this._screenspaceErrorBias,i=this._screenspaceErrorBias;return this.evaluateLODmetric(e,t)?this.evaluateLODmetric(e,i)?2:1:0}return this.evaluateLODmetric(e,this._screenspaceErrorBias)?this.maxLodLevel:0}evaluateLODmetric(e,t){switch(e.lodMetric){case G.ScreenSpaceRelative:{const i=this.getServiceMbsInRenderSR(e),s=this._getDistance(this._camPos,i),n=2*s/this._screenSizeFactor,r=s+i[3];return this._updateMinMaxDistance(r),e.maxError*t<=n}case G.MaxScreenThreshold:{let i=this._screenSpaceDiameterMbs(e,e.serviceMbsInIndexSR[3]*t);return this._options.angleDependentLoD&&(i*=this.calcAngleDependentLoD(e)),i<e.maxError}case G.RemovedFeatureDiameter:return this._screenSpaceDiameterMbs(e,e.maxError)*t<10;case G.DistanceRangeFromDefaultCamera:return this.calcCameraDistance(e)>e.maxError*t}return!1}distToPOI(e){const t=this.getServiceMbsInRenderSR(e);return h(O(t),this._poi)-t[3]}distCameraToPOI(){return h(this._camPos,this._poi)}}function W(e,t){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],r=i*i+s*s,o=t[3];if(r<=o*o)return Math.abs(n);const a=Math.sqrt(r)-o;return Math.sqrt(n*n+a*a)}const Z=p(),X=P(),Y=p(),J=p(),K=p(),Q=p(),$=p(),ee=new q,te=p(),ie=[p(),p(),p(),p(),p(),p(),p(),p()],se=p(),ne=p(),re=p(),oe=p();export{H as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import i from\"../../../core/Logger.js\";import s from\"../../../core/PooledArray.js\";import{EsriPromiseMixin as r}from\"../../../core/Promise.js\";import{isAbortError as a}from\"../../../core/promiseUtils.js\";import{watch as d,initial as o,sync as n}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{projectBoundingRect as u}from\"../../../geometry/projection/projectBoundingRect.js\";import{create as _,intersectsSphere as c}from\"../../../geometry/support/aaBoundingRect.js\";import{makeDehydratedPoint as p}from\"../dehydratedPoint.js\";import{PromiseQueue as g}from\"../../support/PromiseQueue.js\";import{viewingModeFromString as m}from\"../../../views/ViewingMode.js\";import{I3SClientNodeLoader as y}from\"../../../views/3d/layers/i3s/I3SClientNodeLoader.js\";import{addCallback as x}from\"../../../views/3d/layers/i3s/I3SFrameTask.js\";import{I3SIndex as f}from\"../../../views/3d/layers/i3s/I3SIndex.js\";import b from\"../../../views/3d/layers/i3s/I3SLodHandling.js\";import{NodeState as N,CacheState as v}from\"../../../views/3d/layers/i3s/I3SNode.js\";import w from\"../../../views/3d/layers/i3s/I3SNodeLoader.js\";import{I3SStreamDataController as C}from\"../../../views/3d/layers/i3s/I3SStreamDataController.js\";import{getVertexCrs as L,getIndexCrs as D,findIntersectingNodes as S}from\"../../../views/3d/layers/i3s/I3SUtil.js\";import I from\"../../../views/3d/layers/i3s/I3SViewportQueries.js\";import{FadeDirection as V}from\"../../../views/3d/layers/support/I3SLayerView.js\";import{toBoundingRect as A}from\"../../../views/3d/support/extentUtils.js\";import{ClientType as M,maxDownloadSlots as F}from\"../../../views/3d/support/index.js\";import{minQuality as P}from\"../../../views/3d/support/MemoryController.js\";import{extractSafeScaleBounds as O,scaleBoundsPredicate as U}from\"../../../views/support/layerViewUtils.js\";import{noBudget as q}from\"../../../views/support/Scheduler.js\";const G=100,R=2,j=1e4,Q=1e-4,T=1.2,E=500,H=1.5;let k=class extends(r(t)){get isMeshPyramid(){return\"mesh-pyramids\"===this.layer.profile||\"MeshPyramid\"===this.layer.store?.lodType}get isGraphics3D(){return\"points\"===this.layer.profile}get useMaximumNumberOfFeatures(){return!this.isMeshPyramid&&(null==this.layer.priority||\"High\"===this.layer.priority)}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(M.I3S_INDEX);return new C(e,this.layer.customParameters,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(M.I3S_DATA);return new C(e,this.layer.customParameters,this.layer.apiKey)}get crsVertex(){return L(this.layer)}get crsIndex(){return D(this.layer)}get layer(){return this.layerView.i3slayer}get running(){return this.updating}get rootNodeVisible(){if(this._index){const e=this._index.rootNode;if(e)return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}get requiredAttributes(){return this._requiredAttributes}constructor(e){super(e),this.screenSizeFactor=0,this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.scaleVisibilityEnabled=!0,this.worker=null,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._idleStateCallbacks=null,this._newLoadingNodes=new s({deallocator:null}),this._loadedNodeScales=new Map,this._modificationsNodeFilteringArray=new s,this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._idleQueue=new g,this._elevationUpdateNodes=new s({deallocator:null}),this._errorCount=0}initialize(){const{layerView:e,layer:t}=this;this._disableMemCache=!e.loadCachedGPUData||!e.addCachedGPUData,this._lodHandling=new b(e),this._defaultGeometrySchema=t.store.defaultGeometrySchema,this.disableIDBCache=has(\"disable-feature:idb-cache\"),\"fields\"in t&&(this._fields=t.fields,this._attributeStorageInfo=t.attributeStorageInfo),this.addResolvingPromise(Promise.all([t.indexInfo,t.when(),e.when()]).then((([s])=>{if(this.destroyed||!e||e.destroyed||!s)return;const{view:r,clientGeometry:a}=e,{resourceController:l}=r;if(this._setClippingArea(r.clippingArea),this.addHandles([d((()=>r?.pointsOfInterest?.focus?.renderLocation),(e=>this._pointOfInterestChanged(e)),o),d((()=>r.quality),(()=>this._setCameraDirty()),n),d((()=>e.contentVisible),(e=>{const t=e?()=>this._updateIdleState(!0):()=>this._updateViewData(),i=e?()=>this._updateIdleState(!1):()=>{};e&&null!=this._index&&this._index.invalidateAllElevationRanges(),this._idleStateCallbacks?(e||this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=l.scheduler.registerIdleStateCallbacks(t,i)}),o),x(e.view.resourceController.scheduler,this),d((()=>e.uncompressedTextureDownsamplingEnabled),(()=>this.restartNodeLoading())),d((()=>[this.featureTarget,this.fixedFeatureTarget]),(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),d((()=>r.state?.contentCamera),(()=>this._setCameraDirty())),d((()=>t.elevationInfo),(e=>this._elevationInfoChanged(e))),d((()=>t.effectiveScaleRange),(()=>this._scaleBoundsChanged())),d((()=>e.lodFactor),(()=>this._setCameraDirty())),d((()=>e.availableFields),(()=>this._requiredFieldsChange())),d((()=>e.holeFilling),(e=>null!=this._index&&(this._index.holeFilling=e)))]),this._updateScaleHandles(),this._viewportQueries=new I(this.crsIndex,r.renderCoordsHelper,r.state.contentCamera,!r.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,this.isMeshPyramid?r.basemapTerrain:r.elevationProvider,m(r.viewingMode),this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this._lod,angleDependentLoD:this._lod<.5}),this._clientNodeLoader=new y(this.layer.uid,{indexSR:this.crsIndex,vertexSR:this.crsVertex,renderSR:r.renderCoordsHelper.spatialReference,localMode:\"local\"===r.viewingMode},r.resourceController.memoryController,this.worker),this._index=new f(m(r.viewingMode),t,s,this.indexStreamController,this._clientNodeLoader,this._viewportQueries,i.getLogger(this),e.holeFilling,(t=>e.isNodeLoaded(t)),(t=>e.isNodeReloading(t)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,N.Leaf)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(t=>e.computeVisibilityObb?.(t)??null),e?.computeNodeFiltering?t=>e.computeNodeFiltering(t):void 0),this._index.updateElevationInfo(this.layer.elevationInfo,this.isMeshPyramid||this.isGraphics3D),this._index.imModificationsChanged(!!e.hasModifications),this._index.layerFilterChanged(!!e.hasGeometryFilter),null!=a){for(const e of a)this._addMesh(e.mesh,e.oid);this.addHandles(a.on(\"change\",(e=>{for(const t of e.removed)this._removeMesh(t.oid);for(const t of e.added)this._addMesh(t.mesh,t.oid)})))}this._startNodeLoading()}))),this._tmpPoint=p(0,0,0,this.crsIndex)}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;null!=t&&i?.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);null!=i&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._nodeLoader=null,B.prune(),null!=z&&(z.hide(),z=null)}get viewportQueries(){return this._viewportQueries}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=K(e,i),r=K(t,i);return s>=0&&r>=0?{index:s,name:t[r].name,field:t[r],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();$(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=_();A(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){null!=this._viewportQueries&&(this._viewportQueries.setPointOfInterest(e),null!=this._index&&(this._index.progressiveLoadPenalty=W.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),null!=this._viewportQueries&&null!=this._index&&(this._viewportQueries.updateClippingArea(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}_addMesh(e,t){if(null==this._index)return;const i=this._clientNodeLoader.createMeshNodeInfo(e,t),s=this._index.addClientNodeToIndex(i.id,i.mbs);this._clientNodeLoader.addMeshNode(s,i),this._evaluateUpdating(),this.notifyChange(\"rootNodeVisible\")}_removeMesh(e){const t=this._clientNodeLoader.getMeshNodeIndex(e);if(null!=t){if(null==this._index)throw new Error(\"delayed removal of client side i3s node geometry not supported yet.\");{const e=(e,t)=>{this.layerView.removeNode(t),this._loadedNodeScales.delete(t),this._clientNodeLoader.removeNode(e),this.layerView.deleteCachedNodeData&&null!=e&&this.layerView.deleteCachedNodeData(e),this.layerView.deleteCachedGPUData?.(this.layerView.loadCachedGPUData?.(t))},i=(e,t,i)=>{this._clientNodeLoader.updateNodeIndex(e,t,i),this.layerView.updateNodeIndex&&this.layerView.updateNodeIndex(t,i)};this._index.removeClientNodeFromIndex(t,e,i),this.notifyChange(\"rootNodeVisible\")}}}updateElevationChanged(e,t){const i=this._index;if(null==i?.rootNode||null==t)return null;this.crsIndex.equals(t)||(u(e,t,X,this.crsIndex),e=X);const s=this._elevationUpdateNodes;return s.clear(),S(e,i.rootNode,i,(e=>s.push(e.index))),s.length&&(s.forAll((e=>i.updateElevationChanged(e))),this._setCameraDirty()),s}removeAllGeometryObbs(){null!=this._index&&this._index.removeAllGeometryObbs()}getRenderMbs(e){return null!=this._viewportQueries?this._viewportQueries.getServiceMbsInRenderSR(e):null}_elevationInfoChanged(e){null!=this._index&&(this._index.updateElevationInfo(e,this.isMeshPyramid||this.isGraphics3D),this._setCameraDirty())}_updateScaleHandles(){const e=\"scale-bounds\";this.removeHandles(e),this._areScaleBoundsActive&&this.addHandles(this.layerView.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),e)}_scaleBoundsChanged(){this._areScaleBoundsActive||this._loadedNodeScales.clear(),this._updateScaleHandles(),this._setCameraDirty()}_scaleUpdateHandler(e){this._updateScaleInBoundingRect(e.extent,e.spatialReference),this._setCameraDirty()}_updateScaleInBoundingRect(e,t){const i=this._index;if(null==i)return;null!=i.rootNode&&u(e,t,X,this.crsIndex)&&this._loadedNodeScales.forEach(((e,t)=>{const s=i.getNode(t);null!=s&&c(X,s.serviceMbsInIndexSR)&&this._loadedNodeScales.set(t,this._computeScale(s))}))}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get _isIntegratedMesh(){return\"integrated-mesh\"===this.layer.type}get _areScaleBoundsActive(){const{minScale:e,maxScale:t}=O(this.layer);return this.scaleVisibilityEnabled&&(e>0||t>0)}get unloadedMemoryEstimate(){return null!=this._index&&this.layerView.contentVisible?this._index.unloadedMemoryEstimate*this._lodDropFactor:0}async _loadNodeData(e,t){return e.index<0?this._clientNodeLoader.loadNodeData(e.id,t):this._nodeLoader.loadNodeData(e,t)}async _loadAttributes(e,t,i){return(e.index<0?this._clientNodeLoader:this._nodeLoader).loadAttributes(e,t,i)}get indexDepth(){return null!=this._index?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData?this._disableMemCache=e:this._disableMemCache=!0}runTask(e,t){return this.layerView.contentVisible?this.layerView.visible&&null!=this._index?(this._processWithErrorLogging(e,t),this._index.maxPriority):-1/0:(this._updateViewData(),this._evaluateUpdating(),-1/0)}_processWithErrorLogging(e,t){try{this._process(e,t)}catch(s){this._errorCount<50?i.getLogger(this).error(`Error during processing: ${s} at ${s.stack}`):50===this._errorCount&&i.getLogger(this).error(\"Too many errors for this layer. Further errors will not be displayed.\"),this._errorCount++}}_process(e,t){this._restartNodeLoading&&this._startNodeLoading(),null!=this._nodeLoader&&null!=this._index&&(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this._isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this._isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t))),this._idleQueue.runTask(e),e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.indexLoading,t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating())}_processIndex(e){if(null==this._index)return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update(Array.from(this._loadingNodes.keys()),e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading||t===this._get(\"leavesReached\")||this._set(\"leavesReached\",t)}return this._index.load()}_prefetchIndex(){return!(null==this._index||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.useMaximumNumberOfFeatures||null==this._index||null==this._viewportQueries)return;const e=!this._index.isLoading,t=this.featureTarget*this._baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.indexMissing>E){if(this._featureLOD<=Q)return;this._featureLOD/=H,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=j||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this._lod,r=this._index.checkFeatureTarget(t,s);r!==s&&(this._featureLOD=r/this._baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*T||e&&i.estimate>t))return;if(this._featureLOD<=Q)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(j,Math.max(Q,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(null==t)return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);null!=s&&(!this.layerView.isNodeLoaded(s.index)&&this._isNodeInScaleBounds(s));s=t.getParent(s.index))if(this._enableFromGPUCache(s,N.Hole)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(null==this._index)return!1;let i=(this._isIdle?G:R)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());null!=t&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const r=this._index.getNode(s.add.back());if(null==r||r.cacheState!==v.Cached&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(r),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=R)&&(this._downloadingCount<F&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView){if(this.layerView.contentVisible){const i=(null!=this._index?this._index.indexMissing:0)+3*(null!=this._index?this._index.updates.add.length:0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.running||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling||null!=this._index&&this._index.isPrefetching),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}else e=this._cameraDirty,t=e?0:1;this.updating=e,this.updatingProgress=t}}_updateViewData(){if(!this._cameraDirty||null==this._index||null==this._viewportQueries)return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this.screenSizeFactor=1/(t.perScreenPixelRatio/2),this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=W.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange(\"rootNodeVisible\")}_getProgressiveLoadFactor(){return this.layerView.view.quality<1?1:this.layerView.progressiveLoadFactor}get _lod(){return this._featureLOD*this._baseLOD}get _baseLOD(){const e=this.layerView.lodFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*this.layerView.view.quality}get _lodDropFactor(){if(this.fixedFeatureTarget)return 1;return(Math.min(this.layerView.view.quality,.5)-P)/(.5-P)}isGeometryVisible(e){return!!this._index?.isGeometryVisible(e.index)}updateVisibility(e){this._index?.invalidateNodeVisibilityCache(e)}invalidateGeometryVisibility(e){this._index?.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){this._index?.invalidateVisibilityObbs()}modificationsChanged(){this._index?.imModificationsChanged(!!this.layerView.hasModifications),this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e))&&(!(null==this._index||!this._index.isGeometryVisible(e.index))&&this._isNodeInScaleBounds(e))}_shouldDropNode(e){if(null==this._viewportQueries)return!1;const t=this._lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||null==e||null==this._viewportQueries)return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,uncompressedTextureDownsamplingEnabled:this.layerView.uncompressedTextureDownsamplingEnabled,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:this.useMaximumNumberOfFeatures};this._nodeLoader=new w(this.layer,this.dataStreamController,i.getLogger(this),this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading((e=>this._isNodeInScaleBounds(e)),((e,t)=>this._removeNodes(e,t,J.fadeout)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(null==t||null==this._viewportQueries)return!1;B.clear(),this.layerView.getLoadedNodeIndices(B);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return B.filterInPlace((e=>{const i=t.getNode(e);return null==i||!t.isGeometryVisible(e)||s(i)||!this._isNodeInScaleBounds(i)})),B.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(B,e,J.pop),!(i&&this._lodDropFactor<1)&&(0===B.length||(B.clear(),!1))}markNodeToRemove(e){B.push(e)}removeMarkedNodes(){this._removeNodes(B,q,J.pop)}_removeNodes(e,t,i){const s=e.length;if(0!==s&&!t.done){for(null!=this._index&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),r=this._index;i===J.fadeout&&this.layerView.nodeFadeoutEnabled&&null!=r&&r.isGeometryVisible(s)?this.layerView.fadeNode(s,V.FadeOut,!0):this.layerView.removeNode(s),t.madeProgress()}if(this._loadedNodeScales.size>0)for(let t=e.length;t<s;t++){const i=e.data[t];this._loadedNodeScales.delete(i)}}}_needsUpdate(e){if(e.resources.isEmpty||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}async _updateLoadedNode(e){const t=new AbortController;this._updatingNodes.set(e.index,t),this._evaluateUpdating();try{const i=$(this.layerView.getLoadedAttributes(e.index),this._requiredAttributes);let s=null;s=i?this.layerView.getAttributeData(e.index):await this._loadAttributes(e,this._requiredAttributes,t.signal),await this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:s},t.signal)),t.signal)}catch(i){if(!a(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)}this._updatingNodes.delete(e.index),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void i.getLogger(this).error(\"already loading node \"+e.index);const t=new AbortController;this._loadingNodes.set(e.index,t),this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then((i=>{i&&null!=this._index&&this._loadingNodes.get(e.index)===t&&(this._loadingNodes.delete(e.index),this._index.requestUpdate())})).catch((e=>{if(!a(e))throw e})).finally((()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()}))}_loadAndAddNode(e,t){return e.cacheState===v.Uncached?this._loadUncached(e,t).then((()=>!1)):this._loadCached(e,t).then((t=>!t&&(e.cacheState=v.Uncached,!0))).catch((t=>!a(t)&&(e.cacheState=v.Uncached,!0)))}_enableFromGPUCache(e,t){if(this._disableMemCache||null==this._index)return!1;if(t===N.Hole&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e.index);return null!=t?.attributeInfo&&$(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){null!=this._index&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateLoadStatus(e,t){const i=this._index;null!=i&&i.updateChildrenLoaded(e,t?1:-1)}async _loadCached(e,t){if(this._enableFromGPUCache(e,N.Leaf))return!0;const i=this.layerView;if(this.disableIDBCache||!i.loadCachedNodeData||!i.addCachedNodeData)return!1;const s=(t,i)=>this._nodeLoader.loadTextures(e,t,i),r=(t,i)=>this._clientNodeLoader.loadTextures(e,t,i),a=e.index>=0?s:r,d=await this.schedule((()=>i.loadCachedNodeData(e,t,a)),t);if(null==d)return!1;const o=this._requiredAttributes,n=await this.reschedule((()=>this._loadAttributes(e,o,t)),t);return await this.reschedule((()=>i.addCachedNodeData(e,d,{loadedAttributes:o,attributeData:n},t)),t),this._nodeAdded(),!0}_loadUncached(e,t){return this._downloadingCount++,this._loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=v.Cached})).catch((t=>{if(!a(t))throw i.getLogger(this).error(\"#loadNodeData()\",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,null!=this._index&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&null!=this._index&&this._index.resetFailedNodes())}_getScale(e){if(this._loadedNodeScales.has(e.index))return this._loadedNodeScales.get(e.index);const t=this._computeScale(e);return this.layerView.isNodeLoaded(e.index)&&this._loadedNodeScales.set(e.index,t),t}_computeScale(e){this._tmpPoint.x=e.serviceMbsInIndexSR[0],this._tmpPoint.y=e.serviceMbsInIndexSR[1],this._tmpPoint.z=e.serviceMbsInIndexSR[2];const t=e.serviceMbsInIndexSR[3];return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint,t)}_isNodeInScaleBounds(e){if(!this._areScaleBoundsActive)return!0;const t=this._getScale(e),{minScale:i,maxScale:s}=O(this.layer);return U(t,i,s)}get test(){const e=this;return{index:this._index,set disableUpdates(t){e._updatesDisabled=t,t?e.cancelNodeLoading():e.requestUpdate()},set disableIDBCache(t){e.disableIDBCache=t},set ignoreServiceObb(t){null!=e._index&&(e._index.ignoreServiceObb=t)},shouldLoadNode:t=>e._shouldLoadNode(t),clientNodeLoader:this._clientNodeLoader}}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),null!=this._index&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;null!=t&&t.layerFilterChanged(e),this._setCameraDirty()}};e([l({readOnly:!0})],k.prototype,\"isMeshPyramid\",null),e([l({readOnly:!0})],k.prototype,\"isGraphics3D\",null),e([l({readOnly:!0})],k.prototype,\"useMaximumNumberOfFeatures\",null),e([l({readOnly:!0})],k.prototype,\"indexStreamController\",null),e([l({readOnly:!0})],k.prototype,\"dataStreamController\",null),e([l({readOnly:!0})],k.prototype,\"crsVertex\",null),e([l({readOnly:!0})],k.prototype,\"crsIndex\",null),e([l()],k.prototype,\"screenSizeFactor\",void 0),e([l()],k.prototype,\"featureTarget\",void 0),e([l()],k.prototype,\"fixedFeatureTarget\",void 0),e([l()],k.prototype,\"layerView\",void 0),e([l()],k.prototype,\"layer\",null),e([l()],k.prototype,\"updating\",void 0),e([l({readOnly:!0})],k.prototype,\"running\",null),e([l()],k.prototype,\"updatingProgress\",void 0),e([l({readOnly:!0})],k.prototype,\"leavesReached\",void 0),e([l({constructOnly:!0})],k.prototype,\"scaleVisibilityEnabled\",void 0),e([l({constructOnly:!0})],k.prototype,\"worker\",void 0),e([l({readOnly:!0,dependsOn:[]})],k.prototype,\"rootNodeVisible\",null),k=e([h(\"esri.layers.graphics.controllers.I3SOnDemandController\")],k);const B=new s({deallocator:null});let z;function $(e,t){return null!=e&&e.length===t.length&&e.every((e=>K(t,e.name)>=0))}function K(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const W={factorIM:.2,factor3dObject:.05,distancePenalty:10},X=_();var J;!function(e){e[e.pop=0]=\"pop\",e[e.fadeout=1]=\"fadeout\"}(J||(J={}));const Y=k;export{Y as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../request.js\";import i from\"../../../../core/Accessor.js\";import{splitIntoChunks as r}from\"../../../../core/arrayUtils.js\";import{resultOrAbort as s,result as o}from\"../../../../core/asyncUtils.js\";import{estimateStringByteSize as n,estimateNumberByteSize as a}from\"../../../../core/byteSizeEstimations.js\";import d from\"../../../../core/Collection.js\";import{makeHandle as c}from\"../../../../core/handleUtils.js\";import h from\"../../../../core/Logger.js\";import{destroyMaybe as l,abortMaybe as u}from\"../../../../core/maybe.js\";import{whenOrAbort as m,createResolver as g}from\"../../../../core/promiseUtils.js\";import p from\"../../../../core/ReactiveSet.js\";import{watch as y,initial as f}from\"../../../../core/reactiveUtils.js\";import{property as b}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import{subclass as _}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{equals as O}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{formatNumber as v}from\"../../../../intl/number.js\";import{getMaximumQuerySize as j,queryAllJSON as C}from\"../../../../layers/support/featureQueryAll.js\";import{assetMapFromAssetMapsJSON as w,extractMesh as I}from\"../../../../rest/support/meshFeatureSet.js\";import{direct3DObjectFeatureLayerDisplayEnabled as F,i3sPatchingEnabled as A,sceneLayerEditingEnabled as L}from\"../../../../support/featureFlags.js\";import{isTimeoutError as x}from\"../../../../support/requestUtils.js\";import{ViewingMode as E}from\"../../../ViewingMode.js\";import S from\"../FeatureLayerView3D.js\";let G=class extends i{constructor(e){super(e),this._warnMaximumChangedObjectsExceeded=!1,this._maximumNumberOfEditOVerrides=V,this._original3DOFLDefinitionExpression=null,this._interactiveEditingSessions=new d,this.geometryOverrides=new d,this._clientGeometryCache=new Map,this._associatedLayerView=null,this._attributeChangedObjectIds=new p,this._geometryChangedObjectIds=new p,this._pendingFetchChangedObjectIds=null,this._pendingFetchAbortController=new AbortController,this._featureIdLocks=new Map}initialize(){this._memCache=this.memoryController.newCache(`i3s-attribute-overrides-${this.layer.uid}`),this._pendingFetchChangedObjectIds=this._fetchChangedObjectIds(this._pendingFetchAbortController?.signal),this._pendingFetchChangedObjectIds.finally((()=>{this._pendingFetchAbortController=null,this._pendingFetchChangedObjectIds=null})),this.is3DOFL&&null!=this._associatedLayer&&(F()?this._associatedLayer.load().then((e=>{this.destroyed||(this._original3DOFLDefinitionExpression=e.definitionExpression,this.addHandles(y((()=>this._definitionExpression),(t=>e.definitionExpression=t),f)),this._associatedLayerView=new S({layer:this._associatedLayer,view:this.view}))})):A())}destroy(){this.is3DOFL&&null!=this._associatedLayer&&(F()?null!=this._associatedLayerView&&(this._associatedLayer.definitionExpression=this._original3DOFLDefinitionExpression):A()),this._set(\"layer\",null),this._memCache=l(this._memCache),this._pendingFetchAbortController=u(this._pendingFetchAbortController),this._pendingFetchChangedObjectIds=null,this._featureIdLocks.clear()}get is3DOFL(){return L()&&null!=this._associatedLayer?.infoFor3D}get sortedGeometryChangedObjectIds(){return this.is3DOFL?[...this._geometryChangedObjectIds].sort(((e,t)=>e-t)):[]}get _associatedLayer(){return null==this.layer?null:this.layer.associatedLayer}get hasGeometryChanges(){return this._geometryChangedObjectIds.size>0}get _definitionExpression(){const e=this.sortedGeometryChangedObjectIds;return 0===e.length?\"1 = 0\":`OBJECTID IN (${e.join(\",\")})`}get updating(){if(!this.is3DOFL)return!1;if(this._pendingFetchChangedObjectIds)return!0;if(F()){return!(null!=this._associatedLayerView)||null!=this._associatedLayerView&&this._associatedLayerView.updating}return!1}get isEmpty(){return null==this._pendingFetchChangedObjectIds&&0===this._attributeChangedObjectIds.size&&0===this._geometryChangedObjectIds.size}featureHasGeometryChanges(e){return this._geometryChangedObjectIds.has(e)}featureHasAttributeChanges(e){return this._attributeChangedObjectIds.has(e)}createInteractiveEditSession(e){this._attributeChangedObjectIds.add(e);const t=this._interactiveEditingSessions,i=new D(e,(()=>{t.remove(i)}));return t.unshift(i),i}async applyAttributeOverrides(e,t,i,r=[]){if(this._pendingFetchChangedObjectIds&&await m(this._pendingFetchChangedObjectIds,i),null==t)return;const{attributeData:s,loadedAttributes:o}=t;if(null==o||null==s||0===this._attributeChangedObjectIds.size)return;const n=new Set;for(const d of o)n.add(d.index);for(const d of r)n.has(d.index)||(o.push(d),s[d.name]=new Array(e.length));const a=await this._lockFeatureIds(e);try{const t={attributeData:s,loadedAttributes:o},r=this._getOverridesFromCache(e,t,this._attributeChangedObjectIds),{objectIds:n,fieldNames:a}=r;if(0===n.length||0===a.length)return;const d=await this._queryAttributeOverridesFromAssociatedLayer(n,a,i);if(null==d)return;this._processOverridesFromAssociatedLayer(e,d,a,t)}finally{a.remove()}}updateGeometry(e,t){this._geometryChangedObjectIds.add(e);const i=this._clientGeometryCache.get(e);if(null!=i&&(this.geometryOverrides.remove(i),this._clientGeometryCache.delete(e)),null!=t){const i={oid:e,mesh:t};this.geometryOverrides.add(i),this._clientGeometryCache.set(e,i)}}updateAttributeValue(e,t,i){this._attributeChangedObjectIds.add(e),this._cacheAttributeValue(e,t,i)}featureAdded(e){this.is3DOFL&&A()&&this._geometryChangedObjectIds.add(e),this._attributeChangedObjectIds.add(e)}_cacheAttributeValue(e,t,i){this._memCache.put(this._getAttributeCacheKey(e,t),i,this._memCacheAttributeValueSize(i))}_getOverridesFromCache(e,{loadedAttributes:t,attributeData:i},r){const s=new Set,o=new Array;for(const a of t)o[a.index]=i[a.name];const n=new Set;for(let a=0;a<e.length;a++){const i=e[a];if(r.has(i))for(const e of t){const t=this._attributeFromCache(i,e.index);void 0===t?(s.add(i),n.add(e.name)):o[e.index][a]=t}}return{objectIds:Array.from(s),fieldNames:Array.from(n)}}_attributeFromCache(e,t){const i=this._fromInteractiveEditingSession(e,t);if(void 0!==i)return i;const r=this._getAttributeCacheKey(e,t);return this._memCache.get(r)}_fromInteractiveEditingSession(e,t){if(null!=this._interactiveEditingSessions)for(const i of this._interactiveEditingSessions){if(i.objectId!==e)continue;const r=i.getAttribute(t);if(void 0!==r)return r}}_getAttributeCacheKey(e,t){return`${e}-${t}`}async _queryAttributeOverridesFromAssociatedLayer(e,t,i){if(0===e.length)return null;this._logWarningIfMaximumObjectsExceeded();const{associatedLayer:r}=this.layer;if(null==r)return null;const s=r.createQuery(),{objectIdField:o}=r,n=[o,...t];s.where=\"1=1\",s.returnGeometry=!1,s.outFields=n,s.cacheHint=!0;const a=await this._executeBatchQuery(r,e,s,i),d=[];for(const c of a)if(c.ok)for(const e of c.value.features)d.push(e);return d}async _queryGeometryOverridesFromAssociatedLayer(e,t){if(0===e.length||!this.is3DOFL||!A())return null;const i=this.layer.associatedLayer,r=i.infoFor3D,{spatialReference:s}=i,{state:{viewingMode:o},spatialReference:n}=this.view,a=o===E.Global,d=s.isGeographic;if(a&&!d)return h.getLogger(this).warn(\"unsupported-pcs-edits-in-global-view\",this.layer.title,k(s,n,this.view.viewingMode,$.Mode)),null;if(!a&&d)return h.getLogger(this).warn(\"unsupported-gcs-edits-in-local-view\",this.layer.title,k(s,n,this.view.viewingMode,$.Mode)),null;if(!(O(s,n)||a&&n.isWebMercator&&s.isWGS84))return h.getLogger(this).warn(\"unsupported-mismatched-spatial-reference-edits\",this.layer.title,k(s,n,this.view.viewingMode,$.SpatialReference)),null;this._logWarningIfMaximumObjectsExceeded();const{objectIdField:c,globalIdField:l}=i,u=[c,...null!=l?[l]:[]],m=i.createQuery();m.where=\"1=1\",m.returnGeometry=!0,m.outFields=u,m.cacheHint=!0,m.returnZ=i.hasZ,m.returnM=i.hasM;const g=await this._executeBatchQuery(i,e,m,t),p=[];for(const h of g){if(!h.ok)continue;const e=h.value,{assetMaps:t,features:i,globalIdFieldName:o}=e;if(null==t)continue;const n=w(r,t);for(const a of i){const e=I(a,o,s,r,n),t=a;null!=e?(t.geometry=e,p.push(t)):t.geometry=null}}return p}_logWarningIfMaximumObjectsExceeded(){if(!this._warnMaximumChangedObjectsExceeded)return;this._warnMaximumChangedObjectsExceeded=!1;let e=`The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${v(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;const t=this.layer.portalItem;t&&t.loaded?e+=` (${t.portal.url}/home/item.html?id=${t.id}#settings)`:e+=` (${this.layer.parsedUrl.path})`,h.getLogger(this).warn(\"#queryOverrides()\",this.layer.title,`${e}.`)}async _executeBatchQuery(e,t,i,o){if(0===t.length)return[];const n=j(e);t=[...t].sort(((e,t)=>e-t));const a=r(t,n).map((t=>{const r=i.clone();return r.objectIds=t,s(C(e,r,{signal:o}))}));return Promise.all(a)}_processOverridesFromAssociatedLayer(e,t,i,{loadedAttributes:r,attributeData:s}){const o=this._associatedLayer;if(null==o)return;const n=o.objectIdField,a=i.map((t=>(t in s||(s[t]=new Array(e.length)),s[t]))),d=new Map(r.map((e=>[e.name,e.index]))),c=i.map((e=>d.get(e))),h=new Map(Array.from(e,((e,t)=>[e,t])));for(const l of t){const e=l.attributes[n];for(let t=0;t<i.length;t++){const r=c[t],s=h.get(e),o=l.attributes[i[t]];a[t][s]=o,this._cacheAttributeValue(e,r,o)}}}_memCacheAttributeValueSize(e){return\"string\"==typeof e?n(e):a()}async _fetchChangedObjectIds(e){const i=this.layer;await i.load({signal:e}),this._geometryChangedObjectIds.clear(),this._attributeChangedObjectIds.clear();const{associatedLayer:r}=i;if(null==r||!r.capabilities?.operations?.supportsChangeTracking)return;const s=this._getFetchChangedObjectIdsServerGen();if(null==s)return;const n=r.layerId,a=this.is3DOFL,d={f:\"json\",returnIdsOnly:!0,layers:`[${n}]`,returnUpdates:!0,returnDeletes:a,returnInserts:a,layerServerGens:JSON.stringify([{id:n,serverGen:s}])};if(a){const e=r.infoFor3D;d.fieldsToCompare=JSON.stringify({fields:[...Object.values(e.transformFieldRoles),e.sourceHashField]})}const c=await o(t(`${r.url}/extractChanges`,{method:\"post\",query:d,timeout:M,signal:e}));if(!c.ok&&x(c.error)){const e=this.layer.title;h.getLogger(this).warn(\"extractChanges:timeout\",e,`${e} could not obtain edited features that are not cached in the scene service. Display of features may not be up to date with the latest edits. Consider re-caching the scene service.`)}if(c.ok&&1===c.value.data?.edits?.length){const t=c.value.data.edits[0],i=t?.objectIds,s=t?.fieldUpdates,o=i?.adds??[],n=i?.updates??[],d=i?.deletes??[],h=[...o,...n,...d],l=a?[...o,...s??n,...d]:[],u=Math.min(this._maximumNumberOfEditOVerrides,h.length);u<h.length&&(this._warnMaximumChangedObjectsExceeded=!0);const m=h.sort(((e,t)=>e-t));for(let e=0;e<u;++e){const t=m[e];this._attributeChangedObjectIds.add(t)}for(const e of l)this._geometryChangedObjectIds.add(e);if(this.is3DOFL&&A()&&this._geometryChangedObjectIds.size>0){const t=await this._queryGeometryOverridesFromAssociatedLayer(Array.from(this._geometryChangedObjectIds),e);if(null!=t)for(const e of t)null!=e.geometry&&this.updateGeometry(e.attributes[r.objectIdField],e.geometry)}}}_getFetchChangedObjectIdsServerGen(){const e=this.layer;if(null!=e.serviceUpdateTimeStamp?.lastUpdate)return e.serviceUpdateTimeStamp.lastUpdate;const t=e.associatedLayer;return null!=t?.serverGens?.minServerGen?t.serverGens.minServerGen:null}async _lockFeatureIds(e){const t=this._featureIdLocks;let i=!0;for(;i;){const r=new Array;for(const i of e){const e=t.get(i);e&&r.push(e)}0===r.length?i=!1:await Promise.all(r)}const r=g(),s=r.promise;for(const o of e)t.set(o,s);return c((()=>{for(const i of e)t.delete(i);r.resolve()}))}get test(){const e=Array.from(this._attributeChangedObjectIds),t=this._pendingFetchChangedObjectIds,i=this;return{changedObjectIds:e,pendingFetchChangedObjectIds:t,get maximumNumberOfEditOVerrides(){return i._maximumNumberOfEditOVerrides},set maximumNumberOfEditOVerrides(e){i._maximumNumberOfEditOVerrides=e}}}};e([b({constructOnly:!0})],G.prototype,\"view\",void 0),e([b({constructOnly:!0})],G.prototype,\"layer\",void 0),e([b({readOnly:!0})],G.prototype,\"is3DOFL\",null),e([b()],G.prototype,\"_interactiveEditingSessions\",void 0),e([b({readOnly:!0})],G.prototype,\"sortedGeometryChangedObjectIds\",null),e([b({readOnly:!0})],G.prototype,\"geometryOverrides\",void 0),e([b()],G.prototype,\"_clientGeometryCache\",void 0),e([b()],G.prototype,\"_associatedLayer\",null),e([b()],G.prototype,\"_associatedLayerView\",void 0),e([b({constructOnly:!0})],G.prototype,\"memoryController\",void 0),e([b()],G.prototype,\"_attributeChangedObjectIds\",void 0),e([b()],G.prototype,\"_geometryChangedObjectIds\",void 0),e([b()],G.prototype,\"hasGeometryChanges\",null),e([b()],G.prototype,\"_pendingFetchChangedObjectIds\",void 0),e([b()],G.prototype,\"_pendingFetchAbortController\",void 0),e([b()],G.prototype,\"_definitionExpression\",null),e([b()],G.prototype,\"updating\",null),e([b()],G.prototype,\"isEmpty\",null),G=e([_(\"esri.views.3d.layers.i3s.I3SOverrides\")],G);class D{constructor(e,t){this.objectId=e,this._remove=t,this._updates=new Map,this._isActive=!0}getAttribute(e){return this._updates.get(e)}setAttribute(e,t){this.isActive&&this._updates.set(e,t)}remove(){this.isActive&&(this._isActive=!1,this._remove())}get isActive(){return this._isActive}}const M=1e4,V=5e4;var $;function k(e,t,i,r){return`Displaying the edits of a SceneLayer with a${r===$.Mode?e.isGeographic?\" geographic \":\" projected \":\" \"}spatial reference (wkid:${e.wkid}) in ${i} viewing mode${r===$.SpatialReference?` with spatial reference (wkid:${t.wkid}) `:\" \"}is not supported. No geometry edits will be displayed for this layer.\\nPlease consider re-caching the scene service or changing the ${r===$.Mode?\"viewing mode\":\"view spatial reference\"} to display edits.`}!function(e){e[e.Mode=0]=\"Mode\",e[e.SpatialReference=1]=\"SpatialReference\"}($||($={}));export{G as I3SOverrides};\n"],
  "mappings": "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",
  "names": ["e", "s", "c", "o", "t", "r", "a", "d", "n", "u", "g", "e", "m", "s", "l", "i", "h", "e", "t", "o", "r", "n", "s", "a", "p", "f", "i", "l", "d", "u", "c", "g", "M", "_", "w", "S", "b", "N", "v", "D", "I", "x", "j", "R", "y", "G", "m", "a", "r", "s", "t", "e", "o", "l", "c", "h", "I", "s", "t", "i", "e", "h", "o", "r", "c", "p", "e", "t", "i", "n", "s", "o", "b", "I", "r", "l", "h", "u", "c", "g", "_", "f", "m", "v", "N", "d", "S", "y", "k", "M", "a", "O", "x", "A", "_a", "_b", "D", "F", "z", "T", "w", "C", "P", "L", "V", "a", "o", "e", "i", "s", "d", "t", "n", "l", "r", "a", "h", "u", "_", "c", "x", "L", "y", "N", "m", "h", "e", "o", "a", "s", "t", "r", "l", "i", "u", "p", "n", "x", "F", "b", "C", "P", "T", "f", "S", "c", "N", "m", "M", "w", "R", "D", "d", "e", "t", "r", "i", "o", "n", "h", "s", "a", "_", "u", "f", "y", "b", "F", "D", "p", "x", "A", "w", "T", "m", "c", "$", "j", "I", "S", "g", "U", "q", "B", "r", "e", "t", "s", "o", "a", "l", "i", "n", "u", "T", "H", "e", "t", "i", "s", "n", "r", "o", "a", "c", "I", "u", "G", "d", "L", "X", "Z", "z", "Y", "P", "h", "l", "m", "_", "K", "p", "f", "v", "$", "V", "U", "O", "F", "g", "b", "G", "R", "j", "Q", "T", "E", "H", "k", "n", "e", "r", "Z", "i", "t", "o", "s", "a", "l", "h", "I", "B", "z", "K", "$", "u", "W", "X", "g", "c", "d", "J", "C", "Y", "G", "e", "V", "s", "a", "t", "c", "r", "n", "i", "D", "o", "d", "l", "k", "$", "u", "m", "g", "p", "h", "S", "b", "_", "M"]
}
