{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/FeatureForm/featureFormUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../intl.js\";import{isSome as e}from\"../../core/arrayUtils.js\";import{neverReached as t}from\"../../core/compilerUtils.js\";import{templateHasKey as n,replace as r}from\"../../core/string.js\";import{DomainValidationError as o}from\"../../layers/support/domainUtils.js\";import{isTimeOnlyField as i,NumericRangeValidationError as l,TypeValidationError as a}from\"../../layers/support/fieldUtils.js\";import{isAnyDateField as s}from\"../../smartMapping/support/utils.js\";import{getLabelForDateFieldValue as u,getIntlOptionsForField as p}from\"../support/dateUtils.js\";import{substitute as m}from\"../../intl/substitute.js\";const d=e=>\"field\"===e?.type,c=e=>\"group\"===e?.type,f=e=>\"relationship\"===e?.type,y=e=>!c(e)&&null!=e.group,b=e=>\"field\"===e.type,T=e=>\"group\"===e.type,x=e=>\"relationship\"===e.type,g=e=>e.reduce(((e,t)=>c(t)?[...e,...t.inputs]:[...e,t]),[]),O=e=>g(e).filter(d),j=e=>g(e).filter(f),E=e=>null!=e&&(v(e,\"combo-box\")||v(e,\"radio-buttons\")),v=(e,t)=>null!=e&&e.input?.type===t,V=e=>null!=e&&(v(e,\"text-box\")||v(e,\"text-area\")),U=({domain:e,inputType:t=\"text-box\",dataType:n})=>\"number\"===n&&\"text-box\"===t&&(!e||\"coded-value\"!==e.type),h=e=>\"items\"in e,N={typeFieldName:null,types:[]};function _(t){const{attributes:r,fieldsIndex:o,label:i,timeZone:l}=t;if(!r||\"object\"!=typeof r)return i;const a=Object.keys(r).filter((e=>n(i,e))),s=a.map((e=>r[e])),u=a.map((e=>o.get(e))).filter(e);return I(i,A({values:s,fields:u,timeZone:l}))}function A(e){const{fields:t,values:n}=e,r=e.timeZone??void 0,o=t.map(((e,t)=>{let o=n[t];if(e.domain&&\"coded-value\"===e.domain.type){const t=e.domain.codedValues.find((e=>e.code===o));t?.name&&(o=t.name)}return(s(e)||i(e))&&(o=u(e,o,{timeZone:r,...p(e)})),[e.name,o]}));return Object.fromEntries(o)}function I(e,t){return r(r(e,(e=>`{${e.toLowerCase()}}`)),Object.fromEntries(Object.entries(t).map((([e,t])=>[e.toLowerCase(),t]))))}const L=e=>e?\"subtype-sublayer\"===e.type?{typeFieldName:e.parent?.subtypeField,types:e.parent?.subtypes??[]}:\"types\"in e&&e.types?{typeFieldName:e.typeIdField,types:e.types.map((({id:e,name:t,domains:n})=>({code:e,name:t,domains:n})))}:N:N,R=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case\"INSERT\":return n.supportsAdd;case\"UPDATE\":case\"DELETE\":return n.supportsUpdate;default:return!0}};var F;!function(e){e.TOO_SHORT=\"length-validation-error::too-short\"}(F||(F={}));const D={type:\"number\"},Z={type:\"number\",intlOptions:{notation:\"scientific\"}};function w(e){return e>=1e7||e<=-1e7}function C(e,{validationErrors:t}){return null!=e.max&&null!=e.min?t.outsideRange:null!=e.max?t.outsideRangeMax:t.outsideRangeMin}const S=(e,t,n)=>{const{dataType:r,error:i,minLength:s,value:u,required:d}=e,c=t?.validationErrors;if(!c||!i)return null;if(d&&null===u)return c.cannotBeNull;if(i===o.VALUE_OUT_OF_RANGE||i===l.OUT_OF_RANGE){const{field:o,range:i}=e,l={type:\"date\",intlOptions:{timeZone:\"date\"===o.type&&n?n:void 0,...p(o)}},a=C(i,t);return m(a,i,{format:{max:\"date\"===r?l:null!=i.max&&w(i.max)?Z:D,min:\"date\"===r?l:null!=i.min&&w(i.min)?Z:D}})}return i===o.INVALID_CODED_VALUE?c.invalidCodedValue:i===a.INVALID_TYPE?c.invalidType:i===F.TOO_SHORT?m(c.tooShort,{min:s}):null},M=e=>{if(!e)return;const t=e.layer,n=t&&\"geometryType\"in t?t.geometryType:void 0,r=e.geometry?.type;return\"polyline\"===r||\"polyline\"===n?\"line\":r||n||\"table\"},G=e=>{const t=[];if(e.formTemplate){const{description:r,title:o}=e.formTemplate;e.fields?.forEach((e=>{const i=o&&n(o,e.name),l=r&&n(r,e.name);(i||l)&&t.push(e.name)}))}return t};function H(e,t){const n=t??(\"formTemplate\"in e&&e.formTemplate);if(n){return(n.elements?.filter(b)??[]).some((({fieldName:t})=>!e.fieldsIndex.get(t)))}return!1}function P(e,t){return null==e||t.onValue!==e&&t.offValue!==e}function k(e,n){switch(n.objectType){case\"any\":return!0;case\"null\":return null==e;case\"code\":return e===n.codedValue?.code;case\"range\":return null!=e&&null!=n.minValue&&null!=n.maxValue&&+e>=n.minValue&&+e<=n.maxValue;default:return t(n.objectType),!1}}export{F as LengthValidationError,R as capabilitiesAllowEditType,O as flattenFieldInputs,g as flattenInputs,j as flattenRelationshipInputs,H as formTemplateHasInvalidFields,A as getComputedAttributes,S as getErrorMessageForFieldInput,G as getFieldsInTitleAndDesc,M as getIconForFeature,L as getNormalizedFeatureTypeInfo,b as isFieldElement,v as isFieldElementWithInputType,E as isFieldElementWithShowNoValueOptionInput,V as isFieldElementWithTextInput,d as isFieldInput,T as isGroupElement,c as isGroupInput,y as isInputInGroupInput,U as isNumberFieldInput,x as isRelationshipElement,f as isRelationshipInput,h as isTemplateItemGroup,_ as parseFormTemplateString,I as substituteFieldTemplatesInString,P as valueIsInvalidSwitchValue,k as valueIsValidContingentValue};\n"],
  "mappings": "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",
  "names": ["T", "e", "n", "r", "i", "l", "s", "t", "o", "F", "Z", "d", "c", "k"]
}
