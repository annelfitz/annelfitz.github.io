import {
  j as j2
} from "./chunk-DGRFM5OL.js";
import {
  K
} from "./chunk-TLTAGTBA.js";
import {
  e
} from "./chunk-M4RFJU4F.js";
import {
  j
} from "./chunk-HV6S3GY2.js";
import {
  M
} from "./chunk-OCF7OAES.js";
import {
  w
} from "./chunk-IZKCZQUY.js";
import {
  f
} from "./chunk-MBGZKT2Z.js";
import {
  s
} from "./chunk-ORO4D3FB.js";

// node_modules/@arcgis/core/geohash/geohashUtils.js
var m = new Float64Array(2);
var p = new Float64Array(2);
var M2 = "0123456789bcdefghjkmnpqrstuvwxyz";
var j3 = 64;
function S(t, e2, f2, l) {
  const a = [t.xmin, t.ymin, t.xmax, t.ymax], u = j.fromExtent(w.fromBounds(a, l)), h = j2(u, l, f.WGS84, { densificationStep: e2 * j3 });
  if (!h)
    return null;
  const m2 = K(new e(), h, false, false), p2 = m2.coords.filter((t2, o) => !(o % 2)), g = m2.coords.filter((t2, o) => o % 2), y = Math.min(...p2), d = Math.min(...g), x = Math.max(...p2), M3 = Math.max(...g), S2 = A(y, d, f2, f.WGS84), G = A(x, M3, f2, f.WGS84);
  return S2 && G ? { bounds: a, geohashBounds: { xLL: S2[0], yLL: S2[1], xTR: G[0], yTR: G[1] }, level: f2 } : null;
}
function A(o, r, s2, i) {
  if (i.isWebMercator) {
    const n = M(o / s.radius), i2 = n - 360 * Math.floor((n + 180) / 360), c = [0, 0];
    return Y(c, 0, M(Math.PI / 2 - 2 * Math.atan(Math.exp(-r / s.radius))), i2, s2), c;
  }
  const f2 = j2({ x: o, y: r }, i, f.WGS84);
  if (!f2)
    return null;
  const l = [0, 0];
  return Y(l, 0, f2.y, f2.x, s2), l;
}
function W(t) {
  return M2[t];
}
function b(t) {
  return (t[0] + t[1]) / 2;
}
function w2(t, o, r) {
  return t[0] = o, t[1] = r, t;
}
function C(t, o) {
  const r = b(t), n = o, e2 = !o;
  t[0] = e2 * t[0] + n * r, t[1] = e2 * r + n * t[1];
}
function L(t, o) {
  const r = o > b(t);
  return C(t, r), r;
}
function R(t, o) {
  let r = -90, n = 90, e2 = -180, s2 = 180;
  for (let i = 0; i < o; i++) {
    const o2 = Math.ceil((i + 1) / 2), c = Math.floor((i + 1) / 2), f2 = 1 - i % 2, l = 30 - (3 * o2 + 2 * c), a = 30 - (2 * o2 + 3 * c), u = 3 * f2 + 2 * (1 - f2), h = 2 * f2 + 3 * (1 - f2), m2 = 3 * f2 + 7 * (1 - f2) << a, p2 = (7 * f2 + 3 * (1 - f2) << l & t.geohashX) >> l, g = (m2 & t.geohashY) >> a;
    for (let t2 = u - 1; t2 >= 0; t2--) {
      const o3 = (e2 + s2) / 2, r2 = p2 & 1 << t2 ? 1 : 0;
      e2 = (1 - r2) * e2 + r2 * o3, s2 = (1 - r2) * o3 + r2 * s2;
    }
    for (let t2 = h - 1; t2 >= 0; t2--) {
      const o3 = (r + n) / 2, e3 = g & 1 << t2 ? 1 : 0;
      r = (1 - e3) * r + e3 * o3, n = (1 - e3) * o3 + e3 * n;
    }
  }
  return [e2, r, s2, n];
}
function Y(t, o, r, n, e2) {
  e2 % 2 && (e2 += 1);
  let s2 = 0, i = 0, c = -90, f2 = 90, l = -180, a = 180;
  for (let u = 0; u < e2 / 2; u++) {
    for (let t2 = 0; t2 < 5; t2++) {
      const o2 = (l + a) / 2, r2 = n > o2 ? 1 : 0;
      s2 |= r2 << 29 - (t2 + 5 * u), l = (1 - r2) * l + r2 * o2, a = (1 - r2) * o2 + r2 * a;
    }
    for (let t2 = 0; t2 < 5; t2++) {
      const o2 = (c + f2) / 2, n2 = r > o2 ? 1 : 0;
      i |= n2 << 29 - (t2 + 5 * u), c = (1 - n2) * c + n2 * o2, f2 = (1 - n2) * o2 + n2 * f2;
    }
  }
  t[2 * o] = s2, t[2 * o + 1] = i;
}
function z(t, o, r) {
  let n = "";
  const e2 = w2(m, -90, 90), s2 = w2(p, -180, 180);
  for (let i = 0; i < r; i++) {
    let r2 = 0;
    !(i % 2) ? (r2 |= L(s2, o) << 4, r2 |= L(e2, t) << 3, r2 |= L(s2, o) << 2, r2 |= L(e2, t) << 1, r2 |= L(s2, o) | 0) : (r2 |= L(e2, t) << 4, r2 |= L(s2, o) << 3, r2 |= L(e2, t) << 2, r2 |= L(s2, o) << 1, r2 |= L(e2, t) | 0), n += W(r2);
  }
  return n;
}

export {
  S,
  A,
  R,
  z
};
//# sourceMappingURL=chunk-KQFC3S3U.js.map
