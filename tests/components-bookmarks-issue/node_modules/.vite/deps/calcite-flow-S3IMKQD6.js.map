{
  "version": 3,
  "sources": ["../../@esri/calcite-components/dist/components/src/components/flow/resources.ts", "../../@esri/calcite-components/dist/components/src/components/flow/flow.scss?tag=calcite-flow&encapsulation=shadow", "../../@esri/calcite-components/dist/components/src/components/flow/flow.tsx"],
  "sourcesContent": ["export const CSS = {\n  frame: \"frame\",\n  frameAdvancing: \"frame--advancing\",\n  frameRetreating: \"frame--retreating\",\n};\n", ":host {\n  @extend %component-host;\n  @apply relative\n    flex\n    w-full\n    flex-auto\n    items-stretch\n    overflow-hidden\n    bg-transparent;\n\n  .frame {\n    @apply relative\n      m-0\n      flex\n      w-full\n      flex-auto\n      flex-col\n      items-stretch\n      p-0;\n  }\n\n  ::slotted(calcite-flow-item),\n  ::slotted(calcite-panel) {\n    @apply h-full;\n  }\n\n  ::slotted(.calcite-match-height:last-child) {\n    @apply flex\n    flex-auto\n    overflow-hidden;\n  }\n\n  .frame--advancing {\n    animation: calcite-frame-advance var(--calcite-animation-timing);\n  }\n\n  .frame--retreating {\n    animation: calcite-frame-retreat var(--calcite-animation-timing);\n  }\n\n  @keyframes calcite-frame-advance {\n    0% {\n      @apply bg-opacity-50;\n      transform: translate3d(50px, 0, 0);\n    }\n    100% {\n      @apply bg-opacity-100;\n      transform: translate3d(0, 0, 0);\n    }\n  }\n\n  @keyframes calcite-frame-retreat {\n    0% {\n      @apply bg-opacity-50;\n      transform: translate3d(-50px, 0, 0);\n    }\n    100% {\n      @apply bg-opacity-100;\n      transform: translate3d(0, 0, 0);\n    }\n  }\n}\n\n@include base-component();\n", "import { Component, Element, h, Listen, Method, Prop, State, VNode } from \"@stencil/core\";\nimport { createObserver } from \"../../utils/observers\";\nimport { FlowDirection, FlowItemLikeElement } from \"./interfaces\";\nimport { CSS } from \"./resources\";\nimport {\n  componentFocusable,\n  LoadableComponent,\n  setComponentLoaded,\n  setUpLoadableComponent,\n} from \"../../utils/loadable\";\n\n/**\n * @slot - A slot for adding `calcite-flow-item` elements to the component.\n */\n@Component({\n  tag: \"calcite-flow\",\n  styleUrl: \"flow.scss\",\n  shadow: true,\n})\nexport class Flow implements LoadableComponent {\n  // --------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * Removes the currently active `calcite-flow-item`.\n   */\n  @Method()\n  async back(): Promise<HTMLCalciteFlowItemElement | FlowItemLikeElement> {\n    const { items } = this;\n\n    const lastItem = items[items.length - 1];\n\n    if (!lastItem) {\n      return;\n    }\n\n    const beforeBack = lastItem.beforeBack\n      ? lastItem.beforeBack\n      : (): Promise<void> => Promise.resolve();\n\n    try {\n      await beforeBack.call(lastItem);\n    } catch (_error) {\n      // back prevented\n      return;\n    }\n\n    lastItem.remove();\n\n    return lastItem;\n  }\n\n  /**\n   * Sets focus on the component.\n   */\n  @Method()\n  async setFocus(): Promise<void> {\n    await componentFocusable(this);\n\n    const { items } = this;\n    const activeItem = items[items.length - 1];\n\n    return activeItem?.setFocus();\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Public Properties\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * This property enables the component to consider other custom elements implementing flow-item's interface.\n   *\n   * @internal\n   */\n  @Prop() customItemSelectors: string;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Properties\n  //\n  // --------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteFlowElement;\n\n  @State() flowDirection: FlowDirection = null;\n\n  @State() itemCount = 0;\n\n  @State() items: FlowItemLikeElement[] = [];\n\n  itemMutationObserver = createObserver(\"mutation\", () => this.updateFlowProps());\n\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.itemMutationObserver?.observe(this.el, { childList: true, subtree: true });\n    this.updateFlowProps();\n  }\n\n  async componentWillLoad(): Promise<void> {\n    setUpLoadableComponent(this);\n  }\n\n  componentDidLoad(): void {\n    setComponentLoaded(this);\n  }\n\n  disconnectedCallback(): void {\n    this.itemMutationObserver?.disconnect();\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  // --------------------------------------------------------------------------\n\n  @Listen(\"calciteFlowItemBack\")\n  async handleItemBackClick(event: CustomEvent): Promise<void> {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    await this.back();\n    return this.setFocus();\n  }\n\n  getFlowDirection = (oldFlowItemCount: number, newFlowItemCount: number): FlowDirection | null => {\n    const allowRetreatingDirection = oldFlowItemCount > 1;\n    const allowAdvancingDirection = oldFlowItemCount && newFlowItemCount > 1;\n\n    if (!allowAdvancingDirection && !allowRetreatingDirection) {\n      return null;\n    }\n\n    return newFlowItemCount < oldFlowItemCount ? \"retreating\" : \"advancing\";\n  };\n\n  updateFlowProps = (): void => {\n    const { customItemSelectors, el, items } = this;\n\n    const newItems = Array.from<FlowItemLikeElement>(\n      el.querySelectorAll(\n        `calcite-flow-item${customItemSelectors ? `,${customItemSelectors}` : \"\"}`,\n      ),\n    ).filter((flowItem) => flowItem.closest(\"calcite-flow\") === el);\n\n    const oldItemCount = items.length;\n    const newItemCount = newItems.length;\n    const activeItem = newItems[newItemCount - 1];\n    const previousItem = newItems[newItemCount - 2];\n\n    if (newItemCount && activeItem) {\n      newItems.forEach((itemNode) => {\n        itemNode.showBackButton = itemNode === activeItem && newItemCount > 1;\n        itemNode.hidden = itemNode !== activeItem;\n      });\n    }\n\n    if (previousItem) {\n      previousItem.menuOpen = false;\n    }\n\n    this.items = newItems;\n\n    if (oldItemCount !== newItemCount) {\n      const flowDirection = this.getFlowDirection(oldItemCount, newItemCount);\n      this.itemCount = newItemCount;\n      this.flowDirection = flowDirection;\n    }\n  };\n\n  // --------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  // --------------------------------------------------------------------------\n\n  render(): VNode {\n    const { flowDirection } = this;\n\n    const frameDirectionClasses = {\n      [CSS.frame]: true,\n      [CSS.frameAdvancing]: flowDirection === \"advancing\",\n      [CSS.frameRetreating]: flowDirection === \"retreating\",\n    };\n\n    return (\n      <div class={frameDirectionClasses}>\n        <slot />\n      </div>\n    );\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAAO,IAAM,MAAM;EACjB,OAAO;EACP,gBAAgB;EAChB,iBAAiB;;ACHnB,IAAM,UAAU;ICmBH,OAAI,mBAAA,MAAAA,cAAA,EAAA;;;;;AA4Ef,SAAA,uBAAuB,eAAe,YAAY,MAAM,KAAK,gBAAe,CAAE;AAyC9E,SAAA,mBAAmB,CAAC,kBAA0B,qBAAwB;AACpE,YAAM,2BAA2B,mBAAmB;AACpD,YAAM,0BAA0B,oBAAoB,mBAAmB;AAEvE,UAAI,CAAC,2BAA2B,CAAC,0BAA0B;AACzD,eAAO;;AAGT,aAAO,mBAAmB,mBAAmB,eAAe;;AAG9D,SAAA,kBAAkB,MAAA;AAChB,YAAM,EAAE,qBAAqB,IAAI,MAAK,IAAK;AAE3C,YAAM,WAAW,MAAM,KACrB,GAAG,iBACD,oBAAoB,sBAAsB,IAAI,mBAAmB,KAAK,EAAE,EAAE,CAC3E,EACD,OAAO,CAAC,aAAa,SAAS,QAAQ,cAAc,MAAM,EAAE;AAE9D,YAAM,eAAe,MAAM;AAC3B,YAAM,eAAe,SAAS;AAC9B,YAAM,aAAa,SAAS,eAAe,CAAC;AAC5C,YAAM,eAAe,SAAS,eAAe,CAAC;AAE9C,UAAI,gBAAgB,YAAY;AAC9B,iBAAS,QAAQ,CAAC,aAAQ;AACxB,mBAAS,iBAAiB,aAAa,cAAc,eAAe;AACpE,mBAAS,SAAS,aAAa;SAChC;;AAGH,UAAI,cAAc;AAChB,qBAAa,WAAW;;AAG1B,WAAK,QAAQ;AAEb,UAAI,iBAAiB,cAAc;AACjC,cAAM,gBAAgB,KAAK,iBAAiB,cAAc,YAAY;AACtE,aAAK,YAAY;AACjB,aAAK,gBAAgB;;;;yBAxFe;qBAEnB;iBAEmB,CAAA;;;;;;;;;;EA/DxC,MAAM,OAAI;AACR,UAAM,EAAE,MAAK,IAAK;AAElB,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AAEvC,QAAI,CAAC,UAAU;AACb;;AAGF,UAAM,aAAa,SAAS,aACxB,SAAS,aACT,MAAqB,QAAQ,QAAO;AAExC,QAAI;AACF,YAAM,WAAW,KAAK,QAAQ;aACvB,QAAQ;AAEf;;AAGF,aAAS,OAAM;AAEf,WAAO;;;;;EAOT,MAAM,WAAQ;AACZ,UAAM,mBAAmB,IAAI;AAE7B,UAAM,EAAE,MAAK,IAAK;AAClB,UAAM,aAAa,MAAM,MAAM,SAAS,CAAC;AAEzC,WAAO,yCAAY;;;;;;;EAsCrB,oBAAiB;;AACf,eAAK,yBAAL,mBAA2B,QAAQ,KAAK,IAAI,EAAE,WAAW,MAAM,SAAS,KAAI;AAC5E,SAAK,gBAAe;;EAGtB,MAAM,oBAAiB;AACrB,2BAAuB,IAAI;;EAG7B,mBAAgB;AACd,uBAAmB,IAAI;;EAGzB,uBAAoB;;AAClB,eAAK,yBAAL,mBAA2B;;;;;;;EAU7B,MAAM,oBAAoB,OAAkB;AAC1C,QAAI,MAAM,kBAAkB;AAC1B;;AAGF,UAAM,KAAK,KAAI;AACf,WAAO,KAAK,SAAQ;;;;;;;EAsDtB,SAAM;AACJ,UAAM,EAAE,cAAa,IAAK;AAE1B,UAAM,wBAAwB;MAC5B,CAAC,IAAI,KAAK,GAAG;MACb,CAAC,IAAI,cAAc,GAAG,kBAAkB;MACxC,CAAC,IAAI,eAAe,GAAG,kBAAkB;;AAG3C,WACE,EAAA,OAAA,EAAK,OAAO,sBAAqB,GAC/B,EAAA,QAAA,IAAA,CAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;",
  "names": ["Flow"]
}
