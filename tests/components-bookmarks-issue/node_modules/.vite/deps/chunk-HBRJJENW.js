import {
  i
} from "./chunk-CPZW2LMK.js";
import {
  e
} from "./chunk-QR7J3YDY.js";
import {
  s
} from "./chunk-GO2OGJDG.js";
import {
  o
} from "./chunk-P4MNTMCZ.js";

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js
function o2(o3, n2) {
  if (!n2.multipassEnabled)
    return;
  o3.fragment.include(i), o3.fragment.uniforms.add(new s("terrainDepthTexture", (e2, r) => {
    var _a;
    return (_a = r.multipassTerrain.linearDepth) == null ? void 0 : _a.getTexture();
  }), new e("nearFar", (e2, r) => r.camera.nearFar));
  const s2 = n2.occlusionPass;
  o3.fragment.code.add(o`
   ${s2 ? "bool" : "void"} terrainDepthTest(float fragmentDepth) {
      vec4 data = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0);
      float linearDepth = linearDepthFromRGBA(data, nearFar);
      ${s2 ? o`return fragmentDepth < linearDepth && data != vec4(0.0, 0.0, 0.0, 1.0);` : o`
          if(fragmentDepth ${n2.cullAboveGround ? ">" : "<="} linearDepth){
            discard;
          }`}
    }`);
}
var n = class {
  constructor() {
    this.cullAboveGround = false;
  }
};

export {
  o2 as o,
  n
};
//# sourceMappingURL=chunk-HBRJJENW.js.map
