{
  "version": 3,
  "sources": ["../../@arcgis/core/libs/vxl/enums.js", "../../@arcgis/core/libs/vxl/VxlModule.js", "../../@arcgis/core/layers/VoxelWasmPerSceneView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar e,i,t,n,a,o;!function(e){e[e.Binary=0]=\"Binary\",e[e.JSON=1]=\"JSON\"}(e||(e={})),function(e){e[e.TreeIndex=0]=\"TreeIndex\",e[e.TreeStats=1]=\"TreeStats\",e[e.TreeData=2]=\"TreeData\",e[e.BrickBundles=3]=\"BrickBundles\",e[e.Section=4]=\"Section\",e[e.VariableStats=5]=\"VariableStats\"}(i||(i={})),function(e){e[e.None=1]=\"None\",e[e.Front=2]=\"Front\",e[e.Back=3]=\"Back\"}(t||(t={})),function(e){e[e.Low=0]=\"Low\",e[e.Medium=1]=\"Medium\",e[e.High=2]=\"High\"}(n||(n={})),function(e){e[e.None=0]=\"None\",e[e.StaticSections=1]=\"StaticSections\",e[e.Slices=2]=\"Slices\",e[e.DynamicSections=4]=\"DynamicSections\",e[e.GhostShell=8]=\"GhostShell\",e[e.Isosurface=16]=\"Isosurface\",e[e.Quality=32]=\"Quality\",e[e.SunLocation=64]=\"SunLocation\",e[e.StaticSectionSelection=128]=\"StaticSectionSelection\",e[e.ExaggerationAndOffset=256]=\"ExaggerationAndOffset\",e[e.CurrentTime=512]=\"CurrentTime\",e[e.CurrentVariable=1024]=\"CurrentVariable\",e[e.DeleteIsosurface=2048]=\"DeleteIsosurface\",e[e.ContainerVisibility=4096]=\"ContainerVisibility\",e[e.RenderMode=8192]=\"RenderMode\",e[e.Optimization=16384]=\"Optimization\",e[e.VariableStyles=32768]=\"VariableStyles\",e[e.VolumeStyles=65536]=\"VolumeStyles\",e[e.AnalysisSlice=131072]=\"AnalysisSlice\"}(a||(a={})),function(e){e[e.Isosurfaces=0]=\"Isosurfaces\",e[e.DynamicSections=1]=\"DynamicSections\",e[e.StaticSections=2]=\"StaticSections\"}(o||(o={}));export{o as ContainerType,a as UpdateFlags,i as VoxelRequestType,t as WasmCullMode,n as WasmRenderingQuality,e as WasmResponseType};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";function e(t){return new Promise((e=>import(\"../../chunks/vxlLayer.js\").then((t=>t.v)).then((({default:n})=>{const r=n({locateFile:i,preinitializedWebGLContext:t,onRuntimeInitialized:()=>e(r)})})))).catch((t=>{throw t}))}function i(e){return t(`esri/libs/vxl/${e}`)}export{e as loadVoxelWASM};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../Graphic.js\";import s from\"../request.js\";import has from\"../core/has.js\";import r from\"../core/Logger.js\";import{isAbortError as i}from\"../core/promiseUtils.js\";import{watch as a,initial as n}from\"../core/reactiveUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/RandomLCG.js\";import{subclass as l}from\"../core/accessorSupport/decorators/subclass.js\";import{q as h}from\"../chunks/vec32.js\";import{create as d}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{renderSRFromViewSR as u}from\"../geometry/support/coordinateSystem.js\";import{PointIndex as _,PlaneIndex as c}from\"../geometry/support/frustum.js\";import{WasmCullMode as m,VoxelRequestType as g,UpdateFlags as p,ContainerType as f}from\"../libs/vxl/enums.js\";import{loadVoxelWASM as x}from\"../libs/vxl/VxlModule.js\";import{ViewingMode as y}from\"../views/ViewingMode.js\";import{VoxelTarget as v}from\"../views/3d/layers/i3s/Intersector.js\";import{Frustum as b}from\"../views/3d/state/Frustum.js\";import{RenderCoordsHelper as w}from\"../views/3d/support/RenderCoordsHelper.js\";import{SyncRenderPlugin as T}from\"../views/3d/webgl-engine/effects/RenderPlugin.js\";import{newIntersectorResult as R}from\"../views/3d/webgl-engine/lib/Intersector.js\";import{IntersectorType as L,StoreResults as E}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{RenderFeature as V}from\"../views/3d/webgl-engine/lib/RenderFeature.js\";import{RenderSlot as C}from\"../views/3d/webgl-engine/lib/RenderSlot.js\";import{CompareFunction as F,Face as S,StencilOperation as P}from\"../views/webgl/enums.js\";var I;!function(e){e[e.Lifetime=1]=\"Lifetime\",e[e.RequestResponse=2]=\"RequestResponse\",e[e.Rendering=3]=\"Rendering\",e[e.Error=4]=\"Error\"}(I||(I={}));let U=class extends T{constructor(e){super(e),this._halfIntTexturesAvailable=!1,this._textureFloatLinearAvailable=!1,this._havePreparedWithAllLayers=!1,this._renderPluginContext=null,this._vxlPromise=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._rctx=null,this._renderTargetToRestore=null,this._lastFrameWasStationary=!1,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._captureFrustum=!1,this._frustum=null,this._frustumRenderableId=-1,this._renderCoordsHelper=null,this.produces=new Map([[C.VOXEL,()=>!!this._vxl&&\"local\"===this.view.viewingMode]]),this.type=L.VOXEL,this.slicePlaneEnabled=!0,this.isGround=!1,this.layerUid=[]}_dbg(e,t){this._dbgFlags.has(e)&&(e===I.Error?r.getLogger(this).error(t):r.getLogger(this).warn(t))}_removeRenderPlugin(){this._pluginIsActive&&this.view._stage&&(this._dbg(I.Lifetime,\"--removeRenderPlugin--\"),this.view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1}initialize(){this._dbg(I.Lifetime,\"--initialize--\");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this.addHandles([a((()=>this.view.ready),(e=>{e&&\"local\"===this.view.viewingMode?(this._dbg(I.Lifetime,\"view ready status changed to ready on a local view, calling addRenderPlugin\"),this.view._stage.addRenderPlugin(this),this._pluginIsActive=!0):(this._dbg(I.Lifetime,\"view ready status changed, not ready or not a local view!\"),this._removeRenderPlugin())}),n),a((()=>this.view?.qualityProfile),(e=>{this._dbg(I.Rendering,\"qualityProfile changed to \"+e),this._vxl&&this._vxl.set_quality(this._toWasmQuality(e))}),n),a((()=>this.view?.timeExtent),(()=>{if(this._vxl){const e=this._getTimeArgs(this.view?.timeExtent);this._dbg(I.Rendering,\"sceneView timeExtent changed to useTime=\"+e.useTime+\" st=\"+e.startTime+\" et=\"+e.endTime),this._vxl.set_scene_time_extent(e.startTime,e.endTime,e.useTime),this._renderPluginContext.requestRender()}}),n),a((()=>this.view?.stationary),(e=>{this._vxl&&e&&!this._lastFrameWasStationary&&this._renderPluginContext.requestRender()}))])}initializeRenderContext(e){this._dbg(I.Lifetime,\"--initializeRenderContext--\");const t=e.renderContext.rctx;this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this._textureFloatLinearAvailable=this._rctx.capabilities.textureFloatLinear,this._initializeWasm(t.gl)}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this._dbg(I.Lifetime,\"--uninitializeRenderContext--\")}_restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this._dbg(I.Error,\"no context in restoreFramebuffer!\");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}_bindPreviousDepthToSlot(e,t){const s=!!this._rctx,r=!!this._renderTargetToRestore;if(!s||!r)return 0;const i=this._renderTargetToRestore.fbo.depthStencilTexture;return i?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(i,e,!0),1):(this._dbg(I.Error,\"no depth/stencil texture exists!\"),0)}_modifyResourceCount(e,t,s){if(!this._rctx)return void this._dbg(I.Error,\"modifyAllocation callback has no rendering context!\");const r=e;1===s?this._rctx.instanceCounter.increment(r,t):this._rctx.instanceCounter.decrement(r,t)}_setBlendState(e,t,s,r){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,s),this._rctx.setBlendEquation(r)):this._dbg(I.Error,\"setBlendState callback has no rendering context!\")}_setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this._dbg(I.Error,\"setFrontFace callback has no rendering context!\")}_setDepthStencilStateFunction(e,t,s){this._rctx?(this._rctx.setDepthFunction(s),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(F.ALWAYS,0,255),this._rctx.setStencilOpSeparate(S.FRONT,P.KEEP,P.INCR,P.KEEP),this._rctx.setStencilOpSeparate(S.BACK,P.KEEP,P.DECR,P.KEEP)):this._dbg(I.Error,\"setDepthStencilStateFunction callback has no rendering context!\")}_setRasterizerState(e){if(this._rctx)switch(e){case m.None:this._rctx.setFaceCullingEnabled(!1);break;case m.Back:this._rctx.setCullFace(S.BACK),this._rctx.setFaceCullingEnabled(!0);break;case m.Front:this._rctx.setCullFace(S.FRONT),this._rctx.setFaceCullingEnabled(!0)}else this._dbg(I.Error,\"setRasterizerState callback has no rendering context!\")}_setViewport(e,t,s,r){this._rctx?this._rctx.setViewport(e,t,s,r):this._dbg(I.Error,\"setViewport callback has no rendering context!\")}_updateMemoryUsage(){this._layers.forEach(((e,t)=>{if(e.needMemoryUsageUpdate){const s=this._vxl.estimate_memory_usage(t);s>=0&&(e.needMemoryUsageUpdate=!1,e.layerView.setUsedMemory(s))}}))}_syncRequestsResponses(){this._layers.forEach(((e,t)=>{const r=[];e.responses.forEach(((s,i)=>{r.push(i),this._dbg(I.RequestResponse,\"responding for requestID:\"+i+\" size:\"+s.size),this._vxl.respond(t,i,s),s.requestType!==g.TreeIndex&&s.requestType!==g.Section||(e.needMemoryUsageUpdate=!0)}));const a=e.responses;for(const s of r)a.delete(s);const n=this._vxl.get_new_requests(t),o=e.abortController.signal;for(const l in n){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const t=n[l],r={responseType:\"array-buffer\",signal:o,query:{...e.layerView.layer.customParameters,token:e.layerView.layer.apiKey}};this._dbg(I.RequestResponse,\"making requestID:\"+l+\" url:\"+t.url),s(t.url,r).then((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this._dbg(I.RequestResponse,\"have response for requestID:\"+l);let r=0;if(s.data.byteLength>0){r=this._vxl._malloc(s.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,r,s.data.byteLength),t=new Uint8Array(s.data);for(let r=0;r<s.data.byteLength;++r)e[r]=t[r]}a.set(+l,{responseType:t.responseType,ptr:r,size:s.data.byteLength,success:!0,requestType:t.requestType})})).catch((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),i(s)||(this._dbg(I.Error,`requestID:${l} failed, error=${s.toString()}`),a.set(+l,{responseType:t.responseType,ptr:0,size:0,success:!1,requestType:t.requestType}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){if(!this._vxl&&this._vxlPromise)return!0;const t=this._layers.get(e);return!!t&&t.outstandingRequestCount>0}getLayerTimes(e){const t=[];return this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const s=this._vxl.get_layer_epoch_times(r,e.layer.currentVariableId);for(let e=0;e<s.length;++e)t.push(s[e])}})),t}getCurrentLayerTimeIndex(e){let t=0;return this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(t=this._vxl.get_layer_current_time_id(r))})),t}setEnabled(e,t){this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.set_enabled(r,t),s.needMemoryUsageUpdate=!0,this._renderPluginContext.requestRender())}))}setIsInScaleRange(e,t){const s=this._layers.get(e.wasmLayerId);s&&t!==s.isInScaleRange&&(s.isInScaleRange=t,this._vxl.set_is_in_scale_range(e.wasmLayerId,t),s.needMemoryUsageUpdate=!t,this._renderPluginContext.requestRender())}setStaticSections(e,t){const s={mask:p.StaticSections,staticSections:t};return this._doMaskedUIUpdate(e,s,!0)}setCurrentVariable(e,t){const s={mask:p.CurrentVariable,currentVariable:t};return this._doMaskedUIUpdate(e,s,!0)}setRenderMode(e,t){const s={mask:p.RenderMode,renderMode:t};return this._doMaskedUIUpdate(e,s,!0)}setVerticalExaggerationAndOffset(e,t,s,r){const i={mask:p.ExaggerationAndOffset,volStyleDesc:{volumeId:t,verticalExaggeration:s,verticalOffset:r}};return this._doMaskedUIUpdate(e,i,!0)}setVariableStyles(e,t){const s={mask:p.VariableStyles,variableStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setVolumeStyles(e,t){const s={mask:p.VolumeStyles,volumeStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setEnableDynamicSections(e,t){const s={mask:p.ContainerVisibility,containerIsVisible:t,container:f.DynamicSections};return this._doMaskedUIUpdate(e,s,!0)}setEnableIsosurfaces(e,t){const s={mask:p.ContainerVisibility,containerIsVisible:t,container:f.Isosurfaces};return this._doMaskedUIUpdate(e,s,!0)}setEnableSections(e,t){const s={mask:p.ContainerVisibility,containerIsVisible:t,container:f.StaticSections};return this._doMaskedUIUpdate(e,s,!0)}setAnalysisSlice(e,t,s,r){const i={mask:p.AnalysisSlice,analysisSlice:{point:s,normal:r,enabled:t}};return this._doMaskedUIUpdate(e,i,!0)}_doMaskedUIUpdate(e,t,s){if(!this._vxl)return!1;let r=!1;return this._layers.forEach(((s,i)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(r=1===this._vxl.handle_masked_ui_update(i,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),r&&s&&this._renderPluginContext.requestRender(),r}_addTriangleToWasmBuffer(e,t,s,r,i){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],e[3*(t+=1)]=r[0],e[3*t+1]=r[1],e[3*t+2]=r[2],e[3*(t+=1)]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],t+=1}_addNormalToWasmBuffer(e,t,s){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],t+=1}_doCaptureFrustum(){if(!this._vxl)return;const e=36,t=e/3,s=this._vxl._malloc(3*e*Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(this._vxl.HEAPF32.buffer,s,3*e),i=this._vxl._malloc(3*t*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(this._vxl.HEAPF32.buffer,i,e),n=this._frustum.points[_.NEAR_BOTTOM_LEFT],o=this._frustum.points[_.NEAR_BOTTOM_RIGHT],l=this._frustum.points[_.NEAR_TOP_RIGHT],h=this._frustum.points[_.NEAR_TOP_LEFT],d=this._frustum.points[_.FAR_BOTTOM_LEFT],u=this._frustum.points[_.FAR_BOTTOM_RIGHT],m=this._frustum.points[_.FAR_TOP_RIGHT],g=this._frustum.points[_.FAR_TOP_LEFT];let p=0,f=0;const x=this._frustum.planes[c.NEAR];p=this._addTriangleToWasmBuffer(r,p,l,o,n),f=this._addNormalToWasmBuffer(a,f,x),p=this._addTriangleToWasmBuffer(r,p,n,h,l),f=this._addNormalToWasmBuffer(a,f,x);const y=this._frustum.planes[c.FAR];p=this._addTriangleToWasmBuffer(r,p,d,u,m),f=this._addNormalToWasmBuffer(a,f,y),p=this._addTriangleToWasmBuffer(r,p,m,g,d),f=this._addNormalToWasmBuffer(a,f,y);const v=this._frustum.planes[c.TOP];p=this._addTriangleToWasmBuffer(r,p,m,l,h),f=this._addNormalToWasmBuffer(a,f,v),p=this._addTriangleToWasmBuffer(r,p,h,g,m),f=this._addNormalToWasmBuffer(a,f,v);const b=this._frustum.planes[c.BOTTOM];p=this._addTriangleToWasmBuffer(r,p,n,o,u),f=this._addNormalToWasmBuffer(a,f,b),p=this._addTriangleToWasmBuffer(r,p,u,d,n),f=this._addNormalToWasmBuffer(a,f,b);const w=this._frustum.planes[c.LEFT];p=this._addTriangleToWasmBuffer(r,p,h,n,d),f=this._addNormalToWasmBuffer(a,f,w),p=this._addTriangleToWasmBuffer(r,p,d,g,h),f=this._addNormalToWasmBuffer(a,f,w);const T=this._frustum.planes[c.RIGHT];p=this._addTriangleToWasmBuffer(r,p,l,m,u),f=this._addNormalToWasmBuffer(a,f,T),p=this._addTriangleToWasmBuffer(r,p,u,o,l),f=this._addNormalToWasmBuffer(a,f,T),-1!==this._frustumRenderableId&&this._vxl.remove_generic_mesh(this._frustumRenderableId),this._frustumRenderableId=this._vxl.add_generic_mesh(s,3*e,i,e,255,0,0,64),this._vxl._free(s),this._vxl._free(i),this._captureFrustum=!1,this._renderPluginContext.requestRender()}captureFrustum(){null===this._renderCoordsHelper&&(this._renderCoordsHelper=w.create(y.Local,u(!1,this.view.spatialReference))),null===this._frustum&&(this._frustum=new b(this._renderCoordsHelper)),this._captureFrustum=!0,null!==this._renderPluginContext&&this._renderPluginContext.requestRender()}toggleFullVolumeExtentDraw(e){this._vxl&&this._layers.forEach(((t,s)=>{t.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.toggle_full_volume_extent_draw(s),this._renderPluginContext.requestRender())}))}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},s=new Promise(((e,s)=>{t.resolveCallback=e,t.rejectCallback=s}));return this._newLayers.push(t),s}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e.uid===t.layerView.uid));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const s=this._newLayers.length;return 0===s&&(this._dbg(I.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),s}let t=-1;this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){t=r,s.abortController.abort(),this._vxl.remove_layer(t);const i=this.layerUid.indexOf(e.layer.uid);-1!==i&&this.layerUid.splice(i,1)}})),t>=0&&this._layers.delete(t);const s=this._layers.size;return 0===s&&(this._dbg(I.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),s}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_allocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,s=Number.MAX_VALUE,r=!1;return null!=e&&(e.isAllTime?r=!0:(null!=e.start&&(r=!0,t=e.start.getTime()/1e3),null!=e.end&&(r=!0,s=e.end.getTime()/1e3))),{startTime:t,endTime:s,useTime:r}}_addVoxelLayer(e){const t=e.layer;let s=-1;const i=t.getConfiguration();if(i.length<1)return-1;const a={str:i,byteCount:0,ptr:0,isReusable:!1};if(!this._allocateBlock(a))return-1;const n=this._getTimeArgs(this.view?.timeExtent),o=this.view.spatialReference.isWGS84&&t.spatialReference.isWGS84?111319.49079327357:1;if(s=this._vxl.add_layer(t.serviceRoot,a.ptr,a.byteCount,o,o,n.startTime,n.endTime,n.useTime,this._toWasmQuality(this.view.qualityProfile)),a.isReusable||this._vxl._free(a.ptr),s>=0){t.test?.constantUpscaling&&(this._setUpscalingLimits(0,.25,.25),this._setUpscalingLimits(1,.5,.5),this._setUpscalingLimits(2,.75,.75));const i=new AbortController;if(this._layers.set(s,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:i,needMemoryUsageUpdate:!1,isInScaleRange:!0}),this.layerUid.push(e.layer.uid),!this._halfIntTexturesAvailable||has(\"mac\")){const t=[];let s=\"\";for(const r of e.layer.variables)\"Int16\"!==r.renderingFormat.type&&\"UInt16\"!==r.renderingFormat.type||(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));\"\"!==s&&r.getLogger(this).error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&r.getLogger(this).warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}if(!this._textureFloatLinearAvailable){const t=[];let s=\"\";for(const r of e.layer.variables)\"Float32\"===r.renderingFormat.type&&(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));\"\"!==s&&r.getLogger(this).error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&r.getLogger(this).warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}return has(\"esri-mobile\")&&r.getLogger(this).warnOnce(\"Mobile support differs across devices. Voxel layer might not display as expected.\"),s}return-1}prepareRender(e){if(!this._vxl)return;const t=e.bindParameters.camera.viewForward,s=e.bindParameters.camera.eye;this._vxl.update_camera_pos_and_direction(s[0],s[1],s[2],t[0],t[1],t[2]);const r=this._vxl.cull();this._dbg(I.RequestResponse,\"missingResourceCount=\"+r),this._moreToLoad=r>0,this._havePreparedWithAllLayers=0===this._newLayers.length,this._updateMemoryUsage()}renderNode(e){if(!this._vxl)return;for(const s of this._newLayers){const e=this._addVoxelLayer(s.layerView);-1===e?s.rejectCallback(-1):s.resolveCallback(e)}if(this._newLayers=[],0===this._layers.size)return void this._dbg(I.Error,\"No voxel layers but RenderPlugin instance is being asked to render!\");this._lastFrameWasStationary=this.view.stationary,this._syncRequestsResponses(),this._beforeDraw(),this._vxl.begin_color_frame(!this.view._stage.renderer.isFeatureEnabled(V.HighResolutionVoxel),e.bindParameters.lighting.mainLight.direction[0],e.bindParameters.lighting.mainLight.direction[1],e.bindParameters.lighting.mainLight.direction[2]);const t=this._renderTargetToRestore.viewport;t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height),this._layers.forEach((e=>{e.needMemoryUsageUpdate=!0}))),0===t.x&&0===t.y||this._dbg(I.Error,\"Unsupported viewport parameters detected!\"),this.updateWasmCamera(e.bindParameters.camera),this._captureFrustum&&(this._frustum.update(e.bindParameters.camera),this._doCaptureFrustum()),this._vxl.draw(),this._afterDraw(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender()}destroy(){this._dbg(I.Lifetime,\"--destroy--\"),this._removeRenderPlugin(),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null)}_initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=x(e).then((e=>{if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this._dbg(I.Lifetime,\" no voxel layers left after WASM downloaded, removing RenderPlugin and destroying\"),void this.destroy();const t=this._getTimeArgs(this.view?.timeExtent),s=this._vxl.addFunction(this._restoreFramebuffer.bind(this),\"v\"),r=this._vxl.addFunction(this._setBlendState.bind(this),\"viiii\"),i=this._vxl.addFunction(this._setFrontFace.bind(this),\"vi\"),a=this._vxl.addFunction(this._setRasterizerState.bind(this),\"vi\"),n=this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this),\"viii\"),o=this._vxl.addFunction(this._setViewport.bind(this),\"viiii\"),l=this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this),\"iii\"),h=this._vxl.addFunction(this._modifyResourceCount.bind(this),\"viii\"),d=this._halfIntTexturesAvailable&&!has(\"mac\"),u=this._textureFloatLinearAvailable;this._vxl.initialize_voxel_wasm(s,r,i,a,n,o,l,h,t.startTime,t.endTime,t.useTime,d,u),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this._dbg(I.Error,\" WASM failed to download, removing RenderPlugin and destroying\"),this.destroy()}))),this._vxlPromise)}pickDepth(e,t,s){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const r=s.viewport[3]-t;if(e<0||e>s.viewport[2]||t<0||t>s.viewport[3])return this._dbg(I.Error,`[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`),null;this._beforeDraw();const i=s.viewForward,a=s.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],i[0],i[1],i[2]),this.updateWasmCamera(s),this._vxl.begin_frame();const n=this._vxl.pick_depth(e,r);if(this._afterDraw(),n.success){return n.distanceToCamera}return null}pickObject(e,t,s,r){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const i=Math.round(e),a=Math.round(t);if(i<0||i>s.viewport[2]||a<0||a>s.viewport[3])return this._dbg(I.Error,`[js] pickObject: outOfRange, screenXY=[${i}, ${a}], vp=[${s.viewport.toString()}]`),null;this._beforeDraw();const n=s.viewForward,o=s.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],n[0],n[1],n[2]),this.updateWasmCamera(s),this._vxl.begin_frame();let l=null;if(0===r.length)l=this._vxl.pick_object(i,a,0,0);else{const e={str:JSON.stringify({layerIds:r}),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(l=this._vxl.pick_object(i,a,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}return this._afterDraw(),l}_beforeDraw(){this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._rctx.setPolygonOffsetFillEnabled(!1),this._rctx.setScissorTestEnabled(!1),this._rctx.setColorMask(!0,!0,!0,!0)}_afterDraw(){this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate(),this._rctx.externalProgramUpdate()}intersect(e,t,s,r,i){if(!this._vxl||!this._rctx||0===this._layers.size||!e.options.selectionMode||e.options.isFiltered)return;if(null==i||i[0]<0||i[0]>e.camera.viewport[2]||i[1]<0||i[1]>e.camera.viewport[3])return this._dbg(I.Error,`[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${i[0].toFixed(0)}, ${i[1].toFixed(0)}]`),null;const a=[];this._layers.forEach((t=>{e.options.filteredLayerUids.includes(t.layerView.layer.uid)&&a.push(t.layerView.wasmLayerId)}));const n=this.pickObject(i[0],i[1],e.camera,a);if(null==n||-1===n.layerId)return;const o=this._layers.get(n.layerId);if(o){const t=o.layerView.layer.uid,i=n.distanceToCamera/h(s,r),a=d();a[0]=n.worldX,a[1]=n.worldY,a[2]=n.worldZ;const l={};if(null!=n.continuousValue&&null!=n.continuousValueUnits?l[\"Voxel.ServiceValue\"]=`${n.continuousValue.toLocaleString()} ${n.continuousValueUnits}`:null!=n.uniqueValueLabel&&null!=n.uniqueValue?l[\"Voxel.ServiceValue\"]=`${n.uniqueValueLabel} (${n.uniqueValue})`:null!=n.uniqueValue&&(l[\"Voxel.ServiceValue\"]=`${n.uniqueValue}`),l[\"Voxel.ServiceVariableLabel\"]=n.variableLabel,l[\"Voxel.Position\"]=n.voxelSpacePosition,null!=n.epochTime&&null!=n.nativeTime&&null!=n.nativeTimeUnits){const e=new Date(n.epochTime);l[\"Voxel.ServiceLocalTime\"]=e.toString(),l[\"Voxel.ServiceNativeTime\"]=`${n.nativeTime.toLocaleString()} ${n.nativeTimeUnits}`}null!=n.depth&&null!=n.depthUnits&&(l[\"Voxel.ServiceDepth\"]=`${n.depth.toLocaleString()} ${n.depthUnits}`);const u=n.faceNormal;l[\"Voxel.WorldPosition\"]=`[${a[0]}, ${a[1]}, ${a[2]}]`;const _=e=>{const s=new v(a,t,(()=>this._createVoxelGraphic(o.layerView.layer,l)));e.set(this.type,s,i,u)},c=e.results,m=e.options.store===E.ALL;if((null==c.min.dist||i<c.min.dist)&&_(c.min),(null==c.max.dist||i>c.max.dist)&&_(c.max),m){const t=R(e.ray);_(t),e.results.all.push(t)}}}_createVoxelGraphic(e,s){return new t({layer:e,sourceLayer:e,attributes:s})}_toWasmQuality(e){switch(e){case\"low\":return 0;case\"medium\":return 1;case\"high\":return 2}}_setUpscalingLimits(e,t,s){this._vxl&&this._vxl.set_upscaling_limits(e,t,s)}};e([o({constructOnly:!0})],U.prototype,\"view\",void 0),U=e([l(\"esri.layers.VoxelWasmPerSceneView\")],U);const k=U;export{k as default};\n"],
  "mappings": "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",
  "names": ["e", "i", "n", "a", "o", "e", "t", "n", "i", "I", "e", "U", "t", "i", "a", "n", "o", "l", "r", "s", "d", "g", "f", "x", "y", "v", "b", "c"]
}
