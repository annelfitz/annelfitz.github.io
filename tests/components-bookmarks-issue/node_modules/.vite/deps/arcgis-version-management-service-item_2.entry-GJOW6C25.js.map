{
  "version": 3,
  "sources": ["../../@arcgis/map-components/dist/esm/arcgis-version-management-service-item_2.entry.js"],
  "sourcesContent": ["/*!\n * All material copyright Esri, All Rights Reserved, unless otherwise specified.\n * See https://js.arcgis.com/4.30/esri/copyright.txt for details.\n * v4.30.0-next.13\n */\nimport { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-2198b48c.js';\nimport { i as importCoreReactiveUtils } from './index-08887307.js';\n\nconst ArcgisVersionManagementServiceItem = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.versionItemActionClickedEventWithServiceUrl = createEvent(this, \"versionItemActionClickedEventWithServiceUrl\", 7);\n        this.versionListActionClickedEvent = createEvent(this, \"versionListActionClickedEvent\", 7);\n        this._versionListEventListeners = new Map();\n        this._watchHandles = [];\n        this._versionItemActionClickedEventWithServiceUrl = (e) => {\n            this.versionItemActionClickedEventWithServiceUrl.emit(e.detail);\n        };\n        this._versionListActionClickedEvent = (e) => {\n            this.versionListActionClickedEvent.emit(e.detail);\n        };\n        this.flowElement = undefined;\n        this.heading = undefined;\n        this.serviceUrl = undefined;\n        this.strings = undefined;\n        this.viewModel = undefined;\n        this.state = undefined;\n    }\n    async componentDidLoad() {\n        const { watch } = await importCoreReactiveUtils();\n        this._watchHandles.push(watch(() => this.viewModel.state, (state) => {\n            this.state = state;\n        }));\n    }\n    async componentWillLoad() {\n        this.state = this.viewModel.state;\n    }\n    disconnectedCallback() {\n        this._watchHandles.forEach((handle) => {\n            handle.remove();\n        });\n        this._watchHandles = [];\n        this._removeVersionListEventListeners(this._versionList);\n    }\n    render() {\n        const { flowElement, heading, serviceUrl, strings, viewModel } = this;\n        let { _versionList } = this;\n        const serviceName = viewModel.serviceNameLookup.get(serviceUrl);\n        return (h(Host, null, h(\"calcite-panel\", { heading: serviceName }, h(\"calcite-action\", { id: `actionManageVersions_${serviceName}`, icon: \"list\", scale: \"s\", slot: \"header-actions-end\", text: \"\", onClick: async () => {\n                await viewModel.getVersionInfos(serviceUrl, false);\n                _versionList = document.createElement(\"arcgis-version-management-version-list\");\n                _versionList.addEventListener(\"calciteFlowItemBack\", async () => {\n                    _versionList.remove();\n                });\n                _versionList.heading = heading;\n                _versionList.serviceUrl = serviceUrl;\n                _versionList.serviceName = serviceName;\n                _versionList.strings = strings;\n                _versionList.userHasAdvancedEditingUserTypeExtension =\n                    viewModel.advancedEditingUserTypeExtensionLookup.get(serviceUrl);\n                _versionList.versionInfos = viewModel.versionInfoLookup.get(serviceUrl);\n                _versionList.viewModel = viewModel;\n                this._addVersionListEventListeners(_versionList);\n                flowElement.append(_versionList);\n            } }), h(\"calcite-tooltip\", { \"overlay-positioning\": \"fixed\", referenceElement: `actionManageVersions_${serviceName}` }, h(\"span\", null, strings.headers.manageVersions)))));\n    }\n    _addVersionListEventListeners(versionList) {\n        versionList.addEventListener(\"versionItemActionClickedEventWithServiceUrl\", this._versionItemActionClickedEventWithServiceUrl);\n        this._versionListEventListeners.set(\"versionItemActionClickedEventWithServiceUrl\", this._versionItemActionClickedEventWithServiceUrl);\n        versionList.addEventListener(\"versionListActionClickedEvent\", this._versionListActionClickedEvent);\n        this._versionListEventListeners.set(\"versionListActionClickedEvent\", this._versionListActionClickedEvent);\n    }\n    _removeVersionListEventListeners(versionList) {\n        for (const [type, listener] of this._versionListEventListeners) {\n            versionList.removeEventListener(type, listener);\n        }\n    }\n    get _hostElement() { return getElement(this); }\n};\n\nconst ArcgisVersionManagementVersionProperties = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.versionPropertiesSaveClickedEvent = createEvent(this, \"versionPropertiesSaveClickedEvent\", 7);\n        this._watchHandles = [];\n        this.flowElement = undefined;\n        this.serviceUrl = undefined;\n        this.strings = undefined;\n        this.versionInfo = undefined;\n        this.viewModel = undefined;\n        this.executionError = undefined;\n        this.state = undefined;\n    }\n    async componentDidLoad() {\n        await this.viewModel.getVersionInfos(this.serviceUrl, false);\n    }\n    async componentWillLoad() {\n        const { watch } = await importCoreReactiveUtils();\n        this._watchHandles.push(watch(() => this.viewModel.state, (state) => {\n            this.state = state;\n        }));\n    }\n    disconnectedCallback() {\n        this._watchHandles.forEach((handle) => {\n            handle.remove();\n        });\n        this._watchHandles = [];\n    }\n    render() {\n        const { serviceUrl, strings, versionInfo } = this;\n        const { viewModel: { executionError } } = this;\n        return (h(Host, null, h(\"calcite-flow-item\", { description: versionInfo ? versionInfo.versionIdentifier.name : \"\", heading: versionInfo ? strings.actions.editVersion : strings.actions.newVersion }, h(\"calcite-panel\", { loading: this.state === \"executing\" }, h(\"div\", { class: \"div-content\" }, h(\"calcite-label\", null, strings.input.versionName, h(\"calcite-input-text\", { id: \"inputName\", maxLength: 62, value: versionInfo ? versionInfo.versionIdentifier.name.split(\".\")[1] : \"\" })), h(\"calcite-label\", null, strings.input.versionDescription, h(\"calcite-text-area\", { id: \"inputDescription\", resize: \"vertical\", value: versionInfo ? versionInfo.description : \"\" })), h(\"calcite-label\", null, strings.input.versionAccess, h(\"calcite-chip-group\", { id: \"chipGroupAccessLevel\", selectionMode: \"single\", label: \"\" }, h(\"calcite-chip\", { selected: versionInfo?.access === \"public\" || !versionInfo, value: \"public\" }, strings.accessLevels.public), h(\"calcite-chip\", { selected: versionInfo?.access === \"protected\", value: \"protected\" }, strings.accessLevels.protected), h(\"calcite-chip\", { selected: versionInfo?.access === \"private\", value: \"private\" }, strings.accessLevels.private))), h(\"calcite-label\", null, strings.input.versionOwner, h(\"calcite-input-text\", { id: \"inputOwner\", disabled: !this.viewModel.advancedEditingUserTypeExtensionLookup.get(serviceUrl), value: versionInfo\n                ? versionInfo.versionIdentifier.name.split(\".\")[0]\n                : this.viewModel.userLookup.get(serviceUrl)?.toUpperCase() })), h(\"calcite-button\", { appearance: \"outline\", slot: \"footer\", width: \"half\", onClick: () => {\n                void this.flowElement.back();\n            } }, strings.actions.cancelSave), h(\"calcite-button\", { slot: \"footer\", width: \"half\", onClick: async () => {\n                const textInputs = Array.from(this._hostElement.getElementsByTagName(\"calcite-input-text\"));\n                const inputDescription = this._hostElement.getElementsByTagName(\"calcite-text-area\")[0];\n                const inputName = textInputs.find((input) => input.id === \"inputName\");\n                const inputOwner = textInputs.find((input) => input.id === \"inputOwner\");\n                const chipGroupAccessLevel = Array.from(this._hostElement.getElementsByTagName(\"calcite-chip-group\"))[0];\n                const info = {\n                    access: chipGroupAccessLevel.selectedItems[0].value,\n                    description: inputDescription.value,\n                    versionIdentifier: {\n                        name: inputOwner.value !== \"\" ? `${inputOwner.value}.${inputName.value}` : inputName.value,\n                        guid: versionInfo ? versionInfo.versionIdentifier.guid : \"\"\n                    }\n                };\n                this.versionPropertiesSaveClickedEvent.emit({\n                    serviceUrl,\n                    versionInfo: info\n                });\n            } }, strings.actions.saveVersion)), this.state === \"failed\" ? (h(\"calcite-notice\", { class: \"notice\", closable: true, kind: \"warning\", open: true, scale: \"s\", slot: \"footer\" }, h(\"div\", { slot: \"message\" }, this._getExecutionError(executionError)))) : undefined))));\n    }\n    _getExecutionError(executionError) {\n        const { strings: { executionErrors } } = this;\n        switch (executionError) {\n            case \"no-advanced-editing-user-type-extension\":\n                return executionErrors.noAdvancedEditingUserTypeExtension;\n            case \"no-feature-service-found\":\n                return executionErrors.noFeatureServiceFound;\n            case \"no-valid-enterprise-version\":\n                return executionErrors.notValidEnterpriseVersion;\n            case \"no-valid-version-name\":\n                return executionErrors.invalidVersionName;\n            default:\n                return executionError;\n        }\n    }\n    get _hostElement() { return getElement(this); }\n};\n\nexport { ArcgisVersionManagementServiceItem as arcgis_version_management_service_item, ArcgisVersionManagementVersionProperties as arcgis_version_management_version_properties };\n"],
  "mappings": ";;;;;;;;;;;;;AAQA,IAAM,qCAAqC,MAAM;AAAA,EAC7C,YAAY,SAAS;AACjB,qBAAiB,MAAM,OAAO;AAC9B,SAAK,8CAA8C,YAAY,MAAM,+CAA+C,CAAC;AACrH,SAAK,gCAAgC,YAAY,MAAM,iCAAiC,CAAC;AACzF,SAAK,6BAA6B,oBAAI,IAAI;AAC1C,SAAK,gBAAgB,CAAC;AACtB,SAAK,+CAA+C,CAAC,MAAM;AACvD,WAAK,4CAA4C,KAAK,EAAE,MAAM;AAAA,IAClE;AACA,SAAK,iCAAiC,CAAC,MAAM;AACzC,WAAK,8BAA8B,KAAK,EAAE,MAAM;AAAA,IACpD;AACA,SAAK,cAAc;AACnB,SAAK,UAAU;AACf,SAAK,aAAa;AAClB,SAAK,UAAU;AACf,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,MAAM,mBAAmB;AACrB,UAAM,EAAE,MAAM,IAAI,MAAM,wBAAwB;AAChD,SAAK,cAAc,KAAK,MAAM,MAAM,KAAK,UAAU,OAAO,CAAC,UAAU;AACjE,WAAK,QAAQ;AAAA,IACjB,CAAC,CAAC;AAAA,EACN;AAAA,EACA,MAAM,oBAAoB;AACtB,SAAK,QAAQ,KAAK,UAAU;AAAA,EAChC;AAAA,EACA,uBAAuB;AACnB,SAAK,cAAc,QAAQ,CAAC,WAAW;AACnC,aAAO,OAAO;AAAA,IAClB,CAAC;AACD,SAAK,gBAAgB,CAAC;AACtB,SAAK,iCAAiC,KAAK,YAAY;AAAA,EAC3D;AAAA,EACA,SAAS;AACL,UAAM,EAAE,aAAa,SAAS,YAAY,SAAS,UAAU,IAAI;AACjE,QAAI,EAAE,aAAa,IAAI;AACvB,UAAM,cAAc,UAAU,kBAAkB,IAAI,UAAU;AAC9D,WAAQ,EAAE,MAAM,MAAM,EAAE,iBAAiB,EAAE,SAAS,YAAY,GAAG,EAAE,kBAAkB,EAAE,IAAI,wBAAwB,WAAW,IAAI,MAAM,QAAQ,OAAO,KAAK,MAAM,sBAAsB,MAAM,IAAI,SAAS,YAAY;AACjN,YAAM,UAAU,gBAAgB,YAAY,KAAK;AACjD,qBAAe,SAAS,cAAc,wCAAwC;AAC9E,mBAAa,iBAAiB,uBAAuB,YAAY;AAC7D,qBAAa,OAAO;AAAA,MACxB,CAAC;AACD,mBAAa,UAAU;AACvB,mBAAa,aAAa;AAC1B,mBAAa,cAAc;AAC3B,mBAAa,UAAU;AACvB,mBAAa,0CACT,UAAU,uCAAuC,IAAI,UAAU;AACnE,mBAAa,eAAe,UAAU,kBAAkB,IAAI,UAAU;AACtE,mBAAa,YAAY;AACzB,WAAK,8BAA8B,YAAY;AAC/C,kBAAY,OAAO,YAAY;AAAA,IACnC,EAAE,CAAC,GAAG,EAAE,mBAAmB,EAAE,uBAAuB,SAAS,kBAAkB,wBAAwB,WAAW,GAAG,GAAG,EAAE,QAAQ,MAAM,QAAQ,QAAQ,cAAc,CAAC,CAAC,CAAC;AAAA,EACjL;AAAA,EACA,8BAA8B,aAAa;AACvC,gBAAY,iBAAiB,+CAA+C,KAAK,4CAA4C;AAC7H,SAAK,2BAA2B,IAAI,+CAA+C,KAAK,4CAA4C;AACpI,gBAAY,iBAAiB,iCAAiC,KAAK,8BAA8B;AACjG,SAAK,2BAA2B,IAAI,iCAAiC,KAAK,8BAA8B;AAAA,EAC5G;AAAA,EACA,iCAAiC,aAAa;AAC1C,eAAW,CAAC,MAAM,QAAQ,KAAK,KAAK,4BAA4B;AAC5D,kBAAY,oBAAoB,MAAM,QAAQ;AAAA,IAClD;AAAA,EACJ;AAAA,EACA,IAAI,eAAe;AAAE,WAAO,WAAW,IAAI;AAAA,EAAG;AAClD;AAEA,IAAM,2CAA2C,MAAM;AAAA,EACnD,YAAY,SAAS;AACjB,qBAAiB,MAAM,OAAO;AAC9B,SAAK,oCAAoC,YAAY,MAAM,qCAAqC,CAAC;AACjG,SAAK,gBAAgB,CAAC;AACtB,SAAK,cAAc;AACnB,SAAK,aAAa;AAClB,SAAK,UAAU;AACf,SAAK,cAAc;AACnB,SAAK,YAAY;AACjB,SAAK,iBAAiB;AACtB,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,MAAM,mBAAmB;AACrB,UAAM,KAAK,UAAU,gBAAgB,KAAK,YAAY,KAAK;AAAA,EAC/D;AAAA,EACA,MAAM,oBAAoB;AACtB,UAAM,EAAE,MAAM,IAAI,MAAM,wBAAwB;AAChD,SAAK,cAAc,KAAK,MAAM,MAAM,KAAK,UAAU,OAAO,CAAC,UAAU;AACjE,WAAK,QAAQ;AAAA,IACjB,CAAC,CAAC;AAAA,EACN;AAAA,EACA,uBAAuB;AACnB,SAAK,cAAc,QAAQ,CAAC,WAAW;AACnC,aAAO,OAAO;AAAA,IAClB,CAAC;AACD,SAAK,gBAAgB,CAAC;AAAA,EAC1B;AAAA,EACA,SAAS;AA5Gb;AA6GQ,UAAM,EAAE,YAAY,SAAS,YAAY,IAAI;AAC7C,UAAM,EAAE,WAAW,EAAE,eAAe,EAAE,IAAI;AAC1C,WAAQ,EAAE,MAAM,MAAM,EAAE,qBAAqB,EAAE,aAAa,cAAc,YAAY,kBAAkB,OAAO,IAAI,SAAS,cAAc,QAAQ,QAAQ,cAAc,QAAQ,QAAQ,WAAW,GAAG,EAAE,iBAAiB,EAAE,SAAS,KAAK,UAAU,YAAY,GAAG,EAAE,OAAO,EAAE,OAAO,cAAc,GAAG,EAAE,iBAAiB,MAAM,QAAQ,MAAM,aAAa,EAAE,sBAAsB,EAAE,IAAI,aAAa,WAAW,IAAI,OAAO,cAAc,YAAY,kBAAkB,KAAK,MAAM,GAAG,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,iBAAiB,MAAM,QAAQ,MAAM,oBAAoB,EAAE,qBAAqB,EAAE,IAAI,oBAAoB,QAAQ,YAAY,OAAO,cAAc,YAAY,cAAc,GAAG,CAAC,CAAC,GAAG,EAAE,iBAAiB,MAAM,QAAQ,MAAM,eAAe,EAAE,sBAAsB,EAAE,IAAI,wBAAwB,eAAe,UAAU,OAAO,GAAG,GAAG,EAAE,gBAAgB,EAAE,WAAU,2CAAa,YAAW,YAAY,CAAC,aAAa,OAAO,SAAS,GAAG,QAAQ,aAAa,MAAM,GAAG,EAAE,gBAAgB,EAAE,WAAU,2CAAa,YAAW,aAAa,OAAO,YAAY,GAAG,QAAQ,aAAa,SAAS,GAAG,EAAE,gBAAgB,EAAE,WAAU,2CAAa,YAAW,WAAW,OAAO,UAAU,GAAG,QAAQ,aAAa,OAAO,CAAC,CAAC,GAAG,EAAE,iBAAiB,MAAM,QAAQ,MAAM,cAAc,EAAE,sBAAsB,EAAE,IAAI,cAAc,UAAU,CAAC,KAAK,UAAU,uCAAuC,IAAI,UAAU,GAAG,OAAO,cAC70C,YAAY,kBAAkB,KAAK,MAAM,GAAG,EAAE,CAAC,KAC/C,UAAK,UAAU,WAAW,IAAI,UAAU,MAAxC,mBAA2C,cAAc,CAAC,CAAC,GAAG,EAAE,kBAAkB,EAAE,YAAY,WAAW,MAAM,UAAU,OAAO,QAAQ,SAAS,MAAM;AAC3J,WAAK,KAAK,YAAY,KAAK;AAAA,IAC/B,EAAE,GAAG,QAAQ,QAAQ,UAAU,GAAG,EAAE,kBAAkB,EAAE,MAAM,UAAU,OAAO,QAAQ,SAAS,YAAY;AACxG,YAAM,aAAa,MAAM,KAAK,KAAK,aAAa,qBAAqB,oBAAoB,CAAC;AAC1F,YAAM,mBAAmB,KAAK,aAAa,qBAAqB,mBAAmB,EAAE,CAAC;AACtF,YAAM,YAAY,WAAW,KAAK,CAAC,UAAU,MAAM,OAAO,WAAW;AACrE,YAAM,aAAa,WAAW,KAAK,CAAC,UAAU,MAAM,OAAO,YAAY;AACvE,YAAM,uBAAuB,MAAM,KAAK,KAAK,aAAa,qBAAqB,oBAAoB,CAAC,EAAE,CAAC;AACvG,YAAM,OAAO;AAAA,QACT,QAAQ,qBAAqB,cAAc,CAAC,EAAE;AAAA,QAC9C,aAAa,iBAAiB;AAAA,QAC9B,mBAAmB;AAAA,UACf,MAAM,WAAW,UAAU,KAAK,GAAG,WAAW,KAAK,IAAI,UAAU,KAAK,KAAK,UAAU;AAAA,UACrF,MAAM,cAAc,YAAY,kBAAkB,OAAO;AAAA,QAC7D;AAAA,MACJ;AACA,WAAK,kCAAkC,KAAK;AAAA,QACxC;AAAA,QACA,aAAa;AAAA,MACjB,CAAC;AAAA,IACL,EAAE,GAAG,QAAQ,QAAQ,WAAW,CAAC,GAAG,KAAK,UAAU,WAAY,EAAE,kBAAkB,EAAE,OAAO,UAAU,UAAU,MAAM,MAAM,WAAW,MAAM,MAAM,OAAO,KAAK,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,MAAM,UAAU,GAAG,KAAK,mBAAmB,cAAc,CAAC,CAAC,IAAK,MAAS,CAAC,CAAC;AAAA,EAC/Q;AAAA,EACA,mBAAmB,gBAAgB;AAC/B,UAAM,EAAE,SAAS,EAAE,gBAAgB,EAAE,IAAI;AACzC,YAAQ,gBAAgB;AAAA,MACpB,KAAK;AACD,eAAO,gBAAgB;AAAA,MAC3B,KAAK;AACD,eAAO,gBAAgB;AAAA,MAC3B,KAAK;AACD,eAAO,gBAAgB;AAAA,MAC3B,KAAK;AACD,eAAO,gBAAgB;AAAA,MAC3B;AACI,eAAO;AAAA,IACf;AAAA,EACJ;AAAA,EACA,IAAI,eAAe;AAAE,WAAO,WAAW,IAAI;AAAA,EAAG;AAClD;",
  "names": []
}
