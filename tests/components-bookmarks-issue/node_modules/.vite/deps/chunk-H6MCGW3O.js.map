{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{DiscardOrAdjustAlphaBlend as a}from\"./DiscardOrAdjustAlphaBlend.glsl.js\";import{FloatDrawUniform as e}from\"../../shaderModules/FloatDrawUniform.js\";import{FloatPassUniform as r}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";import{AlphaDiscardMode as d}from\"../../../lib/basicInterfaces.js\";function s(a,e){l(a,e,new r(\"textureAlphaCutoff\",(a=>a.textureAlphaCutoff)))}function t(a,r){l(a,r,new e(\"textureAlphaCutoff\",(a=>a.textureAlphaCutoff)))}function l(e,r,s){const t=e.fragment;switch(r.alphaDiscardMode!==d.Mask&&r.alphaDiscardMode!==d.MaskBlend||t.uniforms.add(s),r.alphaDiscardMode){case d.Blend:return e.include(a);case d.Opaque:t.code.add(o`void discardOrAdjustAlpha(inout vec4 color) {\ncolor.a = 1.0;\n}`);break;case d.Mask:t.code.add(o`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case d.MaskBlend:e.fragment.code.add(o`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}}export{t as DiscardOrAdjustAlphaDraw,s as DiscardOrAdjustAlphaPass};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{ColorMixModeEnum as e}from\"../../../../layers/support/symbolColorUtils.js\";import{ColorConversion as t}from\"./ColorConversion.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function i(i){i.include(t),i.code.add(r`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${r.int(e.Multiply)}) {\n        return allMixed;\n      }\n      if (mode == ${r.int(e.Ignore)}) {\n        return internalMixed;\n      }\n      if (mode == ${r.int(e.Replace)}) {\n        return externalColor;\n      }\n\n      // tint (or something invalid)\n      float vIn = rgb2v(internalMixed);\n      vec3 hsvTint = rgb2hsv(externalColor);\n      vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n      return hsv2rgb(hsvOut);\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${r.int(e.Ignore)}) {\n        return internalMixed;\n      }\n      if (mode == ${r.int(e.Replace)}) {\n        return externalOpacity;\n      }\n\n      // multiply or tint (or something invalid)\n      return allMixed;\n    }\n  `)}export{i as MixExternalColor};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAIkW,SAASA,GAAE,GAAEC,IAAE;AAAC,IAAE,GAAEA,IAAE,IAAIC,GAAE,sBAAsB,CAAAC,OAAGA,GAAE,kBAAmB,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,IAAE,GAAE,GAAE,IAAI,EAAE,sBAAsB,CAAAA,OAAGA,GAAE,kBAAmB,CAAC;AAAC;AAAC,SAAS,EAAEF,IAAE,GAAED,IAAE;AAAC,QAAMI,KAAEH,GAAE;AAAS,UAAO,EAAE,qBAAmB,EAAE,QAAM,EAAE,qBAAmB,EAAE,aAAWG,GAAE,SAAS,IAAIJ,EAAC,GAAE,EAAE,kBAAiB;AAAA,IAAC,KAAK,EAAE;AAAM,aAAOC,GAAE,QAAQ,CAAC;AAAA,IAAE,KAAK,EAAE;AAAO,MAAAG,GAAE,KAAK,IAAI;AAAA;AAAA,EAErsB;AAAE;AAAA,IAAM,KAAK,EAAE;AAAK,MAAAA,GAAE,KAAK,IAAI,iHAAiH;AAAE;AAAA,IAAM,KAAK,EAAE;AAAU,MAAAH,GAAE,SAAS,KAAK,IAAI,yFAAyF;AAAA,EAAC;AAAC;;;ACFnF,SAAS,EAAEI,IAAE;AAAC,EAAAA,GAAE,QAAQC,EAAC,GAAED,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOzN,EAAE,IAAI,EAAE,QAAQ,CAAC;AAAA;AAAA;AAAA,oBAGjB,EAAE,IAAI,EAAE,MAAM,CAAC;AAAA;AAAA;AAAA,oBAGf,EAAE,IAAI,EAAE,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAiBhB,EAAE,IAAI,EAAE,MAAM,CAAC;AAAA;AAAA;AAAA,oBAGf,EAAE,IAAI,EAAE,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOjC;AAAC;",
  "names": ["s", "e", "o", "a", "t", "i", "e"]
}
