import {
  At,
  C,
  F,
  G,
  K,
  Tt,
  Y,
  _,
  t3 as t,
  tt
} from "./chunk-SAYWXQVM.js";

// node_modules/@arcgis/core/chunks/persistableUrlUtils.js
function u(e, o) {
  var _a;
  const s = (_a = o == null ? void 0 : o.url) == null ? void 0 : _a.path;
  if (e && s && (e = _(e, s, { preserveProtocolRelative: true }), o.portalItem && o.readResourcePaths)) {
    const t2 = G(e, o.portalItem.itemUrl);
    null != t2 && d.test(t2) && o.readResourcePaths.push(o.portalItem.resourceFromPath(t2).path);
  }
  return (e = x(e, o == null ? void 0 : o.portal)) && h.test(e) ? I(e) : e;
}
function m(e, l, a = R.YES) {
  var _a, _b;
  if (null == (e = e && h.test(e) ? O(e) : e))
    return e;
  !Y(e) && (l == null ? void 0 : l.blockedRelativeUrls) && l.blockedRelativeUrls.push(e);
  let c = _(e);
  if (l) {
    const t2 = ((_a = l.verifyItemRelativeUrls) == null ? void 0 : _a.rootPath) || ((_b = l.url) == null ? void 0 : _b.path);
    if (t2) {
      const o = x(t2, l.portal), s = x(c, l.portal);
      c = G(s, o, o);
      null != c && c !== s && c !== e && l.verifyItemRelativeUrls && l.verifyItemRelativeUrls.writtenUrls.push(c);
    }
  }
  return c = U(c, l == null ? void 0 : l.portal), Y(c) && (c = K(c)), (l == null ? void 0 : l.resources) && (l == null ? void 0 : l.portalItem) && !Y(c) && !tt(c) && a === R.YES && l.resources.toKeep.push({ resource: l.portalItem.resourceFromPath(c), compress: false }), c;
}
function p(e, t2, r) {
  return u(e, r);
}
function f(e, t2, r, o) {
  const s = m(e, o);
  void 0 !== s && (t2[r] = s);
}
var h = /\/items\/([^\/]+)\/resources\/(.*)/;
var d = /^\.\/resources\//;
function g(e) {
  const t2 = (e == null ? void 0 : e.match(h)) ?? null;
  return (t2 == null ? void 0 : t2[1]) ?? null;
}
function v(e) {
  const t2 = (e == null ? void 0 : e.match(h)) ?? null;
  if (null == t2)
    return null;
  const r = t2[2], o = r.lastIndexOf("/");
  if (-1 === o) {
    const { path: e2, extension: t3 } = Tt(r);
    return { prefix: null, filename: e2, extension: t3 };
  }
  const { path: s, extension: n } = Tt(r.slice(o + 1));
  return { prefix: r.slice(0, o), filename: s, extension: n };
}
function U(e, t2) {
  return t2 && !t2.isPortal && t2.urlKey && t2.customBaseUrl ? At(e, `${t2.urlKey}.${t2.customBaseUrl}`, t2.portalHostname) : e;
}
function x(e, t2) {
  if (!t2 || t2.isPortal || !t2.urlKey || !t2.customBaseUrl)
    return e;
  const r = `${t2.urlKey}.${t2.customBaseUrl}`, o = C();
  return F(o, `${o.scheme}://${r}`) ? At(e, t2.portalHostname, r) : At(e, r, t2.portalHostname);
}
function I(t2) {
  if (!t2)
    return t2 || null;
  let r = t2;
  return r && t && !t.findCredential(r) && (r = t._normalizeAGOLorgDomain(r), r = r.replace(/^https?:\/\/www\.arcgis\.com/, "https://cdn.arcgis.com"), r = r.replace(/^https?:\/\/devext\.arcgis\.com/, "https://cdndev.arcgis.com"), r = r.replace(/^https?:\/\/qaext\.arcgis\.com/, "https://cdnqa.arcgis.com")), r;
}
function O(t2) {
  if (!t2)
    return t2 || null;
  let r = t2;
  return r = r.replace(/^https?:\/\/cdn\.arcgis\.com/, "https://www.arcgis.com"), r = r.replace(/^https?:\/\/cdndev\.arcgis\.com/, "https://devext.arcgis.com"), r = r.replace(/^https?:\/\/cdnqa\.arcgis\.com/, "https://qaext.arcgis.com"), r && t && !t.findCredential(r) && (r = t._normalizeAGOLorgDomain(r)), r;
}
var R;
!function(e) {
  e[e.YES = 0] = "YES", e[e.NO = 1] = "NO";
}(R || (R = {}));
var w = Object.freeze(Object.defineProperty({ __proto__: null, get MarkKeep() {
  return R;
}, ensureMainOnlineDomain: U, fromCDNUrl: O, fromJSON: u, itemIdFromResourceUrl: g, prefixAndFilenameFromResourceUrl: v, read: p, toCDNUrl: I, toJSON: m, write: f }, Symbol.toStringTag, { value: "Module" }));

export {
  u,
  m,
  p,
  f,
  g,
  v,
  U,
  I,
  R,
  w
};
//# sourceMappingURL=chunk-CZSTCON2.js.map
