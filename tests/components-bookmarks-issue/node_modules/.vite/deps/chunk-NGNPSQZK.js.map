{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/graphics/sources/geojson/geojson.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{isISO8601Date as e}from\"../../../../core/date.js\";import t from\"../../../../core/Error.js\";import{isWGS84 as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{OptimizedFeature as o}from\"../../OptimizedFeature.js\";import r from\"../../OptimizedGeometry.js\";import{normalizeFieldName as i,isNumericField as s}from\"../../../support/fieldUtils.js\";const c={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function u(e){return c[e]}function*l(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*f(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*p(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const s of e){const{geometry:e,properties:c,id:l}=s;if(e&&u(e.type)!==n)continue;const f=c||{};let p;i&&(p=f[i],null==l||p||(f[i]=p=l));const a=new o(e?h(new r,e,t):null,f,null,p??void 0);yield a}}function a(e){for(const t of e)if(t.length>2)return!0;return!1}function y(e){return!g(e)}function d(e){return g(e)}function g(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function m(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function h(e,t,n){switch(t.type){case\"LineString\":return w(e,t,n);case\"MultiLineString\":return P(e,t,n);case\"MultiPoint\":return j(e,t,n);case\"MultiPolygon\":return b(e,t,n);case\"Point\":return S(e,t,n);case\"Polygon\":return F(e,t,n)}}function w(e,t,n){return M(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates)M(e,o,n);return e}function j(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){for(const o of t.coordinates){G(e,o[0],n);for(let t=1;t<o.length;t++)k(e,o[t],n)}return e}function S(e,t,n){return O(e,t.coordinates,n),e}function F(e,t,n){const o=t.coordinates;G(e,o[0],n);for(let r=1;r<o.length;r++)k(e,o[r],n);return e}function G(e,t,n){const o=m(t);y(o)?T(e,o,n):M(e,o,n)}function k(e,t,n){const o=m(t);d(o)?T(e,o,n):M(e,o,n)}function M(e,t,n){for(const o of t)O(e,o,n);e.lengths.push(t.length)}function T(e,t,n){for(let o=t.length-1;o>=0;o--)O(e,t[o],n);e.lengths.push(t.length)}function O(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function L(t){switch(typeof t){case\"string\":return e(t)?\"esriFieldTypeDate\":\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function E(e,o=4326){if(!e)throw new t(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==e.type&&\"FeatureCollection\"!==e.type)throw new t(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:e});const{crs:r}=e;if(!r)return;const i=\"string\"==typeof r?r:\"name\"===r.type?r.properties.name:\"EPSG\"===r.type?r.properties.code:null,s=n({wkid:o})?new RegExp(\".*(CRS84H?|4326)$\",\"i\"):new RegExp(`.*(${o})$`,\"i\");if(!i||!s.test(i))throw new t(\"geojson:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:r})}function I(e,t={}){const n=[],o=new Set,r=new Set;let c,p=!1,y=null,d=!1,{geometryType:g=null}=t,m=!1;for(const s of l(e)){const{geometry:e,properties:t,id:l}=s;if(!e||(g||(g=u(e.type)),u(e.type)===g)){if(!p){p=a(f(e))}if(d||(d=null!=l,d&&(c=typeof l,t&&(y=Object.keys(t).filter((e=>t[e]===l))))),t&&y&&d&&null!=l&&(y.length>1?y=y.filter((e=>t[e]===l)):1===y.length&&(y=t[y[0]]===l?y:[])),!m&&t){let e=!0;for(const s in t){if(o.has(s))continue;const c=t[s];if(null==c){e=!1,r.add(s);continue}const u=L(c);if(\"unknown\"===u){r.add(s);continue}r.delete(s),o.add(s);const l=i(s);l&&n.push({name:l,alias:s,type:u})}m=e}}}const h=i(1===y?.length&&y[0]||null)??void 0;if(h)for(const i of n)if(i.name===h&&s(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:p,objectIdFieldName:h,objectIdFieldType:c,unknownFields:Array.from(r)}}function N(e,t){return Array.from(p(l(e),t))}export{N as createOptimizedFeatures,u as getGeometryType,I as inferLayerProperties,E as validateGeoJSON};\n"],
  "mappings": "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",
  "names": ["e", "t", "s", "c", "l", "f", "p", "a", "d", "y", "g", "m", "u", "h"]
}
