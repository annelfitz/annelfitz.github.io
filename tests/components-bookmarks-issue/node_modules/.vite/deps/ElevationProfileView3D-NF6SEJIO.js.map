{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/ElevationProfile/support/InputRepresentation3D.js", "../../@arcgis/core/widgets/ElevationProfile/support/ProfileLines3D.js", "../../@arcgis/core/widgets/ElevationProfile/support/ElevationProfileView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import{destroyHandle as i,handlesGroup as t}from\"../../../core/handleUtils.js\";import{abortMaybe as s,removeMaybe as l}from\"../../../core/maybe.js\";import{throwIfAborted as r}from\"../../../core/promiseUtils.js\";import{watch as a}from\"../../../core/reactiveUtils.js\";import{getGraphicEffectiveElevationInfo as h}from\"../../../support/elevationInfoUtils.js\";import{Settings as n}from\"../../../views/3d/interactive/editingTools/settings.js\";import{OutlineVisualElement as o}from\"../../../views/3d/interactive/visualElements/OutlineVisualElement.js\";import{GraphicState as m}from\"../../../views/3d/layers/graphics/GraphicState.js\";import{RenderOccludedFlag as g}from\"../../../views/3d/webgl-engine/lib/Material.js\";import{highlightsSupported as c}from\"../../../views/support/layerViewUtils.js\";class p{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null,this._settings=new n({getTheme:()=>this._params.view.effectiveTheme})}destroy(){this.remove()}remove(){this._highlightTask=s(this._highlightTask),this._highlightHandle=l(this._highlightHandle),this._visualElementHandle=l(this._visualElementHandle)}showHighlight(i){if(this.remove(),null==i||!u(i))return;const t=i.layer;this._highlightTask=e((async e=>{const s=await this._params.view.whenLayerView(t);r(e),c(s)&&(this._highlightHandle=s.highlight(i))}))}showReshaping(e){if(this.remove(),null==e)return;const s=this._params.view,l=new o({view:s,geometry:u(e)?e.geometry:null,attached:!1,elevationInfo:h(e),renderOccluded:g.OccludeAndTransparentStencil,isDecoration:!0}),r=new m({graphic:e}),n=[a((()=>r.isDraped),(e=>{l.isDraped=e})),r.on(\"changed\",(()=>{l.geometry=u(e)?e.geometry:null})),s.trackGraphicState(r),s.maskOccludee(e),i(l)];this._settings.visualElements.lineObjects.outline.apply(l),l.attached=!0,this._visualElementHandle=t(n)}}function u(e){return null!=e.geometry&&\"polyline\"===e.geometry.type}export{p as InputRepresentation3D};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import o from\"../../../core/Accessor.js\";import{watch as r,syncAndInitial as s}from\"../../../core/reactiveUtils.js\";import{throttle as i}from\"../../../core/throttle.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{fromArray as n}from\"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import c from\"../../../geometry/Polyline.js\";import{OutlineVisualElement as m}from\"../../../views/3d/interactive/visualElements/OutlineVisualElement.js\";import{getConfig as p}from\"./constants.js\";const h=100;let f=class extends o{constructor(e){super(e),this._chartData=null,this._visualElements=[]}initialize(){const e=i((e=>{this._update(e)}),h);this.addHandles([r((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),e,s),e])}destroy(){this._destroyVisualElements()}remove(){this._destroyVisualElements()}update(e){this._chartData=e}_update(e){const{chartData:o}=e;if(null==o)return this.remove();if(!o.refined)return;const r=this._visualElements,s=o.lines.filter((e=>e.viewVisualizationEnabled)),i=s.length;for(;r.length>i;)r.pop().destroy();const l=p().profileLinesStyle3D;for(;r.length<i;){const e=new m({view:this.view,elevationInfo:{mode:\"absolute-height\",offset:0},innerWidth:l.width-l.outlineSize,width:l.width,falloff:l.falloff,color:l.outlineColor,renderOccluded:l.renderOccluded,isDecoration:!0});r.push(e)}const a=e.spatialReference;for(let c=0;c<i;++c){const e=r[c],o=s[i-1-c];e.geometry=this._createLineGeometry(o,a),e.innerColor=n(t.toUnitRGBA(o.color))}}_createLineGeometry(e,t){const o=e.samples??[],r=o.length-1,s=[];let i=[];for(let l=0;l<=r;l++){const{x:e,y:t,z:a}=o[l];null!=a&&i.push([e,t,a]),l!==r&&null!=a||!i.length||(s.push(i),i=[])}return new c({paths:s,hasZ:!0,spatialReference:t})}_destroyVisualElements(){this._visualElements.forEach((e=>e.destroy())),this._visualElements.length=0}};e([l()],f.prototype,\"view\",void 0),e([l()],f.prototype,\"_chartData\",void 0),f=e([a(\"esri.widgets.ElevationProfile.support.ProfileLines3D\")],f);export{f as ProfileLines3D};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Handles.js\";import{destroyMaybe as t}from\"../../../core/maybe.js\";import{watch as i,syncAndInitial as o}from\"../../../core/reactiveUtils.js\";import{ElevationProfileState as s}from\"./constants.js\";import{HoveredPoints as n}from\"./HoveredPoints.js\";import{InputRepresentation3D as r}from\"./InputRepresentation3D.js\";import{ProfileLines3D as h}from\"./ProfileLines3D.js\";class p{constructor(t,s){this._handles=new e,this._inputRepresentation=new r({view:t}),this._hoveredPoints=new n({view:t}),this._profileLines=new h({view:t}),this._handles.add([i((()=>s.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),o),i((()=>{const{state:e,editable:t,highlightEnabled:i,viewModel:o}=s,n=o.input;return n&&(n.commitProperty(\"geometry\"),n.commitProperty(\"layer\")),{input:n,state:e,editable:t,highlightEnabled:i}}),(e=>this._updateInputRepresentation(e)),o),i((()=>s.viewModel.chartData),(e=>this._profileLines.update(e)),o),i((()=>s.viewModel.input?.geometry),(()=>{this._profileLines.remove()}),o)])}destroy(){this._handles=t(this._handles),this._inputRepresentation=t(this._inputRepresentation),this._hoveredPoints=t(this._hoveredPoints),this._profileLines=t(this._profileLines)}_updateInputRepresentation({input:e,state:t,editable:i,highlightEnabled:o}){const n=this._inputRepresentation;if(!o)return n.remove();t===s.Selected?n.showHighlight(e):t!==s.Created||i?n.remove():n.showReshaping(e)}}export{p as ElevationProfileView3D};\n"],
  "mappings": "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",
  "names": ["e", "u", "t", "s", "l", "a", "r", "n", "d", "h", "e", "d", "o", "r", "s", "l", "a", "u", "t", "p", "t", "s", "a", "d", "e", "o", "n"]
}
