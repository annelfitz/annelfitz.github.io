{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js", "../../@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js", "../../@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js", "../../@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{create as t,fromValues as s}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";class i{constructor(s=t()){this.intensity=s}}class r{constructor(i=t(),r=s(.57735,.57735,.57735)){this.intensity=i,this.direction=r}}class c{constructor(i=t(),r=s(.57735,.57735,.57735),c=!0,n=1,o=1){this.intensity=i,this.direction=r,this.castShadows=c,this.specularStrength=n,this.environmentStrength=o}}class n{constructor(){this.r=[0],this.g=[0],this.b=[0]}}export{i as AmbientLight,r as FillLight,c as MainLight,n as SphericalHarmonicsAmbientLight};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}export{l as add,t as dotProduct,n as elementwiseProduct,e as scalarProduct};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";import{F as n,s as o,c as r}from\"../../../../chunks/vec32.js\";import{create as e}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{elementwiseProduct as i,scalarProduct as s,add as c}from\"../lib/LongVectorMath.js\";import{MainLight as f,FillLight as h,AmbientLight as a,SphericalHarmonicsAmbientLight as g}from\"./Lightsources.js\";function u(t){return(t+1)*(t+1)}function l(n){return t(Math.floor(Math.sqrt(n)-1),0,2)}function m(t,n,o){const r=t[0],e=t[1],i=t[2],s=o||[];return s.length=u(n),n>=0&&(s[0]=.28209479177),n>=1&&(s[1]=.4886025119*r,s[2]=.4886025119*i,s[3]=.4886025119*e),n>=2&&(s[4]=1.09254843059*r*e,s[5]=1.09254843059*e*i,s[6]=.31539156525*(3*i*i-1),s[7]=1.09254843059*r*i,s[8]=.54627421529*(r*r-e*e)),s}function p(t,n){const o=u(t),r=n||{r:[],g:[],b:[]};r.r.length=r.g.length=r.b.length=o;for(let e=0;e<o;e++)r.r[e]=r.g[e]=r.b[e]=0;return r}function b(t,o){const r=l(o.r.length);for(const e of t)n(P,e.direction),m(P,r,v),i(v,w),s(v,e.intensity[0],I),c(o.r,I),s(v,e.intensity[1],I),c(o.g,I),s(v,e.intensity[2],I),c(o.b,I);return o}function y(t,n){m(P,0,v);for(const o of t)n.r[0]+=v[0]*w[0]*o.intensity[0]*4*Math.PI,n.g[0]+=v[0]*w[0]*o.intensity[1]*4*Math.PI,n.b[0]+=v[0]*w[0]*o.intensity[2]*4*Math.PI;return n}function M(t,n,e,i){p(n,i),o(e.intensity,0,0,0);let s=!1;const u=S,l=d,m=j;u.length=0,l.length=0,m.length=0;for(const o of t)o instanceof f&&!s?(r(e.direction,o.direction),r(e.intensity,o.intensity),e.specularStrength=o.specularStrength,e.environmentStrength=o.environmentStrength,e.castShadows=o.castShadows,s=!0):o instanceof f||o instanceof h?u.push(o):o instanceof a?l.push(o):o instanceof g&&m.push(o);b(u,i),y(l,i);for(const o of m)c(i.r,o.r),c(i.g,o.g),c(i.b,o.b)}const S=[],d=[],j=[],v=[0],I=[0],P=e(),w=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];export{M as combineLights,m as computeCoefficients,p as initSHCoefficients,u as numberOfCoefficients,l as orderFromNumberOfCoefficients,y as projectAmbientLights,b as projectFillLights};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{lerp as i}from\"../../../../core/mathUtils.js\";import{c as t,h as s,g as h,m as r}from\"../../../../chunks/vec32.js\";import{create as n,fromValues as a}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{SphericalHarmonicsAmbientLight as o,MainLight as e}from\"./Lightsources.js\";import{combineLights as c}from\"./SphericalHarmonics.js\";class g{constructor(){this.color=n(),this.intensity=1}}class m{constructor(){this.direction=n(),this.ambient=new g,this.diffuse=new g}}const l=.4;class _{constructor(){this._shOrder=2,this._legacy=new m,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new o,this._mainLight=new e(n(),a(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(i){c(i,this._shOrder,this._mainLight,this._sphericalHarmonics),t(this._legacy.direction,this._mainLight.direction);const r=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*r,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*r,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*r,s(this._legacy.diffuse.color,this._mainLight.intensity,r),t(L,this._legacy.diffuse.color),s(L,L,l*this.globalFactor),h(this._legacy.ambient.color,this._legacy.ambient.color,L)}copyFrom(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),t(this._mainLight.direction,i.mainLight.direction),t(this._mainLight.intensity,i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor}lerpLighting(s,h,n){if(r(this._mainLight.intensity,s.mainLight.intensity,h.mainLight.intensity,n),this._mainLight.environmentStrength=i(s.mainLight.environmentStrength,h.mainLight.environmentStrength,n),this._mainLight.specularStrength=i(s.mainLight.specularStrength,h.mainLight.specularStrength,n),t(this._mainLight.direction,h.mainLight.direction),this._mainLight.castShadows=h.mainLight.castShadows,this.globalFactor=i(s.globalFactor,h.globalFactor,n),this.noonFactor=i(s.noonFactor,h.noonFactor,n),s.sh.r.length===h.sh.r.length)for(let t=0;t<h.sh.r.length;t++)this._sphericalHarmonics.r[t]=i(s.sh.r[t],h.sh.r[t],n),this._sphericalHarmonics.g[t]=i(s.sh.g[t],h.sh.g[t],n),this._sphericalHarmonics.b[t]=i(s.sh.b[t],h.sh.b[t],n);else for(let i=0;i<h.sh.r.length;i++)this._sphericalHarmonics.r[i]=h.sh.r[i],this._sphericalHarmonics.g[i]=h.sh.g[i],this._sphericalHarmonics.b[i]=h.sh.b[i]}}const L=n();export{_ as SceneLighting,m as SunLight,l as ambientBoost};\n"],
  "mappings": "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",
  "names": ["r", "i", "c", "n", "o", "n", "e", "l", "u", "l", "n", "o", "r", "e", "i", "m", "j", "g", "m", "l", "n", "i", "r"]
}
