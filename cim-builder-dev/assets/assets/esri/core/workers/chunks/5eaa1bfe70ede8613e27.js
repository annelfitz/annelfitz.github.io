"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2217],{25929:(e,r,t)=>{t.d(r,{f:()=>n,i:()=>p,p:()=>y,r:()=>a,t:()=>o,w:()=>l});var i=t(70586),s=t(17452);function n(e,r){const t=r&&r.url&&r.url.path;if(e&&t&&(e=(0,s.hF)(e,t,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){const t=(0,s.PF)(e,r.portalItem.itemUrl);c.test(t)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(t).path)}return d(e,r&&r.portal)}function o(e,r,t=0){if(!e)return e;!(0,s.YP)(e)&&r&&r.blockedRelativeUrls&&r.blockedRelativeUrls.push(e);let i=(0,s.hF)(e);if(r){const t=r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.rootPath||r.url&&r.url.path;if(t){const n=d(t,r.portal);i=(0,s.PF)(d(i,r.portal),n,n),i!==e&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=function(e,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?(0,s.Ie)(e,`${r.urlKey}.${r.customBaseUrl}`,r.portalHostname):e}(i,r&&r.portal),(0,s.YP)(i)&&(i=(0,s.Fv)(i)),null!=r&&r.resources&&null!=r&&r.portalItem&&!(0,s.YP)(i)&&!(0,s.HK)(i)&&0===t&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(i)}),i}function a(e,r,t){return n(e,t)}function l(e,r,t,i){const s=o(e,i);void 0!==s&&(r[t]=s)}const u=/\/items\/([^\/]+)\/resources\//,c=/^\.\/resources\//;function p(e){const r=(0,i.pC)(e)?e.match(u):null;return(0,i.pC)(r)?r[1]:null}function d(e,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return e;const t=`${r.urlKey}.${r.customBaseUrl}`;return(0,s.D6)(s.Gd,`${s.Gd.scheme}://${t}`)?(0,s.Ie)(e,r.portalHostname,t):(0,s.Ie)(e,t,r.portalHostname)}var y=Object.freeze({__proto__:null,fromJSON:n,toJSON:o,read:a,write:l,itemIdFromResourceUrl:p})},61247:(e,r,t)=>{t.d(r,{Z:()=>c});var i=t(43697),s=t(18855),n=t(81049),o=t(70586),a=t(5600),l=t(52525);let u=class extends s.Z{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((r=>{e+=r.length})),e}add(e,r){if(!this._isHandle(e)&&!Array.isArray(e)&&!n.Z.isCollection(e))return this;const t=this._getOrCreateGroup(r);return Array.isArray(e)||n.Z.isCollection(e)?e.forEach((e=>this._isHandle(e)&&t.push(e))):t.push(e),this.notifyChange("size"),this}forEach(e,r){if("function"==typeof e)this._groups.forEach((r=>r.forEach(e)));else{const t=this._getGroup(e);t&&r&&t.forEach(r)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||n.Z.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const r=this._getGroup(e);for(let e=0;e<r.length;e++)r[e].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let r=0;r<e.length;r++)e[r].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const r=[];return this._groups.set(this._ensureGroupKey(e),r),r}_getGroup(e){return(0,o.j0)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};(0,i._)([(0,a.Cb)({readOnly:!0})],u.prototype,"size",null),u=(0,i._)([(0,l.j)("esri.core.Handles")],u);var c=u},36030:(e,r,t)=>{t.d(r,{J:()=>n});var i=t(35454),s=t(5600);function n(e,r={}){var t;const n=e instanceof i.Xn?e:new i.Xn(e,r),o={type:null==(t=null==r?void 0:r.ignoreUnknown)||t?n.apiValues:String,readOnly:null==r?void 0:r.readOnly,json:{type:n.jsonValues,read:(null==r||!r.readOnly)&&{reader:n.read},write:{writer:n.write}}};return void 0!==(null==r?void 0:r.default)&&(o.json.default=r.default),void 0!==(null==r?void 0:r.name)&&(o.json.name=r.name),(0,s.Cb)(o)}},68668:(e,r,t)=>{t.d(r,{GZ:()=>a,wF:()=>l});var i=t(66643),s=t(81049),n=t(83379),o=t(70586);async function a(e,r){return await e.load(),l(e,r)}async function l(e,r){const t=[],a=(...e)=>{for(const r of e)(0,o.Wi)(r)||(Array.isArray(r)?a(...r):s.Z.isCollection(r)?r.forEach((e=>a(e))):n.Z.isLoadable(r)&&t.push(r))};r(a);let l=null;if(await(0,i.UI)(t,(async e=>{!1!==(await(0,i.q6)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||l||(l=e)})),l)throw l.loadError;return e}},67900:(e,r,t)=>{t.d(r,{gV:()=>N,En:()=>w,Z7:()=>P,c9:()=>x,_R:()=>U,qE:()=>G,cM:()=>I,hd:()=>u,ty:()=>C,Jo:()=>E,$C:()=>O}),t(80442);var i=t(35454),s=t(24678),n=t(82971),o=t(68441),a=t(8744),l=t(58116);const u=39.37,c=o.sv.radius*Math.PI/200,p=/UNIT\[([^\]]+)\]\]$/i,d=l.Z,y=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),h=(0,i.wY)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),f=e=>e*e,v=e=>e*e*e,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:f(.001)},"square-centimeters":{inBaseUnits:f(.01)},"square-decimeters":{inBaseUnits:f(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:f(1e3)},"square-inches":{inBaseUnits:f(.0254)},"square-feet":{inBaseUnits:f(.3048)},"square-yards":{inBaseUnits:f(.9144)},"square-miles":{inBaseUnits:f(1609.344)},"square-us-feet":{inBaseUnits:f(1200/3937)},acres:{inBaseUnits:.0015625*f(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*v(.001)},"cubic-centimeters":{inBaseUnits:1e3*v(.01)},"cubic-decimeters":{inBaseUnits:1e3*v(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*v(1e3)},"cubic-inches":{inBaseUnits:1e3*v(.0254)},"cubic-feet":{inBaseUnits:1e3*v(.3048)},"cubic-yards":{inBaseUnits:1e3*v(.9144)},"cubic-miles":{inBaseUnits:1e3*v(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},b=function(){const e={};for(const r in g)for(const t in g[r].units)e[t]=r;return e}();function S(e){const r=b[e];if(r)return r;throw new Error("unknown measure")}function _(e,r=null){return r=r||S(e),g[r].baseUnit===e}function w(e,r,t){if(r===t)return e;const i=S(r);if(i!==S(t))throw new Error("incompatible units");const s=_(r,i)?e:function(e,r,t){return e*g[t].units[r].inBaseUnits}(e,r,i);return _(t,i)?s:function(e,r,t){return e/g[t].units[r].inBaseUnits}(s,t,i)}function C(e,r,t){return w(e,r,"meters")/(t*Math.PI/180)}function O(e){return h.fromJSON(e.toLowerCase())||null}function U(e){if(e&&"object"==typeof e&&!(0,a.N$)(e))return 1;const r=x(e);return r>1e5?1:r}function I(e){return x(e)>=(e instanceof n.Z?(0,s.Iu)(e).metersPerDegree:1e5)?"meters":G(e)}function x(e,r=o.sv.metersPerDegree){return P(e,!0)||r}function P(e,r=!1){let t,i,s=null;if(null!=e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t){if((0,a.o$)(t))return o.yr.metersPerDegree;if((0,a.ME)(t))return o.Z1.metersPerDegree;s=d.values[d[t]],!s&&r&&m.has(t)&&(s=c)}else if(i)if(-1!==i.search(/^PROJCS/i)){const e=p.exec(i);e&&e[1]&&(s=parseFloat(e[1].split(",")[1]))}else if(-1!==i.search(/^GEOCCS/i)){const e=y.exec(i);e&&e[1]&&(s=parseFloat(e[1].split(",")[1]))}return s}function G(e){let r,t,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,t=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(t=e)),r)i=d.units[d[r]];else if(t&&-1!==t.search(/^PROJCS/i)){let e=p.exec(t);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),i=e&&e[1])}return i?O(i):null}const Z={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},T={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},N=(0,i.wY)()(Z),E=(0,i.wY)()(T);(0,i.wY)()({...Z,...T})},66577:(e,r,t)=>{t.d(r,{qM:()=>c});var i=t(75215),s=t(6570),n=t(9361),o=t(65091),a=t(13473),l=t(17332),u=t(58901);t(82971),t(86973),t(33955);const c={base:n.Z,key:"type",typeMap:{extent:s.Z,multipoint:o.Z,point:a.Z,polyline:u.Z,polygon:l.Z}};(0,i.N7)(c)},24678:(e,r,t)=>{t.d(r,{GG:()=>a,HQ:()=>l,VY:()=>u,wY:()=>c,Iu:()=>y,e8:()=>m,rS:()=>d,N_:()=>p});var i=t(82971),s=t(68441),n=t(8744);function o(e){return new i.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const a=o(s.sv),l=o(s.yr),u=o(s.Z1),c=new i.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${s.sv.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function p(e){return e&&e===s.yr?l:e&&e===s.Z1?u:a}function d(e){return e&&((0,n.BZ)(e)||e===l)?l:e&&((0,n.V2)(e)||e===u)?u:a}function y(e){return e&&((0,n.BZ)(e)||e===l)?s.yr:e&&((0,n.V2)(e)||e===u)?s.Z1:s.sv}function m(e){return(0,n.o$)(e)?s.yr:(0,n.ME)(e)?s.Z1:s.sv}},33955:(e,r,t)=>{t.d(r,{im:()=>h,q9:()=>g,Ji:()=>f,YX:()=>c,aW:()=>p,wp:()=>d,oU:()=>m,l9:()=>y});var i=t(70586),s=t(6570),n=t(9361),o=t(65091),a=t(13473),l=t(17332),u=t(58901);function c(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function p(e){return void 0!==e.points}function d(e){return void 0!==e.x&&void 0!==e.y}function y(e){return void 0!==e.paths}function m(e){return void 0!==e.rings}function h(e){return(0,i.Wi)(e)?null:e instanceof n.Z?e:d(e)?a.Z.fromJSON(e):y(e)?u.Z.fromJSON(e):m(e)?l.Z.fromJSON(e):p(e)?o.Z.fromJSON(e):c(e)?s.Z.fromJSON(e):null}function f(e){return e?d(e)?"esriGeometryPoint":y(e)?"esriGeometryPolyline":m(e)?"esriGeometryPolygon":c(e)?"esriGeometryEnvelope":p(e)?"esriGeometryMultipoint":null:null}const v={esriGeometryPoint:a.Z,esriGeometryPolyline:u.Z,esriGeometryPolygon:l.Z,esriGeometryEnvelope:s.Z,esriGeometryMultipoint:o.Z};function g(e){return e&&v[e]||null}},86973:(e,r,t)=>{t.d(r,{Mk:()=>s,P$:()=>n});var i=t(35454);const s=(0,i.wY)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),n=(0,i.wY)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},40330:(e,r,t)=>{t.d(r,{Dp:()=>u,id:()=>a,qh:()=>l,i8:()=>n,Nv:()=>o});var i=t(80442),s=t(17452);const n="4.21",o={request(e,r){var i;const s=null==(i=e.options)?void 0:i.responseType;return t.e(3172).then(t.bind(t,3172)).then((({default:t})=>{const i=e.options||{};return i.responseType="native"===s||"native-request-init"===s?"native-request-init":"array-buffer",i.signal=null==r?void 0:r.signal,t(e.url,i)})).then((e=>{const r={data:e.data,ssl:e.ssl};return"native-request-init"===e.requestOptions.responseType?(delete r.data.signal,r):{result:r,transferList:[r.data]}}))}};let a;function l(e){a=e}function u(e){const r=a&&a.findCredential(e);return r&&r.token?(0,s.ZN)(e,"token",r.token):e}(0,i.Z)("host-webworker")||((0,i.Z)("edge")||(0,i.Z)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},75823:(e,r,t)=>{t.r(r),t.d(r,{default:()=>M});var i=t(43697),s=t(3172),n=t(92835),o=t(20102),a=t(3920),l=t(68668),u=t(70586),c=t(16453),p=t(95330),d=t(5600),y=(t(80442),t(75215)),m=(t(92604),t(71715)),h=t(52525),f=t(30556),v=t(31263),g=t(6570),b=t(91040),S=t(29600),_=t(54295),w=t(7944),C=t(17287),O=t(78096),U=t(17017),I=t(38009),x=t(16859),P=t(34760),G=t(72965),Z=t(10343),T=t(28294),N=t(21506),E=t(18855),q=t(32073),j=t(410);const B={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let V=class extends((0,a.p)(E.Z)){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const r=(0,j.ff)(this.floors,e);return e.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&(0,q.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(B[e.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){var e;const r=!(null==(e=this.floors)||!e.length),t=this.visibleSublayers.filter((e=>null!=e.definitionExpression||r&&null!=e.floorInfo));return t.length?JSON.stringify(t.reduce(((e,r)=>{const t=(0,j.ff)(this.floors,r),i=(0,u.pC)(t)?(0,j.Hp)(t,r):r.definitionExpression;return e[r.id]=i,e}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,t=r=>{const i=this.scale,s=0===i,n=0===r.minScale||i<=r.minScale,o=0===r.maxScale||i>=r.maxScale;r.visible&&(s||n&&o)&&(r.sublayers?r.sublayers.forEach(t):e.unshift(r))};r&&r.forEach(t);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some(((r,t)=>e[t]!==r))?e:i}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};(0,i._)([(0,d.Cb)({readOnly:!0})],V.prototype,"dynamicLayers",null),(0,i._)([(0,d.Cb)()],V.prototype,"floors",void 0),(0,i._)([(0,d.Cb)({readOnly:!0})],V.prototype,"hasDynamicLayers",null),(0,i._)([(0,d.Cb)()],V.prototype,"layer",null),(0,i._)([(0,d.Cb)({readOnly:!0})],V.prototype,"layers",null),(0,i._)([(0,d.Cb)({readOnly:!0})],V.prototype,"layerDefs",null),(0,i._)([(0,d.Cb)({type:Number})],V.prototype,"scale",void 0),(0,i._)([(0,d.Cb)(N.qG)],V.prototype,"timeExtent",void 0),(0,i._)([(0,d.Cb)({readOnly:!0})],V.prototype,"version",null),(0,i._)([(0,d.Cb)({readOnly:!0})],V.prototype,"visibleSublayers",null),V=(0,i._)([(0,h.j)("esri.layers.mixins.ExportImageParameters")],V);var k=t(49867);let F=class extends((0,O.h)((0,T.n)((0,G.M)((0,Z.x)((0,w.O)((0,C.Y)((0,I.q)((0,x.I)((0,c.R)((0,P.Q)((0,_.V)((0,U.N)((0,a.p)(S.Z)))))))))))))){constructor(...e){super(...e),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,r){return"string"==typeof e?{url:e,...r}:e}load(e){const r=(0,u.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(p.r9).then((()=>this._fetchService(r)))),Promise.resolve(this)}readImageFormat(e,r){const t=r.supportedImageFormatTypes;return t&&t.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,r,t,i){if(!this.loaded||!e)return;const s=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let n=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=(0,v.M9)(i.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;n=(0,q.QV)(s,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");n=(0,q.QV)(s,e.sublayers,(0,v.M9)(e.origin))}}const o=[],a={writeSublayerStructure:n,...i};let l=n;s.forEach((e=>{const r=e.write({},a);o.push(r),l=l||"user"===e.originOf("visible")})),o.some((e=>Object.keys(e).length>1))&&(r.layers=o),l&&(r.visibleLayers=s.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,r,t,i){const s=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const n=new V({layer:this,floors:null==i?void 0:i.floors,scale:(0,b.yZ)({extent:e,width:r})*s}),o=n.toJSON();n.destroy();const a=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},l=e&&e.spatialReference,u=l.wkid||JSON.stringify(l.toJSON());o.dpi*=s;const c={};if(null!=i&&i.timeExtent){const{start:e,end:r}=i.timeExtent.toJSON();c.time=e&&r&&e===r?""+e:`${null==e?"null":e},${null==r?"null":r}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(c.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:r+","+t,...o,...a,...c}}async fetchImage(e,r,t,i){var n;const a={responseType:"image",signal:null!=(n=null==i?void 0:i.signal)?n:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,r,t,i),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},l=this.parsedUrl.path+"/export";return null==a.query.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(0,s.default)(l,a).then((e=>e.data)).catch((e=>{if((0,p.D_)(e))throw e;throw new o.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${l}`,{error:e})})):Promise.reject(new o.Z("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:a.query}))}async fetchRecomputedExtents(e={}){const r={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:t}=await(0,s.default)(this.url,r),{extent:i,fullExtent:o,timeExtent:a}=t,l=i||o;return{fullExtent:l&&g.Z.fromJSON(l),timeExtent:a&&n.Z.fromJSON({start:a[0],end:a[1]})}}loadAll(){return(0,l.GZ)(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:r,ssl:t}=await(0,s.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});t&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r,this.read(r,{origin:"service",url:this.parsedUrl})}};(0,i._)([(0,d.Cb)({type:Boolean})],F.prototype,"datesInUnknownTimezone",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"dpi",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"gdbVersion",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"imageFormat",void 0),(0,i._)([(0,m.r)("imageFormat",["supportedImageFormatTypes"])],F.prototype,"readImageFormat",null),(0,i._)([(0,d.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],F.prototype,"imageMaxHeight",void 0),(0,i._)([(0,d.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],F.prototype,"imageMaxWidth",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"imageTransparency",void 0),(0,i._)([(0,d.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],F.prototype,"isReference",void 0),(0,i._)([(0,d.Cb)({json:{read:!1,write:!1}})],F.prototype,"labelsVisible",void 0),(0,i._)([(0,d.Cb)({type:["ArcGISMapServiceLayer"]})],F.prototype,"operationalLayerType",void 0),(0,i._)([(0,d.Cb)({json:{read:!1,write:!1}})],F.prototype,"popupEnabled",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"sourceJSON",void 0),(0,i._)([(0,d.Cb)({json:{write:{ignoreOrigin:!0}}})],F.prototype,"sublayers",void 0),(0,i._)([(0,f.c)("sublayers",{layers:{type:[k.Z]},visibleLayers:{type:[y.z8]}})],F.prototype,"writeSublayers",null),(0,i._)([(0,d.Cb)({type:["show","hide","hide-children"]})],F.prototype,"listMode",void 0),(0,i._)([(0,d.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],F.prototype,"type",void 0),(0,i._)([(0,d.Cb)(N.HQ)],F.prototype,"url",void 0),F=(0,i._)([(0,h.j)("esri.layers.MapImageLayer")],F);var M=F},35643:(e,r,t)=>{t.d(r,{Z:()=>h});var i,s=t(43697),n=t(22974),o=t(5600),a=(t(75215),t(80442),t(92604),t(36030)),l=t(52525),u=t(10736);let c=i=class extends u.wq{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,s._)([(0,o.Cb)({type:[String,Number],json:{write:!0}})],c.prototype,"code",void 0),c=i=(0,s._)([(0,l.j)("esri.layers.support.CodedValue")],c);var p,d=c,y=t(6933);let m=p=class extends y.Z{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let r=null;if(this.codedValues){const t=String(e);this.codedValues.some((e=>(String(e.code)===t&&(r=e.name),!!r)))}return r}clone(){return new p({codedValues:(0,n.d9)(this.codedValues),name:this.name})}};(0,s._)([(0,o.Cb)({type:[d],json:{write:!0}})],m.prototype,"codedValues",void 0),(0,s._)([(0,a.J)({codedValue:"coded-value"})],m.prototype,"type",void 0),m=p=(0,s._)([(0,l.j)("esri.layers.support.CodedValueDomain")],m);var h=m},6933:(e,r,t)=>{t.d(r,{Z:()=>p});var i=t(43697),s=t(35454),n=t(10736),o=t(5600),a=(t(80442),t(75215),t(92604),t(36030)),l=t(52525);const u=new s.Xn({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends n.wq{constructor(e){super(e),this.name=null,this.type=null}};(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,a.J)(u)],c.prototype,"type",void 0),c=(0,i._)([(0,l.j)("esri.layers.support.Domain")],c);var p=c},1231:(e,r,t)=>{t.d(r,{Z:()=>f});var i,s=t(43697),n=t(35454),o=t(10736),a=t(5600),l=(t(80442),t(75215)),u=(t(92604),t(36030)),c=t(71715),p=t(52525),d=t(29655),y=t(86719);const m=new n.Xn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let h=i=class extends o.wq{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:r}){let t;try{t=JSON.parse(r)}catch(e){}return t?t.value:null}readValueType(e,{description:r}){let t;try{t=JSON.parse(r)}catch(e){}return t?m.fromJSON(t.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],h.prototype,"alias",void 0),(0,s._)([(0,a.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],h.prototype,"defaultValue",void 0),(0,s._)([(0,a.Cb)()],h.prototype,"description",void 0),(0,s._)([(0,c.r)("description")],h.prototype,"readDescription",null),(0,s._)([(0,a.Cb)({types:d.V5,json:{read:{reader:d.im},write:!0}})],h.prototype,"domain",void 0),(0,s._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"editable",void 0),(0,s._)([(0,a.Cb)({type:l.z8,json:{write:!0}})],h.prototype,"length",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,s._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"nullable",void 0),(0,s._)([(0,u.J)(y.v)],h.prototype,"type",void 0),(0,s._)([(0,a.Cb)()],h.prototype,"valueType",void 0),(0,s._)([(0,c.r)("valueType",["description"])],h.prototype,"readValueType",null),h=i=(0,s._)([(0,p.j)("esri.layers.support.Field")],h);var f=h},91764:(e,r,t)=>{t.d(r,{Z:()=>u});var i,s=t(43697),n=(t(5600),t(80442),t(75215),t(92604),t(36030)),o=t(52525),a=t(6933);let l=i=class extends a.Z{constructor(e){super(e),this.type="inherited"}clone(){return new i}};(0,s._)([(0,n.J)({inherited:"inherited"})],l.prototype,"type",void 0),l=i=(0,s._)([(0,o.j)("esri.layers.support.InheritedDomain")],l);var u=l},69150:(e,r,t)=>{t.d(r,{Z:()=>c});var i,s=t(43697),n=t(5600),o=(t(80442),t(75215),t(92604),t(36030)),a=t(52525),l=t(6933);let u=i=class extends l.Z{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,s._)([(0,n.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,r,t){r[t]=[this.minValue||0,e]}}}})],u.prototype,"maxValue",void 0),(0,s._)([(0,n.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[0]},write:{target:"range",writer(e,r,t){r[t]=[e,this.maxValue||0]}}}})],u.prototype,"minValue",void 0),(0,s._)([(0,o.J)({range:"range"})],u.prototype,"type",void 0),u=i=(0,s._)([(0,a.j)("esri.layers.support.RangeDomain")],u);var c=u},66677:(e,r,t)=>{t.d(r,{ld:()=>m,B5:()=>p,M8:()=>f,G:()=>S,Qc:()=>d,DR:()=>y,Nm:()=>v,XG:()=>g,a7:()=>h,wH:()=>b});var i=t(70586),s=t(17452),n=t(25929);const o={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},a=Object.values(o),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p(e){return!!l.test(e)}function d(e){const r=(0,s.mN)(e),t=r.path.match(l)||r.path.match(u);if(!t)return null;const[,i,n,a,c]=t,p=n.indexOf("/");return{title:m(-1!==p?n.slice(p+1):n),serverType:o[a.toLowerCase()],sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:i}}}function y(e){const r=(0,s.mN)(e).path.match(c);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function m(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function h(e,r){const t=[];if(e){const r=d(e);(0,i.pC)(r)&&r.title&&t.push(r.title)}if(r){const e=m(r);t.push(e)}if(2===t.length){if(-1!==t[0].toLowerCase().indexOf(t[1].toLowerCase()))return t[0];if(-1!==t[1].toLowerCase().indexOf(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function f(e){if(!e)return!1;const r=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),t=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return r&&t}function v(e,r){return e?(0,s.Qj)((0,s.Hu)(e,r)):e}function g(e){let{url:r}=e;if(!r)return{url:r};r=(0,s.Hu)(r,e.logger);const t=(0,s.mN)(r),n=d(t.path);let o;if((0,i.pC)(n))null!=n.sublayer&&null==e.layer.layerId&&(o=n.sublayer),r=n.url.path;else if(e.nonStandardUrlAllowed){const e=y(t.path);(0,i.pC)(e)&&(r=e.serviceUrl,o=e.sublayerId)}return{url:(0,s.Qj)(r),layerId:o}}function b(e,r,t,i,o){(0,n.w)(r,i,"url",o),i.url&&null!=e.layerId&&(i.url=(0,s.v_)(i.url,t,e.layerId.toString()))}function S(e){if(!e)return!1;const r=e.toLowerCase(),t=-1!==r.indexOf("/services/"),i=-1!==r.indexOf("/mapserver/wmsserver"),s=-1!==r.indexOf("/imageserver/wmsserver"),n=-1!==r.indexOf("/wmsserver");return t&&(i||s||n)}},29655:(e,r,t)=>{t.d(r,{im:()=>l,V5:()=>a}),t(80442);var i=t(35643),s=t(6933),n=t(91764),o=t(69150);const a={key:"type",base:s.Z,typeMap:{range:o.Z,"coded-value":i.Z,inherited:n.Z}};function l(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.Z.fromJSON(e);case"codedValue":return i.Z.fromJSON(e);case"inherited":return n.Z.fromJSON(e)}return null}},86719:(e,r,t)=>{t.d(r,{v:()=>i});const i=new(t(35454).Xn)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},410:(e,r,t)=>{function i(e){var r;const t=e.layer;return"floorInfo"in t&&null!=(r=t.floorInfo)&&r.floorField&&"floors"in e.view?o(e.view.floors,t.floorInfo.floorField):null}function s(e,r){var t;return"floorInfo"in r&&null!=(t=r.floorInfo)&&t.floorField?o(e,r.floorInfo.floorField):null}function n(e,r){const{definitionExpression:t}=r;return e?t?`(${t}) AND (${e})`:e:t}function o(e,r){if(null==e||!e.length)return null;const t=e.filter((e=>""!==e)).map((e=>`'${e}'`));return t.push("''"),`${r} IN (${t.join(",")}) OR ${r} IS NULL`}t.d(r,{Hp:()=>n,cx:()=>i,ff:()=>s})}}]);