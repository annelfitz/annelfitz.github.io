"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[8511],{99880:(e,t,s)=>{s.d(t,{V:()=>a});var r=s(68773),n=(s(3172),s(20102)),o=s(92604),i=s(17452);const l=o.Z.getLogger("esri.assets");function a(e){if(!r.Z.assetsPath)throw l.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new n.Z("assets:path-not-set","config.assetsPath is not set");return(0,i.v_)(r.Z.assetsPath,e)}},25929:(e,t,s)=>{s.d(t,{f:()=>o,i:()=>h,p:()=>p,r:()=>l,t:()=>i,w:()=>a});var r=s(70586),n=s(17452);function o(e,t){const s=t&&t.url&&t.url.path;if(e&&s&&(e=(0,n.hF)(e,s,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=(0,n.PF)(e,t.portalItem.itemUrl);u.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return f(e,t&&t.portal)}function i(e,t,s=0){if(!e)return e;!(0,n.YP)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=(0,n.hF)(e);if(t){const s=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(s){const o=f(s,t.portal);r=(0,n.PF)(f(r,t.portal),o,o),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?(0,n.Ie)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}(r,t&&t.portal),(0,n.YP)(r)&&(r=(0,n.Fv)(r)),null!=t&&t.resources&&null!=t&&t.portalItem&&!(0,n.YP)(r)&&!(0,n.HK)(r)&&0===s&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function l(e,t,s){return o(e,s)}function a(e,t,s,r){const n=i(e,r);void 0!==n&&(t[s]=n)}const c=/\/items\/([^\/]+)\/resources\//,u=/^\.\/resources\//;function h(e){const t=(0,r.pC)(e)?e.match(c):null;return(0,r.pC)(t)?t[1]:null}function f(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const s=`${t.urlKey}.${t.customBaseUrl}`;return(0,n.D6)(n.Gd,`${n.Gd.scheme}://${s}`)?(0,n.Ie)(e,t.portalHostname,s):(0,n.Ie)(e,s,t.portalHostname)}var p=Object.freeze({__proto__:null,fromJSON:o,toJSON:i,read:l,write:a,itemIdFromResourceUrl:h})},80903:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(50758),n=s(92604),o=s(95330),i=s(25045);const l=n.Z.getLogger("esri.core.workers.Connection");class a{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((s,r)=>{let n=!0;const l=e=>{(0,o.k_)(t.signal),n&&(n=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let n=0;n<e.length;++n){const a=e[n];(0,o.y8)(a)?this._clientPromises[n]=a.then((e=>(this._clients[n]=new i.default(e,t),l(s),this._clients[n])),(()=>(l(r),null))):(this._clients[n]=new i.default(a,t),this._clientPromises[n]=Promise.resolve(this._clients[n]),l(s))}}))}broadcast(e,t,s){const r=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];r[n]=o.then((r=>r.invoke(e,t,s)))}return r}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const s=this._clients[t];if(s){if(!s.isBusy())return Promise.resolve(s)}else e=e||[],e.push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,s){let r=null;return Array.isArray(s)?(l.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:s}):r=s,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((s=>s.invoke(e,t,r)))}on(e,t){return Promise.all(this._clientPromises).then((()=>(0,r.AL)(this._clients.map((s=>s.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then((n=>{t[r]=n.openPort(),0==--s&&e(t)}))}))}get test(){return{numClients:this._clients.length}}}},25045:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var r=s(40330),n=s(20102),o=s(91460),i=s(70586),l=s(95330),a=s(94362),c=s(17202);const u={statsWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(7267)]).then(s.bind(s,37267)),geometryEngineWorker:()=>Promise.all([s.e(5837),s.e(8227)]).then(s.bind(s,48227)),CSVSourceWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(2894),s.e(1534),s.e(2305),s.e(3676),s.e(4324),s.e(9237)]).then(s.bind(s,27793)),EdgeProcessingWorker:()=>Promise.all([s.e(6481),s.e(8936)]).then(s.bind(s,18936)),ElevationSamplerWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(2894),s.e(6481),s.e(3675),s.e(5413)]).then(s.bind(s,61787)),FeatureServiceSnappingSourceWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(6412),s.e(2894),s.e(1534),s.e(3485),s.e(2305),s.e(3676),s.e(4324),s.e(991)]).then(s.bind(s,41650)),GeoJSONSourceWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(2894),s.e(1534),s.e(2305),s.e(3676),s.e(4324),s.e(8479),s.e(7845)]).then(s.bind(s,97845)),LercWorker:()=>s.e(3027).then(s.bind(s,23027)),MemorySourceWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(2894),s.e(1534),s.e(2305),s.e(3676),s.e(4324),s.e(8479),s.e(639)]).then(s.bind(s,30639)),PBFDecoderWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(3676),s.e(7618)]).then(s.bind(s,61916)),Pipeline:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(6412),s.e(2894),s.e(1534),s.e(3485),s.e(2305),s.e(3676),s.e(4324),s.e(6312),s.e(3142)]).then(s.bind(s,53142)),PointCloudWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(2894),s.e(9294),s.e(6883)]).then(s.bind(s,16583)),RasterWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(7303),s.e(3594)]).then(s.bind(s,61576)),SceneLayerWorker:()=>s.e(5265).then(s.bind(s,55265)),WFSSourceWorker:()=>Promise.all([s.e(8778),s.e(6570),s.e(9928),s.e(2894),s.e(1534),s.e(2305),s.e(3676),s.e(4324),s.e(8479),s.e(6919),s.e(3230)]).then(s.bind(s,43230)),WorkerTileHandler:()=>Promise.all([s.e(3568),s.e(6810),s.e(3388)]).then(s.bind(s,56456))},{CLOSE:h,ABORT:f,INVOKE:p,RESPONSE:d,OPEN_PORT:m,ON:_}=a.Cs;class g{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===a.Cs.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class v{constructor(e,t){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new g((e=>this._onInvokeMessage(e))),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(e){const t=new MessageChannel;let s;s="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const r=new v(t.port1,{channel:t,client:s});return"object"==typeof s&&"remoteClient"in s&&(s.remoteClient=r),v.clients.set(r,s),t.port2}static loadWorker(e){const t=u[e];return t?t():Promise.resolve(null)}close(){this._post({type:h}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,s){const r=s&&s.signal,o=s&&s.transferList;if(!this._port)return Promise.reject(new n.Z("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const i=(0,a.jt)();return new Promise(((s,n)=>{const a=(0,l.$F)(r,(()=>{var e;const t=this._outJobs.get(i);t&&(this._outJobs.delete(i),null==(e=t.abortHandle)||e.remove(),this._post({type:f,jobId:i}),n((0,l.zE)()))})),c={resolve:s,reject:n,abortHandle:a,debugInfo:e};this._outJobs.set(i,c),this._post({type:p,jobId:i,methodName:e,abortable:null!=r},t,o)}))}on(e,t){const s=new MessageChannel;function r(e){t(e.data)}return this._port.postMessage({type:a.Cs.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",r),s.port1.start(),{remove(){s.port1.postMessage({type:a.Cs.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",r)}}}openPort(){const e=new MessageChannel;return this._post({type:m,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var t;null==(t=e.abortHandle)||t.remove(),e.reject((0,l.zE)(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){(0,i.pC)(this._schedule)?this._schedule((()=>this._processMessage(e))):this._processMessage(e)}_processMessage(e){const t=(0,a.QM)(e);if(t)switch(t.type){case d:this._onResponseMessage(t);break;case p:this._invokeQueue.push(t);break;case f:this._onAbortMessage(t);break;case h:this._onCloseMessage();break;case m:this._onOpenPortMessage(t);break;case _:this._onOnMessage(t)}}_onAbortMessage(e){const t=this._inJobs,s=e.jobId,r=t.get(s);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&v.clients.get(this)===e&&e.destroy(),v.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:s,data:r,abortable:n}=e,o=n?(0,l.yi)():null,i=this._inJobs;let c,u=this._client,h=u[t];try{if(!h&&t&&-1!==t.indexOf(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)u=u[e[t]],h=u[e[t+1]]}if("function"!=typeof h)throw new TypeError(`${t} is not a function`);c=h.call(u,r,{client:this,signal:o?o.signal:null})}catch(e){return void this._post({type:d,jobId:s,error:(0,a.AB)(e)})}(0,l.y8)(c)?(i.set(s,{controller:o,promise:c}),c.then((e=>{i.has(s)&&(i.delete(s),this._post({type:d,jobId:s},e))}),(e=>{i.has(s)&&(i.delete(s),(0,l.D_)(e)||this._post({type:d,jobId:s,error:(0,a.AB)(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:d,jobId:s},c)}_onOpenPortMessage(e){new v(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,s=this._client.on(e.eventType,(e=>{t.postMessage(e)})),r=(0,o.on)(e.port,"message",(e=>{(0,a.QM)(e).type===a.Cs.CLOSE&&(r.remove(),s.remove(),t.close())}))}_onResponseMessage(e){var t;const{jobId:s,error:r,data:o}=e,i=this._outJobs;if(!i.has(s))return;const l=i.get(s);i.delete(s),null==(t=l.abortHandle)||t.remove(),r?l.reject(n.Z.fromJSON(JSON.parse(r))):l.resolve(o)}_post(e,t,s){return(0,a.oi)(this._port,e,t,s)}}v.kernelInfo={revision:c.$,version:r.i8,buildDate:c.r},v.clients=new Map},94362:(e,t,s)=>{s.d(t,{Cs:()=>r,jt:()=>l,oi:()=>c,QM:()=>u,AB:()=>a});var r,n,o=s(80442);(n=r||(r={}))[n.HANDSHAKE=0]="HANDSHAKE",n[n.OPEN=1]="OPEN",n[n.OPENED=2]="OPENED",n[n.RESPONSE=3]="RESPONSE",n[n.INVOKE=4]="INVOKE",n[n.ABORT=5]="ABORT",n[n.CLOSE=6]="CLOSE",n[n.OPEN_PORT=7]="OPEN_PORT",n[n.ON=8]="ON";let i=0;function l(){return i++}function a(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function c(e,t,s,n){if(t.type===r.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==r.INVOKE&&t.type!==r.RESPONSE)return void e.postMessage(t);let o;!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(s)?(o=h(n),t.data=s):(o=h(s.transferList),t.data=s.result),o?e.postMessage(t,o):e.postMessage(t)}function u(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function h(e){if(!e||!e.length)return null;if((0,o.Z)("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((e=>!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)));return t.length?t:null}},66677:(e,t,s)=>{s.d(t,{ld:()=>d,B5:()=>h,M8:()=>_,G:()=>P,Qc:()=>f,DR:()=>p,Nm:()=>g,XG:()=>v,a7:()=>m,wH:()=>b});var r=s(70586),n=s(17452),o=s(25929);const i={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(i),a=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function h(e){return!!a.test(e)}function f(e){const t=(0,n.mN)(e),s=t.path.match(a)||t.path.match(c);if(!s)return null;const[,r,o,l,u]=s,h=o.indexOf("/");return{title:d(-1!==h?o.slice(h+1):o),serverType:i[l.toLowerCase()],sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:r}}}function p(e){const t=(0,n.mN)(e).path.match(u);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function d(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function m(e,t){const s=[];if(e){const t=f(e);(0,r.pC)(t)&&t.title&&s.push(t.title)}if(t){const e=d(t);s.push(e)}if(2===s.length){if(-1!==s[0].toLowerCase().indexOf(s[1].toLowerCase()))return s[0];if(-1!==s[1].toLowerCase().indexOf(s[0].toLowerCase()))return s[1]}return s.join(" - ")}function _(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),s=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&s}function g(e,t){return e?(0,n.Qj)((0,n.Hu)(e,t)):e}function v(e){let{url:t}=e;if(!t)return{url:t};t=(0,n.Hu)(t,e.logger);const s=(0,n.mN)(t),o=f(s.path);let i;if((0,r.pC)(o))null!=o.sublayer&&null==e.layer.layerId&&(i=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){const e=p(s.path);(0,r.pC)(e)&&(t=e.serviceUrl,i=e.sublayerId)}return{url:(0,n.Qj)(t),layerId:i}}function b(e,t,s,r,i){(0,o.w)(t,r,"url",i),r.url&&null!=e.layerId&&(r.url=(0,n.v_)(r.url,s,e.layerId.toString()))}function P(e){if(!e)return!1;const t=e.toLowerCase(),s=-1!==t.indexOf("/services/"),r=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),o=-1!==t.indexOf("/wmsserver");return s&&(r||n||o)}},28694:(e,t,s)=>{s.d(t,{p:()=>n});var r=s(50459);function n(e,t,s){if(!s||!s.features||!s.hasZ)return;const n=(0,r.k)(s.geometryType,t,e.outSpatialReference);if(n)for(const e of s.features)n(e.geometry)}},50459:(e,t,s)=>{s.d(t,{k:()=>i,P:()=>a});var r=s(70586),n=s(67900),o=s(8744);function i(e,t,s){if((0,r.Wi)(t)||(0,r.Wi)(s)||s.vcsWkid||(0,o.fS)(t,s))return null;const i=(0,n._R)(t)/(0,n._R)(s);if(1===i)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,i);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const s of e.paths)for(const e of s)e.length>2&&(e[2]*=t)}(e,i);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const s of e.rings)for(const e of s)e.length>2&&(e[2]*=t)}(e,i);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const s of e.points)s.length>2&&(s[2]*=t)}(e,i);default:return null}}function l(e,t,s){if(null==e.hasM||e.hasZ)for(const e of t)for(const t of e)t.length>2&&(t[2]*=s)}function a(e,t,s){if(!e&&!t||!s)return;const r=(0,n._R)(s);c(e,s,r),c(t,s,r)}function c(e,t,s){if(e)for(const r of e)u(r.geometry,t,s)}function u(e,t,s){if((0,r.Wi)(e)||!e.spatialReference||(0,o.fS)(e.spatialReference,t))return;const i=(0,n._R)(e.spatialReference)/s;if(1!==i)if("x"in e)null!=e.z&&(e.z*=i);else if("rings"in e)l(e,e.rings,i);else if("paths"in e)l(e,e.paths,i);else if("points"in e&&(null==e.hasM||e.hasZ))for(const t of e.points)t.length>2&&(t[2]*=i)}},17202:(e,t,s)=>{s.d(t,{r:()=>r,$:()=>n});const r="20210928",n="c312c4b5c1d3a2f6febbd67d710c6d6cd2dba51d"}}]);