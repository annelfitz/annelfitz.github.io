"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2305],{74669:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(69801);class n{constructor(e,t){this._storage=new i.WJ,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},69801:(e,t,s)=>{s.d(t,{Xq:()=>n,WJ:()=>r});var i=s(44553);class n{constructor(e,t,s){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,s,i=0){this._storage.put(this._namespace+e,t,s,i)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,s){this._storage.updateSize(this._namespace+e,t,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class r{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.Z,this._users=new i.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,s,i){const n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),s>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return void console.warn("Refusing to cache entry with invalid size "+s);const r=1+Math.max(i,-3)- -3;this._db.set(e,{entry:t,size:s,lifetime:r,lives:r}),this._size+=s,this._checkSizeLimit()}updateSize(e,t,s){const i=this._db.get(e);if(i&&i.entry===t){if(this._size-=i.size,s>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);i.size=s,this._size+=s,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},s=new Array;this._db.forEach(((e,i)=>{const n=e.lifetime;s[n]=(s[n]||0)+e.size,this._users.forAll((s=>{const n=s.namespace;if(i.startsWith(n)){const s=t[n]||0;t[n]=s+e.size}}))}));const i={};this._users.forAll((e=>{const s=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const n=t[s]||0;t[s]=n,i[s]=Math.round(100*e.hitRate)+"%"}else i[s]="0%"}));const n=Object.keys(t);n.forEach((e=>t[e]=t[e]/this._size*100)),n.sort(((e,s)=>t[s]-t[e])),n.forEach((s=>e[s]=Math.round(t[s])+"% / "+i[s]));for(let t=s.length-1;t>=0;--t){const i=s[t];i&&(e["Priority "+(t+-3-1)]=Math.round(i/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,s)=>{s.startsWith(e)&&(this._size-=t.size,this._db.delete(s),this._notifyRemoved(s,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((s=>{e.startsWith(s[0])&&s[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},67900:(e,t,s)=>{s.d(t,{gV:()=>I,En:()=>b,Z7:()=>B,c9:()=>Z,_R:()=>x,qE:()=>q,cM:()=>w,hd:()=>u,ty:()=>z,Jo:()=>A,$C:()=>v}),s(80442);var i=s(35454),n=s(24678),r=s(82971),a=s(68441),o=s(8744),c=s(58116);const u=39.37,h=a.sv.radius*Math.PI/200,l=/UNIT\[([^\]]+)\]\]$/i,f=c.Z,m=/UNIT\[([^\]]+)\]/i,_=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),p=(0,i.wY)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),d=e=>e*e,g=e=>e*e*e,y={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:d(.001)},"square-centimeters":{inBaseUnits:d(.01)},"square-decimeters":{inBaseUnits:d(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:d(1e3)},"square-inches":{inBaseUnits:d(.0254)},"square-feet":{inBaseUnits:d(.3048)},"square-yards":{inBaseUnits:d(.9144)},"square-miles":{inBaseUnits:d(1609.344)},"square-us-feet":{inBaseUnits:d(1200/3937)},acres:{inBaseUnits:.0015625*d(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*g(.001)},"cubic-centimeters":{inBaseUnits:1e3*g(.01)},"cubic-decimeters":{inBaseUnits:1e3*g(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*g(1e3)},"cubic-inches":{inBaseUnits:1e3*g(.0254)},"cubic-feet":{inBaseUnits:1e3*g(.3048)},"cubic-yards":{inBaseUnits:1e3*g(.9144)},"cubic-miles":{inBaseUnits:1e3*g(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},S=function(){const e={};for(const t in y)for(const s in y[t].units)e[s]=t;return e}();function U(e){const t=S[e];if(t)return t;throw new Error("unknown measure")}function R(e,t=null){return t=t||U(e),y[t].baseUnit===e}function b(e,t,s){if(t===s)return e;const i=U(t);if(i!==U(s))throw new Error("incompatible units");const n=R(t,i)?e:function(e,t,s){return e*y[s].units[t].inBaseUnits}(e,t,i);return R(s,i)?n:function(e,t,s){return e/y[s].units[t].inBaseUnits}(n,s,i)}function z(e,t,s){return b(e,t,"meters")/(s*Math.PI/180)}function v(e){return p.fromJSON(e.toLowerCase())||null}function x(e){if(e&&"object"==typeof e&&!(0,o.N$)(e))return 1;const t=Z(e);return t>1e5?1:t}function w(e){return Z(e)>=(e instanceof r.Z?(0,n.Iu)(e).metersPerDegree:1e5)?"meters":q(e)}function Z(e,t=a.sv.metersPerDegree){return B(e,!0)||t}function B(e,t=!1){let s,i,n=null;if(null!=e&&("object"==typeof e?(s=e.wkid,i=e.wkt):"number"==typeof e?s=e:"string"==typeof e&&(i=e)),s){if((0,o.o$)(s))return a.yr.metersPerDegree;if((0,o.ME)(s))return a.Z1.metersPerDegree;n=f.values[f[s]],!n&&t&&_.has(s)&&(n=h)}else if(i)if(-1!==i.search(/^PROJCS/i)){const e=l.exec(i);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}else if(-1!==i.search(/^GEOCCS/i)){const e=m.exec(i);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}return n}function q(e){let t,s,i=null;if(null!=e&&("object"==typeof e?(t=e.wkid,s=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(s=e)),t)i=f.units[f[t]];else if(s&&-1!==s.search(/^PROJCS/i)){let e=l.exec(s);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),i=e&&e[1])}return i?v(i):null}const k={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},M={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},I=(0,i.wY)()(k),A=(0,i.wY)()(M);(0,i.wY)()({...k,...M})},24678:(e,t,s)=>{s.d(t,{GG:()=>o,HQ:()=>c,VY:()=>u,wY:()=>h,Iu:()=>m,e8:()=>_,rS:()=>f,N_:()=>l});var i=s(82971),n=s(68441),r=s(8744);function a(e){return new i.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const o=a(n.sv),c=a(n.yr),u=a(n.Z1),h=new i.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${n.sv.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function l(e){return e&&e===n.yr?c:e&&e===n.Z1?u:o}function f(e){return e&&((0,r.BZ)(e)||e===c)?c:e&&((0,r.V2)(e)||e===u)?u:o}function m(e){return e&&((0,r.BZ)(e)||e===c)?n.yr:e&&((0,r.V2)(e)||e===u)?n.Z1:n.sv}function _(e){return(0,r.o$)(e)?n.yr:(0,r.ME)(e)?n.Z1:n.sv}},38581:(e,t,s)=>{s.d(t,{aX:()=>R});var i=s(68773),n=s(20102),r=s(92604),a=s(70586),o=s(17332),c=s(58901),u=s(73913),h=s(8744),l=s(40488),f=(s(66577),s(3172)),m=s(17452),_=s(33955);const p=r.Z.getLogger("esri.geometry.support.normalizeUtils");function d(e){return"polygon"===e[0].type}function g(e){return"polyline"===e[0].type}function y(e,t,s){if(t){const t=function(e,t){if(!(e instanceof c.Z||e instanceof o.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw p.error(e),new n.Z(e)}const s=(0,u.x3)(e),i=[];for(const e of s){const s=[];i.push(s),s.push([e[0][0],e[0][1]]);for(let i=0;i<e.length-1;i++){const n=e[i][0],r=e[i][1],a=e[i+1][0],o=e[i+1][1],c=Math.sqrt((a-n)*(a-n)+(o-r)*(o-r)),u=(o-r)/c,h=(a-n)/c,l=c/t;if(l>1){for(let e=1;e<=l-1;e++){const i=e*t,a=h*i+n,o=u*i+r;s.push([a,o])}const e=(c+Math.floor(l-1)*t)/2,i=h*e+n,a=u*e+r;s.push([i,a])}s.push([a,o])}}return function(e){return"polygon"===e.type}(e)?new o.Z({rings:i,spatialReference:e.spatialReference}):new c.Z({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=(0,l.Sx)(t,!0)}return s&&(e=(0,u.Sy)(e,s)),e}function S(e,t,s){if(Array.isArray(e)){const i=e[0];if(i>t){const s=(0,u.XZ)(i,t);e[0]=i+s*(-2*t)}else if(i<s){const t=(0,u.XZ)(i,s);e[0]=i+t*(-2*s)}}else{const i=e.x;if(i>t){const s=(0,u.XZ)(i,t);e=e.clone().offset(s*(-2*t),0)}else if(i<s){const t=(0,u.XZ)(i,s);e=e.clone().offset(t*(-2*s),0)}}return e}function U(e,t){let s=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],r=t.geometries[i],a=(0,u.x3)(r);for(let e=0;e<a.length;e++){const t=a[e];t.some((s=>{if(s[0]<180)return!0;{let s=0;for(let e=0;e<t.length;e++){const i=t[e][0];s=i>s?i:s}s=Number(s.toFixed(9));const i=-360*(0,u.XZ)(s,180);for(let s=0;s<t.length;s++){const t=r.getPoint(e,s);r.setPoint(e,s,t.clone().offset(i,0))}return!0}}))}if(n===s){if(d(e))for(const t of(0,u.x3)(r))e[n]=e[n].addRing(t);else if(g(e))for(const t of(0,u.x3)(r))e[n]=e[n].addPath(t)}else s=n,e[n]=r}return e}async function R(e,t,s){if(!Array.isArray(e))return R([e],t);const n=t?t.url:i.Z.geometryServiceUrl;let r,p,d,g,b,z,v,x,w=0;const Z=[],B=[];for(const t of e)if((0,a.Wi)(t))B.push(t);else if(r||(r=t.spatialReference,p=(0,h.C5)(r),d=r.isWebMercator,z=d?102100:4326,g=u.UZ[z].maxX,b=u.UZ[z].minX,v=u.UZ[z].plus180Line,x=u.UZ[z].minus180Line),p)if("mesh"===t.type)B.push(t);else if("point"===t.type)B.push(S(t.clone(),g,b));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>S(e,g,b))),B.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,p);B.push(e.rings?new o.Z(e):e)}else if(t.extent){const e=t.extent,s=(0,u.XZ)(e.xmin,b)*(2*g);let i=0===s?t.clone():(0,u.Sy)(t.clone(),s);e.offset(s,0),e.intersects(v)&&e.xmax!==g?(w=e.xmax>w?e.xmax:w,i=y(i,d),Z.push(i),B.push("cut")):e.intersects(x)&&e.xmin!==b?(w=e.xmax*(2*g)>w?e.xmax*(2*g):w,i=y(i,d,360),Z.push(i),B.push("cut")):B.push(i)}else B.push(t.clone());else B.push(t);let q=(0,u.XZ)(w,g),k=-90;const M=q,I=new c.Z;for(;q>0;){const e=360*q-180;I.addPath([[e,k],[e,-1*k]]),k*=-1,q--}if(Z.length>0&&M>0){const t=U(Z,await async function(e,t,s,i){const n="string"==typeof e?(0,m.mN)(e):e,r=t[0].spatialReference,a={...i,query:{...n.query,f:"json",sr:JSON.stringify(r),target:JSON.stringify({geometryType:(0,_.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(s)}},o=await(0,f.default)(n.path+"/cut",a),{cutIndexes:c,geometries:u=[]}=o.data;return{cutIndexes:c,geometries:u.map((e=>{const t=(0,_.im)(e);return t.spatialReference=r,t}))}}(n,Z,I,s)),i=[],r=[];for(let s=0;s<B.length;s++){const n=B[s];if("cut"!==n)r.push(n);else{const n=t.shift(),o=e[s];(0,a.pC)(o)&&"polygon"===o.type&&o.rings&&o.rings.length>1&&n.rings.length>=o.rings.length?(i.push(n),r.push("simplify")):r.push(d?(0,l.$)(n):n)}}if(!i.length)return r;const o=await async function(e,t,s){const i="string"==typeof e?(0,m.mN)(e):e,n=t[0].spatialReference,r=(0,_.Ji)(t[0]),a={...s,query:{...i.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify((o=t,{geometryType:(0,_.Ji)(o[0]),geometries:o.map((e=>e.toJSON()))}))}};var o;return function(e,t,s){const i=(0,_.q9)(t);return e.map((e=>{const t=i.fromJSON(e);return t.spatialReference=s,t}))}((await(0,f.default)(i.path+"/simplify",a)).data,r,n)}(n,i,s),c=[];for(let e=0;e<r.length;e++){const t=r[e];"simplify"!==t?c.push(t):c.push(d?(0,l.$)(o.shift()):o.shift())}return c}const A=[];for(let e=0;e<B.length;e++){const t=B[e];if("cut"!==t)A.push(t);else{const e=Z.shift();A.push(!0===d?(0,l.$)(e):e)}}return Promise.resolve(A)}},73913:(e,t,s)=>{s.d(t,{UZ:()=>a,x3:()=>u,XZ:()=>o,Sy:()=>c});var i=s(58901),n=s(82971),r=s(33955);const a={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new i.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.Z.WebMercator}),minus180Line:new i.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new i.Z({paths:[[[180,-180],[180,180]]],spatialReference:n.Z.WGS84}),minus180Line:new i.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:n.Z.WGS84})}};function o(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){const s=u(e);for(const e of s)for(const s of e)s[0]+=t;return e}function u(e){return(0,r.oU)(e)?e.rings:e.paths}}}]);