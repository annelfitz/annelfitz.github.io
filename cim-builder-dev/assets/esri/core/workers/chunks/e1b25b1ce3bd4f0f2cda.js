"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2288],{9762:(e,n,t)=>{t.r(n),t.d(n,{projectBuffer:()=>i});var r=t(37539);function i(e,n,t,i,o,l,s=Math.floor(e.length/3)){const a=(0,r.jd)(n,o);if(null==a)return!1;if(a===r.pO){if(e===i&&t===l)return!0;const n=t+3*s;for(let r=t,o=l;r<n;r++,o++)i[o]=e[r];return!0}const u=t+3*s;for(let n=t,r=l;n<u;n+=3,r+=3)a(e,n,i,r);return!0}},23150:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(31635),i=t(10107),o=(t(44208),t(53966),t(87811),t(40608)),l=t(82799),s=t(54238);let a=class extends s.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,r.Cg)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"originId",void 0),(0,r.Cg)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"destinationId",void 0),(0,r.Cg)([(0,i.MZ)({type:l.A,json:{write:!0}})],a.prototype,"layoutGeometry",void 0),a=(0,r.Cg)([(0,o.$)("esri.rest.knowledgeGraph.Relationship")],a)},25927:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(31635),i=t(10107),o=(t(44208),t(53966),t(87811),t(40608)),l=t(86738),s=t(54238);let a=class extends s.A{constructor(e){super(e),this.layoutGeometry=null}};(0,r.Cg)([(0,i.MZ)({type:l.A,json:{write:!0}})],a.prototype,"layoutGeometry",void 0),a=(0,r.Cg)([(0,o.$)("esri.rest.knowledgeGraph.Entity")],a)},37539:(e,n,t)=>{t.d(n,{pO:()=>g,jd:()=>p,Tp:()=>h,w5:()=>f});var r=t(34727),i=t(83047),o=t(73941),l=t(79258);Math.PI;const s=l.$O.radius,a=l.$O.eccentricitySquared,u={a1:s*a,a2:s*a*s*a,a3:s*a*a/2,a4:s*a*s*a*2.5,a5:s*a+s*a*a/2,a6:1-a};l.$O.radius,l.$O.flattening,l.Sw.radius,l.Sw.flattening,l.sH.radius,l.sH.flattening,l.sH.radius;var c=t(21325);const f={2:{5:g,7:null,9:null,10:g,1:k,6:null,8:null,0:null,3:y,11:w,2:g,4:P},5:{5:g,7:null,9:null,10:g,1:k,6:null,8:null,0:null,3:y,11:w,2:g,4:P},7:{5:null,7:g,9:null,10:g,1:null,6:j,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:g,10:g,1:null,6:null,8:M,0:null,3:null,11:null,2:null,4:null},3:{5:m,7:null,9:null,10:m,1:function(e,n,t,r){const i=e[n]/Z,o=O-2*Math.atan(Math.exp(-e[n+1]/Z)),l=Z+e[n+2],s=Math.cos(o)*l;t[r]=Math.cos(i)*s,t[r+1]=Math.sin(i)*s,t[r+2]=Math.sin(o)*l},6:null,8:null,0:null,3:g,11:function(e,n,t,r){m(e,n,t,r),w(t,r,t,r)},2:m,4:function(e,n,t,r){m(e,n,t,r),P(t,r,t,r)}},4:{5:G,7:null,9:null,10:G,1:function(e,n,t,r){G(e,n,t,r),k(t,r,t,r)},6:null,8:null,0:null,3:function(e,n,t,r){G(e,n,t,r),y(t,r,t,r)},11:function(e,n,t,r){G(e,n,t,r),w(t,r,t,r)},2:G,4:g},1:{5:I,7:null,9:null,10:I,1:g,6:null,8:null,0:null,3:function(e,n,t,r){I(e,n,t,r),y(t,r,t,r)},11:function(e,n,t,r){I(e,n,t,r),w(t,r,t,r)},2:I,4:function(e,n,t,r){I(e,n,t,r),P(t,r,t,r)}},6:{5:null,7:A,9:null,10:A,1:null,6:g,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:x,10:x,1:null,6:null,8:g,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:g,3:null,11:null,2:null,4:null},10:{5:g,7:g,9:g,10:g,1:k,6:j,8:M,0:null,3:y,11:w,2:g,4:P},11:{5:v,7:null,9:null,10:v,1:function(e,n,t,r){v(e,n,t,r),k(t,r,t,r)},6:null,8:null,0:null,3:function(e,n,t,r){v(e,n,t,r),y(t,r,t,r)},11:g,2:v,4:function(e,n,t,r){v(e,n,t,r),P(t,r,t,r)}}};function p(e,n){return h(e,n)?.projector}function h(e,n){if(null==e||null==n)return null;if(_.source.spatialReference===e&&_.dest.spatialReference===n)return _;const t=d(e,_.source),r=d(n,_.dest);return 0===t&&0===r?(0,c.aI)(e,n)?_.projector=g:_.projector=null:_.projector=f[t][r],_}function d(e,n){return e?n.spatialReference===e?n.spatialReferenceId:(n.spatialReference=e,"metersPerUnit"in n&&(n.metersPerUnit=(0,i.GA)(e,1)),(0,o.jA)(e)?n.spatialReferenceId=1:(0,c.oT)(e)?n.spatialReferenceId=2:(0,c.K8)(e)?n.spatialReferenceId=3:(0,c.r1)(e)?n.spatialReferenceId=11:e.wkt===o.Ro.wkt?n.spatialReferenceId=4:4490===e.wkid?n.spatialReferenceId=5:e.wkt===o.FY.wkt?n.spatialReferenceId=6:e.wkt===o.LJ.wkt?n.spatialReferenceId=8:(0,c.q8)(e)?n.spatialReferenceId=7:(0,c.KQ)(e)?n.spatialReferenceId=9:n.spatialReferenceId=0):0}function g(e,n,t,r){e!==t&&(t[r++]=e[n++],t[r++]=e[n++],t[r]=e[n])}function m(e,n,t,r){t[r]=$*(e[n]/Z),t[r+1]=$*(O-2*Math.atan(Math.exp(-e[n+1]/Z))),t[r+2]=e[n+2]}function y(e,n,t,i){!function(e,n,t,i,o){const l=.4999999*Math.PI,s=(0,r.qE)(C*e[n+1],-l,l),a=Math.sin(s);t[i++]=C*e[n]*o.radius,t[i++]=o.halfSemiMajorAxis*Math.log((1+a)/(1-a)),t[i]=e[n+2]}(e,n,t,i,l.$O)}function w(e,n,t,r){t[r]=e[n]*b,t[r+1]=e[n+1]*b,t[r+2]=e[n+2]}function v(e,n,t,r){t[r]=e[n]*z,t[r+1]=e[n+1]*z,t[r+2]=e[n+2]}function R(e,n,t,r,i){const o=i+e[n+2],l=C*e[n+1],s=C*e[n],a=Math.cos(l)*o;t[r]=Math.cos(s)*a,t[r+1]=Math.sin(s)*a,t[r+2]=Math.sin(l)*o}function M(e,n,t,r){R(e,n,t,r,l.Sw.radius)}function j(e,n,t,r){R(e,n,t,r,l.sH.radius)}function k(e,n,t,r){R(e,n,t,r,l.$O.radius)}function S(e,n,t,i,o){const l=e[n],s=e[n+1],a=e[n+2],u=Math.sqrt(l*l+s*s+a*a),c=(0,r.YN)(a/(0===u?1:u)),f=Math.atan2(s,l);t[i++]=$*f,t[i++]=$*c,t[i]=u-o}function x(e,n,t,r){S(e,n,t,r,l.Sw.radius)}function A(e,n,t,r){S(e,n,t,r,l.sH.radius)}function I(e,n,t,r){S(e,n,t,r,l.$O.radius)}function P(e,n,t,r){!function(e,n,t,r,i){const o=C*e[n],l=C*e[n+1],s=e[n+2],a=Math.sin(l),u=Math.cos(l),c=i.radius/Math.sqrt(1-i.eccentricitySquared*a*a);t[r++]=(c+s)*u*Math.cos(o),t[r++]=(c+s)*u*Math.sin(o),t[r++]=(c*(1-i.eccentricitySquared)+s)*a}(e,n,t,r,l.$O)}function G(e,n,t,r){const i=u,o=e[n],s=e[n+1],a=e[n+2];let c,f,p,h,d,g,m,y,w,v,R,M,j,k,S,x,A,I,P,G,_;c=Math.abs(a),f=o*o+s*s,p=Math.sqrt(f),h=f+a*a,d=Math.sqrt(h),G=Math.atan2(s,o),g=a*a/h,m=f/h,k=i.a2/d,S=i.a3-i.a4/d,m>.3?(y=c/d*(1+m*(i.a1+k+g*S)/d),P=Math.asin(y),v=y*y,w=Math.sqrt(1-v)):(w=p/d*(1-g*(i.a5-k-m*S)/d),P=Math.acos(w),v=1-w*w,y=Math.sqrt(v)),R=1-l.$O.eccentricitySquared*v,M=l.$O.radius/Math.sqrt(R),j=i.a6*M,k=p-M*w,S=c-j*y,A=w*k+y*S,x=w*S-y*k,I=x/(j/R+A),P+=I,_=A+x*I/2,a<0&&(P=-P),t[r++]=$*G,t[r++]=$*P,t[r]=_}const _={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:g},C=(0,r.kU)(1),$=(0,r.KJ)(1),O=.5*Math.PI,Z=l.$O.radius,b=Z*Math.PI/180,z=180/(Z*Math.PI)},40662:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(31635),i=(t(53966),t(44208),t(87811),t(49186),t(40608)),o=t(77901);let l=class extends o.A{constructor(e){super(e)}};l=(0,r.Cg)([(0,i.$)("esri.rest.knowledgeGraph.ObjectValue")],l)},42095:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(31635),i=t(25482),o=t(10107),l=(t(44208),t(53966),t(87811),t(40608)),s=t(77901);let a=class extends i.o{constructor(e){super(e),this.path=[]}};(0,r.Cg)([(0,o.MZ)({type:[s.A],json:{write:!0}})],a.prototype,"path",void 0),a=(0,r.Cg)([(0,l.$)("esri.rest.knowledgeGraph.Path")],a)},42538:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(31635),i=t(10107),o=(t(44208),t(53966),t(87811),t(40608)),l=t(16930),s=t(65008);let a=class extends s.A{constructor(e){super(e),this.openCypherQuery=""}};(0,r.Cg)([(0,i.MZ)()],a.prototype,"openCypherQuery",void 0),a=(0,r.Cg)([(0,o.$)("esri.rest.knowledgeGraph.GraphQuery")],a);let u=class extends a{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,r.Cg)([(0,i.MZ)()],u.prototype,"bindParameters",void 0),(0,r.Cg)([(0,i.MZ)()],u.prototype,"bindGeometryQuantizationParameters",void 0),(0,r.Cg)([(0,i.MZ)()],u.prototype,"outputQuantizationParameters",void 0),(0,r.Cg)([(0,i.MZ)({type:l.A})],u.prototype,"outputSpatialReference",void 0),(0,r.Cg)([(0,i.MZ)()],u.prototype,"provenanceBehavior",void 0),u=(0,r.Cg)([(0,o.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],u)},54238:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(31635),i=t(10107),o=(t(44208),t(53966),t(87811),t(40608)),l=t(77901);let s=class extends l.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,r.Cg)([(0,i.MZ)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,r.Cg)([(0,i.MZ)({type:String,json:{write:!0}})],s.prototype,"id",void 0),s=(0,r.Cg)([(0,o.$)("esri.rest.knowledgeGraph.GraphNamedObject")],s)},62815:(e,n,t)=>{t.d(n,{N:()=>l});var r=t(83047),i=t(73941),o=t(21325);function l(e,n,t){if(null==n||null==t||t.vcsWkid||(0,o.aI)(n,t)||(0,i.xP)(n)||(0,i.xP)(t))return null;const l=(0,r.G9)(n)/(0,r.G9)(t);if(1===l)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,n){null!=e?.z&&(e.z*=n)}(e,l);case"polyline":case"esriGeometryPolyline":return e=>function(e,n){if(e)for(const t of e.paths)for(const e of t)e.length>2&&(e[2]*=n)}(e,l);case"polygon":case"esriGeometryPolygon":return e=>function(e,n){if(e)for(const t of e.rings)for(const e of t)e.length>2&&(e[2]*=n)}(e,l);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,n){if(e)for(const t of e.points)t.length>2&&(t[2]*=n)}(e,l);case"extent":case"esriGeometryEnvelope":return e=>function(e,n){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=n,e.zmax*=n)}(e,l);default:return null}}},77901:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(31635),i=t(25482),o=t(10107),l=(t(44208),t(53966),t(87811),t(40608));let s=class extends i.o{constructor(e){super(e),this.properties=null}};(0,r.Cg)([(0,o.MZ)({json:{write:!0}})],s.prototype,"properties",void 0),s=(0,r.Cg)([(0,l.$)("esri.rest.knowledgeGraph.GraphObject")],s)},80672:(e,n,t)=>{t.d(n,{R:()=>i});var r=t(20655);function i(e,n){return null===e?n:new r.A({url:e.field("url")})}},92288:(e,n,t)=>{t.r(n),t.d(n,{registerFunctions:()=>q});var r=t(92602),i=t(47609),o=t(66395),l=t(85935),s=t(78878),a=t(80672),u=t(91075),c=t(98988),f=t(16930),p=t(28735),h=t(20655),d=t(80812),g=t(78888),m=t(56507),y=t(65864),w=t(2272),v=t(92300),R=t(31635),M=t(25482),j=t(10107),k=(t(44208),t(53966),t(87811),t(40608)),S=t(21325);let x=class extends M.o{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(e=>e.toJSON()),n=this.geometries[0],t={};return t.outSR=(0,S.YX)(this.outSpatialReference),t.inSR=(0,S.YX)(n.spatialReference),t.geometries=JSON.stringify({geometryType:(0,y.$B)(n),geometries:e}),this.transformation&&(t.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(t.transformForward=this.transformForward),t}};(0,R.Cg)([(0,j.MZ)()],x.prototype,"geometries",void 0),(0,R.Cg)([(0,j.MZ)({type:f.A,json:{read:{source:"outSR"}}})],x.prototype,"outSpatialReference",void 0),(0,R.Cg)([(0,j.MZ)()],x.prototype,"transformation",void 0),(0,R.Cg)([(0,j.MZ)()],x.prototype,"transformForward",void 0),x=(0,R.Cg)([(0,k.$)("esri.rest.support.ProjectParameters")],x);const A=(0,m.dp)(x);var I=t(25927),P=t(42538),G=t(40662),_=t(42095),C=t(23150),$=t(54218);let O=null;async function Z(e,n){const r=new d.default({portal:e,id:n});return await r.load(),null===O&&(O=await Promise.all([t.e(8948),t.e(3910),t.e(5323),t.e(217),t.e(2568),t.e(409)]).then(t.bind(t,62568))),await O.fetchKnowledgeGraph(r.url)}function b(e,n,t,r,i){if(null===e)return null;if((0,$.Kg)(e)||(0,$.Et)(e))return e;if((0,s.e)(e))return e.toJSDate();if((0,s.e)(e))return e.toJSDate();if((0,s.f)(e))return e.toStorageFormat();if((0,s.g)(e))return e.toStorageString();if((0,s.n)(e)){const o={};for(const l of e.keys())o[l]=b(e.field(l),n,t,r,i),o[l]instanceof u.A&&i.push({container:o,indexer:l});return o}if((0,$.cy)(e)){const o=e.map(e=>b(e,n,t,r,i));for(let e=0;e<o.length;e++)o[e]instanceof u.A&&i.push({container:o,indexer:e});return o}return(0,s.h)(e)?e.spatialReference.isWGS84?e:e.spatialReference.isWebMercator&&n?(0,p.ci)(e):e:void 0}function z(e,n){if(!e)return null;const t={};for(const r in e)t[r]=T(e[r],n);return t}function T(e,n){return null===e?null:(0,$.cy)(e)?e.map(e=>T(e,n)):e instanceof I.A?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:z(e.properties,n)}:e instanceof G.A?{graphType:"object",properties:z(e.properties,n)}:e instanceof C.A?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:z(e.properties,n)}:e instanceof _.A?{graphType:"path",path:e.path?e.path.map(e=>T(e,n)):null}:(0,s.h)(e)?function(e,n){if(!e)return e;if(e.spatialReference.isWGS84&&n.spatialReference.isWebMercator)return(0,p.Gh)(e);if(e.spatialReference.equals(n.spatialReference))return e;throw new l.D$(n,"WrongSpatialReference",null)}(e,n):(0,$.Kg)(e)||(0,$.Et)(e)||(0,$.$P)(e)?e:null}function q(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(n,t){return e.standardFunctionAsync(n,t,(e,r,o)=>{if((0,s.B)(o,2,2,n,t),null===o[0])throw new l.D$(n,"PortalRequired",t);if(o[0]instanceof i.A){const e=(0,s.u)(o[1]);let t;return t=n.services?.portal?n.services.portal:h.A.getDefault(),Z((0,a.R)(o[0],t),e)}if(!1===(0,$.Kg)(o[0]))throw new l.D$(n,"InvalidParameter",t);const u=(0,s.u)(o[0]);return Z(n.services?.portal??h.A.getDefault(),u)})},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(n,i){return e.standardFunctionAsync(n,i,async(e,a,u)=>{(0,s.B)(u,2,4,n,i);const p=u[0];if(!(0,s.o)(p))throw new l.D$(n,"InvalidParameter",i);const h=u[1];if(!(0,$.Kg)(h))throw new l.D$(n,"InvalidParameter",i);null===O&&(O=await Promise.all([t.e(8948),t.e(3910),t.e(5323),t.e(217),t.e(2568),t.e(409)]).then(t.bind(t,62568)));let d=null;const m=(0,s.J)(u[2],null);if(!(m instanceof o.A||null===m))throw new l.D$(n,"InvalidParameter",i);if(m){let e=[];d=b(m,!0,!1,n,e),e=e.filter(e=>!e.container[e.indexer].spatialReference.isWGS84),e.length>0&&await async function(e){const n=r.A.geometryServiceUrl??"";if(!n){(0,c.isLoaded)()||await(0,c.load)();for(const n of e)n.container[n.indexer]=(0,c.project)(n.container[n.indexer],f.A.WGS84);return}const t=e.map(e=>e.container[e.indexer]),i=new x({geometries:t,outSpatialReference:f.A.WGS84}),o=await async function(e,n){n=A(n);const t=(0,w.Dl)(e),r={...t.query,f:"json",...n.toJSON()},i=n.outSpatialReference,o=(0,y.$B)(n.geometries[0]),l=(0,w.jV)(r,void 0);return(0,g.A)(t.path+"/project",l).then(({data:{geometries:e}})=>(0,v.V)(e,o,i))}(n,i);for(let n=0;n<o.length;n++){const t=e[n];t.container[t.indexer]=o[n]}}(e)}const R=(0,s.J)(u[3],!1),M=new P.A({openCypherQuery:h,bindParameters:d,provenanceBehavior:R?"include":"exclude"});(p?.serviceDefinition?.currentVersion??11.3)>11.2&&(M.outputSpatialReference=n.spatialReference);const j=(await O.executeQueryStreaming(p,M)).resultRowsStream.getReader(),k=[];try{for(;;){const{done:e,value:t}=await j.read();if(e)break;if((0,$.cy)(t))for(const e of t)k.push(T(e,n));else{const e=[];for(const r of t)e.push(T(t[r],n));k.push(e)}}}catch(e){throw e}return o.A.convertJsonToArcade(k,(0,s.K)(n),!1,!0)})},e.signatures.push({name:"querygraph",min:2,max:4}))}},92300:(e,n,t)=>{t.d(n,{V:()=>o,X:()=>i});var r=t(65864);function i(e){return{geometryType:(0,r.$B)(e[0]),geometries:e.map(e=>e.toJSON())}}function o(e,n,t){const i=(0,r.xD)(n);return e.map(e=>{const n=i.fromJSON(e);return n.spatialReference=t,n})}},98988:(e,n,t)=>{t.r(n),t.d(n,{canProjectWithoutEngine:()=>L,getTransformation:()=>W,getTransformations:()=>B,initializeProjection:()=>H,isEqualBaseGCS:()=>Q,isLoaded:()=>C,isLoadedOrLoad:()=>$,isLoadedOrLoadFor:()=>O,load:()=>b,project:()=>z,projectExtent:()=>oe,projectMany:()=>T,projectMultipoint:()=>X,projectOrLoad:()=>q,projectOrLoadMany:()=>N,projectPoint:()=>V,projectPolygon:()=>re,projectPolyline:()=>ne,projectWithZConversion:()=>F,projectWithoutEngine:()=>U,requiresLoad:()=>Z,test:()=>J,tryProjectWithZConversion:()=>D,unload:()=>K});var r=t(49186),i=t(74887),o=t(62788),l=t(95488),s=t(51850),a=t(21276),u=t(73941),c=t(5443),f=t(48526),p=t(83290),h=t(86738),d=t(39829),g=t(82799),m=t(16930),y=t(9762),w=t(37539);function v(e,n,t,r,i,o){return R[0]=e,R[1]=n,R[2]=t,(0,y.projectBuffer)(R,r,0,i,o,0)}const R=(0,s.vt)();let M=0;class j{static fromGE(e){const n=new j;return n._wkt=e.wkt,n._wkid=e.wkid,n._isInverse=e.isInverse,n}constructor(e){this.uid=M++,e?(this._wkt=null!=e.wkt?e.wkt:null,this._wkid=null!=e.wkid?e.wkid:-1,this._isInverse=null!=e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=M++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=M++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=M++}getInverse(){const e=new j;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class k{static cacheKey(e,n){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",n.wkid?.toString()??"-1",n.wkt?.toString()??"",n.wkt2?.toString()??""].join()}static fromGE(e){const n=new k;let t="";for(const r of e.steps){const e=j.fromGE(r);n.steps.push(e),t+=e.uid.toString()+","}return n._cachedProjection={},n._gtlistentry=null,n._chain=t,n}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const n of e.steps)n instanceof j?this.steps.push(n):this.steps.push(new j({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}getInverse(){const e=new k;e.steps=[];for(let n=this.steps.length-1;n>=0;n--){const t=this.steps[n];e.steps.push(t.getInverse())}return e}getGTListEntry(){let e="";for(const n of this.steps)e+=n.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,n,t){this._cachedProjection[k.cacheKey(e,n)]=t}getCachedGeTransformation(e,n){let t="";for(const e of this.steps)t+=e.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t);const r=this._cachedProjection[k.cacheKey(e,n)];return void 0===r?null:r}}var S=t(21325),x=t(62815);let A=null,I=null,P=null,G={};const _=new l.I;function C(){return!!A&&(0,p.i)()}function $(){return!!C()||((0,o.gc)(_),b(),!1)}function O(e,n){return!e||!n||L(e,n)||$()}function Z(e,n){return!L(e,n)&&!C()}function b(e){return null==P&&(P=Promise.all([(0,p.l)(),t.e(9930).then(t.bind(t,49930)).then(e=>e.g),t.e(2731).then(t.bind(t,12731))])),P.then(([,n,{hydratedAdapter:t}])=>{(0,i.Te)(e),I=t,A=n.default,A._enableProjection(p.p),_.notify()})}function z(e,n,t=null,r=null){return Array.isArray(e)?0===e.length?[]:((0,a.H)(e),T(I,e,e[0].spatialReference,n,t,r)):((0,a.f)(e),T(I,[e],e.spatialReference,n,t,r)[0])}function T(e,n,t,r,i=null,o=null){if(null==t||null==r)return n;if(L(t,r,i))return n.map(e=>U(e,t,r));if(null==i&&(0,u.jA)(t))return n.map(e=>U(e,t,m.A.WGS84)).map(e=>D(e,r));if(null==i&&(0,u.jA)(r))return n.map(e=>D(e,m.A.WGS84)).map(e=>U(e,m.A.WGS84,r));if(null==i){const e=k.cacheKey(t,r);void 0!==G[e]?i=G[e]:(null==(i=W(t,r,void 0))&&(i=new k),G[e]=i)}if(null==A||null==e)throw new E;return null!=o?A._project(e,n,t,r,i,o):A._project(e,n,t,r,i)}function q(e,n){const t=N([e],n);return null!=t.pending?{pending:t.pending,geometry:null}:null!=t.geometries?{pending:null,geometry:t.geometries[0]}:{pending:null,geometry:null}}function N(e,n){if(!C())for(const t of e)if(null!=t&&!(0,S.aI)(t.spatialReference,n)&&(0,S.fn)(t.spatialReference)&&(0,S.fn)(n)&&!L(t.spatialReference,n))return(0,o.gc)(_),{pending:b(),geometries:null};return{pending:null,geometries:e.map(e=>null==e?null:(0,S.aI)(e.spatialReference,n)?e:(0,S.fn)(e.spatialReference)&&(0,S.fn)(n)?D(e,n):null)}}function W(e,n,t=null){if(null==e||null==n)return null;if(null==A||null==I)throw new E;const r=A._getTransformation(I,e,n,t,t?.spatialReference);return null!==r?k.fromGE(r):null}function B(e,n,t=null){if(null==A||null==I)throw new E;const r=A._getTransformationBySuitability(I,e,n,t,t?.spatialReference);if(null!==r){const e=[];for(const n of r)e.push(k.fromGE(n));return e}return[]}class E extends r.A{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function K(){A=null,I=null,P=null,G={}}const J={get loadPromise(){return P}};function D(e,n){try{const t=z(e,n);if(null==t)return null;"xmin"in e&&"xmin"in t&&(t.zmin=e.zmin,t.zmax=e.zmax);const r=(0,x.N)(t.type,e.spatialReference,n);return null!=r&&r(t),t}catch(e){if(!(e instanceof E))throw e;return null}}async function F(e,n,t){const r=e.spatialReference;return null!=r&&null!=n&&await H(r,n,null,t),D(e,n)}function L(e,n,t){return!t&&(!!(0,S.aI)(e,n)||(0,S.fn)(e)&&(0,S.fn)(n)&&!!(0,w.jd)(e,n))}function Q(e,n){if((0,S.aI)(e,n))return!0;if(!(0,S.fn)(e)||!(0,S.fn)(n))return!1;const t=(0,S.oT)(e)||(0,S.K8)(e)||(0,S.x1)(e),r=(0,S.oT)(n)||(0,S.K8)(n)||(0,S.x1)(n);return t&&r}async function H(e,n,t,r){if(C())return(0,i.NO)(r);if(Array.isArray(e)){for(const{source:n,dest:t,geographicTransformation:i}of e)if(n&&t&&!L(n,t,i))return b(r)}else if(e&&n&&!L(e,n,t))return b(r);return(0,i.NO)(r)}function U(e,n,t){return e?"x"in e?Y(e,n,new h.A,t,0):"xmin"in e?le(e,n,new c.A,t,0):"rings"in e?ie(e,n,new d.A,t,0):"paths"in e?te(e,n,new g.A,t,0):"points"in e?ee(e,n,new f.A,t,0):null:null}function V(e,n,t=n.spatialReference,r=0){return null!=t&&null!=e.spatialReference&&null!=Y(e,e.spatialReference,n,t,r)}function Y(e,n,t,r,i){ae[0]=e.x,ae[1]=e.y;const o=e.z;return ae[2]=void 0!==o?o:i,(0,y.projectBuffer)(ae,n,0,ae,r,0)?(t.x=ae[0],t.y=ae[1],t.spatialReference=r,void 0!==o||(0,u.xP)(r)?(t.z=ae[2],t.hasZ=!0):(t.z=void 0,t.hasZ=!1),void 0===e.m?(t.m=void 0,t.hasM=!1):(t.m=e.m,t.hasM=!0),t):null}function X(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=ee(e,e.spatialReference,n,t,r)}function ee(e,n,t,r,i){const{points:o,hasZ:l,hasM:s}=e,a=[],c=o.length,f=[];for(const e of o)f.push(e[0],e[1],l?e[2]:i);if(!(0,y.projectBuffer)(f,n,0,f,r,0,c))return null;const p=l||(0,u.xP)(r);for(let e=0;e<c;++e){const n=3*e,t=f[n],r=f[n+1];p&&s?a.push([t,r,f[n+2],o[e][3]]):p?a.push([t,r,f[n+2]]):s?a.push([t,r,o[e][2]]):a.push([t,r])}return t.points=a,t.spatialReference=r,t.hasZ=l,t.hasM=s,t}function ne(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=te(e,e.spatialReference,n,t,r)}function te(e,n,t,r,i){const{paths:o,hasZ:l,hasM:s}=e,a=[];if(!se(o,l??!1,s??!1,n,a,r,i))return null;const c=l||(0,u.xP)(r);return t.paths=a,t.spatialReference=r,t.hasZ=c,t.hasM=s,t}function re(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=ie(e,e.spatialReference,n,t,r)}function ie(e,n,t,r,i){const{rings:o,hasZ:l,hasM:s}=e,a=[];if(!se(o,l??!1,s??!1,n,a,r,i))return null;const c=l||(0,u.xP)(r);return t.rings=a,t.spatialReference=r,t.hasZ=c,t.hasM=s,t}function oe(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=le(e,e.spatialReference,n,t,r)}function le(e,n,t,r,i){const{xmin:o,ymin:l,xmax:s,ymax:a,hasZ:c,hasM:f}=e;if(!v(o,l,c?e.zmin:i,n,ae,r))return null;const p=c||(0,u.xP)(r);return t.xmin=ae[0],t.ymin=ae[1],p&&(t.zmin=ae[2]),v(s,a,c?e.zmax:i,n,ae,r)?(t.xmax=ae[0],t.ymax=ae[1],p&&(t.zmax=ae[2]),f&&(t.mmin=e.mmin,t.mmax=e.mmax),t.spatialReference=r,t):null}function se(e,n,t,r,i,o,l=0){const s=new Array;for(const t of e)for(const e of t)s.push(e[0],e[1],n?e[2]:l);if(!(0,y.projectBuffer)(s,r,0,s,o,0))return!1;let a=0;i.length=0;const c=n||(0,u.xP)(o);for(const n of e){const e=new Array;for(const r of n)c&&t?e.push([s[a++],s[a++],s[a++],r[3]]):c?e.push([s[a++],s[a++],s[a++]]):t?(e.push([s[a++],s[a++],r[2]]),a++):(e.push([s[a++],s[a++]]),a++);i.push(e)}return!0}const ae=(0,s.vt)()}}]);