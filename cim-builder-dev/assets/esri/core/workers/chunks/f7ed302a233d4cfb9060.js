"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3084],{88068:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var o=r(43697),i=(r(66577),r(51773)),s=(r(16050),r(12501),r(28756),r(92271),r(72529),r(5499),r(84382),r(81571),r(91423),r(32400)),n=r(16453),p=r(5600),a=(r(75215),r(67676),r(52011)),l=r(86973),u=r(87085),d=r(20102),c=r(83379),y=r(70586),h=r(16467),f=r(74889),m=r(82971);let g=class extends c.Z{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}getSource(){const{featureDefinition:{collection:e,layerDefinition:t,spatialReference:r,supportedCrs:o},layer:{apiKey:i,customParameters:s,effectiveMaxRecordCount:n}}=this;return{type:"ogc-source",collection:e,layerDefinition:t,maxRecordCount:n,queryParameters:{apiKey:i,customParameters:s},spatialReference:r,supportedCrs:o}}queryExtent(e,t={}){return null}queryFeatureCount(e,t={}){return null}queryFeatures(e,t={}){return this.queryFeaturesJSON(e,t).then((e=>f.Z.fromJSON(e)))}queryFeaturesJSON(e,t={}){const r=this.getSource();return this.load(t).then((()=>(0,h.yN)(r,e,t)))}queryObjectIds(e,t={}){return null}serviceSupportsSpatialReference(e){return!(!e.isWGS84&&!e.isWebMercator&&!this.featureDefinition.supportedCrs[e.wkid])}_conformsToType(e,t){const r=new RegExp(`^${t}$`,"i");return e.conformsTo.some((e=>r.test(e)))??!1}_getCapabilities(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:t,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}_getMaxRecordCount(e){const t=e?.components?.parameters;return t?.limit?.schema?.maximum??t?.limitFeatures?.schema?.maximum}_getStorageSpatialReference(e){const t=e.storageCrs??h.$9,r=(0,h.d)(t);return(0,y.Wi)(r)?m.Z.WGS84:new m.Z({wkid:r})}_getSupportedSpatialReferences(e,t){const r="#/crs",o=e.crs??[h.$9],i=o.includes(r)?o.filter((e=>e!==r)).concat(t.crs??[]):o,s=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return i.filter((e=>!s.test(e)))}async _loadOGCServices(e,t){const r=(0,y.pC)(t)?t.signal:null,{apiKey:o,collectionId:i,customParameters:s,fields:n,geometryType:p,hasZ:a,objectIdField:u,timeInfo:c,url:f}=e,m={fields:n?.map((e=>e.toJSON())),geometryType:l.P.toJSON(p),hasZ:a??!1,objectIdField:u,timeInfo:c?.toJSON()},g={apiKey:o,customParameters:s,signal:r},v=await(0,h.gp)(f,g),[C,w]=await Promise.all([(0,h.G4)(v,g),(0,h.j)(v,g)]);if(!this._conformsToType(C,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new d.Z("ogc-feature-layer:no-geojson-support","Server does not support geojson");const b=w.collections.find((e=>e.id===i));if(!b)throw new d.Z("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const _=this._conformsToType(C,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?await(0,h.eS)(v,g):null,S=await(0,h.w9)(b,m,g),x=this._getMaxRecordCount(_),R=this._getCapabilities(S.hasZ,x),F=this._getStorageSpatialReference(b).toJSON(),T=this._getSupportedSpatialReferences(b,w),j=new RegExp(`^${h.Lu}`,"i"),O={};for(const e of T){const t=(0,h.d)(e);(0,y.pC)(t)&&(O[t]||(O[t]=e.replace(j,"")))}this.featureDefinition={capabilities:R,collection:b,layerDefinition:S,spatialReference:F,supportedCrs:O}}};(0,o._)([(0,p.Cb)()],g.prototype,"featureDefinition",void 0),(0,o._)([(0,p.Cb)({constructOnly:!0})],g.prototype,"layer",void 0),(0,o._)([(0,p.Cb)()],g.prototype,"type",void 0),g=(0,o._)([(0,a.j)("esri.layers.graphics.sources.OGCFeatureSource")],g);var v=r(54295),C=r(71612),w=r(17017),b=r(69637),_=r(6404),S=r(38009),x=r(68825),R=r(16859),F=r(34760),T=r(72965),j=r(28294),O=r(21506),E=r(16451),D=r(1231),I=r(53518),P=r(35671),Z=r(54306),q=r(30707),G=r(14165),M=r(32163),N=r(6570);const Q=(0,I.v)();let z=class extends((0,v.V)((0,w.N)((0,_.M)((0,b.b)((0,C.h)((0,x.c)((0,j.n)((0,T.M)((0,S.q)((0,R.I)((0,F.Q)((0,n.R)(u.Z))))))))))))){constructor(e){super(e),this.capabilities=null,this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxRecordCount=null,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new g({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){this.source?.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then((()=>this._fetchService(e)))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get effectiveMaxRecordCount(){return this.maxRecordCount??this.capabilities?.query.maxRecordCount??5e3}get isTable(){return this.loaded&&null==this.geometryType}set renderer(e){(0,P.YN)(e,this.fieldsIndex),this._set("renderer",e)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return(0,M.eZ)(this,e)}createQuery(){return new G.Z}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){let r,o=!1;const i=t?.feature?.attributes,s=this.typeIdField&&i?.[this.typeIdField];return null!=s&&this.types&&(o=this.types.some((t=>t.id==s&&(r=t.domains?.[e],"inherited"===r?.type&&(r=this._getLayerDomain(e)),!0)))),o||r||(r=this._getLayerDomain(e)),r}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(G.Z.from(e)||this.createQuery(),t))).then((e=>(e?.features?.forEach((e=>{e.layer=e.sourceLayer=this})),e)))}serviceSupportsSpatialReference(e){return this.source?.serviceSupportsSpatialReference(e)??!1}async _fetchService(e){await this.source.load(e),this.read(this.source.featureDefinition,{origin:"service"}),(0,P.YN)(this.renderer,this.fieldsIndex),(0,P.UF)(this.timeInfo,this.fieldsIndex)}_getLayerDomain(e){if(!this.fields)return null;for(const t of this.fields)if(t.name===e&&t.domain)return t.domain;return null}};(0,o._)([(0,p.Cb)({readOnly:!0,json:{origins:{service:{read:!0}}}})],z.prototype,"capabilities",void 0),(0,o._)([(0,p.Cb)({type:String,json:{write:!0}})],z.prototype,"collectionId",void 0),(0,o._)([(0,p.Cb)({type:String})],z.prototype,"copyright",void 0),(0,o._)([(0,p.Cb)({readOnly:!0})],z.prototype,"defaultPopupTemplate",null),(0,o._)([(0,p.Cb)({type:String})],z.prototype,"definitionExpression",void 0),(0,o._)([(0,p.Cb)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],z.prototype,"description",void 0),(0,o._)([(0,p.Cb)({type:String})],z.prototype,"displayField",void 0),(0,o._)([(0,p.Cb)({type:Number})],z.prototype,"effectiveMaxRecordCount",null),(0,o._)([(0,p.Cb)(O.PV)],z.prototype,"elevationInfo",void 0),(0,o._)([(0,p.Cb)({type:[D.Z],json:{origins:{service:{name:"layerDefinition.fields"}}}})],z.prototype,"fields",void 0),(0,o._)([(0,p.Cb)(Q.fieldsIndex)],z.prototype,"fieldsIndex",void 0),(0,o._)([(0,p.Cb)({readOnly:!0,type:N.Z,json:{origins:{service:{name:"layerDefinition.extent"}}}})],z.prototype,"fullExtent",void 0),(0,o._)([(0,p.Cb)({type:l.M.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:l.M.read}}}}})],z.prototype,"geometryType",void 0),(0,o._)([(0,p.Cb)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],z.prototype,"hasZ",void 0),(0,o._)([(0,p.Cb)({type:Boolean,readOnly:!0})],z.prototype,"isTable",null),(0,o._)([(0,p.Cb)({type:[Z.Z],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:q.r},write:!0}}}})],z.prototype,"labelingInfo",void 0),(0,o._)([(0,p.Cb)(O.iR)],z.prototype,"labelsVisible",void 0),(0,o._)([(0,p.Cb)(O.rn)],z.prototype,"legendEnabled",void 0),(0,o._)([(0,p.Cb)({type:Number})],z.prototype,"maxRecordCount",void 0),(0,o._)([(0,p.Cb)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],z.prototype,"objectIdField",void 0),(0,o._)([(0,p.Cb)({type:["OGCFeatureLayer"]})],z.prototype,"operationalLayerType",void 0),(0,o._)([(0,p.Cb)(O.C_)],z.prototype,"popupEnabled",void 0),(0,o._)([(0,p.Cb)({type:i.Z,json:{name:"popupInfo",write:!0}})],z.prototype,"popupTemplate",void 0),(0,o._)([(0,p.Cb)({types:s.A,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:s.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],z.prototype,"renderer",null),(0,o._)([(0,p.Cb)(O.YI)],z.prototype,"screenSizePerspectiveEnabled",void 0),(0,o._)([(0,p.Cb)({readOnly:!0})],z.prototype,"source",void 0),(0,o._)([(0,p.Cb)({readOnly:!0,type:m.Z,json:{origins:{service:{read:!0}}}})],z.prototype,"spatialReference",void 0),(0,o._)([(0,p.Cb)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],z.prototype,"title",void 0),(0,o._)([(0,p.Cb)({readOnly:!0,json:{read:!1}})],z.prototype,"type",void 0),(0,o._)([(0,p.Cb)({type:String,readOnly:!0})],z.prototype,"typeIdField",void 0),(0,o._)([(0,p.Cb)({type:[E.Z]})],z.prototype,"types",void 0),(0,o._)([(0,p.Cb)(O.HQ)],z.prototype,"url",void 0),z=(0,o._)([(0,a.j)("esri.layers.OGCFeatureLayer")],z);const A=z},61159:(e,t,r)=>{r.d(t,{g:()=>o});const o={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},54295:(e,t,r)=>{r.d(t,{V:()=>n});var o=r(43697),i=r(5600),s=(r(75215),r(67676),r(52011));const n=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,o._)([(0,i.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,o._)([(0,s.j)("esri.layers.mixins.APIKeyMixin")],t),t}},68825:(e,t,r)=>{r.d(t,{c:()=>f});var o,i=r(43697),s=r(78286),n=r(5600),p=(r(75215),r(67676),r(52011)),a=r(35454),l=r(96674);const u=new a.X({asc:"ascending",desc:"descending"});let d=o=class extends l.wq{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new o({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),(0,i._)([(0,n.Cb)({type:u.apiValues,json:{read:u.read,write:u.write}})],d.prototype,"order",void 0),d=o=(0,i._)([(0,p.j)("esri.layers.support.OrderByInfo")],d);const c=d;function y(e,t,r){if(!e)return null;const o=e.find((e=>!!e.field));if(!o)return null;const i=new c;return i.read(o,r),[i]}function h(e,t,r,o){const i=e.find((e=>!!e.field));i&&(0,s.RB)(r,[i.toJSON()],t)}const f=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,i._)([(0,n.Cb)({type:[c],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:y},write:{target:"layerDefinition.orderBy",writer:h}}})],t.prototype,"orderBy",void 0),t=(0,i._)([(0,p.j)("esri.layers.mixins.OrderedLayer")],t),t}},70082:(e,t,r)=>{r.d(t,{Z:()=>d});var o=r(43697),i=r(2368),s=r(35454),n=r(96674),p=r(5600),a=(r(75215),r(67676),r(52011));const l=new s.X({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let u=class extends((0,i.J)(n.wq)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,o._)([(0,p.Cb)({json:{write:!0}})],u.prototype,"name",void 0),(0,o._)([(0,p.Cb)({json:{write:!0}})],u.prototype,"description",void 0),(0,o._)([(0,p.Cb)({json:{read:l.read,write:l.write}})],u.prototype,"drawingTool",void 0),(0,o._)([(0,p.Cb)({json:{write:!0}})],u.prototype,"prototype",void 0),(0,o._)([(0,p.Cb)({json:{write:!0}})],u.prototype,"thumbnail",void 0),u=(0,o._)([(0,a.j)("esri.layers.support.FeatureTemplate")],u);const d=u},16451:(e,t,r)=>{r.d(t,{Z:()=>y});var o=r(43697),i=r(2368),s=r(96674),n=r(5600),p=(r(75215),r(67676),r(71715)),a=r(52011),l=r(30556),u=r(72729),d=r(70082);let c=class extends((0,i.J)(s.wq)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=(0,u.im)(e[r]);return t}writeDomains(e,t){const r={};for(const t of Object.keys(e))e[t]&&(r[t]=e[t]?.toJSON());t.domains=r}};(0,o._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"id",void 0),(0,o._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"name",void 0),(0,o._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"domains",void 0),(0,o._)([(0,p.r)("domains")],c.prototype,"readDomains",null),(0,o._)([(0,l.c)("domains")],c.prototype,"writeDomains",null),(0,o._)([(0,n.Cb)({type:[d.Z],json:{write:!0}})],c.prototype,"templates",void 0),c=(0,o._)([(0,a.j)("esri.layers.support.FeatureType")],c);const y=c},51706:(e,t,r)=>{var o,i;function s(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function p(e){return e.valueExpression?o.Expression:e.field&&"string"==typeof e.field?o.Field:o.Unknown}function a(e,t){const r=t||p(e),s=e.valueUnit||"unknown";return r===o.Unknown?i.Constant:e.stops?i.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?i.ClampedLinear:"unknown"===s?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?i.Proportional:i.Additive:i.Identity:i.RealWorldSize}r.d(t,{PS:()=>p,QW:()=>a,RY:()=>o,hL:()=>i,iY:()=>s,qh:()=>n}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(o||(o={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(i||(i={}))},74889:(e,t,r)=>{r.d(t,{Z:()=>w});var o,i=r(43697),s=r(66577),n=r(38171),p=r(35454),a=r(96674),l=r(22974),u=r(70586),d=r(5600),c=(r(75215),r(71715)),y=r(52011),h=r(30556),f=r(82971),m=r(33955),g=r(1231);const v=new p.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let C=o=class extends a.wq{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=f.Z.fromJSON(t.spatialReference),o=[];for(let t=0;t<e.length;t++){const i=e[t],s=n.Z.fromJSON(i),p=i.geometry&&i.geometry.spatialReference;(0,u.pC)(s.geometry)&&!p&&(s.geometry.spatialReference=r);const a=i.aggregateGeometries,l=s.aggregateGeometries;if(a&&(0,u.pC)(l))for(const e in l){const t=l[e],o=a[e]?.spatialReference;(0,u.pC)(t)&&!o&&(t.spatialReference=r)}o.push(s)}return o}writeGeometryType(e,t,r,o){if(e)return void v.write(e,t,r,o);const{features:i}=this;if(i)for(const e of i)if(e&&(0,u.pC)(e.geometry))return void v.write(e.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=(0,m.im)(e);return o&&!r&&t.spatialReference&&(o.spatialReference=f.Z.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&(0,u.pC)(e.geometry)&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new o(this.cloneProperties())}cloneProperties(){return(0,l.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,i]}=e,s=this.features,n=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-o)/t)),(e=>Math.round((i-e)/r)));for(let e=0,t=s.length;e<t;e++)n?.((0,u.Wg)(s[e].geometry))||(s.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,i],scale:[s,n]}=r,p=this._getHydrationFunction(e,(e=>e*s+o),(e=>i-e*n));for(const{geometry:e}of t)(0,u.pC)(e)&&p&&p(e);return this.transform=null,this}_quantizePoints(e,t,r){let o,i;const s=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=r(p[1]);e===o&&n===i||(s.push([e-o,n-i]),o=e,i=n)}else o=t(p[0]),i=r(p[1]),s.push([o,i])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,m.oU)(e)?e.rings:e.paths,i=[];for(let e=0,s=o.length;e<s;e++){const s=o[e],n=this._quantizePoints(s,t,r);n&&i.push(n)}return i.length>0?((0,m.oU)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?e=>{const o=(0,m.oU)(e)?e.rings:e.paths;let i,s;for(let e=0,n=o.length;e<n;e++){const n=o[e];for(let e=0,o=n.length;e<o;e++){const o=n[e];e>0?(i+=o[0],s+=o[1]):(i=o[0],s=o[1]),o[0]=t(i),o[1]=r(s)}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?e=>{const o=e.points;let i,s;for(let e=0,n=o.length;e<n;e++){const n=o[e];e>0?(i+=n[0],s+=n[1]):(i=n[0],s=n[1]),n[0]=t(i),n[1]=r(s)}}:null}};(0,i._)([(0,d.Cb)({type:String,json:{write:!0}})],C.prototype,"displayFieldName",void 0),(0,i._)([(0,d.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],C.prototype,"exceededTransferLimit",void 0),(0,i._)([(0,d.Cb)({type:[n.Z],json:{write:!0}})],C.prototype,"features",void 0),(0,i._)([(0,c.r)("features")],C.prototype,"readFeatures",null),(0,i._)([(0,d.Cb)({type:[g.Z],json:{write:!0}})],C.prototype,"fields",void 0),(0,i._)([(0,d.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:v.read}}})],C.prototype,"geometryType",void 0),(0,i._)([(0,h.c)("geometryType")],C.prototype,"writeGeometryType",null),(0,i._)([(0,d.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],C.prototype,"hasM",void 0),(0,i._)([(0,d.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],C.prototype,"hasZ",void 0),(0,i._)([(0,d.Cb)({types:s.qM,json:{write:!0}})],C.prototype,"queryGeometry",void 0),(0,i._)([(0,c.r)("queryGeometry")],C.prototype,"readQueryGeometry",null),(0,i._)([(0,d.Cb)({type:f.Z,json:{write:!0}})],C.prototype,"spatialReference",void 0),(0,i._)([(0,h.c)("spatialReference")],C.prototype,"writeSpatialReference",null),(0,i._)([(0,d.Cb)({json:{write:!0}})],C.prototype,"transform",void 0),C=o=(0,i._)([(0,y.j)("esri.rest.support.FeatureSet")],C),C.prototype.toJSON.isDefaultToJSON=!0;const w=C}}]);