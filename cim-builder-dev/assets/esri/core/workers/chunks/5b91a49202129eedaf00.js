"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[5356,5613],{4513:(e,a,t)=>{t.d(a,{S:()=>r});const r={BingMapsLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(7036)]).then(t.bind(t,17029))).default,BuildingSceneLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(4111),t.e(8506),t.e(9784),t.e(7937),t.e(7005),t.e(3356),t.e(6298),t.e(3546),t.e(1624)]).then(t.bind(t,53892))).default,CSVLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(4111),t.e(8506),t.e(9784),t.e(5964)]).then(t.bind(t,68695))).default,CatalogLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(1956),t.e(4796),t.e(708),t.e(4111),t.e(8506),t.e(364),t.e(8628),t.e(2593),t.e(2696),t.e(3549)]).then(t.bind(t,79003))).default,DimensionLayer:async()=>(await Promise.all([t.e(6131),t.e(3813)]).then(t.bind(t,71493))).default,ElevationLayer:async()=>(await Promise.all([t.e(6131),t.e(9953),t.e(9186),t.e(5751)]).then(t.bind(t,68611))).default,FeatureLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(4111),t.e(8506),t.e(9784),t.e(2236)]).then(t.bind(t,29784))).default,GaussianSplatLayer:async()=>(await Promise.all([t.e(6131),t.e(6730)]).then(t.bind(t,36475))).default,GeoJSONLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(8766)]).then(t.bind(t,15481))).default,GeoRSSLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(3474)]).then(t.bind(t,63201))).default,GroupLayer:async()=>(await Promise.all([t.e(6131),t.e(3562),t.e(8256)]).then(t.bind(t,85989))).default,ImageryLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(9953),t.e(1956),t.e(364),t.e(1427),t.e(8106),t.e(4990)]).then(t.bind(t,58434))).default,ImageryTileLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(9953),t.e(1427),t.e(6049),t.e(8106),t.e(7677),t.e(5943)]).then(t.bind(t,35943))).default,IntegratedMesh3DTilesLayer:async()=>(await Promise.all([t.e(6131),t.e(5335),t.e(1312)]).then(t.bind(t,61528))).default,IntegratedMeshLayer:async()=>(await Promise.all([t.e(6131),t.e(6298),t.e(5335),t.e(6894)]).then(t.bind(t,74660))).default,KMLLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(5366)]).then(t.bind(t,79465))).default,KnowledgeGraphLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(708),t.e(8368),t.e(5245),t.e(217),t.e(2568),t.e(7213),t.e(9171),t.e(8692)]).then(t.bind(t,28692))).default,LineOfSightLayer:async()=>(await Promise.all([t.e(6131),t.e(7937),t.e(7721),t.e(9695)]).then(t.bind(t,49695))).default,LinkChartLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(708),t.e(8368),t.e(5245),t.e(217),t.e(2568),t.e(7213),t.e(9171),t.e(1728)]).then(t.bind(t,71728))).default,MapImageLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(1956),t.e(4796),t.e(708),t.e(4111),t.e(364),t.e(3249),t.e(7656),t.e(2042)]).then(t.bind(t,7656))).default,MapNotesLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(4111),t.e(8506),t.e(9784),t.e(7213),t.e(8110)]).then(t.bind(t,96299))).default,MediaLayer:async()=>(await Promise.all([t.e(7330),t.e(6131),t.e(2763)]).then(t.bind(t,19647))).default,OGCFeatureLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(1956),t.e(4796),t.e(3029),t.e(708),t.e(3356),t.e(9936),t.e(4224)]).then(t.bind(t,65977))).default,OpenStreetMapLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(6773),t.e(349)]).then(t.bind(t,40349))).default,OrientedImageryLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(4111),t.e(8506),t.e(9784),t.e(9361),t.e(4151)]).then(t.bind(t,9352))).default,PointCloudLayer:async()=>(await Promise.all([t.e(6131),t.e(8948),t.e(7984),t.e(6742)]).then(t.bind(t,76742))).default,RouteLayer:async()=>(await Promise.all([t.e(6131),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(217),t.e(979)]).then(t.bind(t,64185))).default,SceneLayer:async()=>(await Promise.all([t.e(6131),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(1956),t.e(4796),t.e(7937),t.e(7005),t.e(3356),t.e(6298),t.e(3546),t.e(1395)]).then(t.bind(t,13899))).default,StreamLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(1956),t.e(4796),t.e(3029),t.e(73)]).then(t.bind(t,79457))).default,SubtypeGroupLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1956),t.e(4796),t.e(4111),t.e(8506),t.e(6731)]).then(t.bind(t,97483))).default,TileLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(1956),t.e(4796),t.e(708),t.e(4111),t.e(364),t.e(9186),t.e(3249),t.e(573)]).then(t.bind(t,71756))).default,UnknownLayer:async()=>(await t.e(146).then(t.bind(t,146))).default,UnsupportedLayer:async()=>(await t.e(5165).then(t.bind(t,45165))).default,VectorTileLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(9186),t.e(5897),t.e(4937)]).then(t.bind(t,48757))).default,VideoLayer:async()=>(await Promise.all([t.e(6131),t.e(3910),t.e(8096),t.e(5323),t.e(7732)]).then(t.bind(t,86875))).default,ViewshedLayer:async()=>(await Promise.all([t.e(6131),t.e(7937),t.e(7721),t.e(6650)]).then(t.bind(t,96650))).default,VoxelLayer:async()=>(await Promise.all([t.e(6131),t.e(8948),t.e(6183)]).then(t.bind(t,16183))).default,WCSLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(9953),t.e(1427),t.e(6049),t.e(8106),t.e(7677),t.e(9547)]).then(t.bind(t,19547))).default,WFSLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(8096),t.e(5323),t.e(13),t.e(1214),t.e(9953),t.e(1956),t.e(4796),t.e(3029),t.e(9110)]).then(t.bind(t,21901))).default,WMSLayer:async()=>(await Promise.all([t.e(7330),t.e(6131),t.e(8219),t.e(8948),t.e(3910),t.e(5323),t.e(5181)]).then(t.bind(t,51904))).default,WMTSLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(6773),t.e(309)]).then(t.bind(t,20309))).default,WebTileLayer:async()=>(await Promise.all([t.e(6131),t.e(8219),t.e(6773)]).then(t.bind(t,47314))).default}},8947:(e,a,t)=>{t.d(a,{L:()=>l});var r=t(60999),n=t(74887),i=t(67076);async function l(e,a,t){const l=e&&e.getAtOrigin&&e.getAtOrigin("renderer",a.origin);if(l&&"unique-value"===l.type&&l.styleOrigin){const s=await(0,r.Ke)(l.populateFromStyle());if((0,n.Te)(t),!1===s.ok){const t=s.error;a?.messages&&a.messages.push(new i.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${t.message}`,{error:t,context:a})),e.clear("renderer",a?.origin)}}}},9762:(e,a,t)=>{t.r(a),t.d(a,{projectBuffer:()=>n});var r=t(37539);function n(e,a,t,n,i,l,s=Math.floor(e.length/3)){const c=(0,r.jd)(a,i);if(null==c)return!1;if(c===r.pO){if(e===n&&t===l)return!0;const a=t+3*s;for(let r=t,i=l;r<a;r++,i++)n[i]=e[r];return!0}const o=t+3*s;for(let a=t,r=l;a<o;a+=3,r+=3)c(e,a,n,r);return!0}},10407:(e,a,t)=>{t.d(a,{It:()=>d,LG:()=>l,OM:()=>o,Sm:()=>u,Y:()=>s,bK:()=>c,mm:()=>f,sQ:()=>y});var r=t(98988),n=t(16930),i=t(28735);function l(e,a){if(!s(e,a)){const t=e.typeKeywords;t?t.push(a):e.typeKeywords=[a]}}function s(e,a){return!!e.typeKeywords?.includes(a)}function c(e){return s(e,f.HOSTED_SERVICE)}function o(e,a){const t=e.typeKeywords;if(t){const e=t.indexOf(a);e>-1&&t.splice(e,1)}}function u(e,a,t){t?l(e,a):o(e,a)}async function y(e){const a=e.clone().normalize();let t;if(a.length>1)for(const e of a)t?e.width>t.width&&(t=e):t=e;else t=a[0];return async function(e){const a=e.spatialReference;if(a.isWGS84)return e.clone();if(a.isWebMercator)return(0,i.ci)(e);const t=n.A.WGS84;return await(0,r.initializeProjection)(a,t),(0,r.project)(e,t)}(t)}const f={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function d(e){const{portal:a,isOrgItem:t,itemControl:r}=e,n=a.user?.privileges;let i=!n||n.includes("features:user:edit"),l=!!t&&!!n?.includes("features:user:fullEdit");const s="update"===r||"admin"===r;return s?l=i=!0:l&&(i=!0),{features:{edit:i,fullEdit:l},content:{updateItem:s}}}},22429:(e,a,t)=>{t.d(a,{v:()=>n});var r=t(24183);class n{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,a){const t=this._serviceMetadatas.get(e);if(t)return t;const n=await(0,r.V)(e,a);return this._serviceMetadatas.set(e,n),n}async fetchItemData(e){const{id:a}=e;if(!a)return null;const{_itemDatas:t}=this;if(t.has(a))return t.get(a);const r=await e.fetchData();return t.set(a,r),r}async fetchCustomParameters(e,a){const t=await this.fetchItemData(e);return t&&"object"==typeof t&&(a?a(t):t.customParameters)||null}}},23154:(e,a,t)=>{t.d(a,{K:()=>d,Q:()=>l});var r=t(77548),n=t(24183);const i=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function l(e,a){const{loadContext:t,...i}=a||{},l=t?await t.fetchServiceMetadata(e,i):await(0,n.V)(e,i),s=(0,r.G$)();f(l),o(l);const c={serviceJSON:l,preferredHost:s};if((l.currentVersion??0)<10.5)return c;const u=`${(0,r.$x)()??e}/layers`,y=t?await t.fetchServiceMetadata(u,i):await(0,n.V)(u,i);return f(y),o(y),c.layersJSON={layers:y.layers,tables:y.tables},c}function s(e){const{type:a}=e;return!!a&&i.has(a)}function c(e){return"Table"===e.type}function o(e){e.layers=e.layers?.filter(s),e.tables=e.tables?.filter(c)}function u(e){e.type||="Feature Layer"}function y(e){e.type||="Table"}function f(e){e.layers?.forEach(u),e.tables?.forEach(y)}function d(e){switch(e){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}},24183:(e,a,t)=>{t.d(a,{V:()=>n});var r=t(78888);async function n(e,a){const{data:t}=await(0,r.A)(e,{responseType:"json",query:{f:"json",...a?.customParameters,token:a?.apiKey}});return t}},37539:(e,a,t)=>{t.d(a,{pO:()=>L,jd:()=>f,Tp:()=>d,w5:()=>y});var r=t(34727),n=t(83047),i=t(73941),l=t(79258);Math.PI;const s=l.$O.radius,c=l.$O.eccentricitySquared,o={a1:s*c,a2:s*c*s*c,a3:s*c*c/2,a4:s*c*s*c*2.5,a5:s*c+s*c*c/2,a6:1-c};l.$O.radius,l.$O.flattening,l.Sw.radius,l.Sw.flattening,l.sH.radius,l.sH.flattening,l.sH.radius;var u=t(21325);const y={2:{5:L,7:null,9:null,10:L,1:v,6:null,8:null,0:null,3:h,11:w,2:L,4:A},5:{5:L,7:null,9:null,10:L,1:v,6:null,8:null,0:null,3:h,11:w,2:L,4:A},7:{5:null,7:L,9:null,10:L,1:null,6:M,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:L,10:L,1:null,6:null,8:I,0:null,3:null,11:null,2:null,4:null},3:{5:m,7:null,9:null,10:m,1:function(e,a,t,r){const n=e[a]/N,i=j-2*Math.atan(Math.exp(-e[a+1]/N)),l=N+e[a+2],s=Math.cos(i)*l;t[r]=Math.cos(n)*s,t[r+1]=Math.sin(n)*s,t[r+2]=Math.sin(i)*l},6:null,8:null,0:null,3:L,11:function(e,a,t,r){m(e,a,t,r),w(t,r,t,r)},2:m,4:function(e,a,t,r){m(e,a,t,r),A(t,r,t,r)}},4:{5:R,7:null,9:null,10:R,1:function(e,a,t,r){R(e,a,t,r),v(t,r,t,r)},6:null,8:null,0:null,3:function(e,a,t,r){R(e,a,t,r),h(t,r,t,r)},11:function(e,a,t,r){R(e,a,t,r),w(t,r,t,r)},2:R,4:L},1:{5:P,7:null,9:null,10:P,1:L,6:null,8:null,0:null,3:function(e,a,t,r){P(e,a,t,r),h(t,r,t,r)},11:function(e,a,t,r){P(e,a,t,r),w(t,r,t,r)},2:P,4:function(e,a,t,r){P(e,a,t,r),A(t,r,t,r)}},6:{5:null,7:G,9:null,10:G,1:null,6:L,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:T,10:T,1:null,6:null,8:L,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:L,3:null,11:null,2:null,4:null},10:{5:L,7:L,9:L,10:L,1:v,6:M,8:I,0:null,3:h,11:w,2:L,4:A},11:{5:S,7:null,9:null,10:S,1:function(e,a,t,r){S(e,a,t,r),v(t,r,t,r)},6:null,8:null,0:null,3:function(e,a,t,r){S(e,a,t,r),h(t,r,t,r)},11:L,2:S,4:function(e,a,t,r){S(e,a,t,r),A(t,r,t,r)}}};function f(e,a){return d(e,a)?.projector}function d(e,a){if(null==e||null==a)return null;if(C.source.spatialReference===e&&C.dest.spatialReference===a)return C;const t=p(e,C.source),r=p(a,C.dest);return 0===t&&0===r?(0,u.aI)(e,a)?C.projector=L:C.projector=null:C.projector=y[t][r],C}function p(e,a){return e?a.spatialReference===e?a.spatialReferenceId:(a.spatialReference=e,"metersPerUnit"in a&&(a.metersPerUnit=(0,n.GA)(e,1)),(0,i.jA)(e)?a.spatialReferenceId=1:(0,u.oT)(e)?a.spatialReferenceId=2:(0,u.K8)(e)?a.spatialReferenceId=3:(0,u.r1)(e)?a.spatialReferenceId=11:e.wkt===i.Ro.wkt?a.spatialReferenceId=4:4490===e.wkid?a.spatialReferenceId=5:e.wkt===i.FY.wkt?a.spatialReferenceId=6:e.wkt===i.LJ.wkt?a.spatialReferenceId=8:(0,u.q8)(e)?a.spatialReferenceId=7:(0,u.KQ)(e)?a.spatialReferenceId=9:a.spatialReferenceId=0):0}function L(e,a,t,r){e!==t&&(t[r++]=e[a++],t[r++]=e[a++],t[r]=e[a])}function m(e,a,t,r){t[r]=k*(e[a]/N),t[r+1]=k*(j-2*Math.atan(Math.exp(-e[a+1]/N))),t[r+2]=e[a+2]}function h(e,a,t,n){!function(e,a,t,n,i){const l=.4999999*Math.PI,s=(0,r.qE)(O*e[a+1],-l,l),c=Math.sin(s);t[n++]=O*e[a]*i.radius,t[n++]=i.halfSemiMajorAxis*Math.log((1+c)/(1-c)),t[n]=e[a+2]}(e,a,t,n,l.$O)}function w(e,a,t,r){t[r]=e[a]*_,t[r+1]=e[a+1]*_,t[r+2]=e[a+2]}function S(e,a,t,r){t[r]=e[a]*E,t[r+1]=e[a+1]*E,t[r+2]=e[a+2]}function g(e,a,t,r,n){const i=n+e[a+2],l=O*e[a+1],s=O*e[a],c=Math.cos(l)*i;t[r]=Math.cos(s)*c,t[r+1]=Math.sin(s)*c,t[r+2]=Math.sin(l)*i}function I(e,a,t,r){g(e,a,t,r,l.Sw.radius)}function M(e,a,t,r){g(e,a,t,r,l.sH.radius)}function v(e,a,t,r){g(e,a,t,r,l.$O.radius)}function b(e,a,t,n,i){const l=e[a],s=e[a+1],c=e[a+2],o=Math.sqrt(l*l+s*s+c*c),u=(0,r.YN)(c/(0===o?1:o)),y=Math.atan2(s,l);t[n++]=k*y,t[n++]=k*u,t[n]=o-i}function T(e,a,t,r){b(e,a,t,r,l.Sw.radius)}function G(e,a,t,r){b(e,a,t,r,l.sH.radius)}function P(e,a,t,r){b(e,a,t,r,l.$O.radius)}function A(e,a,t,r){!function(e,a,t,r,n){const i=O*e[a],l=O*e[a+1],s=e[a+2],c=Math.sin(l),o=Math.cos(l),u=n.radius/Math.sqrt(1-n.eccentricitySquared*c*c);t[r++]=(u+s)*o*Math.cos(i),t[r++]=(u+s)*o*Math.sin(i),t[r++]=(u*(1-n.eccentricitySquared)+s)*c}(e,a,t,r,l.$O)}function R(e,a,t,r){const n=o,i=e[a],s=e[a+1],c=e[a+2];let u,y,f,d,p,L,m,h,w,S,g,I,M,v,b,T,G,P,A,R,C;u=Math.abs(c),y=i*i+s*s,f=Math.sqrt(y),d=y+c*c,p=Math.sqrt(d),R=Math.atan2(s,i),L=c*c/d,m=y/d,v=n.a2/p,b=n.a3-n.a4/p,m>.3?(h=u/p*(1+m*(n.a1+v+L*b)/p),A=Math.asin(h),S=h*h,w=Math.sqrt(1-S)):(w=f/p*(1-L*(n.a5-v-m*b)/p),A=Math.acos(w),S=1-w*w,h=Math.sqrt(S)),g=1-l.$O.eccentricitySquared*S,I=l.$O.radius/Math.sqrt(g),M=n.a6*I,v=f-I*w,b=u-M*h,G=w*v+h*b,T=w*b-h*v,P=T/(M/g+G),A+=P,C=G+T*P/2,c<0&&(A=-A),t[r++]=k*R,t[r++]=k*A,t[r]=C}const C={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:L},O=(0,r.kU)(1),k=(0,r.KJ)(1),j=.5*Math.PI,N=l.$O.radius,_=N*Math.PI/180,E=180/(N*Math.PI)},45613:(e,a,t)=>{t.d(a,{fromItem:()=>f,n:()=>d});var r=t(49186),n=t(92009),i=t(23154),l=t(22429),s=t(77548),c=t(4513),o=t(80812),u=t(66964),y=t(10407);async function f(e){let{portalItem:a}=e;!a||a instanceof o.default||(a=new o.default(a));const t=await async function(e){await e.load();const a=new l.v;return async function(e){const a=e.className,t=c.S[a];return{constructor:await t(),properties:e.properties}}(await d(e,a))}(a);return new(0,t.constructor)({portalItem:a,...t.properties})}async function d(e,a){switch(e.type){case"3DTiles Service":return e.typeKeywords.includes("3DObject")?{className:"UnsupportedLayer"}:{className:"IntegratedMesh3DTilesLayer"};case"CSV":return{className:"CSVLayer"};case"Feature Collection":return async function(e){await e.load();const a=(0,y.Y)(e,"Map Notes"),t=(0,y.Y)(e,"Markup");if(a||t)return{className:"MapNotesLayer"};if((0,y.Y)(e,"Route Layer"))return{className:"RouteLayer"};const r=await e.fetchData();return 1===(0,u.XH)(r)?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Feature Service":return async function(e,a){const t=await p(e,a);if("object"==typeof t){const{sourceJSON:e,className:a}=t,r={sourceJSON:e};return null!=t.id&&(r.layerId=t.id),{className:a||"FeatureLayer",properties:r}}return{className:"GroupLayer"}}(e,a);case"Feed":case"Stream Service":return{className:"StreamLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"Group Layer":return{className:"GroupLayer"};case"Image Service":return async function(e,a){await e.load();const t=e.typeKeywords?.map(e=>e.toLowerCase())??[];if(t.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(t.includes("tiled imagery"))return{className:"ImageryTileLayer"};const r=await a.fetchItemData(e),n=r?.layerType;if("ArcGISTiledImageServiceLayer"===n)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===n)return{className:"ImageryLayer"};const i=await a.fetchServiceMetadata(e.url,{customParameters:await a.fetchCustomParameters(e)}),l=i.cacheType?.toLowerCase(),s=i.capabilities?.toLowerCase().includes("tilesonly"),c=i.tileInfo?.format?.toLowerCase()??"",o=null==l&&["jpg","jpeg","png","png8","png24","png32","mixed"].includes(c);return"map"===l||o||s?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e,a);case"KML":return{className:"KMLLayer"};case"Knowledge Graph Layer":return{className:"KnowledgeGraphLayer"};case"Map Service":return async function(e,a){return await async function(e,a){const{tileInfo:t}=await a.fetchServiceMetadata(e.url,{customParameters:await a.fetchCustomParameters(e)});return t}(e,a)?{className:"TileLayer"}:{className:"MapImageLayer"}}(e,a);case"Media Layer":return{className:"MediaLayer"};case"Scene Service":return async function(e,a){const t=await p(e,a,async()=>{try{if(!e.url)return[];const{serverUrl:t}=await(0,n.L)(e.url,{sceneLayerItem:e}),r=await a.fetchServiceMetadata(t);return r?.tables??[]}catch{return[]}});if("object"==typeof t){const r={};let n;if(null!=t.id?(r.layerId=t.id,n=`${e.url}/layers/${t.id}`):n=e.url,e.typeKeywords?.length)for(const a of Object.keys(s.XX))if(e.typeKeywords.includes(a))return{className:s.XX[a]};const i=await a.fetchServiceMetadata(n,{customParameters:await a.fetchCustomParameters(e,e=>(0,u.pJ)(e)?.customParameters)});return{className:s.XX[i?.layerType]||"SceneLayer",properties:r}}if(!1===t){const t=await a.fetchServiceMetadata(e.url);if("Voxel"===t?.layerType)return{className:"VoxelLayer"}}return{className:"GroupLayer"}}(e,a);case"Video Service":return async function(e,a){return"object"==typeof await p(e,a)?{className:"VideoLayer"}:{className:"GroupLayer"}}(e,a);case"Vector Tile Service":return{className:"VectorTileLayer"};case"WCS":return{className:"WCSLayer"};case"WFS":return{className:"WFSLayer"};case"WMS":return{className:"WMSLayer"};case"WMTS":return{className:"WMTSLayer"};default:throw new r.A("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type})}}async function p(e,a,t){const{url:r,type:n}=e,l="Feature Service"===n;if(!r)return{};if(/\/\d+$/.test(r)){if(l){const t=await a.fetchServiceMetadata(r,{customParameters:await a.fetchCustomParameters(e,e=>(0,u.pJ)(e)?.customParameters)});return(0,s.Gh)(e,(0,s.G$)()),{id:t.id,className:(0,i.K)(t.type),sourceJSON:t}}return{}}if("Video Service"===n){const e=await a.fetchServiceMetadata(r);return!((e.layers?.length??0)>1)&&{}}await e.load();let c=await a.fetchItemData(e);if(l){const{data:t,preferredHost:n}=await(0,u.bO)(c,r,a);(0,s.Gh)(e,n);const i=L(t);if("object"==typeof i){const e=(0,u.rc)(t,i.id);i.className=(0,u.K8)(e?.layerType)}return i}if("Scene Service"===n&&(c=await(0,u.nu)(e,c,a)),(0,u.XH)(c)>0)return L(c);const o=await a.fetchServiceMetadata(r);return t&&(o.tables=await t()),L(o)}function L(e){return 1===(0,u.XH)(e)&&{id:(0,u.pJ)(e)?.id}}},62815:(e,a,t)=>{t.d(a,{N:()=>l});var r=t(83047),n=t(73941),i=t(21325);function l(e,a,t){if(null==a||null==t||t.vcsWkid||(0,i.aI)(a,t)||(0,n.xP)(a)||(0,n.xP)(t))return null;const l=(0,r.G9)(a)/(0,r.G9)(t);if(1===l)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,a){null!=e?.z&&(e.z*=a)}(e,l);case"polyline":case"esriGeometryPolyline":return e=>function(e,a){if(e)for(const t of e.paths)for(const e of t)e.length>2&&(e[2]*=a)}(e,l);case"polygon":case"esriGeometryPolygon":return e=>function(e,a){if(e)for(const t of e.rings)for(const e of t)e.length>2&&(e[2]*=a)}(e,l);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,a){if(e)for(const t of e.points)t.length>2&&(t[2]*=a)}(e,l);case"extent":case"esriGeometryEnvelope":return e=>function(e,a){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=a,e.zmax*=a)}(e,l);default:return null}}},66964:(e,a,t)=>{t.d(a,{Ju:()=>u,K8:()=>d,XH:()=>y,_r:()=>l,bO:()=>s,l:()=>f,nu:()=>p,pJ:()=>c,rc:()=>o});var r=t(92009),n=t(23154),i=t(77548);function l(e){const a={id:e.id,name:e.name},t=(0,n.K)(e.type);return"FeatureLayer"!==t&&(a.layerType=t),a}async function s(e,a,t){let r;if(null==e?.layers||null==e?.tables){const n=await t.fetchServiceMetadata(a,{customParameters:c(e)?.customParameters});r=(0,i.G$)(),(e=e||{}).layers=e.layers||n?.layers?.map(l),e.tables=e.tables||n?.tables?.map(l)}return{data:e,preferredHost:r}}function c(e){if(!e)return null;const{layers:a,tables:t}=e;return a?.length?a[0]:t?.length?t[0]:null}function o(e,a){return null==a?null:[...e.layers||[],...e.tables||[]].find(e=>e.id===a)}function u(e,a){return[...e.layers||[],...e.tables||[]].filter(({layerType:e})=>e?a.includes(e):a.includes("ArcGISFeatureLayer"))}function y(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function f(e){switch(e){case"catalog":return["CatalogLayer"];case"feature":return["ArcGISFeatureLayer"];case"oriented-imagery":return["OrientedImageryLayer"];case"subtype-group":return["SubtypeGroupLayer","SubtypeGroupTable"]}return null}function d(e){switch(e){case"CatalogLayer":return"CatalogLayer";case"OrientedImageryLayer":return"OrientedImageryLayer";case"SubtypeGroupLayer":case"SubtypeGroupTable":return"SubtypeGroupLayer"}return"FeatureLayer"}async function p(e,a,t){if(!e?.url)return a??{};if(a??={},!a.layers){const r=await t.fetchServiceMetadata(e.url);a.layers=r.layers?.map(l)}const{serverUrl:n,portalItem:i}=await(0,r.L)(e.url,{sceneLayerItem:e,customParameters:c(a)?.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(null==n)return a.tables=[],a;if(!a.tables&&i){const e=await i.fetchData().catch(()=>null);if(e?.tables)a.tables=e.tables.map(l);else{const r=await t.fetchServiceMetadata(n,{customParameters:c(e)?.customParameters}).catch(()=>null);a.tables=r?.tables?.map(l)}}if(a.tables)for(const e of a.tables)e.url=`${n}/${e.id}`;return a}},75356:(e,a,t)=>{t.d(a,{N:()=>T,populateOperationalLayers:()=>u});var r=t(7762),n=(t(44208),t(22429)),i=t(4513),l=t(80812);function s(e,a){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===a}var c=t(45613),o=t(8947);async function u(e,a,t){if(!a)return;const r=a.map(e=>async function(e,a){return async function(e,a,t){const r=new e;return r.read(a,t.context),"group"===r.type&&("GroupLayer"===a.layerType?await T(r,a,t):v(a)?function(e,a,t){a.itemId&&(e.portalItem=new l.default({id:a.itemId,portal:t?.portal}),e.when(()=>{const r=r=>{const n=r.layerId;G(r,e,a,n,t);const i=a.featureCollection?.layers?.[n];i&&r.read(i,t)};e.layers?.forEach(r),e.tables?.forEach(r)}))}(r,a,t.context):M(a)&&await async function(e,a,t){const r=i.S.FeatureLayer,n=await r(),l=a.featureCollection,s=l?.showLegend,c=l?.layers?.map((r,i)=>{const l=new n;l.read(r,t);const c={...t,ignoreDefaults:!0};return G(l,e,a,i,c),null!=s&&l.read({showLegend:s},c),l});e.layers.addMany(c??[])}(r,a,t.context)),await(0,o.L)(r,t.context),r}(await I(e,a),e,a)}(e,t)),n=await Promise.allSettled(r);for(const a of n)"rejected"===a.status||a.value&&e.add(a.value)}const y={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",Object3DTilesLayer:"UnsupportedLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",ViewshedLayer:"ViewshedLayer",Voxel:"VoxelLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},f={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},d={ArcGISFeatureLayer:"FeatureLayer"},p={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"UnsupportedLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},L={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",ArcGISVideoLayer:"VideoLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},m={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"SubtypeGroupLayer"},h={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},w={...L,LinkChartLayer:"LinkChartLayer"},S={...m},g={...h};async function I(e,a){const t=a.context,r=b(t);let o=e.layerType||e.type;!o&&a?.defaultLayerType&&(o=a.defaultLayerType);const u=r[o];let y=u?i.S[u]:i.S.UnknownLayer;if(v(e)){const a=t?.portal;if(e.itemId){const t=new l.default({id:e.itemId,portal:a});await t.load();const r=(await(0,c.n)(t,new n.v)).className||"UnknownLayer";y=i.S[r]}}else"ArcGISFeatureLayer"===o?function(e){return s(e,"notes")}(e)||function(e){return s(e,"markup")}(e)?y=i.S.MapNotesLayer:function(e){return s(e,"route")}(e)?y=i.S.RouteLayer:M(e)&&(y=i.S.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?y=i.S.WMTSLayer:"WFS"===o&&"2.0.0"!==e.wfsInfo?.version&&(y=i.S.UnsupportedLayer);return y()}function M(e){return"ArcGISFeatureLayer"===e.layerType&&!v(e)&&(e.featureCollection?.layers?.length??0)>1}function v(e){return"Feature Collection"===e.type}function b(e){let a;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":a=p;break;case"ground":a=f;break;case"tables":a=d;break;default:a=y}break;case"link-chart":switch(e.layerContainerType){case"basemap":a=g;break;case"tables":a=S;break;default:a=w}break;default:switch(e.layerContainerType){case"basemap":a=h;break;case"tables":a=m;break;default:a=L}}return a}async function T(e,a,t){const n=new r.A,i=u(n,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,"group"===e.type)return e.layers.addMany(n),e}catch(a){e.destroy();for(const e of n)e.destroy();throw a}}catch(e){throw e}}function G(e,a,t,r,n){e.read({id:`${a.id}-sublayer-${r}`,visibility:t.visibleLayers?.includes(r)??!0},n)}},92009:(e,a,t)=>{t.d(a,{L:()=>u});var r=t(70333),n=t(78888),i=t(49186),l=t(74887),s=t(60694),c=t(20655),o=t(80812);async function u(e,a){const t=(0,s.qg)(e);if(!t)throw new i.A("invalid-url","Invalid scene service url");const u={...a,sceneServerUrl:t.url.path,layerId:t.sublayer??void 0};if(u.sceneLayerItem??=await async function(e){const a=(await y(e)).serviceItemId;if(!a)return null;const t=new o.default({id:a,apiKey:e.apiKey}),i=await async function(e){const a=r.id?.findServerInfo(e.sceneServerUrl);if(a?.owningSystemUrl)return a.owningSystemUrl;const t=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const a=(await(0,n.A)(t,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(a)return a}catch(e){(0,l.QP)(e)}return null}(e);null!=i&&(t.portal=new c.A({url:i}));try{return await t.load({signal:e.signal})}catch(e){return(0,l.QP)(e),null}}(u),null==u.sceneLayerItem)return f(u.sceneServerUrl.replace("/SceneServer","/FeatureServer"),u);const d=await async function({sceneLayerItem:e,signal:a}){if(!e)return null;try{const t=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:a})).find(e=>"Feature Service"===e.type)||null;if(!t)return null;const r=new o.default({portal:t.portal,id:t.id});return await r.load(),r}catch(e){return(0,l.QP)(e),null}}(u);if(!d?.url)throw new i.A("related-service-not-found","Could not find feature service through portal item relationship");u.featureServiceItem=d;const p=await f(d.url,u);return p.portalItem=d,p}async function y(e){if(e.rootDocument)return e.rootDocument;const a={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const t=await(0,n.A)(e.sceneServerUrl,a);e.rootDocument=t.data}catch{e.rootDocument={}}return e.rootDocument}async function f(e,a){const t=(0,s.qg)(e);if(!t)throw new i.A("invalid-feature-service-url","Invalid feature service url");const r=t.url.path,l=a.layerId;if(null==l)return{serverUrl:r};const c=y(a),o=a.featureServiceItem?await a.featureServiceItem.fetchData("json"):null,u=(o?.layers?.[0]||o?.tables?.[0])?.customParameters,f=e=>{const t={query:{f:"json",...u},responseType:"json",authMode:e,signal:a.signal};return(0,n.A)(r,t)},d=f("anonymous").catch(()=>f("no-prompt")),[p,L]=await Promise.all([d,c]),m=L?.layers,h=p.data&&p.data.layers;if(!Array.isArray(h))throw new Error("expected layers array");if(Array.isArray(m)){for(let e=0;e<Math.min(m.length,h.length);e++)if(m[e].id===l)return{serverUrl:r,layerId:h[e].id}}else if(null!=l&&l<h.length)return{serverUrl:r,layerId:h[l].id};throw new Error("could not find matching associated sublayer")}},98988:(e,a,t)=>{t.r(a),t.d(a,{canProjectWithoutEngine:()=>J,getTransformation:()=>D,getTransformations:()=>V,initializeProjection:()=>H,isEqualBaseGCS:()=>z,isLoaded:()=>O,isLoadedOrLoad:()=>k,isLoadedOrLoadFor:()=>j,load:()=>_,project:()=>E,projectExtent:()=>ie,projectMany:()=>x,projectMultipoint:()=>Q,projectOrLoad:()=>W,projectOrLoadMany:()=>F,projectPoint:()=>Z,projectPolygon:()=>re,projectPolyline:()=>ae,projectWithZConversion:()=>q,projectWithoutEngine:()=>Y,requiresLoad:()=>N,test:()=>B,tryProjectWithZConversion:()=>$,unload:()=>K});var r=t(49186),n=t(74887),i=t(62788),l=t(95488),s=t(51850),c=t(21276),o=t(73941),u=t(5443),y=t(48526),f=t(83290),d=t(86738),p=t(39829),L=t(82799),m=t(16930),h=t(9762),w=t(37539);function S(e,a,t,r,n,i){return g[0]=e,g[1]=a,g[2]=t,(0,h.projectBuffer)(g,r,0,n,i,0)}const g=(0,s.vt)();let I=0;class M{static fromGE(e){const a=new M;return a._wkt=e.wkt,a._wkid=e.wkid,a._isInverse=e.isInverse,a}constructor(e){this.uid=I++,e?(this._wkt=null!=e.wkt?e.wkt:null,this._wkid=null!=e.wkid?e.wkid:-1,this._isInverse=null!=e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=I++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=I++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=I++}getInverse(){const e=new M;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class v{static cacheKey(e,a){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",a.wkid?.toString()??"-1",a.wkt?.toString()??"",a.wkt2?.toString()??""].join()}static fromGE(e){const a=new v;let t="";for(const r of e.steps){const e=M.fromGE(r);a.steps.push(e),t+=e.uid.toString()+","}return a._cachedProjection={},a._gtlistentry=null,a._chain=t,a}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const a of e.steps)a instanceof M?this.steps.push(a):this.steps.push(new M({wkid:a.wkid,wkt:a.wkt,isInverse:a.isInverse}))}getInverse(){const e=new v;e.steps=[];for(let a=this.steps.length-1;a>=0;a--){const t=this.steps[a];e.steps.push(t.getInverse())}return e}getGTListEntry(){let e="";for(const a of this.steps)e+=a.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,a,t){this._cachedProjection[v.cacheKey(e,a)]=t}getCachedGeTransformation(e,a){let t="";for(const e of this.steps)t+=e.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t);const r=this._cachedProjection[v.cacheKey(e,a)];return void 0===r?null:r}}var b=t(21325),T=t(62815);let G=null,P=null,A=null,R={};const C=new l.I;function O(){return!!G&&(0,f.i)()}function k(){return!!O()||((0,i.gc)(C),_(),!1)}function j(e,a){return!e||!a||J(e,a)||k()}function N(e,a){return!J(e,a)&&!O()}function _(e){return null==A&&(A=Promise.all([(0,f.l)(),t.e(9930).then(t.bind(t,49930)).then(e=>e.g),t.e(2731).then(t.bind(t,12731))])),A.then(([,a,{hydratedAdapter:t}])=>{(0,n.Te)(e),P=t,G=a.default,G._enableProjection(f.p),C.notify()})}function E(e,a,t=null,r=null){return Array.isArray(e)?0===e.length?[]:((0,c.H)(e),x(P,e,e[0].spatialReference,a,t,r)):((0,c.f)(e),x(P,[e],e.spatialReference,a,t,r)[0])}function x(e,a,t,r,n=null,i=null){if(null==t||null==r)return a;if(J(t,r,n))return a.map(e=>Y(e,t,r));if(null==n&&(0,o.jA)(t))return a.map(e=>Y(e,t,m.A.WGS84)).map(e=>$(e,r));if(null==n&&(0,o.jA)(r))return a.map(e=>$(e,m.A.WGS84)).map(e=>Y(e,m.A.WGS84,r));if(null==n){const e=v.cacheKey(t,r);void 0!==R[e]?n=R[e]:(null==(n=D(t,r,void 0))&&(n=new v),R[e]=n)}if(null==G||null==e)throw new U;return null!=i?G._project(e,a,t,r,n,i):G._project(e,a,t,r,n)}function W(e,a){const t=F([e],a);return null!=t.pending?{pending:t.pending,geometry:null}:null!=t.geometries?{pending:null,geometry:t.geometries[0]}:{pending:null,geometry:null}}function F(e,a){if(!O())for(const t of e)if(null!=t&&!(0,b.aI)(t.spatialReference,a)&&(0,b.fn)(t.spatialReference)&&(0,b.fn)(a)&&!J(t.spatialReference,a))return(0,i.gc)(C),{pending:_(),geometries:null};return{pending:null,geometries:e.map(e=>null==e?null:(0,b.aI)(e.spatialReference,a)?e:(0,b.fn)(e.spatialReference)&&(0,b.fn)(a)?$(e,a):null)}}function D(e,a,t=null){if(null==e||null==a)return null;if(null==G||null==P)throw new U;const r=G._getTransformation(P,e,a,t,t?.spatialReference);return null!==r?v.fromGE(r):null}function V(e,a,t=null){if(null==G||null==P)throw new U;const r=G._getTransformationBySuitability(P,e,a,t,t?.spatialReference);if(null!==r){const e=[];for(const a of r)e.push(v.fromGE(a));return e}return[]}class U extends r.A{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function K(){G=null,P=null,A=null,R={}}const B={get loadPromise(){return A}};function $(e,a){try{const t=E(e,a);if(null==t)return null;"xmin"in e&&"xmin"in t&&(t.zmin=e.zmin,t.zmax=e.zmax);const r=(0,T.N)(t.type,e.spatialReference,a);return null!=r&&r(t),t}catch(e){if(!(e instanceof U))throw e;return null}}async function q(e,a,t){const r=e.spatialReference;return null!=r&&null!=a&&await H(r,a,null,t),$(e,a)}function J(e,a,t){return!t&&(!!(0,b.aI)(e,a)||(0,b.fn)(e)&&(0,b.fn)(a)&&!!(0,w.jd)(e,a))}function z(e,a){if((0,b.aI)(e,a))return!0;if(!(0,b.fn)(e)||!(0,b.fn)(a))return!1;const t=(0,b.oT)(e)||(0,b.K8)(e)||(0,b.x1)(e),r=(0,b.oT)(a)||(0,b.K8)(a)||(0,b.x1)(a);return t&&r}async function H(e,a,t,r){if(O())return(0,n.NO)(r);if(Array.isArray(e)){for(const{source:a,dest:t,geographicTransformation:n}of e)if(a&&t&&!J(a,t,n))return _(r)}else if(e&&a&&!J(e,a,t))return _(r);return(0,n.NO)(r)}function Y(e,a,t){return e?"x"in e?X(e,a,new d.A,t,0):"xmin"in e?le(e,a,new u.A,t,0):"rings"in e?ne(e,a,new p.A,t,0):"paths"in e?te(e,a,new L.A,t,0):"points"in e?ee(e,a,new y.A,t,0):null:null}function Z(e,a,t=a.spatialReference,r=0){return null!=t&&null!=e.spatialReference&&null!=X(e,e.spatialReference,a,t,r)}function X(e,a,t,r,n){ce[0]=e.x,ce[1]=e.y;const i=e.z;return ce[2]=void 0!==i?i:n,(0,h.projectBuffer)(ce,a,0,ce,r,0)?(t.x=ce[0],t.y=ce[1],t.spatialReference=r,void 0!==i||(0,o.xP)(r)?(t.z=ce[2],t.hasZ=!0):(t.z=void 0,t.hasZ=!1),void 0===e.m?(t.m=void 0,t.hasM=!1):(t.m=e.m,t.hasM=!0),t):null}function Q(e,a,t=a.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=ee(e,e.spatialReference,a,t,r)}function ee(e,a,t,r,n){const{points:i,hasZ:l,hasM:s}=e,c=[],u=i.length,y=[];for(const e of i)y.push(e[0],e[1],l?e[2]:n);if(!(0,h.projectBuffer)(y,a,0,y,r,0,u))return null;const f=l||(0,o.xP)(r);for(let e=0;e<u;++e){const a=3*e,t=y[a],r=y[a+1];f&&s?c.push([t,r,y[a+2],i[e][3]]):f?c.push([t,r,y[a+2]]):s?c.push([t,r,i[e][2]]):c.push([t,r])}return t.points=c,t.spatialReference=r,t.hasZ=l,t.hasM=s,t}function ae(e,a,t=a.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=te(e,e.spatialReference,a,t,r)}function te(e,a,t,r,n){const{paths:i,hasZ:l,hasM:s}=e,c=[];if(!se(i,l??!1,s??!1,a,c,r,n))return null;const u=l||(0,o.xP)(r);return t.paths=c,t.spatialReference=r,t.hasZ=u,t.hasM=s,t}function re(e,a,t=a.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=ne(e,e.spatialReference,a,t,r)}function ne(e,a,t,r,n){const{rings:i,hasZ:l,hasM:s}=e,c=[];if(!se(i,l??!1,s??!1,a,c,r,n))return null;const u=l||(0,o.xP)(r);return t.rings=c,t.spatialReference=r,t.hasZ=u,t.hasM=s,t}function ie(e,a,t=a.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=le(e,e.spatialReference,a,t,r)}function le(e,a,t,r,n){const{xmin:i,ymin:l,xmax:s,ymax:c,hasZ:u,hasM:y}=e;if(!S(i,l,u?e.zmin:n,a,ce,r))return null;const f=u||(0,o.xP)(r);return t.xmin=ce[0],t.ymin=ce[1],f&&(t.zmin=ce[2]),S(s,c,u?e.zmax:n,a,ce,r)?(t.xmax=ce[0],t.ymax=ce[1],f&&(t.zmax=ce[2]),y&&(t.mmin=e.mmin,t.mmax=e.mmax),t.spatialReference=r,t):null}function se(e,a,t,r,n,i,l=0){const s=new Array;for(const t of e)for(const e of t)s.push(e[0],e[1],a?e[2]:l);if(!(0,h.projectBuffer)(s,r,0,s,i,0))return!1;let c=0;n.length=0;const u=a||(0,o.xP)(i);for(const a of e){const e=new Array;for(const r of a)u&&t?e.push([s[c++],s[c++],s[c++],r[3]]):u?e.push([s[c++],s[c++],s[c++]]):t?(e.push([s[c++],s[c++],r[2]]),c++):(e.push([s[c++],s[c++]]),c++);n.push(e)}return!0}const ce=(0,s.vt)()}}]);