"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[8549],{6797:(e,t,n)=>{n.d(t,{Mj:()=>p,Ui:()=>h,w2:()=>f});var r=n(65008),i=n(7762),s=n(88620);const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof r.A}function l(e){return e instanceof i.A?Object.keys(e.items):a(e)?(0,s.oY)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof i.A?e.items[t]:e[t]}function c(e){return e?e.declaredClass:null}function d(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const r=l(e),i=l(t);if(0===r.length&&0===i.length)return;if(!r.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const s=i.filter(e=>!r.includes(e)),p=r.filter(e=>!i.includes(e)),f=r.filter(n=>i.includes(n)&&u(e,n)!==u(t,n)).concat(s,p).sort(),h=c(e);if(h&&o.has(h)&&f.length)return{type:"complete",oldValue:e,newValue:t};let y;const g=a(e)&&a(t);for(const r of f){const i=u(e,r),s=u(t,r);let o;if((g||"function"!=typeof i&&"function"!=typeof s)&&i!==s&&(null!=i||null!=s)){if(n&&n[r]&&"function"==typeof n[r])o=n[r]?.(i,s);else if(i instanceof Date&&s instanceof Date){if(i.getTime()===s.getTime())continue;o={type:"complete",oldValue:i,newValue:s}}else o="object"==typeof i&&"object"==typeof s&&c(i)===c(s)?d(i,s):{type:"complete",oldValue:i,newValue:s};null!=o&&(null!=y?y.diff[r]=o:y={type:"partial",diff:{[r]:o}})}}return y}function p(e,t){return function(e,t){if(null==e)return!1;const n=t.split(".");let r=e;for(const e of n){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}(e,t)}function f(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&c(e)!==c(t)?{type:"complete",oldValue:e,newValue:t}:d(e,t)}},9762:(e,t,n)=>{n.r(t),n.d(t,{projectBuffer:()=>i});var r=n(37539);function i(e,t,n,i,s,o,a=Math.floor(e.length/3)){const l=(0,r.jd)(t,s);if(null==l)return!1;if(l===r.pO){if(e===i&&n===o)return!0;const t=n+3*a;for(let r=n,s=o;r<t;r++,s++)i[s]=e[r];return!0}const u=n+3*a;for(let t=n,r=o;t<u;t+=3,r+=3)l(e,t,i,r);return!0}},10536:(e,t,n)=>{function r(e){const t={};for(const n in e){if("declaredClass"===n)continue;const i=e[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[n]=[];for(let e=0;e<i.length;e++)t[n][e]=r(i[e])}else"object"==typeof i?i.toJSON&&(t[n]=JSON.stringify(i)):t[n]=i}return t}n.d(t,{z:()=>r})},20437:(e,t,n)=>{n.d(t,{A:()=>y});var r,i=n(31635),s=n(66552),o=n(25482),a=n(10107),l=n(56507),u=(n(44208),n(87811),n(93223)),c=n(36005),d=n(40608),p=n(80451),f=n(98453);const h=new s.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let y=class extends o.o{static{r=this}constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?.value??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?h.fromJSON(n.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,i.Cg)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"alias",void 0),(0,i.Cg)([(0,a.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],y.prototype,"defaultValue",void 0),(0,i.Cg)([(0,a.MZ)()],y.prototype,"description",void 0),(0,i.Cg)([(0,c.w)("description")],y.prototype,"readDescription",null),(0,i.Cg)([(0,a.MZ)({types:p.gK,json:{read:{reader:p.rS},write:!0}})],y.prototype,"domain",void 0),(0,i.Cg)([(0,a.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"editable",void 0),(0,i.Cg)([(0,a.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],y.prototype,"length",void 0),(0,i.Cg)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,i.Cg)([(0,a.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"nullable",void 0),(0,i.Cg)([(0,u.e)(f.m)],y.prototype,"type",void 0),(0,i.Cg)([(0,a.MZ)()],y.prototype,"valueType",void 0),(0,i.Cg)([(0,c.w)("valueType",["description"])],y.prototype,"readValueType",null),(0,i.Cg)([(0,a.MZ)({type:Boolean,json:{read:!1}})],y.prototype,"visible",void 0),y=r=(0,i.Cg)([(0,d.$)("esri.layers.support.Field")],y)},32587:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(62788),i=n(95488);class s{constructor(e){this._observable=new i.I,this._map=new Map(e)}get size(){return(0,r.gc)(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const t=this._map.delete(e);return t&&this._observable.notify(),t}entries(){return(0,r.gc)(this._observable),this._map.entries()}forEach(e,t){(0,r.gc)(this._observable),this._map.forEach((n,r)=>e.call(t,n,r,this),t)}get(e){return(0,r.gc)(this._observable),this._map.get(e)}has(e){return(0,r.gc)(this._observable),this._map.has(e)}keys(){return(0,r.gc)(this._observable),this._map.keys()}set(e,t){return this._map.set(e,t),this._observable.notify(),this}values(){return(0,r.gc)(this._observable),this._map.values()}[Symbol.iterator](){return(0,r.gc)(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}}},36708:(e,t,n)=>{n.d(t,{C_:()=>p,OH:()=>y,Vh:()=>g,on:()=>d,pc:()=>m,wB:()=>l,z7:()=>u});var r=n(37955),i=n(36563),s=n(97768),o=n(74887),a=n(14012);function l(e,t,n={}){return c(e,t,n,f)}function u(e,t,n={}){return c(e,t,n,h)}function c(e,t,n={},r){let i=null;const o=n.once?(e,n)=>{r(e)&&((0,s.xt)(i),t(e,n))}:(e,n)=>{r(e)&&t(e,n)};if(i=(0,a.Cn)(e,o,n.sync,n.equals),n.initial){const t=e();o(t,t)}return i}function d(e,t,n,o={}){let a=null,u=null,c=null;function d(){a&&u&&(u.remove(),o.onListenerRemove?.(a),a=null,u=null)}function p(e){o.once&&o.once&&(0,s.xt)(c),n(e)}const f=l(e,(e,n)=>{d(),(0,r.wb)(e)&&(a=e,u=(0,r.on)(e,t,p),o.onListenerAdd?.(e))},{sync:o.sync,initial:!0});return c=(0,i.hA)(()=>{f.remove(),d()}),c}function p(e,t){return function(e,t,n){if((0,o.G4)(n))return Promise.reject((0,o.NK)());const r=e();if(t?.(r))return Promise.resolve(r);let a=null;function l(){a=(0,s.xt)(a)}return new Promise((r,s)=>{a=(0,i.vE)([(0,o.u7)(n,()=>{l(),s((0,o.NK)())}),c(e,e=>{l(),r(e)},{sync:!1,once:!0},t??f)])})}(e,h,t)}function f(e){return!0}function h(e){return!!e}n(80559);const y={sync:!0},g={initial:!0},m={sync:!0,initial:!0}},37539:(e,t,n)=>{n.d(t,{pO:()=>y,jd:()=>p,Tp:()=>f,w5:()=>d});var r=n(34727),i=n(83047),s=n(73941),o=n(79258);Math.PI;const a=o.$O.radius,l=o.$O.eccentricitySquared,u={a1:a*l,a2:a*l*a*l,a3:a*l*l/2,a4:a*l*a*l*2.5,a5:a*l+a*l*l/2,a6:1-l};o.$O.radius,o.$O.flattening,o.Sw.radius,o.Sw.flattening,o.sH.radius,o.sH.flattening,o.sH.radius;var c=n(21325);const d={2:{5:y,7:null,9:null,10:y,1:v,6:null,8:null,0:null,3:m,11:_,2:y,4:M},5:{5:y,7:null,9:null,10:y,1:v,6:null,8:null,0:null,3:m,11:_,2:y,4:M},7:{5:null,7:y,9:null,10:y,1:null,6:S,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:y,10:y,1:null,6:null,8:k,0:null,3:null,11:null,2:null,4:null},3:{5:g,7:null,9:null,10:g,1:function(e,t,n,r){const i=e[t]/P,s=O-2*Math.atan(Math.exp(-e[t+1]/P)),o=P+e[t+2],a=Math.cos(s)*o;n[r]=Math.cos(i)*a,n[r+1]=Math.sin(i)*a,n[r+2]=Math.sin(s)*o},6:null,8:null,0:null,3:y,11:function(e,t,n,r){g(e,t,n,r),_(n,r,n,r)},2:g,4:function(e,t,n,r){g(e,t,n,r),M(n,r,n,r)}},4:{5:A,7:null,9:null,10:A,1:function(e,t,n,r){A(e,t,n,r),v(n,r,n,r)},6:null,8:null,0:null,3:function(e,t,n,r){A(e,t,n,r),m(n,r,n,r)},11:function(e,t,n,r){A(e,t,n,r),_(n,r,n,r)},2:A,4:y},1:{5:R,7:null,9:null,10:R,1:y,6:null,8:null,0:null,3:function(e,t,n,r){R(e,t,n,r),m(n,r,n,r)},11:function(e,t,n,r){R(e,t,n,r),_(n,r,n,r)},2:R,4:function(e,t,n,r){R(e,t,n,r),M(n,r,n,r)}},6:{5:null,7:I,9:null,10:I,1:null,6:y,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:x,10:x,1:null,6:null,8:y,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:y,3:null,11:null,2:null,4:null},10:{5:y,7:y,9:y,10:y,1:v,6:S,8:k,0:null,3:m,11:_,2:y,4:M},11:{5:b,7:null,9:null,10:b,1:function(e,t,n,r){b(e,t,n,r),v(n,r,n,r)},6:null,8:null,0:null,3:function(e,t,n,r){b(e,t,n,r),m(n,r,n,r)},11:y,2:b,4:function(e,t,n,r){b(e,t,n,r),M(n,r,n,r)}}};function p(e,t){return f(e,t)?.projector}function f(e,t){if(null==e||null==t)return null;if(F.source.spatialReference===e&&F.dest.spatialReference===t)return F;const n=h(e,F.source),r=h(t,F.dest);return 0===n&&0===r?(0,c.aI)(e,t)?F.projector=y:F.projector=null:F.projector=d[n][r],F}function h(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,i.GA)(e,1)),(0,s.jA)(e)?t.spatialReferenceId=1:(0,c.oT)(e)?t.spatialReferenceId=2:(0,c.K8)(e)?t.spatialReferenceId=3:(0,c.r1)(e)?t.spatialReferenceId=11:e.wkt===s.Ro.wkt?t.spatialReferenceId=4:4490===e.wkid?t.spatialReferenceId=5:e.wkt===s.FY.wkt?t.spatialReferenceId=6:e.wkt===s.LJ.wkt?t.spatialReferenceId=8:(0,c.q8)(e)?t.spatialReferenceId=7:(0,c.KQ)(e)?t.spatialReferenceId=9:t.spatialReferenceId=0):0}function y(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t])}function g(e,t,n,r){n[r]=q*(e[t]/P),n[r+1]=q*(O-2*Math.atan(Math.exp(-e[t+1]/P))),n[r+2]=e[t+2]}function m(e,t,n,i){!function(e,t,n,i,s){const o=.4999999*Math.PI,a=(0,r.qE)(j*e[t+1],-o,o),l=Math.sin(a);n[i++]=j*e[t]*s.radius,n[i++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),n[i]=e[t+2]}(e,t,n,i,o.$O)}function _(e,t,n,r){n[r]=e[t]*V,n[r+1]=e[t+1]*V,n[r+2]=e[t+2]}function b(e,t,n,r){n[r]=e[t]*C,n[r+1]=e[t+1]*C,n[r+2]=e[t+2]}function w(e,t,n,r,i){const s=i+e[t+2],o=j*e[t+1],a=j*e[t],l=Math.cos(o)*s;n[r]=Math.cos(a)*l,n[r+1]=Math.sin(a)*l,n[r+2]=Math.sin(o)*s}function k(e,t,n,r){w(e,t,n,r,o.Sw.radius)}function S(e,t,n,r){w(e,t,n,r,o.sH.radius)}function v(e,t,n,r){w(e,t,n,r,o.$O.radius)}function T(e,t,n,i,s){const o=e[t],a=e[t+1],l=e[t+2],u=Math.sqrt(o*o+a*a+l*l),c=(0,r.YN)(l/(0===u?1:u)),d=Math.atan2(a,o);n[i++]=q*d,n[i++]=q*c,n[i]=u-s}function x(e,t,n,r){T(e,t,n,r,o.Sw.radius)}function I(e,t,n,r){T(e,t,n,r,o.sH.radius)}function R(e,t,n,r){T(e,t,n,r,o.$O.radius)}function M(e,t,n,r){!function(e,t,n,r,i){const s=j*e[t],o=j*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),c=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);n[r++]=(c+a)*u*Math.cos(s),n[r++]=(c+a)*u*Math.sin(s),n[r++]=(c*(1-i.eccentricitySquared)+a)*l}(e,t,n,r,o.$O)}function A(e,t,n,r){const i=u,s=e[t],a=e[t+1],l=e[t+2];let c,d,p,f,h,y,g,m,_,b,w,k,S,v,T,x,I,R,M,A,F;c=Math.abs(l),d=s*s+a*a,p=Math.sqrt(d),f=d+l*l,h=Math.sqrt(f),A=Math.atan2(a,s),y=l*l/f,g=d/f,v=i.a2/h,T=i.a3-i.a4/h,g>.3?(m=c/h*(1+g*(i.a1+v+y*T)/h),M=Math.asin(m),b=m*m,_=Math.sqrt(1-b)):(_=p/h*(1-y*(i.a5-v-g*T)/h),M=Math.acos(_),b=1-_*_,m=Math.sqrt(b)),w=1-o.$O.eccentricitySquared*b,k=o.$O.radius/Math.sqrt(w),S=i.a6*k,v=p-k*_,T=c-S*m,I=_*v+m*T,x=_*T-m*v,R=x/(S/w+I),M+=R,F=I+x*R/2,l<0&&(M=-M),n[r++]=q*A,n[r++]=q*M,n[r]=F}const F={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:y},j=(0,r.kU)(1),q=(0,r.KJ)(1),O=.5*Math.PI,P=o.$O.radius,V=P*Math.PI/180,C=180/(P*Math.PI)},39357:(e,t,n)=>{n.d(t,{H:()=>l});var r,i=n(31635),s=n(25482),o=n(10107),a=(n(44208),n(53966),n(87811),n(40608));let l=r=class extends s.o{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,i.Cg)([(0,o.MZ)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"name",void 0),(0,i.Cg)([(0,o.MZ)({type:[String,Number],json:{write:{isRequired:!0}}})],l.prototype,"code",void 0),l=r=(0,i.Cg)([(0,a.$)("esri.layers.support.CodedValue")],l)},40804:(e,t,n)=>{n.d(t,{U:()=>i});var r=n(34727);function i(e,t,n=0){const i=(0,r.qE)(e,0,a);for(let e=0;e<4;e++)t[n+e]=Math.floor(256*l(i*s[e]))}const s=[1,256,65536,16777216],o=[1/256,1/65536,1/16777216,1/4294967296],a=function(e,t=0){let n=0;for(let r=0;r<4;r++)n+=e[t+r]*o[r];return n}(new Uint8ClampedArray([255,255,255,255]));function l(e){return e-Math.floor(e)}},50498:(e,t,n)=>{n.d(t,{Ye:()=>d,gy:()=>c,yR:()=>p});var r=n(66552),i=n(5443),s=n(91075),o=n(48526),a=n(86738),l=n(39829),u=n(82799);const c=(0,r.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),d=(0,r.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),p={base:s.A,key:"type",typeMap:{extent:i.A,multipoint:o.A,point:a.A,polyline:u.A,polygon:l.A}}},51624:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(44208),i=n(69397),s=n(93687);const o=4294967296,a=new TextDecoder("utf-8"),l=(0,r.A)("safari")||(0,r.A)("ios")?6:(0,r.A)("ff")?12:32;class u{constructor(e,t,n=0,r=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this._init(e,t,n,r)}_init(e,t,n,r){this._data=e,this._dataView=t,this._pos=n,this._end=r}get usedMemory(){return 64+(0,i.Qf)(this._data)}asUnsafe(){return this}clone(){return new u(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,n=e.getUint32(t,!0)+e.getUint32(t+4,!0)*o;return this._skip(8),n}getSFixed64(){const e=this._dataView,t=this._pos,n=e.getUint32(t,!0)+e.getInt32(t+4,!0)*o;return this._skip(8),n}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,n=this._toString(this._data,t,t+e);return this._skip(e),n}getBytes(){const e=this._getLength(),t=this._pos,n=this._toBytes(this._data,t,t+e);return this._skip(e),n}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,n,r){const i=this.getMessage(),s=e(i,t,n,r);return i.release(),s}processMessage(e){const t=this.getMessage(),n=e(t);return t.release(),n}getMessage(){const e=this._getLength(),t=u.pool.acquire();return t._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){u.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t=this._pos,n=0,r=0;if(this._end-t>=10)do{if(r=e[t++],n|=127&r,!(128&r))break;if(r=e[t++],n|=(127&r)<<7,!(128&r))break;if(r=e[t++],n|=(127&r)<<14,!(128&r))break;if(r=e[t++],n|=(127&r)<<21,!(128&r))break;if(r=e[t++],n+=268435456*(127&r),!(128&r))break;if(r=e[t++],n+=34359738368*(127&r),!(128&r))break;if(r=e[t++],n+=4398046511104*(127&r),!(128&r))break;if(r=e[t++],n+=562949953421312*(127&r),!(128&r))break;if(r=e[t++],n+=72057594037927940*(127&r),!(128&r))break;if(r=e[t++],n+=0x8000000000000000*(127&r),!(128&r))break;throw new Error("Varint too long!")}while(0);else{let i=1;for(;t!==this._end&&(r=e[t],128&r);)++t,n+=(127&r)*i,i*=128;if(t===this._end)throw new Error("Varint overrun!");++t,n+=r*i}return this._pos=t,n}_decodeSVarint(){const e=this._data;let t,n=0,r=0;const i=1&e[this._pos];if(r=e[this._pos++],n|=127&r,!(128&r))return i?-(n+1)/2:n/2;if(r=e[this._pos++],n|=(127&r)<<7,!(128&r))return i?-(n+1)/2:n/2;if(r=e[this._pos++],n|=(127&r)<<14,!(128&r))return i?-(n+1)/2:n/2;if(r=e[this._pos++],n|=(127&r)<<21,!(128&r))return i?-(n+1)/2:n/2;if(r=e[this._pos++],n+=268435456*(127&r),!(128&r))return i?-(n+1)/2:n/2;if(r=e[this._pos++],n+=34359738368*(127&r),!(128&r))return i?-(n+1)/2:n/2;if(r=e[this._pos++],n+=4398046511104*(127&r),!(128&r))return i?-(n+1)/2:n/2;if(t=BigInt(n),r=e[this._pos++],t+=0x2000000000000n*BigInt(127&r),!(128&r))return Number(i?-(t+1n)/2n:t/2n);if(r=e[this._pos++],t+=0x100000000000000n*BigInt(127&r),!(128&r))return Number(i?-(t+1n)/2n:t/2n);if(r=e[this._pos++],t+=0x8000000000000000n*BigInt(127&r),!(128&r))return Number(i?-(t+1n)/2n:t/2n);throw new Error("Varint too long!")}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,n){if((n=Math.min(this._end,n))-t>l){const r=e.subarray(t,n);return a.decode(r)}let r="",i="";for(let s=t;s<n;++s){const t=e[s];128&t?i+="%"+t.toString(16):(r+=decodeURIComponent(i)+String.fromCharCode(t),i="")}return i.length&&(r+=decodeURIComponent(i)),r}_toBytes(e,t,n){return n=Math.min(this._end,n),new Uint8Array(e.buffer,t,n-t)}static{this.pool=new s.A(u,void 0,e=>{e._data=null,e._dataView=null})}}},53177:(e,t,n)=>{n.d(t,{A:()=>d});var r,i=n(31635),s=n(4718),o=n(10107),a=(n(44208),n(53966),n(93223)),l=n(40608),u=n(39357),c=n(76357);let d=class extends c.A{static{r=this}constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some(e=>(String(e.code)===n&&(t=e.name),!!t))}return t}clone(){return new r({codedValues:(0,s.o8)(this.codedValues),name:this.name})}};(0,i.Cg)([(0,o.MZ)({type:[u.H],json:{write:{isRequired:!0}}})],d.prototype,"codedValues",void 0),(0,i.Cg)([(0,a.e)({codedValue:"coded-value"})],d.prototype,"type",void 0),d=r=(0,i.Cg)([(0,l.$)("esri.layers.support.CodedValueDomain")],d)},53655:(e,t,n)=>{n.d(t,{SH:()=>M,ae:()=>v,cn:()=>_});var r=n(49186),i=n(51624),s=n(92722),o=n(69418);const a=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],u=["upperLeft","lowerLeft"];function c(e){return e>=a.length?null:a[e]}function d(e){return e>=l.length?null:l[e]}function p(e){return e>=u.length?null:u[e]}function f(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function h(e,t,n){const r=e.asUnsafe(),i=t.createPointGeometry(n);for(;r.next();)switch(r.tag()){case 3:{const e=r.getUInt32(),n=r.pos()+e;let s=0;for(;r.pos()<n;)t.addCoordinatePoint(i,r.getSInt64(),s++);break}default:r.skip()}return i}function y(e,t,n){const r=e.asUnsafe(),i=t.createGeometry(n),s=2+(n.hasZ?1:0)+(n.hasM?1:0);for(;r.next();)switch(r.tag()){case 2:{const e=r.getUInt32(),n=r.pos()+e;let s=0;for(;r.pos()<n;)t.addLength(i,r.getUInt32(),s++);break}case 3:{const e=r.getUInt32(),n=r.pos()+e;let o=0;for(t.allocateCoordinates(i);r.pos()<n;)t.addCoordinate(i,r.getSInt64(),o),o++,o===s&&(o=0);break}default:r.skip()}return i}function g(e){const t=e.asUnsafe(),n=new s.A;let r="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.lengths.push(t.getUInt32());break}case 3:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.coords.push(t.getSInt64());break}case 1:r=o.z[t.getEnum()];break;default:t.skip()}return{queryGeometry:n,queryGeometryType:r}}function m(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function _(e){const t=e.asUnsafe(),n={type:c(0)};for(;t.next();)switch(t.tag()){case 1:n.name=t.getString();break;case 2:n.type=c(t.getEnum());break;case 3:n.alias=t.getString();break;case 4:n.sqlType=d(t.getEnum());break;case 5:default:t.skip();break;case 6:n.defaultValue=t.getString()}return n}function b(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.name=n.getString();break;case 2:t.isSystemMaintained=n.getBool();break;default:n.skip()}return t}function w(e,t,n,r){const i=t.createFeature(n);let s=0;for(;e.next();)switch(e.tag()){case 1:{const t=r[s++].name;i.attributes[t]=e.processMessage(m);break}case 2:i.geometry=e.processMessageWithArgs(y,t,n);break;case 4:i.centroid=e.processMessageWithArgs(h,t,n);break;default:e.skip()}return i}function k(e){const t=[1,1,1,1],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function S(e){const t=[0,0,0,0],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function v(e){const t={originPosition:p(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.originPosition=p(n.getEnum());break;case 2:t.scale=n.processMessage(k);break;case 3:t.translate=n.processMessage(S);break;default:n.skip()}return t}function T(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.shapeAreaFieldName=n.getString();break;case 2:t.shapeLengthFieldName=n.getString();break;case 3:t.units=n.getString();break;default:n.skip()}return t}function x(e,t){const n=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:n.wkid=e.getUInt32();break;case 5:n.wkt=e.getString();break;case 2:n.latestWkid=e.getUInt32();break;case 3:n.vcsWkid=e.getUInt32();break;case 4:n.latestVcsWkid=e.getUInt32();break;default:e.skip()}return n}function I(e,t){const n=t.createFeatureResult(),r=e.asUnsafe();n.geometryType=f(t,0);let i=!1;for(;r.next();)switch(r.tag()){case 1:n.objectIdFieldName=r.getString();break;case 3:n.globalIdFieldName=r.getString();break;case 4:n.geohashFieldName=r.getString();break;case 5:n.geometryProperties=r.processMessage(T);break;case 7:n.geometryType=f(t,r.getEnum());break;case 8:n.spatialReference=r.processMessageWithArgs(x,t);break;case 10:n.hasZ=r.getBool();break;case 11:n.hasM=r.getBool();break;case 12:n.transform=r.processMessage(v);break;case 9:n.exceededTransferLimit=r.getBool();break;case 13:t.addField(n,r.processMessage(_));break;case 15:i||(t.prepareFeatures(n),i=!0),t.addFeature(n,r.processMessageWithArgs(w,t,n,n.fields));break;case 2:n.uniqueIdField=r.processMessage(b);break;default:r.skip()}return t.finishFeatureResult(n),n}function R(e,t){const n={};let r=null;for(;e.next();)switch(e.tag()){case 4:r=e.processMessageWithArgs(g);break;case 1:n.featureResult=e.processMessageWithArgs(I,t);break;default:e.skip()}return null!=r&&n.featureResult&&t.addQueryGeometry(n,r),n}function M(e,t){try{const n=2,r=new i.A(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===n?s.queryResult=r.processMessageWithArgs(R,t):r.skip();return s}catch(e){throw new r.A("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}}},55674:(e,t,n)=>{n.d(t,{Ad:()=>f,Gj:()=>g,QY:()=>p,lL:()=>m,xR:()=>h});var r=n(66131),i=n(49186),s=(n(44208),n(44729)),o=n(15032),a=n(65864),l=n(95466),u=n(43668),c=n(98623);const d=["geometry","scale","timeProperties"];function p(e,t){if(null!=t)for(const n of d)t.hasArcadeDependency(n)&&e.add(n);return e}function f(e,t){return y.create(e,t,null,["$feature","$view"])}function h(e,t,n){return y.create(e,t,n,["$feature","$view","$config"])}class y{static async create(e,t,n,r){const{arcade:s,Dictionary:o}=await(0,u.l)();let a;try{a=s.parseScript(e)}catch(t){throw new i.A("arcade-bad-expression","Failed to parse arcade script",{script:e,error:t})}const l=s.scriptUsesGeometryEngine(a);l&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,a,null,!1,l);const c={vars:r.reduce((e,t)=>({...e,[t]:null}),{}),spatialReference:t,useAsync:!1},d=s.compileScript(a,c);let p=null;null!=n&&(p=new o(n),p.immutable=!0);const f=new o;return f.immutable=!1,f.setField("scale",0),new y(e,s,a,d,t,f,p,o)}constructor(e,t,n,r,i,s,o,a){this.script=e,this._arcade=t,this._syntaxTree=n,this._compiled=r,this._spatialReference=i,this._viewDict=s,this._configDict=o,this._dictionaryCtor=a,this._dependencies=new Map,this._featureReader=new g,this._dependencies.set("geometry",t.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,t){const n=t.$view?.timeZone;if(t.$view){let e;if(this._viewDict.setField("scale",t.$view.scale),null!=t.$view.timeProperties){const{currentStart:i,currentEnd:s}=t.$view.timeProperties;e=new this._dictionaryCtor({currentStart:null!=i?null!=n?r.lY.epochToArcadeDate(i,n):r.lY.unknownEpochToArcadeDate(i):void 0,currentEnd:null!=s?null!=n?r.lY.epochToArcadeDate(s,n):r.lY.unknownEpochToArcadeDate(s):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",e)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:n})}repurposeFeature(e,t){return this._featureReader.bind(e,t,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}}class g{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,t,n){const r=t??new l.A(m(e.attributes));this._boundTarget=e,this._boundSchema.fields=r.fields,this._boundSchema.fieldsIndex=r,this._boundSchema.spatialReference=n}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=(0,a.rS)(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===c.L5}field(e,t=!0){const n=this._getField(e);if(n){const t=this._boundTarget.attributes[n.name];if(null==t)return null;switch(n.type){case"date-only":case"esriFieldTypeDateOnly":return s.n.fromReader(t);case"time-only":case"esriFieldTypeTimeOnly":return o.k.fromReader(t);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return r.lY.fromReaderAsTimeStampOffset(t);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?r.lY.unknownEpochToArcadeDate(t):r.lY.epochToArcadeDate(t,this.contextTimeZone??c.qU);default:return t}}if(t)throw new Error(`Field ${e} does not exist`);return null}setField(e,t){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,t=null){return Promise.resolve(this.castAsJson(t))}}function m(e){const t=[];for(const n in e)t.push({name:n,alias:n,type:"string"==typeof e[n]?"esriFieldTypeString":"esriFieldTypeDouble"});return t}},58501:(e,t,n)=>{n.d(t,{q:()=>i});var r=n(62815);function i(e,t,n){if(!n?.features||!n.hasZ)return;const i=(0,r.N)(n.geometryType,t,e.outSpatialReference);if(null!=i)for(const e of n.features)i(e.geometry)}},62815:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(83047),i=n(73941),s=n(21325);function o(e,t,n){if(null==t||null==n||n.vcsWkid||(0,s.aI)(t,n)||(0,i.xP)(t)||(0,i.xP)(n))return null;const o=(0,r.G9)(t)/(0,r.G9)(n);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){null!=e?.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const n of e.paths)for(const e of n)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const n of e.rings)for(const e of n)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}(e,o);case"extent":case"esriGeometryEnvelope":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,o);default:return null}}},66208:(e,t,n)=>{n.d(t,{m:()=>i});var r=n(53655);function i(e,t){const n=(0,r.SH)(e,t),i=n.queryResult.featureResult,s=n.queryResult.queryGeometry,o=n.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const e=i.objectIdFieldName;for(const t of i.features)t.attributes&&(t.objectId=t.attributes[e])}return i&&(i.queryGeometry=s,i.queryGeometryType=o),i}},69418:(e,t,n)=>{n.d(t,{S:()=>u,z:()=>l});var r=n(83047),i=n(21325),s=n(43334),o=n(58512),a=n(92722);const l=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class u{constructor(e){this._options=e,this.geometryTypes=l,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new o.A}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||(0,i.aI)(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=(0,r.G9)(this._options.sourceSpatialReference)/(0,r.G9)(e.spatialReference);if(1!==t)for(const n of e.features){if(!(0,s.N3)(n))continue;const e=n.geometry.coords;for(let n=2;n<e.length;n+=3)e[n]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new s.Om(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new a.A}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((e,t)=>e+t,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new a.A}}},73681:(e,t,n)=>{n.d(t,{n:()=>l});var r=n(49186),i=n(53966),s=n(46140),o=n(95466),a=n(55674);class l{static async from(e,t,n){const o=e.dictionary_version?s.R.parse(e.dictionary_version):null,c=new Set(e.itemsNames),d={};if(t)for(const e in t)d[e]=t[e];if(e.authoringInfo.configuration)for(const t of e.authoringInfo.configuration)d.hasOwnProperty(t.name)||(d[t.name]=t.value);const p=new Set(e.authoringInfo.symbol);for(const e of Object.keys(n))p.delete(e);p.size&&i.A.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:p});const f=await(0,a.xR)(e.expression,null,d);if(!f)throw new r.A("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const h=!o||!o.greaterEqual(4,0);h&&i.A.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:o});const y=new u(n,h);return new l(h,c,f,y)}constructor(e,t,n,r){this._requiresFieldCoercionToString=e,this._itemNames=t,this._compiled=n,this._reader=r}get itemNames(){return this._itemNames}evaluate(e,t,n,r){try{return this._reader.bind(e,n,r),this._compiled.evaluate(this._reader,{$view:{scale:t}})}catch(e){i.A.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:e})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new o.A(e);const t=e.map(e=>({...e,type:"esriFieldTypeString"}));return new o.A(t)}}class u extends a.Gj{constructor(e,t){super(),this._fieldMap=e,this._requiresFieldCoercionToString=t}_getField(e){const t=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(t)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const t=this._getField(e);return null==t||null==this._boundTarget.attributes[t.name]?"":""+this._boundTarget.attributes[t.name]}}},76357:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(31635),i=n(66552),s=n(25482),o=n(10107),a=(n(44208),n(53966),n(87811),n(93223)),l=n(40608);const u=new i.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends s.o{constructor(e){super(e),this.name=null,this.type=null}};(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,r.Cg)([(0,a.e)(u),(0,o.MZ)({json:{write:{isRequired:!0}}})],c.prototype,"type",void 0),c=(0,r.Cg)([(0,l.$)("esri.layers.support.Domain")],c)},80451:(e,t,n)=>{n.d(t,{rS:()=>h,gK:()=>f}),n(44208);var r,i=n(53177),s=n(76357),o=n(31635),a=(n(53966),n(87811),n(49186),n(93223)),l=n(40608);let u=class extends s.A{static{r=this}constructor(e){super(e),this.type="inherited"}clone(){return new r}};(0,o.Cg)([(0,a.e)({inherited:"inherited"})],u.prototype,"type",void 0),u=r=(0,o.Cg)([(0,l.$)("esri.layers.support.InheritedDomain")],u);var c,d=n(10107);let p=class extends s.A{static{c=this}constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new c({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,o.Cg)([(0,d.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]},isRequired:!0}}})],p.prototype,"maxValue",void 0),(0,o.Cg)([(0,d.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]},isRequired:!0}}})],p.prototype,"minValue",void 0),(0,o.Cg)([(0,a.e)({range:"range"})],p.prototype,"type",void 0),p=c=(0,o.Cg)([(0,l.$)("esri.layers.support.RangeDomain")],p);const f={key:"type",base:s.A,typeMap:{range:p,"coded-value":i.A,inherited:u}};function h(e){if(!e?.type)return null;switch(e.type){case"range":return p.fromJSON(e);case"codedValue":return i.A.fromJSON(e);case"inherited":return u.fromJSON(e)}return null}},80893:(e,t,n)=>{n.d(t,{IJ:()=>h,Jf:()=>_,Pk:()=>g,eW:()=>f,gW:()=>m,kS:()=>y});var r=n(78888),i=n(84952),s=n(65864),o=n(17136),a=n(21325),l=n(10536),u=n(66208),c=n(58501);const d="Layer does not support extent calculation.";function p(e,t,n){const r=e.geometry,i=e.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const o=i;let l,u,c;if(r&&(u=r.spatialReference,c=(0,a.YX)(u),o.geometryType=(0,s.$B)(r),o.geometry=function(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const n=e.toJSON();return delete n.spatialReference,JSON.stringify(n)}(r,e.compactGeometryEnabled),o.inSR=c),i.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds)switch(n?.uniqueIdFields?.length){case void 0:o.objectIds=i.objectIds.join(",");break;case 1:o.uniqueIds=JSON.stringify(i.objectIds),delete o.objectIds;break;default:o.uniqueIds=JSON.stringify(i.objectIds.map(e=>JSON.parse(e))),delete o.objectIds}if(i.orderByFields&&(o.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete o.outFields:i.outFields.includes("*")?o.outFields="*":o.outFields=i.outFields.join(","),i.outSR?(o.outSR=(0,a.YX)(i.outSR),l=e.outSpatialReference):r&&(i.returnGeometry||i.returnCentroid)&&(o.outSR=o.inSR,l=u),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(o.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(o.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(o.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=u&&null!=e.quantizationParameters?.extent&&u.equals(e.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(o.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(o.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(o.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const e=i.timeExtent,{start:t,end:n}=e;null==t&&null==n||(o.time=t===n?t:`${t??"null"},${n??"null"}`),delete i.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=u&&null!=l&&u.equals(l)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}async function f(e,t,n,r,i){const s=t.timeExtent?.isEmpty?{data:{features:[]}}:await w(e,t,"json",r,void 0,i);return(0,c.q)(t,n,s.data),s}async function h(e,t,n,r,i){if(t.timeExtent?.isEmpty)return{data:n.createFeatureResult()};const s=await y(e,t,r,i),o=s;return o.data=(0,u.m)(s.data,n),o}function y(e,t,n,r){return w(e,t,"pbf",n,void 0,r)}function g(e,t,n,r){return t.timeExtent?.isEmpty?Promise.resolve({data:{objectIds:[]}}):w(e,t,"json",n,{returnIdsOnly:!0},r)}function m(e,t,n,r){return t.timeExtent?.isEmpty?Promise.resolve({data:{count:0}}):w(e,t,"json",n,{returnIdsOnly:!0,returnCountOnly:!0},r)}async function _(e,t,n){if(t.timeExtent?.isEmpty)return{data:{count:0,extent:null}};const r=await w(e,t,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}),i=r.data;if(i.hasOwnProperty("extent"))return r;if(i.features)throw new Error(d);if(i.hasOwnProperty("count"))throw new Error(d);return r}function b(e,t){if(!e.returnIdsOnly||!t.uniqueIdFields)return e;const n={...e,returnUniqueIdsOnly:!0};return delete n.returnIdsOnly,n}async function w(e,t,n,s={},a={},u={}){const c="string"==typeof e?(0,i.An)(e):e,d=t.geometry?[t.geometry]:[],f=await(0,o.el)(d,null,{signal:s.signal}),h=f?.[0];null!=h&&((t=t.clone()).geometry=h);const y=(0,l.z)({...c.query,f:n,...b(a,u),...p(t,a,u)});return(0,r.A)((0,i.fj)(c.path,(g=a,null==t.formatOf3DObjects||g.returnCountOnly||g.returnExtentOnly||g.returnIdsOnly?"query":"query3d")),{...s,responseType:"pbf"===n?"array-buffer":"json",query:{...y,...s.query}});var g}},98988:(e,t,n)=>{n.r(t),n.d(t,{canProjectWithoutEngine:()=>J,getTransformation:()=>N,getTransformations:()=>U,initializeProjection:()=>Y,isEqualBaseGCS:()=>W,isLoaded:()=>j,isLoadedOrLoad:()=>q,isLoadedOrLoadFor:()=>O,load:()=>V,project:()=>C,projectExtent:()=>se,projectMany:()=>D,projectMultipoint:()=>X,projectOrLoad:()=>E,projectOrLoadMany:()=>G,projectPoint:()=>H,projectPolygon:()=>re,projectPolyline:()=>te,projectWithZConversion:()=>B,projectWithoutEngine:()=>K,requiresLoad:()=>P,test:()=>L,tryProjectWithZConversion:()=>z,unload:()=>$});var r=n(49186),i=n(74887),s=n(62788),o=n(95488),a=n(51850),l=n(21276),u=n(73941),c=n(5443),d=n(48526),p=n(83290),f=n(86738),h=n(39829),y=n(82799),g=n(16930),m=n(9762),_=n(37539);function b(e,t,n,r,i,s){return w[0]=e,w[1]=t,w[2]=n,(0,m.projectBuffer)(w,r,0,i,s,0)}const w=(0,a.vt)();let k=0;class S{static fromGE(e){const t=new S;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}constructor(e){this.uid=k++,e?(this._wkt=null!=e.wkt?e.wkt:null,this._wkid=null!=e.wkid?e.wkid:-1,this._isInverse=null!=e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=k++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=k++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=k++}getInverse(){const e=new S;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class v{static cacheKey(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}static fromGE(e){const t=new v;let n="";for(const r of e.steps){const e=S.fromGE(r);t.steps.push(e),n+=e.uid.toString()+","}return t._cachedProjection={},t._gtlistentry=null,t._chain=n,t}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const t of e.steps)t instanceof S?this.steps.push(t):this.steps.push(new S({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}getInverse(){const e=new v;e.steps=[];for(let t=this.steps.length-1;t>=0;t--){const n=this.steps[t];e.steps.push(n.getInverse())}return e}getGTListEntry(){let e="";for(const t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,t,n){this._cachedProjection[v.cacheKey(e,t)]=n}getCachedGeTransformation(e,t){let n="";for(const e of this.steps)n+=e.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const r=this._cachedProjection[v.cacheKey(e,t)];return void 0===r?null:r}}var T=n(21325),x=n(62815);let I=null,R=null,M=null,A={};const F=new o.I;function j(){return!!I&&(0,p.i)()}function q(){return!!j()||((0,s.gc)(F),V(),!1)}function O(e,t){return!e||!t||J(e,t)||q()}function P(e,t){return!J(e,t)&&!j()}function V(e){return null==M&&(M=Promise.all([(0,p.l)(),n.e(9930).then(n.bind(n,49930)).then(e=>e.g),n.e(2731).then(n.bind(n,12731))])),M.then(([,t,{hydratedAdapter:n}])=>{(0,i.Te)(e),R=n,I=t.default,I._enableProjection(p.p),F.notify()})}function C(e,t,n=null,r=null){return Array.isArray(e)?0===e.length?[]:((0,l.H)(e),D(R,e,e[0].spatialReference,t,n,r)):((0,l.f)(e),D(R,[e],e.spatialReference,t,n,r)[0])}function D(e,t,n,r,i=null,s=null){if(null==n||null==r)return t;if(J(n,r,i))return t.map(e=>K(e,n,r));if(null==i&&(0,u.jA)(n))return t.map(e=>K(e,n,g.A.WGS84)).map(e=>z(e,r));if(null==i&&(0,u.jA)(r))return t.map(e=>z(e,g.A.WGS84)).map(e=>K(e,g.A.WGS84,r));if(null==i){const e=v.cacheKey(n,r);void 0!==A[e]?i=A[e]:(null==(i=N(n,r,void 0))&&(i=new v),A[e]=i)}if(null==I||null==e)throw new Z;return null!=s?I._project(e,t,n,r,i,s):I._project(e,t,n,r,i)}function E(e,t){const n=G([e],t);return null!=n.pending?{pending:n.pending,geometry:null}:null!=n.geometries?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function G(e,t){if(!j())for(const n of e)if(null!=n&&!(0,T.aI)(n.spatialReference,t)&&(0,T.fn)(n.spatialReference)&&(0,T.fn)(t)&&!J(n.spatialReference,t))return(0,s.gc)(F),{pending:V(),geometries:null};return{pending:null,geometries:e.map(e=>null==e?null:(0,T.aI)(e.spatialReference,t)?e:(0,T.fn)(e.spatialReference)&&(0,T.fn)(t)?z(e,t):null)}}function N(e,t,n=null){if(null==e||null==t)return null;if(null==I||null==R)throw new Z;const r=I._getTransformation(R,e,t,n,n?.spatialReference);return null!==r?v.fromGE(r):null}function U(e,t,n=null){if(null==I||null==R)throw new Z;const r=I._getTransformationBySuitability(R,e,t,n,n?.spatialReference);if(null!==r){const e=[];for(const t of r)e.push(v.fromGE(t));return e}return[]}class Z extends r.A{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function $(){I=null,R=null,M=null,A={}}const L={get loadPromise(){return M}};function z(e,t){try{const n=C(e,t);if(null==n)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const r=(0,x.N)(n.type,e.spatialReference,t);return null!=r&&r(n),n}catch(e){if(!(e instanceof Z))throw e;return null}}async function B(e,t,n){const r=e.spatialReference;return null!=r&&null!=t&&await Y(r,t,null,n),z(e,t)}function J(e,t,n){return!n&&(!!(0,T.aI)(e,t)||(0,T.fn)(e)&&(0,T.fn)(t)&&!!(0,_.jd)(e,t))}function W(e,t){if((0,T.aI)(e,t))return!0;if(!(0,T.fn)(e)||!(0,T.fn)(t))return!1;const n=(0,T.oT)(e)||(0,T.K8)(e)||(0,T.x1)(e),r=(0,T.oT)(t)||(0,T.K8)(t)||(0,T.x1)(t);return n&&r}async function Y(e,t,n,r){if(j())return(0,i.NO)(r);if(Array.isArray(e)){for(const{source:t,dest:n,geographicTransformation:i}of e)if(t&&n&&!J(t,n,i))return V(r)}else if(e&&t&&!J(e,t,n))return V(r);return(0,i.NO)(r)}function K(e,t,n){return e?"x"in e?Q(e,t,new f.A,n,0):"xmin"in e?oe(e,t,new c.A,n,0):"rings"in e?ie(e,t,new h.A,n,0):"paths"in e?ne(e,t,new y.A,n,0):"points"in e?ee(e,t,new d.A,n,0):null:null}function H(e,t,n=t.spatialReference,r=0){return null!=n&&null!=e.spatialReference&&null!=Q(e,e.spatialReference,t,n,r)}function Q(e,t,n,r,i){le[0]=e.x,le[1]=e.y;const s=e.z;return le[2]=void 0!==s?s:i,(0,m.projectBuffer)(le,t,0,le,r,0)?(n.x=le[0],n.y=le[1],n.spatialReference=r,void 0!==s||(0,u.xP)(r)?(n.z=le[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),void 0===e.m?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function X(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=ee(e,e.spatialReference,t,n,r)}function ee(e,t,n,r,i){const{points:s,hasZ:o,hasM:a}=e,l=[],c=s.length,d=[];for(const e of s)d.push(e[0],e[1],o?e[2]:i);if(!(0,m.projectBuffer)(d,t,0,d,r,0,c))return null;const p=o||(0,u.xP)(r);for(let e=0;e<c;++e){const t=3*e,n=d[t],r=d[t+1];p&&a?l.push([n,r,d[t+2],s[e][3]]):p?l.push([n,r,d[t+2]]):a?l.push([n,r,s[e][2]]):l.push([n,r])}return n.points=l,n.spatialReference=r,n.hasZ=o,n.hasM=a,n}function te(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=ne(e,e.spatialReference,t,n,r)}function ne(e,t,n,r,i){const{paths:s,hasZ:o,hasM:a}=e,l=[];if(!ae(s,o??!1,a??!1,t,l,r,i))return null;const c=o||(0,u.xP)(r);return n.paths=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function re(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=ie(e,e.spatialReference,t,n,r)}function ie(e,t,n,r,i){const{rings:s,hasZ:o,hasM:a}=e,l=[];if(!ae(s,o??!1,a??!1,t,l,r,i))return null;const c=o||(0,u.xP)(r);return n.rings=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function se(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=oe(e,e.spatialReference,t,n,r)}function oe(e,t,n,r,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:d}=e;if(!b(s,o,c?e.zmin:i,t,le,r))return null;const p=c||(0,u.xP)(r);return n.xmin=le[0],n.ymin=le[1],p&&(n.zmin=le[2]),b(a,l,c?e.zmax:i,t,le,r)?(n.xmax=le[0],n.ymax=le[1],p&&(n.zmax=le[2]),d&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=r,n):null}function ae(e,t,n,r,i,s,o=0){const a=new Array;for(const n of e)for(const e of n)a.push(e[0],e[1],t?e[2]:o);if(!(0,m.projectBuffer)(a,r,0,a,s,0))return!1;let l=0;i.length=0;const c=t||(0,u.xP)(s);for(const t of e){const e=new Array;for(const r of t)c&&n?e.push([a[l++],a[l++],a[l++],r[3]]):c?e.push([a[l++],a[l++],a[l++]]):n?(e.push([a[l++],a[l++],r[2]]),l++):(e.push([a[l++],a[l++]]),l++);i.push(e)}return!0}const le=(0,a.vt)()}}]);