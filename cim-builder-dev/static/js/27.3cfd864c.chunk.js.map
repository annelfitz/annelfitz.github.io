{"version":3,"sources":["../node_modules/@arcgis/core/views/webgl/Texture.js","../node_modules/@arcgis/core/views/webgl/enums.js","../node_modules/@arcgis/core/views/webgl/programUtils.js","../node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js","../node_modules/@arcgis/core/views/webgl/ProgramCache.js","../node_modules/@arcgis/core/views/webgl/ShaderCompiler.js","../node_modules/@arcgis/core/views/webgl.js"],"names":["r","constructor","t","e","a","this","_context","type","_glName","_descriptor","_samplingModeDirty","_wrapModeDirty","instanceCounter","increment","i","Texture","target","samplingMode","wrapMode","flipped","hasMipmap","isOpaque","unpackAlignment","preMultiplyAlpha","setData","dispose","gl","unbindTextureAllUnits","deleteTexture","decrement","release","resize","width","height","createTexture","bindTexture","TEXTURE_UNIT_FOR_UPDATES","p","_validateTexture","pixelStorei","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","n","pixelFormat","h","internalFormat","ImageData","HTMLImageElement","HTMLCanvasElement","HTMLVideoElement","videoWidth","videoHeight","texImage2D","TEXTURE_2D","dataType","generateMipmap","console","error","DEPTH24_STENCIL8","DEPTH_STENCIL","s","o","Math","round","log","max","LN2","levels","length","min","compressedTexImage2D","_applySamplingMode","_applyWrapMode","_applyAnisotropicFilteringParameters","updateData","texSubImage2D","setSamplingMode","setWrapMode","applyChanges","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","capabilities","textureFilterAnisotropic","texParameterf","TEXTURE_MAX_ANISOTROPY","maxAnisotropy","Buffer","VAO","Program","Framebuffer","Renderbuffer","COUNT","toFixed","options","value","f","shaders","vertexShader","fragmentShader","attributes","window","WebGL2RenderingContext","_programCacheByTemplate","Map","_rctx","forEach","programs","getProgram","has","addProgramTemplate","getProgramTemplateInstance","set","get","JSON","stringify","readFile","resolveIncludes","resolve","read","Error","exec","l","push","path","start","index","slice"],"mappings":"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","file":"static/js/27.3cfd864c.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isPowerOfTwo as t}from\"../../core/mathUtils.js\";import{isSome as e}from\"../../core/maybe.js\";import{ResourceType as i}from\"./enums.js\";import a from\"./capabilities/isWebGL2Context.js\";const s=4;class r{constructor(t,e,a=null){this._context=t,this.type=\"texture\",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(i.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},this.setData(a)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(i.Texture,this))}release(){this.dispose()}resize(t,e){const i=this._descriptor;i.width===t&&i.height===e||(i.width=t,i.height=e,this.setData(null))}setData(t){if(!this._context||!this._context.gl)return;const i=this._context.gl;this._glName||(this._glName=i.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||s,this._descriptor.height=this._descriptor.height||s);const a=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES),p=this._descriptor;r._validateTexture(this._context,p),i.pixelStorei(i.UNPACK_ALIGNMENT,p.unpackAlignment),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,p.flipped?1:0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.preMultiplyAlpha?1:0);const n=p.pixelFormat;let h=p.internalFormat?p.internalFormat:n;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let e=t.width,a=t.height;t instanceof HTMLVideoElement&&(e=t.videoWidth,a=t.videoHeight),p.width&&p.height,i.texImage2D(i.TEXTURE_2D,0,h,n,p.dataType,t),p.hasMipmap&&this.generateMipmap(),void 0===p.width&&(p.width=e),void 0===p.height&&(p.height=a)}else{null!=p.width&&null!=p.height||console.error(\"Width and height must be specified!\"),i.DEPTH24_STENCIL8&&h===i.DEPTH_STENCIL&&(h=i.DEPTH24_STENCIL8);let a=p.width,s=p.height;if(o(t)){const e=Math.round(Math.log(Math.max(a,s))/Math.LN2)+1;p.hasMipmap=p.hasMipmap&&e===t.levels.length;for(let r=0;;++r){const e=t.levels[Math.min(r,t.levels.length-1)];if(i.compressedTexImage2D(i.TEXTURE_2D,r,h,a,s,0,e),1===a&&1===s||!p.hasMipmap)break;a=Math.max(1,a>>1),s=Math.max(1,s>>1)}}else if(e(t))i.texImage2D(i.TEXTURE_2D,0,h,a,s,0,n,p.dataType,t),p.hasMipmap&&this.generateMipmap();else for(let t=0;i.texImage2D(i.TEXTURE_2D,t,h,a,s,0,n,p.dataType,null),(1!==a||1!==s)&&p.hasMipmap;++t)a=Math.max(1,a>>1),s=Math.max(1,s>>1)}r._applySamplingMode(i,this._descriptor),r._applyWrapMode(i,this._descriptor),r._applyAnisotropicFilteringParameters(this._context,this._descriptor),this._context.bindTexture(a,r.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,e,i,a,s,o){o||console.error(\"An attempt to use uninitialized data!\"),this._glName||console.error(\"An attempt to update uninitialized texture!\");const p=this._context.gl,n=this._descriptor,h=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES);(e<0||i<0||a>n.width||s>n.height||e+a>n.width||i+s>n.height)&&console.error(\"An attempt to update out of bounds of the texture!\"),p.pixelStorei(p.UNPACK_ALIGNMENT,n.unpackAlignment),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,n.flipped?1:0),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.preMultiplyAlpha?1:0),o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?p.texSubImage2D(p.TEXTURE_2D,t,e,i,n.pixelFormat,n.dataType,o):p.texSubImage2D(p.TEXTURE_2D,t,e,i,a,s,n.pixelFormat,n.dataType,o),this._context.bindTexture(h,r.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,r._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES),i=this._context.gl;i.generateMipmap(i.TEXTURE_2D),this._context.bindTexture(e,r.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,r._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(r._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(r._applyWrapMode(t,e),this._wrapModeDirty=!1)}static _validateTexture(e,i){(i.width<0||i.height<0)&&console.error(\"Negative dimension parameters are not allowed!\");const s=t(i.width)&&t(i.height);a(e.gl)||s||(\"number\"==typeof i.wrapMode?33071!==i.wrapMode&&console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"):33071===i.wrapMode.s&&33071===i.wrapMode.t||console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"),i.hasMipmap&&console.error(\"Mipmapping requires power-of-two textures!\"))}static _applySamplingMode(t,e){let i=e.samplingMode,a=e.samplingMode;9985===i||9987===i?(i=9729,e.hasMipmap||(a=9729)):9984!==i&&9986!==i||(i=9728,e.hasMipmap||(a=9728)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a)}static _applyWrapMode(t,e){\"number\"==typeof e.wrapMode?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){var i;const a=t.capabilities.textureFilterAnisotropic;if(!a)return;const s=t.gl;s.texParameterf(s.TEXTURE_2D,a.TEXTURE_MAX_ANISOTROPY,null!=(i=e.maxAnisotropy)?i:1)}}function o(t){return e(t)&&\"type\"in t&&\"compressed\"===t.type}r.TEXTURE_UNIT_FOR_UPDATES=0;export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst r=33984;var e;!function(r){r[r.Texture=0]=\"Texture\",r[r.Buffer=1]=\"Buffer\",r[r.VAO=2]=\"VAO\",r[r.Program=3]=\"Program\",r[r.Framebuffer=4]=\"Framebuffer\",r[r.Renderbuffer=5]=\"Renderbuffer\",r[r.COUNT=6]=\"COUNT\"}(e||(e={}));const f=33306;export{r as BASE_TEXTURE_UNIT,f as DepthStencilAttachment,e as ResourceType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Program as e}from\"./Program.js\";function n(e){let n=\"\";for(const t in e){const o=e[t];if(\"boolean\"==typeof o)o&&(n+=`#define ${t}\\n`);else if(\"number\"==typeof o)n+=`#define ${t} ${o.toFixed()}\\n`;else if(\"object\"==typeof o){const e=o.options;let r=0;for(const t in e)n+=`#define ${e[t]} ${(r++).toFixed()}\\n`;n+=`#define ${t} ${e[o.value]}\\n`}}return n}function t(n,t,o,r){o=o||{},r=r||\"\";const f=\"function\"==typeof t.shaders?t.shaders(o):t.shaders;return new e(n,r+f.vertexShader,r+f.fragmentShader,t.attributes)}export{t as createProgram,n as glslifyDefineMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction n(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{createProgram as r}from\"./programUtils.js\";class t{constructor(r){this._programCacheByTemplate=new Map,this._rctx=r}dispose(){this._programCacheByTemplate.forEach((r=>r.programs.forEach((r=>r.dispose())))),this._programCacheByTemplate=null}getProgram(t,a){return this._programCacheByTemplate.has(t)||this.addProgramTemplate(t,(a=>r(this._rctx,t,a))),this.getProgramTemplateInstance(t,a)}addProgramTemplate(r,t){this._programCacheByTemplate.set(r,{constructor:t,programs:new Map})}getProgramTemplateInstance(r,t){const a=this._programCacheByTemplate.get(r);if(a){const r=t?JSON.stringify(t):\"default\";if(!a.programs.has(r)){const e=a.constructor(t);a.programs.set(r,e)}return a.programs.get(r)}return null}}export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this.readFile=e}resolveIncludes(e){return this.resolve(e)}resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this.read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const s=/^[^\\S\\n]*#include\\s+<(\\S+)>[^\\S\\n]?/gm;let n=s.exec(r);const l=[];for(;null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=s.exec(r);let a=0,h=\"\";return l.forEach((e=>{h+=r.slice(a,e.start),h+=t.has(e.path)?\"\":this.resolve(e.path,t),a=e.start+e.length})),h+=r.slice(a),t.set(e,h),h}read(e){return this.readFile(e)}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nexport{default as BufferObject}from\"./webgl/BufferObject.js\";export{default as FramebufferObject}from\"./webgl/FramebufferObject.js\";export{Program}from\"./webgl/Program.js\";export{default as ProgramCache}from\"./webgl/ProgramCache.js\";export{default as Renderbuffer}from\"./webgl/Renderbuffer.js\";export{default as RenderingContext}from\"./webgl/RenderingContext.js\";export{default as ShaderCompiler}from\"./webgl/ShaderCompiler.js\";export{default as Texture}from\"./webgl/Texture.js\";export{default as VertexArrayObject}from\"./webgl/VertexArrayObject.js\";export{createProgram,glslifyDefineMap}from\"./webgl/programUtils.js\";export{createContextOrErrorHTML}from\"./webgl/context-util.js\";\n"],"sourceRoot":""}