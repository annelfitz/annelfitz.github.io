{"version":3,"file":"static/js/3070.38f5afff.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/engine/Bitmap.js","../node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","../node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/bitmapUtils.js","../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/BitmapShader.js","../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/bitmap/BitmapTechnique.js","../node_modules/@arcgis/core/views/2d/viewStateUtils.js","../node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{createResolver as t,onAbortOrThrow as e,throwIfNotAbortError as i}from\"../../../core/promiseUtils.js\";import{identity as s,translate as r,rotate as h,scaleByVec2 as o,multiply as u}from\"../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as a}from\"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{fromValues as n}from\"../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{DisplayObject as l}from\"./DisplayObject.js\";import d from\"./ImageryBitmapSource.js\";import{SizedPixelFormat as c}from\"../../webgl/enums.js\";import{Texture as _}from\"../../webgl/Texture.js\";import{TextureDescriptor as p}from\"../../webgl/TextureDescriptor.js\";function m(t){return t&&\"render\"in t}function x(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function g(t){return m(t)?t instanceof d?t.getRenderedRasterPixels()?.renderedRasterPixels:x(t):t}class f extends l{constructor(t=null,e=!1){super(),this.blendFunction=\"standard\",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._texture=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){super.destroy(),this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this.invalidateTexture(),this.requestRender())}get texture(){return this._texture}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(i,s){null!=this._uploadStatus&&this._uploadStatus.controller.abort();const r=new AbortController,h=t();return e(s,()=>r.abort()),e(r,t=>h.reject(t)),this._uploadStatus={controller:r,resolver:h},this.source=i,h.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}transitionStep(t,e){t>=64&&(this.fadeTransitionEnabled=!1),super.transitionStep(t,e)}setTransform(t){const e=s(this.transforms.displayViewScreenMat3),[i,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),l=this.resolution/this.pixelRatio/t.resolution,d=l*this.width,c=l*this.height,_=Math.PI*this.rotation/180;r(e,e,n(i,a)),r(e,e,n(d/2,c/2)),h(e,e,-_),r(e,e,n(-d/2,-c/2)),o(e,e,n(d,c)),u(this.transforms.displayViewScreenMat3,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:t,painter:e}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(t)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const s=g(this.source);try{if(null!=this._uploadStatus){const{controller:t,resolver:i}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=e.textureUploadManager;await a.enqueueTextureUpdate({data:s,texture:u,width:h,height:o},r),i.resolve(),this._uploadStatus=null}else this._texture.setData(s);this.ready()}catch(r){i(r)}}onDetach(){this.destroy()}_createTransforms(){return{displayViewScreenMat3:a()}}_createTexture(t){const e=this.immutable,i=new p(this._sourceWidth,this._sourceHeight);return i.internalFormat=e?c.RGBA8:6408,i.wrapMode=33071,i.isImmutable=e,new _(t,i)}}export{f as Bitmap,m as isImageSource,x as rasterize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"./webgl/WGLContainer.js\";import{BitmapTechnique as i}from\"./webgl/shaderGraph/techniques/bitmap/BitmapTechnique.js\";class s extends e{constructor(){super(...arguments),this._hasCrossfade=!1,this._bitmapTechnique=null}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}onAttach(){super.onAttach(),this._bitmapTechnique=new i}onDetach(){super.onDetach(),this._bitmapTechnique?.shutdown(),this._bitmapTechnique=null}renderChildren(e){super.renderChildren(e),this.visible&&1===e.drawPhase&&null!=this._bitmapTechnique&&this._bitmapTechnique.render(e,{bitmaps:this.children})}_manageFade(){this.children.reduce((e,i)=>e+(i.inFadeTransition?1:0),0)>=2?(this.children.forEach(e=>e.blendFunction=\"additive\"),this._hasCrossfade=!0):(this.children.forEach(e=>e.blendFunction=\"standard\"),this._hasCrossfade=!1)}}export{s as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nclass l{constructor(l,e,t){this.pixelBlock=l,this.extent=e,this.originalPixelBlock=t}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(l){const e=this.pixelBlock;if(null==e)return;const t=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??e});if(null==t.pixelBlock)return;t.pixelBlock.maskIsAlpha&&(t.pixelBlock.premultiplyAlpha=!0);const i=t.pixelBlock.getAsRGBA(),h=l.createImageData(t.pixelBlock.width,t.pixelBlock.height);h.data.set(i),l.putImageData(h,0,0)}getRenderedRasterPixels(){const l=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==l.pixelBlock?null:(l.pixelBlock.maskIsAlpha&&(l.pixelBlock.premultiplyAlpha=!0),{width:l.pixelBlock.width,height:l.pixelBlock.height,renderedRasterPixels:new Uint8Array(l.pixelBlock.getAsRGBA().buffer)})}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Vec2 as t,Float as l,fract as u,texture2D as d,mix as i,Vec4 as y}from\"../../graph/glsl.js\";function n(t){const u=new l(1/6),d=t.multiply(t),i=d.multiply(t),n=u.multiply(i.multiply(-1).add(new l(3).multiply(d)).subtract(new l(3).multiply(t)).add(1)),p=u.multiply(i.multiply(3).subtract(d.multiply(6)).add(4)),m=u.multiply(i.multiply(-3).add(d.multiply(3)).add(t.multiply(3)).add(1)),a=u.multiply(i);return new y(n,p,m,a)}function p(t){const u=n(t),d=u.x.add(u.y),i=u.z.add(u.w),p=new l(1).subtract(u.y.divide(d)).add(t),m=new l(1).add(u.w.divide(i)).subtract(t);return new y(p,m,d,i)}function m(y,n,m){const a=new t(new l(1).divide(m.x),0),e=new t(0,new l(1).divide(m.y)),r=n.multiply(m).subtract(.5),c=p(u(r).x).xyz,s=p(u(r).y).xyz;let w=n.add(c.x.multiply(a)),o=n.subtract(c.y.multiply(a));const x=w.add(s.x.multiply(e)),b=o.add(s.x.multiply(e));w=w.subtract(s.y.multiply(e)),o=o.subtract(s.y.multiply(e));let z=d(y,o),f=d(y,w);const v=d(y,b),g=d(y,x);return z=i(z,v,s.z),f=i(f,g,s.z),z=i(z,f,c.z),z}export{m as sampleBicubicBSpline};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t,__param as o}from\"tslib\";import{GraphShaderModule as i,FragmentOutput as e,location as r,uniform as p,define as s,input as c,VertexInput as n,UniformGroup as l,FragmentInput as a}from\"../../GraphShaderModule.js\";import{Vec3 as d,Vec4 as y,texture2D as m,Vec2 as u,Sampler2D as f,Mat3 as g,Float as h}from\"../../graph/glsl.js\";import{sampleBicubicBSpline as x}from\"./bitmapUtils.js\";class v extends n{}t([r(0,u)],v.prototype,\"position\",void 0);class b extends a{}class S extends l{}t([p(f)],S.prototype,\"texture\",void 0),t([p(g)],S.prototype,\"dvsMat3\",void 0),t([p(u)],S.prototype,\"coordScale\",void 0),t([p(h)],S.prototype,\"opacity\",void 0);class w extends i{constructor(){super(...arguments),this.type=\"BitmapShader\"}vertex(t){const o=this.config.dvsMat3.multiply(new d(t.position.multiply(this.config.coordScale),1));return{glPosition:new y(o,1),texcoord:t.position}}fragment(t){const o=new e;let i;return i=this.bicubic?x(this.config.texture,t.texcoord,this.config.coordScale):m(this.config.texture,t.texcoord),o.fragColor=new y(i.rgb.multiply(this.config.opacity),i.a.multiply(this.config.opacity)),o}}t([p(S)],w.prototype,\"config\",void 0),t([s],w.prototype,\"bicubic\",void 0),t([o(0,c(v))],w.prototype,\"vertex\",null),t([o(0,c(b))],w.prototype,\"fragment\",null);export{w as BitmapShader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{textureBindingBitmap as e}from\"../../../definitions.js\";import{Technique as i}from\"../Technique.js\";import{BitmapShader as t}from\"../shaders/BitmapShader.js\";const s={nearest:{samplingMode:9728,mips:!1},bilinear:{samplingMode:9729,mips:!1},bicubic:{samplingMode:9729,mips:!1},trilinear:{samplingMode:9987,mips:!0}},n=(e,i,t)=>{if(\"dynamic\"===t.samplingMode){const{state:t}=e,n=i.resolution/i.pixelRatio/t.resolution,o=Math.round(e.pixelRatio)!==e.pixelRatio,r=n>1.05||n<.95;return t.rotation||r||o||i.isSourceScaled||i.rotation?s.bilinear:s.nearest}return s[t.samplingMode]};class o extends i{constructor(){super(...arguments),this.name=\"BrushBitmap\",this.type=4,this.shaders={bitmap:new t}}render(i,t){const{context:o,renderingOptions:r,painter:a}=i;for(const c of t.bitmaps){const t=c.texture;if(!c.source||!c.isReady||null==t)continue;const p=n(i,c,r);i.timeline.begin(this.name),a.setPipelineState({depth:!1,stencil:{test:{mask:255,ref:c.stencilRef,compare:514,op:{fail:7680,zFail:7680,zPass:7680}},write:!1},color:{write:[!0,!0,!0,!0],blendMode:\"additive\"===c.blendFunction?\"additive\":\"composite\"}}),c.setSamplingProfile(p);const{coordScale:l,computedOpacity:m,transforms:d}=c,u={texture:{texture:t,unit:e},dvsMat3:d.displayViewScreenMat3,coordScale:l,opacity:m};a.submitDrawMesh(o,{shader:this.shaders.bitmap,uniforms:{config:u},defines:{bicubic:p===s.bicubic},optionalAttributes:null,useComputeBuffer:!1},a.quadMesh),i.timeline.end(this.name)}}}export{o as BitmapTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,o){const a=n(o.rotation),r=Math.abs(Math.cos(a)),s=Math.abs(Math.sin(a)),[u,c]=o.size;return t[0]=Math.round(c*s+u*r),t[1]=Math.round(c*r+u*s),t}function a(t,n,o,a){const[r,s]=n,[u,c]=a,h=.5*o;return t[0]=r-h*u,t[1]=s-h*c,t[2]=r+h*u,t[3]=s+h*c,t}export{a as getBBox,o as getOuterSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import{debounce as i,throwIfAborted as o,throwIfAbortError as r,eachAlways as s}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{toExtent as n,create as m}from\"../../../../geometry/support/aaBoundingRect.js\";import{getInfo as d}from\"../../../../geometry/support/spatialReferenceUtils.js\";import h from\"../../../../layers/support/TileInfo.js\";import{getOuterSize as l,getBBox as c}from\"../../viewStateUtils.js\";import{Bitmap as u}from\"../../engine/Bitmap.js\";import g from\"../../tiling/TileInfoView.js\";import f from\"../../tiling/TileKey.js\";const y=m(),x=[0,0],S=new f(0,0,0,0),w={imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let M=class extends e{constructor(t){super(t),this._imagePromise=null,this.bitmaps=[],this.hidpi=w.hidpi,this.imageMaxWidth=w.imageMaxWidth,this.imageMaxHeight=w.imageMaxHeight,this.imageRotationSupported=w.imageRotationSupported,this.imageNormalizationSupported=w.imageNormalizationSupported,this.update=i(async(t,e)=>{if(o(e),!t.stationary||this.destroyed)return;const i=t.state,s=d(i.spatialReference),a=this.hidpi?t.pixelRatio:1,p=i.worldScreenWidth>0,n=p&&this.imageNormalizationSupported&&i.worldScreenWidth<i.size[0],m=Math.round((this.imageMaxWidth??0)/a),h=Math.round((this.imageMaxHeight??0)/a);n?(x[0]=i.worldScreenWidth,x[1]=i.size[1]):this.imageRotationSupported?(x[0]=i.size[0],x[1]=i.size[1]):l(x,i);const c=Math.floor(x[0])>m||Math.floor(x[1])>h,u=s&&(i.extent.xmin<s.valid[0]||i.extent.xmax>s.valid[1]),g=!this.imageNormalizationSupported&&u,f=!c&&!g,y=this.imageRotationSupported?i.rotation:0,S=this.container.children.slice();if(f){const t=n?i.paddedViewState.center:i.center;this._imagePromise=this._singleExport(i,x,t,i.resolution,y,a,e)}else{let t=Math.min(m,h);p&&(t=Math.min(i.worldScreenWidth,t),t=Math.round(i.worldScreenWidth/Math.ceil(i.worldScreenWidth/t))),this._imagePromise=this._tiledExport(i,t,a,e)}try{const t=await this._imagePromise??[];o(e);const i=[];if(this._imagePromise=null,this.destroyed)return;this.bitmaps=t;for(const e of S)t.includes(e)||i.push(e.fadeOut().then(()=>{e.remove(),e.destroy()}));for(const e of t)i.push(e.fadeIn());await Promise.all(i)}catch(w){this._imagePromise=null,r(w)}},5e3),this.updateExports=i(async t=>{const e=[];for(const i of this.container.children){if(!i.visible||!i.stage)return;e.push(t(i).then(()=>{i.invalidateTexture(),i.requestRender()}))}this._imagePromise=s(e).then(()=>this._imagePromise=null),await this._imagePromise})}destroy(){this.bitmaps.forEach(t=>t.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}async _export(t,e,i,r,s,a){const p=await this.fetchSource(t,Math.floor(e*s),Math.floor(i*s),{rotation:r,pixelRatio:s,signal:a});o(a);const n=new u(null,!0);return n.x=t.xmin,n.y=t.ymax,n.resolution=t.width/e,n.rotation=r,n.pixelRatio=s,n.opacity=0,this.container.addChild(n),await n.setSourceAsync(p,a),o(a),n}async _singleExport(t,e,i,o,r,s,a){c(y,i,o,e);const p=n(y,t.spatialReference);return[await this._export(p,e[0],e[1],r,s,a)]}_tiledExport(t,e,i,o){const r=h.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),s=new g(r),a=s.getTileCoverage(t);if(!a)return null;const p=[];return a.forEach((r,a,m,d)=>{S.set(r,a,m,0),s.getTileBounds(y,S);const h=n(y,t.spatialReference);p.push(this._export(h,e,e,0,i,o).then(t=>(0!==d&&(S.set(r,a,m,d),s.getTileBounds(y,S),t.x=y[0],t.y=y[3]),t)))}),Promise.all(p)}};t([a()],M.prototype,\"_imagePromise\",void 0),t([a()],M.prototype,\"bitmaps\",void 0),t([a()],M.prototype,\"container\",void 0),t([a()],M.prototype,\"fetchSource\",void 0),t([a()],M.prototype,\"hidpi\",void 0),t([a()],M.prototype,\"imageMaxWidth\",void 0),t([a()],M.prototype,\"imageMaxHeight\",void 0),t([a()],M.prototype,\"imageRotationSupported\",void 0),t([a()],M.prototype,\"imageNormalizationSupported\",void 0),t([a()],M.prototype,\"requestUpdate\",void 0),t([a()],M.prototype,\"updating\",null),M=t([p(\"esri.views.2d.layers.support.ExportStrategy\")],M);export{M as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import\"../../core/Error.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{const a=i;let c=class extends a{initialize(){this.addHandles(o(()=>this.layer,\"refresh\",r=>{this.doRefresh(r.dataChanged).catch(r=>{s(r)||e.getLogger(this).error(r)})}),\"RefreshableLayerView\")}};return c=r([t(\"esri.views.layers.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView};\n"],"names":["m","t","x","e","document","createElement","width","height","render","getContext","f","l","constructor","super","this","blendFunction","_sourceWidth","_sourceHeight","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_texture","_width","y","immutable","source","requestRender","bind","destroy","dispose","_uploadStatus","controller","abort","isSourceScaled","invalidateTexture","texture","beforeRender","updateTexture","setSourceAsync","i","s","r","AbortController","h","reject","resolver","promise","HTMLImageElement","naturalHeight","naturalWidth","transitionStep","fadeTransitionEnabled","setTransform","transforms","displayViewScreenMat3","a","toScreenNoRotation","d","c","_","Math","PI","n","o","u","displayViewMat3","setSamplingProfile","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","context","painter","_createTexture","setData","resize","getRenderedRasterPixels","renderedRasterPixels","g","signal","textureUploadManager","enqueueTextureUpdate","data","resolve","ready","onDetach","_createTransforms","p","internalFormat","RGBA8","wrapMode","isImmutable","arguments","_hasCrossfade","_bitmapTechnique","requiresDedicatedFBO","_manageFade","onAttach","shutdown","renderChildren","visible","drawPhase","bitmaps","children","reduce","inFadeTransition","forEach","pixelBlock","extent","originalPixelBlock","filter","maskIsAlpha","premultiplyAlpha","getAsRGBA","createImageData","set","putImageData","Uint8Array","buffer","multiply","add","subtract","z","w","divide","v","prototype","b","S","type","vertex","config","dvsMat3","position","glPosition","texcoord","fragment","bicubic","xyz","fragColor","rgb","opacity","nearest","bilinear","trilinear","state","round","name","shaders","bitmap","renderingOptions","isReady","timeline","begin","setPipelineState","depth","stencil","test","mask","ref","compare","op","fail","zFail","zPass","write","color","blendMode","computedOpacity","unit","submitDrawMesh","shader","uniforms","defines","optionalAttributes","useComputeBuffer","quadMesh","end","abs","cos","sin","size","M","_imagePromise","hidpi","imageMaxWidth","imageMaxHeight","imageRotationSupported","imageNormalizationSupported","update","async","stationary","destroyed","spatialReference","worldScreenWidth","floor","xmin","valid","xmax","container","slice","paddedViewState","center","_singleExport","min","ceil","_tiledExport","includes","push","fadeOut","then","remove","fadeIn","Promise","all","updateExports","stage","updating","_export","fetchSource","ymax","addChild","create","scales","scale","getTileCoverage","getTileBounds","initialize","addHandles","layer","doRefresh","dataChanged","catch","getLogger","error"],"sourceRoot":""}