{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js"],"names":["p","s","i","n","r","EventedMixin","t","constructor","e","super","this","layer","parent","initialize","when","catch","name","id","title","o","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","l","prototype","readOnly","type","Boolean","a","d","arguments","left","right","top","bottom","clone","_get","Number","String","json","write","y","base","key","typeMap","extent","m","polygon","c","geometry","types","read","path","ofType","rect","h","clips","moving","attached","lastUpdateId","updateRequested","container","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","destroy","detach","remove","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","_set","update","isRendering","scale","set","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","Array","isArray","stops","SIZE_SCALE_STOPS","field","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","Math","max","abs","yoffset","length","size","filter","map","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","x","xmin","min","ymin","xmax","ymax","async","popupTemplate","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","u","includes","push","has","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","where","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","writeWhere","enable","createQuery","source","reader","target","writer","from","overridePolicy","isAggregate","getEffectivePopupTemplate","sourceLayer","featureReduction","popupEnabled","getObjectId","objectId","cloneProperties","some","globalId","values","delete","_hasGlobalIds","_queueProcessor","concurrency","process","clear","last","finally","popLast","_mergeEdits","addedFeatures","deletedFeatures","updatedFeatures","edits","addOrModified","removed","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","promise","query","params","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","_releaseTile","tileKeys","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","_addPlaceholders","pool","release","hasMissingTiles","added","_getTile","_addPlaceholderChildren","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","includedEffect","excludedEffect","excludedLabelsVisible","I","R","_updatingRequiredFieldsPromise","requiredFields","_handleRequiredFieldsChange","outFields","highlight","Error","returnGeometry","outSpatialReference","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","_loadArcadeModules","b","_updateRequiredFields","collectRequiredFields","timeInfo","F","startField","endField","floorInfo","floorField","w","subtypeField","sublayers","Promise","all","displayField","sort","validateFetchPopupFeatures","clientGraphics","q","createPopupQuery","arcadeUtils","hasGeometryOperations","g","attributes","concat","features","geometryType","j","returnZ","returnM","isEmpty","E","v","W","X","Y","H","k","U","J","_pipelineIsUpdating","_commandsQueue","P","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","z","excluded","_updateClusterSizeTask","_initProxy","_initServiceOptions","valueRanges","isTable","_createClientOptions","V","_createServiceOptions","items","labelingInfo","labelsVisible","_serviceOptions","availableFields","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","geometryDefinition","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","hasHighlight","hitTest","_hitTest","queryStatistics","viewInfoParams","viewingMode","querySummaryStatistics","_cleanUpQuery","queryFeaturesJSON","S","fromJSON","_setLayersForFeature","count","G","setVisibility","_update","_tileStrategy","updateTiles","timeline","record","N","_acquireTile","featuresTilingScheme","_edit","removeAllChildren","uninstall","_tileRendererHash","moveStart","viewChange","moveEnd","popup","fetchClientPopupFeatures","_fetchServicePopupFeatures","createFetchPopupFeaturesQueryGeometry","Q","console","log","setUpdating","emitEvent","emit","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","L","customParameters","token","apiKey","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","_detectQueryMode","maxRecordCount","tileMaxRecordCount","_validateEdit","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","C","_createConfiguration","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","effects","onConfigUpdate","startup","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","T","O","_aggregateValueRanges","aggregateFields","once","default","layerView","install","_createFeatureDataHash","getAttributeHash","_injectOverrides","_addFloorFilterClause","$","viewAllLevelIds","replace","join","RegExp","trim","A","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","_","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","_createHittestResult","K","getFeature","getAggregate","referenceId","M","Z"],"mappings":"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","file":"static/js/11.e7eaa5a2.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";let p=class extends(s(i(n(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([l()],p.prototype,\"fullOpacity\",null),e([l()],p.prototype,\"layer\",void 0),e([l()],p.prototype,\"parent\",void 0),e([l({readOnly:!0})],p.prototype,\"suspended\",null),e([l({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([l({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([l({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([l({readOnly:!0})],p.prototype,\"updatingProgress\",null),e([l()],p.prototype,\"visible\",null),p=e([a(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends o{};e=r([s(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../../geometry.js\";import r from\"../../../TimeExtent.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import{clone as o}from\"../../../core/lang.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../../geometry/support/jsonUtils.js\";import c from\"../../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.views.layers.support.FeatureFilter\")],h);var y=h;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import\"./core/Logger.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,createAbortController as s,ignoreAbortErrors as o,throwIfNotAbortError as i}from\"../../../../core/promiseUtils.js\";import{open as n}from\"../../../../core/workers/workers.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";function l(t){return Array.isArray(t)}let u=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=s(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,o(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await n(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){i(e)}}};t([a()],u.prototype,\"isReady\",void 0),t([a()],u.prototype,\"client\",void 0),t([a()],u.prototype,\"tileRenderer\",null),u=t([c(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends t{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([o(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import{fixFields as d,unpackFieldNames as m,collectLabelingFields as c,collectElevationFields as f,collectFilterFields as y,collectFeatureReductionFields as h,collectFields as F,collectField as w,featureHasFields as g}from\"../../layers/support/fieldUtils.js\";import x from\"../../rest/support/Query.js\";import{loadArcade as b}from\"../../support/arcadeOnDemand.js\";import E from\"./support/FeatureEffect.js\";import v from\"./support/FeatureFilter.js\";import{getFetchPopupTemplate as q,getRequiredFields as j}from\"./support/popupUtils.js\";const I=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?d(t,[...m(t,e.outFields),...r]):d(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){I.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new x(e);return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return b()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,n=\"renderer\"in t&&t.renderer,l=t.featureReduction,a=new Set,u=await o([n?n.collectRequiredFields(a,r):null,c(a,t),e?f(a,t):null,i(this.filter)?y(a,t,this.filter):null,this.effect?y(a,t,this.effect.filter):null,l?h(a,t,l):null]);if(t.timeInfo&&this.timeExtent&&F(a,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&F(a,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){w(a,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(a,r),c(a,e)])}));await o(e)}for(const i of u)i.error&&I.error(i.error);w(a,r,s),e&&\"displayField\"in t&&t.displayField&&w(a,r,t.displayField);const p=Array.from(a).sort();this._set(\"requiredFields\",p)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return Promise.resolve([]);const r=[],s=[],o=await this.createPopupQuery(e);for(const n of t){const{layer:t}=n;if(!(\"popupEnabled\"in t))continue;const l=m(this.layer.fieldsIndex,o.outFields),a=q(t,e);if(!i(a))continue;const u=await this._loadArcadeModules(a);u&&u.arcadeUtils.hasGeometryOperations(a)||!g(l,n)?s.push(n):r.push(n)}return\"stream\"===this.layer.type||0===s.length?Promise.resolve(r):(o.objectIds=s.map((e=>e.attributes[this.layer.objectIdField])),this.layer.queryFeatures(o).then((e=>r.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let s=!1;const o=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const n of o){if(!(\"popupEnabled\"in n))continue;const t=q(n,e);if(!i(t))continue;const o=await this._loadArcadeModules(t),l=o&&o.arcadeUtils.hasGeometryOperations(t);s=!(\"point\"!==this.layer.geometryType&&!l);const a=await j(this.layer,t);for(const e of a)r.add(e)}return t.returnGeometry=s,t.returnZ=s,t.returnM=s,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([a()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([a({readOnly:!0})],R.prototype,\"availableFields\",null),e([a({type:E})],R.prototype,\"effect\",void 0),e([a({type:v})],R.prototype,\"filter\",void 0),e([a(p)],R.prototype,\"timeExtent\",void 0),e([a()],R.prototype,\"layer\",void 0),e([a({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([a({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([a({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([a()],R.prototype,\"suspended\",void 0),e([a()],R.prototype,\"view\",void 0),R=e([u(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,isNone as p}from\"../../../core/maybe.js\";import{debounce as c,eachAlwaysValues as f,isAbortError as y,after as g}from\"../../../core/promiseUtils.js\";import{init as m,whenFalseOnce as _}from\"../../../core/watchUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isHostedAgolService as R}from\"../../../layers/support/arcgisLayerUrl.js\";import{calculateTolerance as x}from\"../../../renderers/support/clickToleranceUtils.js\";import S from\"../../../rest/support/FeatureSet.js\";import w from\"../../../rest/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as E}from\"./features/tileRenderers.js\";import{computePxBuffer as C}from\"./features/support/pixelBuffering.js\";import{findSizeVV as T,createClusterCountSizeVariable as O,isClusterCompatibleRenderer as j,createClusterRenderer as q}from\"./support/clusterUtils.js\";import P from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as H}from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import{RefreshableLayerView as k}from\"../../layers/RefreshableLayerView.js\";import z from\"../../layers/effects/EffectList.js\";import $ from\"../../layers/support/FeatureFilter.js\";import M from\"../../layers/support/FeatureEffect.js\";import{createQueryGeometry as Q}from\"../../support/drapedUtils.js\";import A from\"../../webgl/capabilities.js\";import G from\"../../../geometry/Extent.js\";const D=2147483648,B=1,K=e=>(e&D)>>>31===B;function W(e){return e&&\"openPorts\"in e}const X=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let Y=class extends(H(k(U(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new P({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=c((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new z,excluded:new z}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),m(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),m(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,u=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON(),c=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({sublayerHash:c,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:h,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:u,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t};var s;t.valueExpression&&(r.viewInfoParams={viewingMode:\"map\",scale:this.view.scale,spatialReference:null==(s=this.view.spatialReference)?void 0:s.toJSON()});return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=S.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:G.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(m(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return f([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=x({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return Q(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&R(e.path)&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=this.layer.fullExtent,a=null==s?void 0:s.clone().intersection(r),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){X.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=t.fullExtent&&t.fullExtent.toJSON(),n=L(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u={...\"customParameters\"in t?t.customParameters:void 0,token:\"apiKey\"in t?t.apiKey:void 0},d=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():W(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:y}=await this._detectQueryMode(p);return{type:f,subtypeField:c,featureCount:y,globalIdField:d,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:p,timeInfo:o,spatialReference:h,customParameters:u}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=w.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(X.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=L(this.layer.geometryType),n=await C(r,a,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&W(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){y(e)||X.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){y(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){y(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=T(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=O(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&j(e)){const i=t,r=[],s=q(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await E(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new $;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=I(e);if(p(l))return null;const o=A();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!A().supportsTextureFloat)||(X.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),_(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await g(1),null;const a=s[0];if(!K(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([v()],Y.prototype,\"_serviceOptions\",void 0),e([v()],Y.prototype,\"_proxy\",void 0),e([v()],Y.prototype,\"_pipelineIsUpdating\",void 0),e([v()],Y.prototype,\"_effectiveRenderer\",void 0),e([v()],Y.prototype,\"_aggregateValueRanges\",void 0),e([v()],Y.prototype,\"_commandsQueue\",void 0),e([v()],Y.prototype,\"labelsVisible\",null),e([v({type:$})],Y.prototype,\"filter\",void 0),e([v({type:M})],Y.prototype,\"effect\",null),e([v({readOnly:!0})],Y.prototype,\"effects\",null),e([v({readOnly:!0})],Y.prototype,\"queryMode\",null),e([v()],Y.prototype,\"renderingConfigHash\",null),e([v()],Y.prototype,\"tileRenderer\",void 0),e([v()],Y.prototype,\"updating\",void 0),Y=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],Y);var Z=Y;export default Z;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n"],"sourceRoot":""}