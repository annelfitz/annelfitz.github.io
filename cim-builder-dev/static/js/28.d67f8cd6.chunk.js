(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[28],{510:function(e,t,r){"use strict";var i=r(52),a=r(3),n=r(511),s=r(586);class o{constructor(e,t,r=null){this._context=e,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,e.instanceCounter.increment(n.b.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...t},this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(n.b.Texture,this))}release(){this.dispose()}resize(e,t){const r=this._descriptor;r.width===e&&r.height===t||(r.width=e,r.height=t,this.setData(null))}setData(e){if(!this._context||!this._context.gl)return;const t=this._context.gl;this._glName||(this._glName=t.createTexture()),void 0===e&&(e=null),null===e&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);const r=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES),i=this._descriptor;o._validateTexture(this._context,i),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipped?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.preMultiplyAlpha?1:0);const n=i.pixelFormat;let s=i.internalFormat?i.internalFormat:n;if(e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){let r=e.width,a=e.height;e instanceof HTMLVideoElement&&(r=e.videoWidth,a=e.videoHeight),i.width&&i.height,t.texImage2D(t.TEXTURE_2D,0,s,n,i.dataType,e),i.hasMipmap&&this.generateMipmap(),void 0===i.width&&(i.width=r),void 0===i.height&&(i.height=a)}else{null!=i.width&&null!=i.height||console.error("Width and height must be specified!"),t.DEPTH24_STENCIL8&&s===t.DEPTH_STENCIL&&(s=t.DEPTH24_STENCIL8);let r=i.width,o=i.height;if(function(e){return Object(a.i)(e)&&"type"in e&&"compressed"===e.type}(e)){const a=Math.round(Math.log(Math.max(r,o))/Math.LN2)+1;i.hasMipmap=i.hasMipmap&&a===e.levels.length;for(let n=0;;++n){const a=e.levels[Math.min(n,e.levels.length-1)];if(t.compressedTexImage2D(t.TEXTURE_2D,n,s,r,o,0,a),1===r&&1===o||!i.hasMipmap)break;r=Math.max(1,r>>1),o=Math.max(1,o>>1)}}else if(Object(a.i)(e))t.texImage2D(t.TEXTURE_2D,0,s,r,o,0,n,i.dataType,e),i.hasMipmap&&this.generateMipmap();else for(let e=0;t.texImage2D(t.TEXTURE_2D,e,s,r,o,0,n,i.dataType,null),(1!==r||1!==o)&&i.hasMipmap;++e)r=Math.max(1,r>>1),o=Math.max(1,o>>1)}o._applySamplingMode(t,this._descriptor),o._applyWrapMode(t,this._descriptor),o._applyAnisotropicFilteringParameters(this._context,this._descriptor),this._context.bindTexture(r,o.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,t,r,i,a,n){n||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const s=this._context.gl,p=this._descriptor,h=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES);(t<0||r<0||i>p.width||a>p.height||t+i>p.width||r+a>p.height)&&console.error("An attempt to update out of bounds of the texture!"),s.pixelStorei(s.UNPACK_ALIGNMENT,p.unpackAlignment),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,p.flipped?1:0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.preMultiplyAlpha?1:0),n instanceof ImageData||n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement?s.texSubImage2D(s.TEXTURE_2D,e,t,r,p.pixelFormat,p.dataType,n):s.texSubImage2D(s.TEXTURE_2D,e,t,r,i,a,p.pixelFormat,p.dataType,n),this._context.bindTexture(h,o.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;e.hasMipmap||(e.hasMipmap=!0,this._samplingModeDirty=!0,o._validateTexture(this._context,e)),9729===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9985):9728===e.samplingMode&&(this._samplingModeDirty=!0,e.samplingMode=9984);const t=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES),r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(t,o.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,o._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const e=this._context.gl,t=this._descriptor;this._samplingModeDirty&&(o._applySamplingMode(e,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(o._applyWrapMode(e,t),this._wrapModeDirty=!1)}static _validateTexture(e,t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!");const r=Object(i.h)(t.width)&&Object(i.h)(t.height);Object(s.a)(e.gl)||r||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(e,t){let r=t.samplingMode,i=t.samplingMode;9985===r||9987===r?(r=9729,t.hasMipmap||(i=9729)):9984!==r&&9986!==r||(r=9728,t.hasMipmap||(i=9728)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i)}static _applyWrapMode(e,t){"number"==typeof t.wrapMode?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode.t))}static _applyAnisotropicFilteringParameters(e,t){var r;const i=e.capabilities.textureFilterAnisotropic;if(!i)return;const a=e.gl;a.texParameterf(a.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY,null!=(r=t.maxAnisotropy)?r:1)}}o.TEXTURE_UNIT_FOR_UPDATES=0,t.a=o},511:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));const i=33984;var a;!function(e){e[e.Texture=0]="Texture",e[e.Buffer=1]="Buffer",e[e.VAO=2]="VAO",e[e.Program=3]="Program",e[e.Framebuffer=4]="Framebuffer",e[e.Renderbuffer=5]="Renderbuffer",e[e.COUNT=6]="COUNT"}(a||(a={}))},580:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var i=r(610);function a(e){let t="";for(const r in e){const i=e[r];if("boolean"==typeof i)i&&(t+=`#define ${r}\n`);else if("number"==typeof i)t+=`#define ${r} ${i.toFixed()}\n`;else if("object"==typeof i){const e=i.options;let a=0;for(const r in e)t+=`#define ${e[r]} ${(a++).toFixed()}\n`;t+=`#define ${r} ${e[i.value]}\n`}}return t}function n(e,t,r,a){r=r||{},a=a||"";const n="function"==typeof t.shaders?t.shaders(r):t.shaders;return new i.a(e,a+n.vertexShader,a+n.fragmentShader,t.attributes)}},586:function(e,t,r){"use strict";t.a=function(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}},676:function(e,t,r){"use strict";var i=r(580);t.a=class{constructor(e){this._programCacheByTemplate=new Map,this._rctx=e}dispose(){this._programCacheByTemplate.forEach(e=>e.programs.forEach(e=>e.dispose())),this._programCacheByTemplate=null}getProgram(e,t){return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,t=>Object(i.a)(this._rctx,e,t)),this.getProgramTemplateInstance(e,t)}addProgramTemplate(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})}getProgramTemplateInstance(e,t){const r=this._programCacheByTemplate.get(e);if(r){const e=t?JSON.stringify(t):"default";if(!r.programs.has(e)){const i=r.constructor(t);r.programs.set(e,i)}return r.programs.get(e)}return null}}},677:function(e,t,r){"use strict";t.a=class{constructor(e){this.readFile=e}resolveIncludes(e){return this.resolve(e)}resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this.read(e);if(!r)throw new Error("cannot find shader file "+e);const i=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let a=i.exec(r);const n=[];for(;null!=a;)n.push({path:a[1],start:a.index,length:a[0].length}),a=i.exec(r);let s=0,o="";return n.forEach(e=>{o+=r.slice(s,e.start),o+=t.has(e.path)?"":this.resolve(e.path,t),s=e.start+e.length}),o+=r.slice(s),t.set(e,o),o}read(e){return this.readFile(e)}}},887:function(e,t,r){"use strict";r.r(t);var i=r(515);r.d(t,"BufferObject",(function(){return i.a}));var a=r(513);r.d(t,"FramebufferObject",(function(){return a.a}));var n=r(610);r.d(t,"Program",(function(){return n.a}));var s=r(676);r.d(t,"ProgramCache",(function(){return s.a}));var o=r(706);r.d(t,"Renderbuffer",(function(){return o.a}));var p=r(512);r.d(t,"RenderingContext",(function(){return p.a}));var h=r(677);r.d(t,"ShaderCompiler",(function(){return h.a}));var c=r(510);r.d(t,"Texture",(function(){return c.a}));var l=r(514);r.d(t,"VertexArrayObject",(function(){return l.a}));var d=r(580);r.d(t,"createProgram",(function(){return d.a})),r.d(t,"glslifyDefineMap",(function(){return d.b}));var u=r(255);r.d(t,"createContextOrErrorHTML",(function(){return u.b}))}}]);
//# sourceMappingURL=28.d67f8cd6.chunk.js.map