{"version":3,"file":"static/js/99386.67f63529.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as s}from\"tslib\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{const i=r;let n=class extends i{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],n.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],n.prototype,\"connectionStatus\",null),s([e({type:o})],n.prototype,\"filter\",void 0),n=s([t(\"esri.views.layers.StreamLayerView\")],n),n};export{r as StreamLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import{isNumber as c}from\"../../../support/guards.js\";import l from\"./FeatureLayerView2D.js\";import{handleNoEngineError as h}from\"./support/handleNoEngineError.js\";import{StreamLayerView as p}from\"../../layers/StreamLayerView.js\";let u=class extends(p(l)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([n(()=>this.layer.customParameters,async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)}),this.layer.on(\"send-message-to-socket\",async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)}),this.layer.on(\"send-message-to-client\",async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()}),n(()=>this.layer.purgeOptions,()=>this._update()),n(()=>this.suspended,this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map(e=>this.on(e,r)));const n=[\"data-received\",\"message-received\"].includes(e);n&&this.getWorker().then(r=>r.streamMessenger.enableEvent(e,!0));const o=super.on(e,r),i=this;return s(()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then(r=>r.streamMessenger.enableEvent(e,!1)))})}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return h(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then(e=>{const r=a.fromJSON(e);return r.features.forEach(e=>{e.layer=this.layer,e.sourceLayer=this.layer,e.origin=this.layer.graphicOrigin}),r}),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}async queryObjectIds(e,r){return(await super.queryObjectIds(e,r)).filter(c)}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){null==this._refreshInterval&&(this._refreshInterval=setInterval(()=>this.incrementSourceRefreshVersion(),this.layer.updateInterval))}_doDisconnect(){this.getWorker().then(e=>e.streamMessenger.disconnect()),this._doPause()}_doConnect(){this.getWorker().then(e=>e.streamMessenger.connect()),this.resume()}_doClear(){this.getWorker().then(e=>e.streamMessenger.clear()),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([o()],u.prototype,\"pipelineConnectionStatus\",void 0),e([o()],u.prototype,\"pipelineErrorString\",void 0),e([o({readOnly:!0})],u.prototype,\"connectionError\",null),e([o({readOnly:!0})],u.prototype,\"_streamConnectionStatus\",null),u=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],u);const d=u;export{d as default};\n"],"names":["r","i","n","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","disconnect","_doDisconnect","connect","_doConnect","clear","_doClear","constructor","s","super","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","e","prototype","readOnly","type","o","t","u","p","l","arguments","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","layer","customParameters","async","getWorker","streamMessenger","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","incrementSourceRefreshVersion","purgeOptions","_update","bind","destroy","connectionError","Array","isArray","map","includes","then","enableEvent","remove","_workerProxy","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","h","features","executeQueryForLatestObservations","_cleanUpQuery","a","fromJSON","forEach","sourceLayer","origin","graphicOrigin","detach","queryObjectIds","c","_refreshInterval","clearInterval","setInterval","updateInterval","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","d"],"sourceRoot":""}