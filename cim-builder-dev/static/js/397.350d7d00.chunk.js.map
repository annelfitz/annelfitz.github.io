{"version":3,"file":"static/js/397.350d7d00.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r}from\"../../../core/handleUtils.js\";import{isNone as s,isSome as i}from\"../../../core/maybe.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../rest/support/FeatureSet.js\";import c from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as l}from\"./support/util.js\";function u(e,t){if(s(e)&&s(t))return null;const r={};return i(t)&&(r.geometry=t.toJSON()),i(e)&&(r.where=e),r}let y=class extends c{constructor(){super(...arguments),this._enabledEventTypes=new Set,this._isUserPaused=!1,this.errorString=null,this.connectionStatus=\"disconnected\"}initialize(){this.handles.add([this.layer?.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer?.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),o((()=>this.layer?.purgeOptions),(()=>this._update())),o((()=>this.suspended),(e=>{e?this._proxy.pauseStream():this._isUserPaused||this._proxy.resumeStream()}))])}get connectionError(){if(this.errorString)return new t(\"stream-controller\",this.errorString)}pause(){this._isUserPaused=!0,this._proxy.pauseStream()}resume(){this._isUserPaused=!1,this._proxy.resumeStream()}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const s=[\"data-received\",\"message-received\"].includes(e);s&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const i=super.on(e,t),o=this;return{remove(){i.remove(),s&&(o._proxy.closed||o.hasEventListener(e)||o._proxy.enableEvent(e,!1))}}}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=p.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.connectionStatus=\"disconnected\"}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(u(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=l(e.geometryType),i=e.timeInfo&&e.timeInfo.toJSON()||null,o=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",fields:r,geometryType:s,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:u(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:o,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([n()],y.prototype,\"errorString\",void 0),e([n({readOnly:!0})],y.prototype,\"connectionError\",null),e([n()],y.prototype,\"connectionStatus\",void 0),y=e([a(\"esri.views.2d.layers.StreamLayerView2D\")],y);const m=y;export{m as default};\n"],"names":["u","e","t","s","r","i","geometry","toJSON","where","y","c","constructor","super","arguments","this","_enabledEventTypes","Set","_isUserPaused","errorString","connectionStatus","initialize","handles","add","layer","on","_proxy","sendMessageToSocket","sendMessageToClient","o","purgeOptions","_update","suspended","pauseStream","resumeStream","connectionError","pause","resume","Array","isArray","map","includes","enableEvent","remove","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","_cleanUpQuery","then","p","features","forEach","sourceLayer","detach","_createClientOptions","setProperty","set","propertyName","value","_createTileRendererHash","JSON","stringify","definitionExpression","geometryDefinition","objectIdField","fields","l","geometryType","spatialReference","type","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","customParameters","n","prototype","readOnly","a","m"],"sourceRoot":""}