{"version":3,"file":"static/js/78532.fd6fc788.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/analysis/Viewshed.js","../node_modules/@arcgis/core/analysis/ViewshedAnalysis.js","../node_modules/@arcgis/core/layers/ViewshedLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{featureReferenceEquals as r,featureReferenceProperty as o}from\"./featureReferenceUtils.js\";import{Clonable as i}from\"../core/Clonable.js\";import{cyclicalDegrees as t}from\"../core/Cyclical.js\";import{JSONSupportMixin as s}from\"../core/JSONSupport.js\";import{equalsMaybe as a}from\"../core/maybe.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{cast as n}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as m}from\"../core/accessorSupport/ensureType.js\";import c from\"../geometry/Point.js\";let u=class extends(s(i)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}get valid(){return null!=this.observer&&this.farDistance>0}equals(e){return a(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&r(this.feature,e.feature)}};e([l({type:c,json:{write:{isRequired:!0}}})],u.prototype,\"observer\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],u.prototype,\"farDistance\",void 0),e([l({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),n(e=>t.normalize(m(e),void 0,!0))],u.prototype,\"heading\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"tilt\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],u.prototype,\"horizontalFieldOfView\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"verticalFieldOfView\",void 0),e([l(o)],u.prototype,\"feature\",void 0),e([l({readOnly:!0,json:{read:!1}})],u.prototype,\"valid\",null),u=e([p(\"esri.analysis.Viewshed\")],u);export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"./Analysis.js\";import r from\"./Viewshed.js\";import{equals as s}from\"../core/arrayUtils.js\";import n from\"../core/Collection.js\";import{referenceSetter as i,castForReferenceSetter as o}from\"../core/collectionUtils.js\";import{cyclicalDegrees as l}from\"../core/Cyclical.js\";import{deg2rad as a,clamp as p}from\"../core/mathUtils.js\";import{watch as u,syncAndInitial as c}from\"../core/reactiveUtils.js\";import{property as m}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import d from\"../geometry/Extent.js\";import{projectOrLoadMany as f}from\"../geometry/projectionUtils.js\";const v=n.ofType(r);let y=class extends t{constructor(e){super(e),this.type=\"viewshed\",this._extent=null}initialize(){this.addHandles(u(()=>this._computeExtent(),e=>{null==e.pending&&(this._extent=e.extent)},c))}get viewsheds(){return this._get(\"viewsheds\")||new v}set viewsheds(e){this._set(\"viewsheds\",i(e,this.viewsheds,v))}get spatialReference(){for(const e of this.viewsheds)if(null!=e.observer)return e.observer.spatialReference;return null}get extent(){return this._extent}get valid(){return this.viewsheds.every(e=>e.valid)}async waitComputeExtent(){const e=this._computeExtent();null!=e.pending&&await e.pending}_computeExtent(){const{spatialReference:e}=this;if(null==e)return{pending:null,extent:null};const t=this.viewsheds.filter(e=>null!=e.observer),r=t.map(e=>e.observer).toArray(),s=f(r,e);if(null!=s.pending)return{pending:s.pending,extent:null};return{pending:null,extent:s.geometries.map((e,r)=>{const s=t.at(r);return null!=e&&null!=s?this._computeViewshedExtent(this.viewsheds.at(r),e):null}).filter(e=>null!=e).reduce((e,t)=>x(e,t),null)}}_computeViewshedExtent(e,t){const{farDistance:r,heading:s,tilt:n,horizontalFieldOfView:i,verticalFieldOfView:o}=e,{spatialReference:u}=t,c=i/2,m=o/2,h=r/u.metersPerUnit,f=[l.normalize(s-c),s,l.normalize(s+c)],v=d.fromPoint(t),y=e=>{const t=f.map(t=>l.normalize(t-e));if(t[0]>t[2]||360===i)return h;const r=t.map(e=>Math.abs(e>180?360-e:e)).reduce((e,t)=>e>t?t:e);return r>90?0:h*Math.cos(a(r))};v.xmax+=y(90),v.xmin-=y(-90),v.ymax+=y(0),v.ymin-=y(180);const x=t.z;if(null!=x){let e=x,t=x;const s=n-90,i=p(s+m,-90,90),o=p(s-m,-90,90),l=u?.isGeographic?r:h;e+=l*g(i),t+=l*g(o);const a=w(m)*l,d=g(s)*a*(1-w(c));n<90&&(e-=d),n>90&&(t-=d),v.zmax=Math.max(e,x),v.zmin=Math.min(t,x)}return v}equals(e){return this===e||super.equals(e)&&s(this.viewsheds.toArray(),e.viewsheds.toArray(),(e,t)=>e.equals(t))}clear(){this.viewsheds.removeAll()}};function x(e,t){return null==e?t:null==t?e:e.union(t)}function w(e){return Math.cos(a(e))}function g(e){return Math.sin(a(e))}e([m({type:[\"viewshed\"]})],y.prototype,\"type\",void 0),e([m({cast:o,type:v,nonNullable:!0})],y.prototype,\"viewsheds\",null),e([m({readOnly:!0})],y.prototype,\"spatialReference\",null),e([m()],y.prototype,\"_extent\",void 0),e([m()],y.prototype,\"extent\",null),e([m({readOnly:!0})],y.prototype,\"valid\",null),y=e([h(\"esri.analysis.ViewshedAnalysis\")],y);export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../analysis/Viewshed.js\";import s from\"../analysis/ViewshedAnalysis.js\";import t from\"../core/Collection.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{watch as i,syncAndInitial as a}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as l}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{OperationalLayer as d}from\"./mixins/OperationalLayer.js\";let y=class extends(d(o(c))){constructor(e){super(e),this.type=\"viewshed\",this.operationalLayerType=\"ViewshedLayer\",this.source=new s,this.opacity=1}initialize(){this.addHandles(i(()=>this.source,(e,r)=>{null!=r&&r.parent===this&&(r.parent=null),null!=e&&(e.parent=this)},a))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new s)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,r,s,t){r.viewsheds=e.filter(e=>e.valid).toJSON(t)}};e([p({json:{read:!1},readOnly:!0})],y.prototype,\"type\",void 0),e([p({type:[\"ViewshedLayer\"]})],y.prototype,\"operationalLayerType\",void 0),e([p({type:s,nonNullable:!0})],y.prototype,\"source\",void 0),e([p({readOnly:!0})],y.prototype,\"spatialReference\",null),e([p({readOnly:!0})],y.prototype,\"fullExtent\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],y.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],y.prototype,\"listMode\",void 0),e([p({type:t.ofType(r),json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{ignoreOrigin:!0}}}}})],y.prototype,\"viewsheds\",null),e([l(\"web-scene\",\"viewsheds\")],y.prototype,\"writeViewsheds\",null),y=e([n(\"esri.layers.ViewshedLayer\")],y);const u=y;export{u as default};\n"],"names":["u","s","i","constructor","e","super","this","observer","farDistance","heading","tilt","horizontalFieldOfView","verticalFieldOfView","feature","valid","equals","a","r","l","type","c","json","write","isRequired","prototype","Number","nonNullable","range","min","n","t","normalize","m","max","o","readOnly","read","p","v","ofType","y","_extent","initialize","addHandles","_computeExtent","pending","extent","viewsheds","_get","_set","spatialReference","every","waitComputeExtent","filter","map","toArray","f","geometries","at","_computeViewshedExtent","reduce","union","x","h","metersPerUnit","d","fromPoint","Math","abs","cos","xmax","xmin","ymax","ymin","z","isGeographic","g","w","zmax","zmin","clear","removeAll","sin","cast","operationalLayerType","source","opacity","parent","load","addResolvingPromise","fullExtent","releaseAnalysis","analysis","writeViewsheds","toJSON","origins","service","ignoreOrigin"],"sourceRoot":""}