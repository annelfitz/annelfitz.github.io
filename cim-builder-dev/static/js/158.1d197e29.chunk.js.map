{"version":3,"sources":["../node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js"],"names":["i","l","async","n","size","s","maxSize","c","node","m","opacity","r","y","cimOptions","feature","d","fieldMap","h","geometryType","p","style","u","g","e","f","Math","min","t","clone","a","preserveOutlineWidth","M","data","symbol","type","b","rasterizeCIMSymbolAsync","scaleFactor","w","document","createElement","width","imageData","height","getContext","putImageData","C","D","scale","ceil","I","Image","src","toDataURL","appendChild"],"mappings":"0GAAA,6EAImM,MAAMA,EAAE,IAJ3M,OAI+MC,GAAE,MAAK,GAAUC,eAAeC,EAAEF,EAAEE,EAAE,IAAI,MAAMC,KAAKC,EAAEC,QAAQC,EAAEC,KAAKC,EAAEC,QAAQC,GAAGR,EAAES,EAAET,EAAEU,YAAYV,GAAGW,QAAQC,EAAEC,SAASC,EAAEC,aAAaC,EAAEC,MAAMC,GAAGT,EAAEU,EAAEC,YAAEtB,GAAGuB,EAAEC,KAAKC,IAAI,MAAMrB,EAAEA,EAAEiB,EAAE,MAAMf,EAAEA,EAAEoB,YAAlL,MAAwLH,IAAIF,IAAIrB,EAAEA,EAAE2B,QAAQC,YAAE5B,EAAEuB,EAAE,CAACM,sBAAqB,KAAM,IAAIC,EAAE,EAAE9B,GAAGA,EAAE+B,MAAM/B,EAAE+B,KAAKC,QAAQ,mBAAmBhC,EAAE+B,KAAKC,OAAOC,OAAOH,EAAE,GAAG,MAAMI,QAAQnC,EAAEoC,wBAAwBnC,EAAEc,EAAEE,EAAEE,EAAE,CAACkB,YAAYN,EAAEX,MAAMC,IAAIiB,EAAEC,SAASC,cAAc,UAAUF,EAAEG,MAAMN,EAAEO,UAAUD,MAAMH,EAAEK,OAAOR,EAAEO,UAAUC,OAAOL,EAAEM,WAAW,MAAMC,aAAaV,EAAEO,UAAU,EAAE,GAAG,IAAII,EAAER,EAAEG,MAAMV,EAAEgB,EAAET,EAAEK,OAAOZ,EAAE,GAAG,MAAM1B,IAAI,OAAO,MAAMF,OAAE,EAAOA,EAAE6C,SAAS,MAAM7C,OAAE,EAAOA,EAAE6C,QAAQ,CAAC,MAAMrB,EAAEmB,EAAEC,EAAED,EAAEnB,GAAG,EAAEF,KAAKwB,KAAKzB,EAAEG,GAAGH,EAAEuB,EAAEpB,GAAG,EAAEH,EAAEC,KAAKwB,KAAKzB,EAAEG,GAAG,MAAMuB,EAAE,IAAIC,MAAML,EAAEC,GAAG,OAAOG,EAAEE,IAAId,EAAEe,YAAY,MAAM1C,IAAIuC,EAAE9B,MAAMV,QAAS,GAAEC,GAAKF,GAAGA,EAAE6C,YAAYJ,GAAGA","file":"static/js/158.1d197e29.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{px2pt as t}from\"../../core/screenUtils.js\";import{getCIMSymbolSize as e,scaleCIMSymbolTo as a}from\"./cimSymbolUtils.js\";import{CIMSymbolRasterizer as l}from\"../cim/CIMSymbolRasterizer.js\";const i=new l(null,!0),o=120;async function n(l,n={}){const{size:s,maxSize:c,node:m,opacity:r}=n,y=n.cimOptions||n,{feature:d,fieldMap:h,geometryType:p,style:u}=y,g=e(l),f=Math.min(null!=s?s:g,null!=c?c:t(o));f!==g&&(l=l.clone(),a(l,f,{preserveOutlineWidth:!0}));let M=3;l&&l.data&&l.data.symbol&&\"CIMPointSymbol\"!==l.data.symbol.type&&(M=1);const b=await i.rasterizeCIMSymbolAsync(l,d,h,p,{scaleFactor:M,style:u}),w=document.createElement(\"canvas\");w.width=b.imageData.width,w.height=b.imageData.height;w.getContext(\"2d\").putImageData(b.imageData,0,0);let C=w.width/M,D=w.height/M;if(null!=s&&(null==(null==n?void 0:n.scale)||(null==n?void 0:n.scale))){const t=C/D;C=t<=1?Math.ceil(f*t):f,D=t<=1?f:Math.ceil(f/t)}const I=new Image(C,D);return I.src=w.toDataURL(),null!=r&&(I.style.opacity=`${r}`),m&&m.appendChild(I),I}export{n as previewCIMSymbol};\n"],"sourceRoot":""}