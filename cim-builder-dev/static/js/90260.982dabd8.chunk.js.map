{"version":3,"file":"static/js/90260.982dabd8.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/layers/support/schemaValidatorLoader.js","../node_modules/@arcgis/core/layers/mixins/SceneService.js","../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js","../node_modules/@arcgis/core/portal/support/jsonContext.js","../node_modules/@arcgis/core/portal/support/resourceUtils.js","../node_modules/@arcgis/core/webdoc/support/resourceUtils.js","../node_modules/@arcgis/core/webdoc/support/saveUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i?.writtenProperties&&i.writtenProperties.forEach(({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)})}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nlet n=null;function t(t){n=t}function u(){return n}export{u as getLoader,t as registerLoader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{debounce as i}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{reader as a}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{updateOrigins as l}from\"../../core/accessorSupport/originUtils.js\";import p from\"../../geometry/Extent.js\";import c from\"../../geometry/HeightModelInfo.js\";import d from\"../../geometry/SpatialReference.js\";import{titleFromUrlAndName as u,parse as m,cleanTitle as h}from\"../support/arcgisLayerUrl.js\";import{id as y}from\"../support/commonProperties.js\";import{fetchIndexInfo as f}from\"../support/I3SIndexInfo.js\";import{urlProperty as v,normalizeParsedUrlObject as S}from\"../support/multiLayerServiceUtils.js\";import{getLoader as g}from\"../support/schemaValidatorLoader.js\";import w from\"../../portal/Portal.js\";import x from\"../../portal/PortalItem.js\";import{createForItemWrite as I}from\"../../portal/support/jsonContext.js\";import{saveResources as j,updateItemWithResources as b}from\"../../webdoc/support/resourceUtils.js\";import{evaluateWriteErrors as N}from\"../../webdoc/support/saveUtils.js\";const _=_=>{const U=_;let P=class extends U{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.copyright=null,this.sublayerTitleMode=\"item-title\",this.title=null,this.layerId=null,this.url=null,this.indexInfo=null,this._debouncedSaveOperations=i(async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}})}readSpatialReference(e,t){return L(t)}readFullExtent(e,t,r){if(null!=e&&\"object\"==typeof e){const o=null==e.spatialReference?{...e,spatialReference:L(t)}:e;return p.fromJSON(o,r)}const o=t.store,i=L(t);return null==i||null==o?.extent||!Array.isArray(o.extent)||o.extent.some(e=>e<R)?null:new p({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}parseVersionString(e){const t={major:Number.NaN,minor:Number.NaN,versionString:e},r=e.split(\".\");return r.length>=2&&(t.major=parseInt(r[0],10),t.minor=parseInt(r[1],10)),t}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():\"\";return this.parseVersionString(o)}readTitlePortalItem(e){return\"item-title\"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem?.title;if(\"item-title\"===this.sublayerTitleMode)return this.url?u(this.url,t.name):t.name;let o=t.name;if(!o&&this.url){const e=m(this.url);null!=e&&(o=e.title)}return\"item-title-and-service-name\"===this.sublayerTitleMode&&r&&(o=r+\" - \"+o),h(o)}get parsedUrl(){return S(this,{separator:\"layers\"})}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=f(this.parsedUrl?.path??\"\",this.rootNode,e,this.customParameters,this.apiKey,o.getLogger(this),t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if(\"page\"===e?.type){const t=e.rootIndex%e.pageSize,o=e.rootPage?.nodes?.[t];if(null==o?.obb?.center||null==o.obb.halfSize)throw new r(\"sceneservice:invalid-node-page\",\"Invalid node page.\");if(o.obb.center[0]<R||null==this.fullExtent||this.fullExtent.hasZ)return;const i=o.obb.halfSize,s=o.obb.center[2],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this.fullExtent.zmin=s-a,this.fullExtent.zmax=s+a}else if(\"node\"===e?.type){const t=e.rootNode?.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<R)return;const r=t[2],o=t[3],{fullExtent:i}=this;i&&(i.zmin=r-o,i.zmax=r+o)}}async _fetchService(e){if(null==this.url)throw new r(\"sceneservice:url-not-set\",\"Scene service can not be loaded without valid portal item or url\");if(null==this.layerId&&/SceneServer\\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await t(this.url??\"\",{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await t(this.parsedUrl?.path??\"\",{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e});r.ssl&&this.url&&(this.url=this.url.replace(/^http:/i,\"https:\"));let o=!1;if(r.data.layerType&&\"Voxel\"===r.data.layerType&&(o=!0),o)return this._fetchVoxelServiceLayer();const i=r.data;this.read(i,this._getServiceContext()),this.validateLayer(i)}async _fetchVoxelServiceLayer(e){const r=(await t(this.parsedUrl?.path+\"/layer\",{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(r,this._getServiceContext()),this.validateLayer(r)}_getServiceContext(){return{origin:\"service\",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}}async _ensureLoadBeforeSave(){await this.load(),\"beforeSave\"in this&&\"function\"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}async _saveAs(e,t){const o={...T,...t};let i=x.from(e);if(!i)throw new r(\"sceneservice:portal-item-required\",\"_saveAs() requires a portal item to save to\");i.id&&(i=i.clone(),i.id=null);const s=i.portal||w.getDefault();await this._ensureLoadBeforeSave(),i.type=O,i.portal=s;const a=I(i,\"portal-item\",!0),n={layers:[this.write({},a)]};return await Promise.all(a.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(n,a,o),this.url&&(i.url=this.url),i.title||(i.title=this.title),E(i,o,1),await s.signIn(),await s.user.addItem({item:i,folder:o?.folder,data:n}),await j(this.resourceReferences,a),this.portalItem=i,l(a),a.portalItem=i,i}async _save(e){const t={...T,...e};if(!this.portalItem)throw new r(\"sceneservice:portal-item-not-set\",\"Portal item to save to has not been set on this SceneService\");if(this.portalItem.type!==O)throw new r(\"sceneservice:portal-item-wrong-type\",`Portal item needs to have type \"${O}\"`);await this._ensureLoadBeforeSave();const o=I(this.portalItem,\"portal-item\",!0),i={layers:[this.write({},o)]};return await Promise.all(o.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(i,o,t),this.url&&(this.portalItem.url=this.url),this.portalItem.title||(this.portalItem.title=this.title),E(this.portalItem,t,0),await b(this.portalItem,i,this.resourceReferences,o),l(o),this.portalItem}async _validateAgainstJSONSchema(e,t,i){const s=i?.validationOptions;N(t,{errorName:\"sceneservice:save\"},{ignoreUnsupported:s?.ignoreUnsupported,supplementalUnsupportedErrors:[\"scenemodification:unsupported\"]});const a=s?.enabled,n=g();if(a&&n){const t=(await n()).validate(e,i.portalItemLayerType);if(!t.length)return;const a=`Layer item did not validate:\\n${t.join(\"\\n\")}`;if(o.getLogger(this).error(`_validateAgainstJSONSchema(): ${a}`),\"throw\"===s.failPolicy){const e=t.map(e=>new r(\"sceneservice:schema-validation\",e));throw new r(\"sceneservice-validate:error\",\"Failed to save layer item due to schema validation, see `details.errors`.\",{validationErrors:e})}}}};return e([s(y)],P.prototype,\"id\",void 0),e([s({type:d})],P.prototype,\"spatialReference\",void 0),e([a(\"spatialReference\",[\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],P.prototype,\"readSpatialReference\",null),e([s({type:p})],P.prototype,\"fullExtent\",void 0),e([a(\"fullExtent\",[\"fullExtent\",\"store.extent\",\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],P.prototype,\"readFullExtent\",null),e([s({readOnly:!0,type:c})],P.prototype,\"heightModelInfo\",void 0),e([s({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:{source:\"minScale\"},write:!1}}}})],P.prototype,\"minScale\",void 0),e([s({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:{source:\"maxScale\"},write:!1}}}})],P.prototype,\"maxScale\",void 0),e([s({readOnly:!0})],P.prototype,\"version\",void 0),e([a(\"version\",[\"store.version\"])],P.prototype,\"readVersion\",null),e([s({type:String,json:{read:{source:\"copyrightText\"}}})],P.prototype,\"copyright\",void 0),e([s({type:String,json:{read:!1}})],P.prototype,\"sublayerTitleMode\",void 0),e([s({type:String})],P.prototype,\"title\",void 0),e([a(\"portal-item\",\"title\")],P.prototype,\"readTitlePortalItem\",null),e([a(\"service\",\"title\",[\"name\"])],P.prototype,\"readTitleService\",null),e([s({type:Number,json:{origins:{service:{read:{source:\"id\"}},\"portal-item\":{write:{target:\"id\",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],P.prototype,\"layerId\",void 0),e([s(v({separator:\"layers\"}))],P.prototype,\"url\",void 0),e([s({readOnly:!0})],P.prototype,\"parsedUrl\",null),e([s({readOnly:!0})],P.prototype,\"store\",void 0),e([s({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],P.prototype,\"rootNode\",void 0),P=e([n(\"esri.layers.mixins.SceneService\")],P),P},R=-1e38;function L(e){if(null!=e.spatialReference)return d.fromJSON(e.spatialReference);const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.slice(r.lastIndexOf(\"/\")+1),10);return null!=o?new d(o):null}function E(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((e,t,r)=>r.indexOf(e)===t),1===r&&(e.typeKeywords=e.typeKeywords.filter(e=>\"Hosted Service\"!==e)))}const O=\"Scene Service\",T={getTypeKeywords:()=>[],portalItemLayerType:\"unknown\",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:\"throw\"}};export{_ as SceneService,O as sceneServiceItemType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";async function r(r,n,t,s,a,i,l){let d=null;if(null!=t){const o=`${r}/nodepages/`,n=o+Math.floor(t.rootIndex/t.nodesPerPage);try{return{type:\"page\",rootPage:(await e(n,{query:{f:\"json\",...s,token:a},responseType:\"json\",signal:l})).data,rootIndex:t.rootIndex,pageSize:t.nodesPerPage,lodMetric:t.lodSelectionMetricType,urlPrefix:o}}catch(g){null!=i&&i.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",n,g),d=g}}if(!n)return null;const p=n?.split(\"/\").pop(),c=`${r}/nodes/`,u=c+p;try{return{type:\"node\",rootNode:(await e(u,{query:{f:\"json\",...s,token:a},responseType:\"json\",signal:l})).data,urlPrefix:c}}catch(g){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:d,nodeError:g,url:u})}}export{r as fetchIndexInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{urlToObject as t}from\"../../core/urlUtils.js\";import r from\"../Portal.js\";function e(t,r){return{...l(t,r),readResourcePaths:[]}}function o(r,e,o){const i=t(r.itemUrl);return{...l(r,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:i?{rootPath:i.path,writtenUrls:[]}:null,resources:o?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function l(e,o){return{origin:o,url:t(e.itemUrl),portal:e.portal||r.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{join as r,getPathExtension as s}from\"../../core/urlUtils.js\";async function o(e,t={},s){await e.load(s);const o=r(e.itemUrl,\"resources\"),{start:a=1,num:n=10,sortOrder:c=\"asc\",sortField:l=\"resource\"}=t,i={query:{start:a,num:n,sortOrder:c,sortField:l,token:e.apiKey},signal:s?.signal},u=await e.portal.request(o,i);return{total:u.total,nextStart:u.nextStart,resources:u.resources.map(({created:t,size:r,resource:s})=>({created:new Date(t),size:r,resource:e.resourceFromPath(s)}))}}async function a(e,s,o,a){const n=new Map;for(const{resource:r,content:i,compress:u,access:p}of s){if(!r.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const[e,s]=l(r.path),a=`${e}/${u??\"\"}/${p??\"\"}`;n.has(a)||n.set(a,{prefix:e,compress:u,access:p,files:[]});n.get(a).files.push({fileName:s,content:i})}await e.load(a);const c=r(e.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\");for(const{prefix:t,compress:r,access:l,files:i}of n.values()){const s=25;for(let o=0;o<i.length;o+=s){const n=i.slice(o,o+s),u=new FormData;t&&\".\"!==t&&u.append(\"resourcesPrefix\",t),r&&u.append(\"compress\",\"true\"),l&&u.append(\"access\",l);let p=0;for(const{fileName:e,content:t}of n)u.append(\"file\"+ ++p,t,e);u.append(\"f\",\"json\"),await e.portal.request(c,{method:\"post\",body:u,signal:a?.signal})}}}async function n(e,s,o){if(!s.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const a=r(e.userItemUrl,\"removeResources\");await e.portal.request(a,{method:\"post\",query:{resource:s.path},signal:o?.signal}),s.portalItem=null}async function c(e,t){await e.load(t);const s=r(e.userItemUrl,\"removeResources\");return e.portal.request(s,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function i(e){const[t,r]=u(e),[s,o]=l(t);return[s,o,r]}function u(e){const t=s(e);return null==t?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(\"blob\"===t.type)return t.blob;if(\"json\"===t.type)return new Blob([t.jsonString],{type:\"application/json\"});return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}function m(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}export{a as addOrUpdateResources,p as contentToBlob,o as fetchResources,f as getSiblingOfSameType,m as getSiblingOfSameTypeI,c as removeAllResources,n as removeResource,i as splitPrefixFileNameAndExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{allSettledErrors as t,throwIfAborted as r,eachAlways as o}from\"../../core/promiseUtils.js\";import{generateUUID as s}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as a,contentToBlob as c}from\"../../portal/support/resourceUtils.js\";async function p(e,t,r){const o=await u(e,t,r);await h(o,t,r)}async function n(e,t,r,o,s){const a=await u(r,o,s);await e.update({data:t}),await h(a,o,s)}async function u(o,p,n){if(!p?.resources)return;const u=p.portalItem===o.portalItem?new Set(o.paths):new Set;o.paths.length=0,o.portalItem=p.portalItem;const h=new Set(p.resources.toKeep.map(e=>e.resource.path)),i=new Set,m=[];h.forEach(e=>{u.delete(e),o.paths.push(e)});const f=[],l=[],w=[];for(const e of p.resources.toUpdate)if(u.delete(e.resource.path),h.has(e.resource.path)||i.has(e.resource.path)){const{resource:t,content:r,finish:p}=e,n=a(t,s());o.paths.push(n.path),f.push({resource:n,content:await c(r),compress:e.compress}),p&&w.push(()=>p(n))}else{o.paths.push(e.resource.path),l.push({resource:e.resource,content:await c(e.content),compress:e.compress});const t=e.finish;t&&w.push(()=>t(e.resource)),i.add(e.resource.path)}for(const e of p.resources.toAdd)if(o.paths.push(e.resource.path),u.has(e.resource.path))u.delete(e.resource.path);else{f.push({resource:e.resource,content:await c(e.content),compress:e.compress});const t=e.finish;t&&w.push(()=>t(e.resource))}if(f.length||l.length){const{addOrUpdateResources:e}=await import(\"../../portal/support/resourceUtils.js\");await e(p.portalItem,f,\"add\",n),await e(p.portalItem,l,\"update\",n)}if(w.forEach(e=>e()),0===m.length)return u;const d=await t(m);if(r(n),d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d});return u}async function h(e,t,r){if(!e||!t.portalItem)return;const s=[];for(const o of e){const e=t.portalItem.resourceFromPath(o);s.push(e.portalItem.removeResource(e,r))}await o(s)}export{p as saveResources,n as updateItemWithResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{getLayersWithChartSupport as r}from\"../../layers/support/layerUtils.js\";async function o(e){const r=[];for(const o of e.allLayers)if(\"beforeSave\"in o&&\"function\"==typeof o.beforeSave){const e=o.beforeSave();e&&r.push(e)}await Promise.allSettled(r)}const t=new Set([\"layer:unsupported\",\"property:unsupported\",\"symbol:unsupported\",\"symbol-layer:unsupported\",\"url:unsupported\"]);function s(r,o,s){let n=(r.messages??[]).filter(({type:e})=>\"error\"===e).map(({name:r,message:o,details:t})=>new e(r,o,t));if(r.blockedRelativeUrls&&(n=n.concat(r.blockedRelativeUrls.map(r=>new e(\"url:unsupported\",`Relative url '${r}' is not supported`)))),s){const{ignoreUnsupported:e,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:o}=s;e&&(n=n.filter(({name:e})=>!(t.has(e)||r.includes(e)))),o&&(n=n.filter(e=>\"web-document-write:property-required\"!==e.name))}if(n.length>0)throw new e(o.errorName,\"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:n})}function n(e){return r(e).some(e=>!!e.charts?.length)}export{o as beforeSave,s as evaluateWriteErrors,n as hasCharts};\n"],"names":["i","writtenProperties","forEach","target","propName","t","newOrigin","e","r","originOf","updateOrigin","n","u","_","U","P","constructor","super","arguments","this","spatialReference","fullExtent","heightModelInfo","minScale","maxScale","version","major","Number","NaN","minor","versionString","copyright","sublayerTitleMode","title","layerId","url","indexInfo","_debouncedSaveOperations","async","_save","_saveAs","readSpatialReference","L","readFullExtent","o","p","fromJSON","store","extent","Array","isArray","some","R","xmin","ymin","xmax","ymax","parseVersionString","split","length","parseInt","readVersion","toString","readTitlePortalItem","readTitleService","portalItem","name","m","h","parsedUrl","S","separator","_fetchIndexAndUpdateExtent","f","path","rootNode","customParameters","apiKey","getLogger","hasZ","_updateExtent","type","rootIndex","pageSize","rootPage","nodes","obb","center","halfSize","s","a","Math","sqrt","zmin","zmax","mbs","_fetchService","test","_fetchFirstLayerId","_fetchServiceLayer","query","token","responseType","signal","data","layers","id","ssl","replace","layerType","_fetchVoxelServiceLayer","read","_getServiceContext","validateLayer","origin","portal","_ensureLoadBeforeSave","load","beforeSave","T","x","from","clone","w","getDefault","O","I","write","Promise","all","resources","pendingOperations","_validateAgainstJSONSchema","E","signIn","user","addItem","item","folder","j","resourceReferences","l","b","validationOptions","N","errorName","ignoreUnsupported","supplementalUnsupportedErrors","enabled","g","validate","portalItemLayerType","join","error","failPolicy","map","validationErrors","y","prototype","d","readOnly","c","json","origins","service","source","String","isRequired","ignoreOrigin","v","indexCRS","geographicCRS","slice","lastIndexOf","typeKeywords","getTypeKeywords","push","filter","indexOf","floor","nodesPerPage","lodMetric","lodSelectionMetricType","urlPrefix","warn","pop","pageError","nodeError","readResourcePaths","itemUrl","messages","blockedRelativeUrls","verifyItemRelativeUrls","rootPath","writtenUrls","toAdd","toUpdate","toKeep","start","num","sortOrder","sortField","request","total","nextStart","created","size","resource","Date","resourceFromPath","Map","content","compress","access","hasPath","has","set","prefix","files","get","fileName","userItemUrl","values","FormData","append","method","body","deleteAll","blob","Blob","jsonString","update","Set","paths","delete","finish","add","addOrUpdateResources","errors","removeResource","allLayers","allSettled","message","details","concat","requiredPropertyChecksDisabled","includes"],"sourceRoot":""}