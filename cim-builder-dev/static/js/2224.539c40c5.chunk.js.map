{"version":3,"file":"static/js/2224.539c40c5.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/layers/save/featureLayerUtils.js","../node_modules/@arcgis/core/layers/support/fetchService.js","../node_modules/@arcgis/core/portal/support/jsonContext.js","../node_modules/@arcgis/core/portal/support/portalItemUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import a from\"../../core/Logger.js\";import{isNone as r,isSome as o}from\"../../core/maybe.js\";import{debounce as s,eachAlways as l}from\"../../core/promiseUtils.js\";import{updateOrigins as i}from\"../../core/accessorSupport/originUtils.js\";import n from\"../FeatureLayer.js\";import{parse as u}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as p}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as c,isFeatureServiceLayer as y}from\"../support/layerUtils.js\";import d from\"../../portal/Portal.js\";import m from\"../../portal/PortalItem.js\";import{createForItemWrite as f}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as w,TypeKeyword as h,getWGS84ExtentForItem as v,removeTypeKeyword as b}from\"../../portal/support/portalItemUtils.js\";const I=a.getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,a){if(a.type!==S)throw new t(\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),c(e))throw new t(\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,a){let r=e.messages.filter((({type:e})=>\"error\"===e)).map((({name:e,message:a,details:r})=>new t(e,a,r)));if(a?.ignoreUnsupported&&(r=r.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),r.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:r})}async function J(e,t,a){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const r=e.write({},t);return P(t,a),r}function N(e){const{layer:t,layerJSON:a}=e;return t.isTable?{layers:[],tables:[a]}:{layers:[a],tables:[]}}function O(e){w(e,h.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,a)=>a.indexOf(e)===t)))}function E(e){const a=e.portalItem;if(!a)throw I.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!a.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,a)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url)?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:a,customParameters:r,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:a,customParameters:r,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,a){var r,o;e||(e={}),(r=e).layers||(r.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:u}=await p(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,a),y=A(e.tables,n.tables,a);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=u?[...u.layers,...u.tables]:[];return await U(e,d,s,m),e}function A(t,a,r){const o=e(t,a,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!r.includes(e)))}}async function U(e,t,a,o){const s=t.map((({id:e})=>new n({url:a,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await l(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:a,loaded:o,defaultPopupTemplate:s}=t;if(!o||r(s))return;K(t,{id:a,popupInfo:s.toJSON()},e)}))}function K(e,t,a){e.isTable?F(a.tables,t):F(a.layers,t)}function F(e,t){const a=e.findIndex((({id:e})=>e===t.id));-1===a?e.push(t):e[a]=t}function R(e){const{portalItem:t}=e;return y(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const a=e.map((e=>e.portalItem.id));if(new Set(a).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const r=e.map((e=>e.layerId));if(new Set(r).size!==r.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function _(e,t){var a,r;let o=m.from(t);return o.id&&(o=o.clone(),o.id=null),(a=o).type??(a.type=S),(r=o).portal??(r.portal=d.getDefault()),j(e,o),o}async function q(e,t){const{url:a,layerId:r,title:s,fullExtent:l,isTable:i}=e,n=u(a),p=o(n)&&\"FeatureServer\"===n.serverType;t.url=p?a:`${a}/${r}`,t.title||(t.title=s),t.extent=null,!i&&o(l)&&(t.extent=await v(l)),b(t,h.METADATA),b(t,h.MULTI_LAYER),w(t,h.SINGLE_LAYER),i&&w(t,h.TABLE),O(t)}async function z(e,t,a){const r=e.portal;await r._signIn(),await r.user.addItem({item:e,data:t,folder:a?.folder})}const C=s(M);async function M(e,t){await L(e),E(e);const a=e.portalItem,r=f(a),o=await J(e,r,t),s=await T(a,[{layer:e,layerJSON:o}]);return O(a),await a.update({data:s}),i(r),a}const Y=s((async(e,t)=>{await D(e);const a=e[0].portalItem,r=f(a),o=await Promise.all(e.map((e=>J(e,r,t)))),s=await T(a,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(a),await a.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),i(r),a.clone()})),B=s(G);async function G(e,t,a){await L(e);const r=_(e,t),o=f(r),s=N({layer:e,layerJSON:await J(e,o,a)});return await q(e,r),await z(r,s,a),e.portalItem=r,i(o),r}export{C as save,Y as saveAll,B as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";async function r(e,r){let s=await a(e,r);s=s||{},s.layers=s.layers?.filter(t)||[];const n={serviceJSON:s};if(s.currentVersion<10.5)return n;const o=await a(e+\"/layers\",r);return n.layersJSON={layers:o?.layers?.filter(t)||[],tables:o?.tables||[]},n}function t(e){return!e.type||\"Feature Layer\"===e.type}async function a(r,t){return(await e(r,{responseType:\"json\",query:{f:\"json\",...t?.customParameters,token:t?.apiKey}})).data}export{r as fetchFeatureService,a as fetchService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{urlToObject as r}from\"../../core/urlUtils.js\";import t from\"../Portal.js\";function e(e){return{origin:\"portal-item\",url:r(e.itemUrl),portal:e.portal||t.getDefault(),portalItem:e,readResourcePaths:[]}}function o(e){return{origin:\"portal-item\",messages:[],writtenProperties:[],url:e.itemUrl?r(e.itemUrl):null,portal:e.portal||t.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{initializeProjection as e,project as t}from\"../../geometry/projection.js\";import r from\"../../geometry/SpatialReference.js\";import{webMercatorToGeographic as o}from\"../../geometry/support/webMercatorUtils.js\";async function n(n){const i=n.spatialReference;if(i.isWGS84)return n.clone();if(i.isWebMercator)return o(n);const s=r.WGS84;return await e(i,s),t(n,s)}function i(e,t){if(!s(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function s(e,t){return!!e.typeKeywords?.includes(t)}function c(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}async function a(e){const t=e.clone().normalize();let r;if(t.length>1)for(const o of t)r?o.width>r.width&&(r=o):r=o;else r=t[0];return n(r)}const f={DEVELOPER_BASEMAP:\"DeveloperBasemap\",JSAPI:\"ArcGIS API for JavaScript\",METADATA:\"Metadata\",MULTI_LAYER:\"Multilayer\",SINGLE_LAYER:\"Singlelayer\",TABLE:\"Table\"};export{f as TypeKeyword,i as addTypeKeyword,a as getWGS84ExtentForItem,s as hasTypeKeyword,c as removeTypeKeyword};\n"],"names":["i","writtenProperties","forEach","target","propName","t","newOrigin","e","r","originOf","updateOrigin","I","a","S","g","title","id","declaredClass","j","type","async","L","load","c","J","beforeSave","write","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","P","N","layer","layerJSON","isTable","layers","tables","O","w","h","typeKeywords","indexOf","T","test","url","customParameters","apiKey","o","s","fetchData","l","serviceJSON","n","layersJSON","u","p","A","y","itemResources","d","added","m","layerId","sourceJSON","find","loaded","defaultPopupTemplate","K","popupInfo","toJSON","U","x","$","removed","some","push","includes","F","findIndex","R","portalItem","dynamicDataSource","C","error","E","f","update","data","Y","Promise","all","Set","size","D","slice","reload","clone","B","portal","_","fullExtent","serverType","extent","v","b","q","_signIn","user","addItem","item","folder","z","currentVersion","responseType","query","token","origin","itemUrl","readResourcePaths","splice","normalize","width","spatialReference","isWGS84","isWebMercator","DEVELOPER_BASEMAP","JSAPI","METADATA","MULTI_LAYER","SINGLE_LAYER","TABLE"],"sourceRoot":""}