"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[8663],{66576:(e,t,n)=>{n.d(t,{B:()=>f});var i=n(80292),s=n(35995),o=n(71907),r=n(33397),a=n(25265),l=n(49861);function h(e){return c[function(e){return e instanceof Blob?e.type:function(e){const t=(0,s.Ml)(e);return u[t]||d}(e.url)}(e)]||p}const c={},d="text/plain",p=c[d],u={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const x in u)c[u[x]]=x;var m=n(53283);function f(e){const t=e?.origins??[void 0];return(n,o)=>{const c=function(e,t,n){if("resource"===e?.type)return function(e,t,n){const o=(0,r.Oe)(t,n);return{type:String,read:(e,t,n)=>{const i=(0,m.r)(e,t,n);return o.type===String||o.json?.type===String?i:"function"==typeof o.type?new o.type({url:i}):void 0},write:{writer(t,r,l,c){if(!c||!c.resources)return"string"==typeof t?void(r[l]=(0,m.t)(t,c)):void(r[l]=t.write({},c));const d=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),p=(0,m.t)(d,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},m.M.NO),u=o.type!==String&&(!(0,i.l)(this)||c&&c.origin&&this.originIdOf(n)>(0,a.M9)(c.origin)),f={object:this,propertyName:n,value:t,targetUrl:p,dest:r,targetPropertyName:l,context:c,params:e};c&&c.portalItem&&p&&!(0,s.YP)(p)?u?function(e){const{context:t,targetUrl:n,params:i,value:o,dest:r,targetPropertyName:a}=e;if(!t.portalItem)return;const l=t.portalItem.resourceFromPath(n),c=y(o,n,t),d=h(c),p=(0,s.Ml)(l.path),u=i?.compress??!1;d===p?(t.resources&&g({...e,resource:l,content:c,compress:u,updates:t.resources.toUpdate}),r[a]=n):_(e)}(f):function(e){let{context:t,targetUrl:n,dest:i,targetPropertyName:s}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(n),compress:!1}),i[s]=n)}(f):c&&c.portalItem&&(null==p||null!=(0,m.i)(p)||(0,s.jc)(p)||u)?_(f):r[l]=p}}}}(e,t,n);switch(e?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=m.a;return{read:e,write:t}}}}(e,n,o);for(const e of t){const t=(0,l.CJ)(n,e,o);for(const e in c)t[e]=c[e]}}}function _(e){const{targetUrl:t,params:i,value:r,context:a,dest:l,targetPropertyName:c}=e;if(!a.portalItem)return;const d=(0,m.p)(t),p=d?.filename??(0,o.D)(),u=i?.prefix??d?.prefix,f=y(r,t,a),_=(0,s.v_)(u,p),x=`${_}.${h(f)}`,v=a.portalItem.resourceFromPath(x);(0,s.jc)(t)&&a.resources&&a.resources.pendingOperations.push(async function(e){const t=(await Promise.resolve().then(n.bind(n,76200))).default,{data:i}=await t(e,{responseType:"blob"});return i}(t).then((e=>{v.path=`${_}.${h(e)}`,l[c]=v.itemRelativeUrl})).catch((()=>{})));const b=i?.compress??!1;a.resources&&g({...e,resource:v,content:f,compress:b,updates:a.resources.toAdd}),l[c]=v.itemRelativeUrl}function g(e){let{object:t,propertyName:n,updates:i,resource:s,content:o,compress:r}=e;i.push({resource:s,content:o,compress:r,finish:e=>{!function(e,t,n){"string"==typeof e[t]?e[t]=n.url:e[t].url=n.url}(t,n,e)}})}function y(e,t,n){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(n))],{type:"application/json"})}},13491:(e,t,n)=>{n.d(t,{Q:()=>a});var i=n(63780),s=n(92026),o=n(27546),r=n(36231);class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,t=arguments.length>1?arguments[1]:void 0;this._compareMinX=d,this._compareMinY=p,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),v.prune(),b.prune(),B.prune(),w.prune()}all(e){this._all(this._data,e)}search(e,t){let n=this._data;const i=this._toBBox;if(y(e,n))for(v.clear();n;){for(let s=0,o=n.children.length;s<o;s++){const o=n.children[s],r=n.leaf?i(o):o;y(e,r)&&(n.leaf?t(o):g(e,r)?this._all(o,t):v.push(o))}n=v.pop()}}collides(e){let t=this._data;const n=this._toBBox;if(!y(e,t))return!1;for(v.clear();t;){for(let i=0,s=t.children.length;i<s;i++){const s=t.children[i],o=t.leaf?n(s):s;if(y(e,o)){if(t.leaf||g(e,o))return!0;v.push(s)}}t=v.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new R([]),this}remove(e){if(!e)return this;let t,n=this._data,o=null,r=0,a=!1;const l=this._toBBox(e);for(B.clear(),w.clear();n||B.length>0;){if(n||(n=(0,s.j0)(B.pop()),o=B.data[B.length-1],r=w.pop()??0,a=!0),n.leaf&&(t=(0,i.cq)(n.children,e,n.children.length,n.indexHint),-1!==t))return n.children.splice(t,1),B.push(n),this._condense(B),this;a||n.leaf||!g(n,l)?o?(r++,n=o.children[r],a=!1):n=null:(B.push(n),w.push(r),r=0,o=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_all(e,t){let n=e;for(b.clear();n;){if(!0===n.leaf)for(const e of n.children)t(e);else b.pushArray(n.children);n=b.pop()??null}}_build(e,t,n,i){const s=n-t+1;let o=this._maxEntries;if(s<=o){const i=new R(e.slice(t,n+1));return l(i,this._toBBox),i}i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/o**(i-1)));const r=new I([]);r.height=i;const a=Math.ceil(s/o),h=a*Math.ceil(Math.sqrt(o));x(e,t,n,h,this._compareMinX);for(let l=t;l<=n;l+=h){const t=Math.min(l+h-1,n);x(e,l,t,a,this._compareMinY);for(let n=l;n<=t;n+=a){const s=Math.min(n+a-1,t);r.children.push(this._build(e,n,s,i-1))}}return l(r,this._toBBox),r}_chooseSubtree(e,t,n,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==n;){let n,i=1/0,s=1/0;for(let o=0,r=t.children.length;o<r;o++){const r=t.children[o],a=u(r),l=f(e,r)-a;l<s?(s=l,i=a<i?a:i,n=r):l===s&&a<i&&(i=a,n=r)}t=n||t.children[0]}return t}_insert(e,t,n){const i=this._toBBox,s=n?e:i(e);B.clear();const o=this._chooseSubtree(s,this._data,t,B);for(o.children.push(e),c(o,s);t>=0&&B.data[t].children.length>this._maxEntries;)this._split(B,t),t--;this._adjustParentBBoxes(s,B,t)}_split(e,t){const n=e.data[t],i=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,i);const o=this._chooseSplitIndex(n,s,i);if(!o)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const r=n.children.splice(o,n.children.length-o),a=n.leaf?new R(r):new I(r);a.height=n.height,l(n,this._toBBox),l(a,this._toBBox),t?e.data[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this._data=new I([e,t]),this._data.height=e.height+1,l(this._data,this._toBBox)}_chooseSplitIndex(e,t,n){let i,s,o;i=s=1/0;for(let r=t;r<=n-t;r++){const t=h(e,0,r,this._toBBox),a=h(e,r,n,this._toBBox),l=_(t,a),c=u(t)+u(a);l<i?(i=l,o=r,s=c<s?c:s):l===i&&c<s&&(s=c,o=r)}return o}_chooseSplitAxis(e,t,n){const i=e.leaf?this._compareMinX:d,s=e.leaf?this._compareMinY:p;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,s)&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const s=this._toBBox,o=h(e,0,t,s),r=h(e,n-t,n,s);let a=m(o)+m(r);for(let l=t;l<n-t;l++){const t=e.children[l];c(o,e.leaf?s(t):t),a+=m(o)}for(let l=n-t-1;l>=t;l--){const t=e.children[l];c(r,e.leaf?s(t):t),a+=m(r)}return a}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)c(t.data[i],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const n=e.data[t];if(0===n.children.length)if(t>0){const s=e.data[t-1],o=s.children;o.splice((0,i.cq)(o,n,o.length,s.indexHint),1)}else this.clear();else l(n,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){h(e,0,e.children.length,t,e)}function h(e,t,n,i,s){s||(s=new R([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let o,r=t;r<n;r++)o=e.children[r],c(s,e.leaf?i(o):o);return s}function c(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function d(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function m(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function _(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,s-n)*Math.max(0,o-i)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function y(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function x(e,t,n,i,o){const a=[t,n];for(;a.length;){const t=(0,s.j0)(a.pop()),n=(0,s.j0)(a.pop());if(t-n<=i)continue;const l=n+Math.ceil((t-n)/i/2)*i;(0,r.q)(e,l,n,t,o),a.push(n,l,l,t)}}const v=new o.Z,b=new o.Z,B=new o.Z,w=new o.Z({deallocator:void 0});class M extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new i.SO}}class R extends M{constructor(e){super(),this.children=e,this.leaf=!0}}class I extends M{constructor(e){super(),this.children=e,this.leaf=!1}}},80292:(e,t,n)=>{function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}n.d(t,{l:()=>i})},98663:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var i=n(27366),s=n(40281),o=n(10064),r=n(32718),a=n(92026),l=n(97642),h=n(51370),c=n(49861),d=n(89125),p=(n(63780),n(38511)),u=n(69912),m=n(31201),f=n(30651),_=n(6693),g=n(6061),y=n(56811),x=n(76200),v=(n(25243),n(66576)),b=n(79056),B=n(46784),w=n(54472),M=n(71475),R=n(585),I=n(80885),Y=n(34869);let X=class extends Y.Z{constructor(e){super(e),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:e,topRight:t,bottomLeft:n,bottomRight:i}=this;if((0,a.Wi)(e)||(0,a.Wi)(t)||(0,a.Wi)(n)||(0,a.Wi)(i))return null;const s=e.spatialReference;return t=this.projectOrWarn(t,s),n=this.projectOrWarn(n,s),i=this.projectOrWarn(i,s),(0,a.Wi)(t)||(0,a.Wi)(n)||(0,a.Wi)(i)?null:new I.Z({rings:[[[n.x,n.y],[e.x,e.y],[t.x,t.y],[i.x,i.y],[n.x,n.y]]],spatialReference:s})}set coords(e){const{topLeft:t}=this;if((0,a.Wi)(t))return;const n=t.spatialReference;if(e=this.projectOrWarn(e,n),(0,a.Wi)(e))return;const{rings:[[i,s,o,r]]}=e;this.bottomLeft=new R.Z({x:i[0],y:i[1],spatialReference:n}),this.topLeft=new R.Z({x:s[0],y:s[1],spatialReference:n}),this.topRight=new R.Z({x:o[0],y:o[1],spatialReference:n}),this.bottomRight=new R.Z({x:r[0],y:r[1],spatialReference:n})}};(0,i._)([(0,c.Cb)()],X.prototype,"coords",null),(0,i._)([(0,c.Cb)({type:R.Z})],X.prototype,"bottomLeft",void 0),(0,i._)([(0,c.Cb)({type:R.Z})],X.prototype,"bottomRight",void 0),(0,i._)([(0,c.Cb)({type:R.Z})],X.prototype,"topLeft",void 0),(0,i._)([(0,c.Cb)({type:R.Z})],X.prototype,"topRight",void 0),X=(0,i._)([(0,u.j)("esri.layers.support.CornersGeoreference")],X);const C=X;var Z=n(16889),j=n(26277),E=n(53866);let S=class extends Y.Z{constructor(e){super(e),this.extent=null,this.rotation=0,this.type="extent-and-rotation"}get coords(){if((0,a.Wi)(this.extent))return null;const{xmin:e,ymin:t,xmax:n,ymax:i,spatialReference:s}=this.extent;let o;if(this.rotation){const{x:s,y:r}=this.extent.center,a=L(s,r,this.rotation);o=[a(e,t),a(e,i),a(n,i),a(n,t)],o.push(o[0])}else o=[[e,t],[e,i],[n,i],[n,t],[e,t]];return new I.Z({rings:[o],spatialReference:s})}set coords(e){if((0,a.Wi)(e)||(0,a.Wi)(this.extent))return;const t=this.extent.spatialReference;if(e=this.projectOrWarn(e,t),(0,a.Wi)(e)||(0,a.Wi)(e.extent))return;const{rings:[[n,i,s]],extent:{center:{x:o,y:r}}}=e,l=(0,Z.BV)(Math.PI/2-Math.atan2(i[1]-n[1],i[0]-n[0])),h=L(o,r,-l),[c,d]=h(n[0],n[1]),[p,u]=h(s[0],s[1]);this.extent=new E.Z({xmin:c,ymin:d,xmax:p,ymax:u,spatialReference:t}),this.rotation=l}};function L(e,t,n){const i=(0,j.t)(n),s=Math.cos(i),o=Math.sin(i);return(n,i)=>[s*(n-e)+o*(i-t)+e,s*(i-t)-o*(n-e)+t]}(0,i._)([(0,c.Cb)()],S.prototype,"coords",null),(0,i._)([(0,c.Cb)({type:E.Z})],S.prototype,"extent",void 0),(0,i._)([(0,c.Cb)({type:Number})],S.prototype,"rotation",void 0),S=(0,i._)([(0,u.j)("esri.layers.support.ExtentAndRotationGeoreference")],S);const P=S,O={key:"type",base:Y.Z,typeMap:{"control-points":M.Z,corners:C,"extent-and-rotation":P}};let W=class extends((0,b.iv)((0,B.eC)(w.Z))){constructor(){super(...arguments),this.georeference=null,this.opacity=1}readGeoreference(e){return M.Z.fromJSON(e)}};(0,i._)([(0,c.Cb)({types:O,json:{write:!0}})],W.prototype,"georeference",void 0),(0,i._)([(0,p.r)("georeference")],W.prototype,"readGeoreference",null),(0,i._)([(0,c.Cb)()],W.prototype,"opacity",void 0),W=(0,i._)([(0,u.j)("esri.layers.support.MediaElementBase")],W);const T=W;let N=class extends T{constructor(e){super(e),this.content=null,this.type="image",this.image=null}load(){const e=this.image;if("string"==typeof e){const t=(0,x.default)(e,{responseType:"image"}).then((e=>{let{data:t}=e;this._set("content",t)}));this.addResolvingPromise(t)}else if(e instanceof HTMLImageElement){const t=e.decode().then((()=>{this._set("content",e)}));this.addResolvingPromise(t)}else e?this._set("content",e):this.addResolvingPromise(Promise.reject(new o.Z("image-element:invalid-image-type","Invalid image type",{image:e})));return Promise.resolve(this)}};(0,i._)([(0,c.Cb)({readOnly:!0})],N.prototype,"content",void 0),(0,i._)([(0,c.Cb)({json:{name:"url",type:String}}),(0,v.B)({type:"resource",prefix:"media"})],N.prototype,"image",void 0),(0,i._)([(0,c.Cb)({readOnly:!0,json:{name:"mediaType"}})],N.prototype,"type",void 0),N=(0,i._)([(0,u.j)("esri.layers.support.ImageElement")],N);const V=N;n(59486);var U=n(60354),F=n(91505),z=n(41691),A=n(67426),H=n(66978),k=n(94172),J=n(52587),q=n(65156),G=n(66504),$=n(92975),D=n(66020),Q=n(84735);let K=class extends T{constructor(e){super(e),this.content=null,this.type="video"}load(){const e=this.video;if("string"==typeof e){const t=document.createElement("video");t.src=e,t.crossOrigin="anonymous",t.autoplay=!0,t.muted=!0,t.loop=!0,this.addResolvingPromise(this._loadVideo(t).then((()=>{this._set("content",t)})))}else e instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(e).then((()=>{this._set("content",e)}))):this.addResolvingPromise(Promise.reject(new o.Z("video-element:invalid-video-type","Invalid video type",{video:e})));return Promise.resolve(this)}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):r.Z.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded.")}_loadVideo(e){return new Promise(((t,n)=>{e.oncanplay=()=>{e.oncanplay=null,e.play().then(t,n)},"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",e.src=e.src)}))}};(0,i._)([(0,c.Cb)({readOnly:!0})],K.prototype,"content",void 0),(0,i._)([(0,c.Cb)()],K.prototype,"video",null),K=(0,i._)([(0,u.j)("esri.layers.support.VideoElement")],K);const ee=K;var te=n(78952);const ne={key:"type",defaultKeyValue:"image",base:T,typeMap:{image:V,video:ee}},ie=s.Z.ofType(ne);let se=class extends(w.Z.LoadableMixin((0,A.v)((0,z.p)(F.Z.EventedAccessor)))){constructor(e){super(e),this._index=new D.H,this._elementViewsMap=new Map,this._elementsIndexes=new Map,this._elementsChangedHandler=e=>{for(const n of e.removed){const e=this._elementViewsMap.get(n);this._elementViewsMap.delete(n),this._index.delete(e),this.handles.remove(e),e.destroy(),this.notifyChange("fullExtent")}const{spatialReference:t}=this;for(const n of e.added){if(this._elementViewsMap.get(n))continue;const e=new Q.Lg({spatialReference:t,element:n});this._elementViewsMap.set(n,e);const i=(0,k.YP)((()=>e.bounds),(()=>this._updateIndexForElement(e,!1)));this._updateIndexForElement(e,!0),this.handles.add(i,e)}this._elementsIndexes.clear(),this.elements.forEach(((e,t)=>this._elementsIndexes.set(e,t))),this.emit("refresh")},this.elements=new ie}async load(e){if((0,H.k_)(e),!this.spatialReference){const e=this.elements.find((e=>(0,a.pC)(e.georeference)&&(0,a.pC)(e.georeference.coords)));this._set("spatialReference",e?(0,a.Wg)((0,a.Wg)(e.georeference).coords).spatialReference:te.Z.WGS84)}return this._elementsChangedHandler({added:this.elements.items,removed:[]}),this.handles.add(this.elements.on("change",this._elementsChangedHandler)),this}destroy(){this._index.clear(),this._elementViewsMap.clear(),this._elementsIndexes.clear()}set elements(e){this._set("elements",(0,U.Z)(e,this._get("elements"),ie))}get fullExtent(){if("not-loaded"===this.loadStatus)return null;const e=this._index.fullBounds;return(0,a.Wi)(e)?null:new E.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:this.spatialReference})}set spatialReference(e){"not-loaded"===this.loadStatus?this._set("spatialReference",e):r.Z.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded.")}async queryElements(e,t){await this.load(),await(0,J.iQ)(e.spatialReference,this.spatialReference,null,t);const n=(0,$.fS)(e.spatialReference,this.spatialReference)?e:(0,J.iV)(e,this.spatialReference);if(!n)return[];const i=n.normalize(),s=[];for(const o of i)this._index.forEachInBounds((0,q.oJ)(o),(e=>{let{normalizedCoords:t,element:n}=e;(0,a.pC)(t)&&(0,G.Nl)(o,t)&&s.push(n)}));return s.sort(((e,t)=>this._elementsIndexes.get(e)-this._elementsIndexes.get(t))),s}_updateIndexForElement(e,t){const n=e.normalizedBounds,i=this._index.has(e),s=(0,a.pC)(n);this._index.delete(e),s&&this._index.set(e,n),this.notifyChange("fullExtent"),t||i===s||this.emit("refresh")}};(0,i._)([(0,c.Cb)()],se.prototype,"elements",null),(0,i._)([(0,c.Cb)({readOnly:!0})],se.prototype,"fullExtent",null),(0,i._)([(0,c.Cb)()],se.prototype,"spatialReference",null),se=(0,i._)([(0,u.j)("esri.layers.support.LocalMediaElementSource")],se);const oe=se;let re=class extends((0,_.h)((0,y.M)((0,g.q)((0,l.R)(f.Z))))){constructor(e){super(e),this.copyright=null,this.operationalLayerType="MediaLayer",this.spatialReference=null,this.type="media",this.source=new oe}load(e){this.spatialReference&&(this.source.spatialReference=this.spatialReference);const t=this.source.load(e).then((()=>{this.spatialReference=this.source.spatialReference}));return this.addResolvingPromise(t),Promise.resolve(this)}destroy(){(0,a.Wg)(this.source)?.destroy()}get fullExtent(){return this.source?.fullExtent}set source(e){"not-loaded"===this.loadStatus?this._set("source",e):r.Z.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded.")}castSource(e){return e?Array.isArray(e)||e instanceof s.Z?new oe({elements:e}):e:null}readSource(e,t,n){const i=new oe;if("image"===t.mediaType){const e=new V;e.read({url:t.url,georeference:t.georeference},n),i.elements.push(e)}return i}writeSource(e,t,n,i){if(!function(e){return e instanceof oe}(e))return void(i?.messages&&i?.messages?.push(new o.Z("media-layer:unsupported-source","Use 'LocalMediaElementSource' with one media element to save the layer")));const s=e.elements.length;if(!s)return void i?.messages?.push(new o.Z("media-layer:no-media-element","The layer doesn't contain any media element."));s>1&&i?.messages?.push(new h.Z("media-layer:too-many-media-elements",`The layer contains ${e.elements.length} media element. Only the first one will be persisted.`));const r=e.elements.at(0);"image"===r.type?r.write(t,i):i?.messages?.push(new o.Z("media-layer:unsupported-media",'The layer only supports "image" media.'))}};(0,i._)([(0,c.Cb)({type:String})],re.prototype,"copyright",void 0),(0,i._)([(0,c.Cb)({readOnly:!0})],re.prototype,"fullExtent",null),(0,i._)([(0,c.Cb)({type:["MediaLayer"]})],re.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.Cb)({type:["show","hide"]})],re.prototype,"listMode",void 0),(0,i._)([(0,c.Cb)({nonNullable:!0,json:{write:!0}})],re.prototype,"source",null),(0,i._)([(0,d.p)("source")],re.prototype,"castSource",null),(0,i._)([(0,p.r)("source",["url"])],re.prototype,"readSource",null),(0,i._)([(0,m.c)("source")],re.prototype,"writeSource",null),(0,i._)([(0,c.Cb)()],re.prototype,"spatialReference",void 0),(0,i._)([(0,c.Cb)({readOnly:!0})],re.prototype,"type",void 0),re=(0,i._)([(0,u.j)("esri.layers.MediaLayer")],re);const ae=re},66020:(e,t,n)=>{n.d(t,{H:()=>l});var i=n(93169),s=n(13491),o=n(65156);const r={minX:0,minY:0,maxX:0,maxY:0};function a(e,t,n){(function(e){r.minX=e[0],r.minY=e[1],r.maxX=e[2],r.maxY=e[3]})(t),e.search(r,n)}class l{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s.Q(9,(0,i.Z)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,i)=>{e[t++]=i})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,o.cS)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),a(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}}}]);
//# sourceMappingURL=8663.c141e63e.chunk.js.map