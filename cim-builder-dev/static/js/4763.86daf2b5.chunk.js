"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[4763],{54763:(e,t,i)=>{i.r(t),i.d(t,{previewCIMSymbol:()=>g});var n=i(17842),l=i(78915),o=i(94304),a=i(31027),r=i(37817),h=i(1682);const s=new o.U(null,!0),c=(0,n.Wz)(r.b_.size),u=(0,n.Wz)(r.b_.maxSize),y=(0,n.Wz)(r.b_.lineWidth);function m(e){const t=e?.size,i=e.maxSize??u;if("number"==typeof t){const e=Math.min(t,i);return{width:e,height:e}}return{width:null!=t&&"object"==typeof t&&"width"in t?Math.min(t.width,i):null,height:null!=t&&"object"==typeof t&&"height"in t?Math.min(t.height,i):null}}async function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:i,opacity:r,symbolConfig:g}=t,d="object"==typeof g&&"isSquareFill"in g&&g.isSquareFill,f=t.cimOptions||t,p=f.geometryType||(0,a.JW)(e?.data?.symbol),w=m(t),{feature:b,fieldMap:M}=f;if(null==w.width||null==w.height){const t=await l.E0.resolveSymbolOverrides(e.data,b,null,M,p);if(!t)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:t},e.data.primitiveOverrides=null;const i=[];l.B$.fetchResources(t,s.resourceManager,i),i.length>0&&await Promise.all(i);const{width:n,height:o}=l.B$.getEnvelope(t,null,s.resourceManager);w.width="esriGeometryPolygon"===p?c:"esriGeometryPolyline"===p?y:null!=n&&isFinite(n)?Math.min(n,u):c,w.height="esriGeometryPolygon"===p?c:null!=o&&isFinite(o)?Math.min(o,u):c}const v=await s.rasterizeCIMSymbolAsync(e,b,w,d||"esriGeometryPolygon"!==p?o.C.Preview:o.C.Legend,M,p);if(!v)return null;const{width:C,height:z}=v,S=document.createElement("canvas");S.width=C,S.height=z,S.getContext("2d").putImageData(v,0,0);const F=(0,n.F2)(w.width),P=(0,n.F2)(w.height),k=new Image(F,P);k.src=S.toDataURL(),null!=r&&(k.style.opacity=`${r}`);let I=k;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:F,height:P,src:k.src},fill:null,stroke:null,offset:[0,0]};I=(0,h.w)([[e]],[F,P],{effectView:t.effectView})}return i&&I&&i.appendChild(I),I}}}]);
//# sourceMappingURL=4763.86daf2b5.chunk.js.map