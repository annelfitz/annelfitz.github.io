"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[16695],{66240:(e,t,r)=>{r.d(t,{X:()=>s,_:()=>o});var n=r(9861);function s(e){if("string"==typeof e)return e.toLowerCase();if("name"in e)return e.name.toLowerCase();if("string"!=typeof e.value)throw new n.D$(null,"InvalidIdentifier",null);return e.value.toLowerCase()}const o=Object.freeze({aborted:!1})},64379:(e,t,r)=>{r.d(t,{$P:()=>u,At:()=>T,JB:()=>v,Lk:()=>p,NI:()=>w,Qi:()=>S,eB:()=>F,eg:()=>g,f0:()=>d,gO:()=>f,ik:()=>h,ke:()=>a,nE:()=>c,rX:()=>y,yT:()=>m});var n=r(46405),s=r(16503),o=r(14902),i=r(44135),l=r(24241);function a(e){return i.A.fromJSON(e.toJSON())}function c(e){return e.toJSON?e.toJSON():e}function u(e){return e instanceof Date}function p(e){return e instanceof l.c9}function y(e){return e instanceof n.lY}function d(e){return e instanceof s.n}function g(e){return e instanceof o.k}const f=1e3;const h={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},m={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},T={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function S(e){return void 0===e?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function v(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const r="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&(s=t.cmp,function(e){return function(t,r){const n={key:t,value:e[t]},o={key:r,value:e[r]};return s(n,o)}});var s;const o=[];return function e(t){if(t?.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let s,i;if(Array.isArray(t)){for(i="[",s=0;s<t.length;s++)s&&(i+=","),i+=e(t[s])||"null";return i+"]"}if(null===t)return"null";if(o.includes(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const l=o.push(t)-1,a=Object.keys(t).sort(n?.(t));for(i="",s=0;s<a.length;s++){const r=a[s],n=e(t[r]);n&&(i&&(i+=","),i+=JSON.stringify(r)+":"+n)}return o.splice(l,1),"{"+i+"}"}(e)}function w(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function F(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return w(e)}}},58889:(e,t,r)=>{r.r(t),r.d(t,{BatchTranslationServiceFactory:()=>n.B,PortalTranslationService:()=>n.P,getTranslateParametersKey:()=>n.g,registerFunctions:()=>n.r});r(66240),r(67253),r(9861),r(43036),r(50076),r(76460),r(65308),r(7061),r(84144),r(4429),r(73272);var n=r(43317)},43317:(e,t,r)=>{r.d(t,{A:()=>F,B:()=>v,P:()=>h,g:()=>T,r:()=>w});var n=r(66240),s=r(67253),o=r(9861),i=r(43036),l=r(50076),a=r(76460),c=r(87663),u=r(65308),p=r(7061),y=r(84144),d=r(4429),g=r(73272),f=r(85632);class h{constructor(e,t){this.portal=e,this._debugLog=t}async translate(e){this.portal.loaded||await this.portal.load();const t=this.portal.helperServices?.aiUtilityServices;if(null==t)return{success:!1};const r=t.url+t.translateUtility;try{return e.requestSource??="arcade",{success:!0,results:(await(0,p.T)(r,e,{authMode:"no-prompt"})).map((e=>e.toJSON()))}}catch(n){return null!=this._debugLog&&(n instanceof Error||n instanceof l.A)&&this._debugLog(`TranslateText error: ${n.message}`),a.A.getLogger("esri.arcade.functions.aiServices").error(n),{success:!1}}}}class m{constructor(e,t,r){this._parameters=e,this._maxTotalContentSize=t,this._maxContentsLength=r,this._requests=[],this._normalizedContents=new Map,this._contentsTotalSize=0}tryAdd(e){const t=new Set(e.filter((e=>!this._normalizedContents.has(e.text))).map((e=>e.text)));if(this._requests.length+t.size>this._maxContentsLength)return null;let r=0;for(const s of t)r+=s.length;if((r+this._contentsTotalSize)*(this._parameters.to.length??1)>this._maxTotalContentSize)return null;const n=this._requests.length;for(const{key:s,text:o}of e)(0,c.tE)(this._normalizedContents,o,(()=>[])).push({batchIdx:n,key:s});return this._requests.push(e),this._contentsTotalSize+=r,n}async send(e){const t=[],r=[];let n=0;for(const[l,a]of this._normalizedContents)t.push(new y.A({key:String(n++),text:l})),r.push(a);const s=new d.A(this._parameters);s.contents=t;const o=await e.translate(s);if(!o.success)return Array.from(this._requests,(()=>o));const i=Array.from(this._requests,(()=>({success:!0,results:[]})));for(const l of o.results){const e=Number(l.key);for(const t of r[e])i[t.batchIdx].results.push({...l,key:t.key})}return i}}function T(e){const t=[...new Set(e.to)].sort(),r=e.from??null,n=e.portalUrl,s=e.translator,o=e.apiKey??null;return JSON.stringify([t,r,n,s,o])}async function S(e,t,r){try{return(await e.yieldFor(r))[t]}catch{return{success:!1}}}class v{constructor(e,t,{maxTotalContentSize:r=5e4,maxContentsLength:n=1e3}={}){this._executor=e,this._service=t,this._openBatches=new Map,this._maxTotalContentSize=r,this._maxContentsLength=n}create(e){return{translate:async t=>{const r=T(t),{contents:n,to:s,from:o,translator:i,portalUrl:l,apiKey:a}=t;if(null==s)return{success:!1};if(null==n||n.every((e=>0===e.text.length)))return{success:!1};const c=this._openBatches.get(r);if(null!=c){const t=c.data.tryAdd(n);if(null!=t)return await S(e,t,c);c.send()}const u=new m({to:s,from:o,translator:i,portalUrl:l,apiKey:a},this._maxTotalContentSize,this._maxContentsLength),p=u.tryAdd(n);if(null!=p){const t=this._executor.openBatch(u,{open:e=>{this._openBatches.set(r,e)},execute:e=>e.send(this._service),close:e=>{this._openBatches.get(r)===e&&this._openBatches.delete(r)}});return await S(e,p,t)}return await this._service.translate(t)}}}}function w(e){"async"===e.mode&&(e.functions[(0,n.X)("TranslateText")]=function(t,r){return e.standardFunctionAsync(t,r,(async(e,t,r)=>{if((0,i.B)(r,2,3,e,t),!(0,f.Kg)(r[0])&&!(0,f.cy)(r[0])&&!(0,i.j)(r[0]))throw new o.D$(e,"InvalidParameter",t);const n=(0,i.L)(r[0]);if(!(0,f.Kg)(r[1])&&!(0,f.cy)(r[1])&&!(0,i.j)(r[1]))throw new o.D$(e,"InvalidParameter",t);const l=(0,i.L)(r[1]);let a=null;if(r.length>=3){if(!(0,f.Kg)(r[2]))throw new o.D$(e,"InvalidParameter",t);a=r[2]}const c=n.map(((e,t)=>new y.A({key:String(t),text:e}))),p=e.services?.portal??u.A.getDefault(),m=new d.A({to:l,contents:c,from:a,portalUrl:p.restUrl.replace(/\/sharing\/rest$/,"")}),S=new Map;let v=null;if(null!=e.lrucache){const t=e.lrucache;v??=T(m),m.contents=m.contents?.filter((e=>{const r=t.getCachedTranslation(v,e.text);return null==r||(S.set(e.key,{...r,key:e.key,text:e.text}),!1)}))}if(m.contents?.length){const t=e.services?.translation??new h(p,e.console),r=await t.translate(m);if(!r.success)return new s.A({__proto__:null,success:!1});for(const n of r.results){const t=m.contents?.find((e=>e.key===n.key))?.text;if(null==t)throw new o.D$(null,"NeverReach",null);S.set(n.key,n),null!=e.lrucache&&(v??=T(m),e.lrucache.setCachedTranslation(v,t,{detectedLanguage:n.detectedLanguage,translation:n.translation}))}}const w=Array.from(c,(t=>{const r=g.A.fromJSON(S.get(t.key));if(null==r)throw new o.D$(null,"NeverReach",null);return r.text=t.text,s.A.convertJsonToArcade(r.toJSON(),e.timeZone??"system",!0)}));return new s.A({__proto__:null,success:!0,results:w})}))})}const F=Object.freeze(Object.defineProperty({__proto__:null,BatchTranslationServiceFactory:v,PortalTranslationService:h,getTranslateParametersKey:T,registerFunctions:w},Symbol.toStringTag,{value:"Module"}))},84144:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(6326),s=r(42553),o=r(46053),i=r(85842);let l=class extends s.o{constructor(e){super(e)}};(0,n.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"key",void 0),(0,n.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"text",void 0),l=(0,n.Cg)([(0,i.$)("esri.rest.support.TranslateContent")],l)},4429:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(6326),s=r(42553),o=r(46053),i=r(85842),l=r(29067),a=r(84144);let c=class extends s.o{constructor(e){super(e),this.to=null,this.contents=null,this.portalUrl="https://www.arcgis.com",this.translator="esri",this.from=null,this.apiKey=null,this.requestSource=null}};(0,n.Cg)([(0,o.MZ)({type:[String],json:{write:!0}})],c.prototype,"to",void 0),(0,n.Cg)([(0,o.MZ)({type:[a.A],json:{write:!0}})],c.prototype,"contents",void 0),(0,n.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"portalUrl",void 0),(0,n.Cg)([(0,o.MZ)({type:String,json:{write:!0,default:"esri"}})],c.prototype,"translator",void 0),(0,n.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"from",void 0),(0,n.Cg)([(0,o.MZ)(l.K)],c.prototype,"apiKey",void 0),(0,n.Cg)([(0,o.MZ)({type:String,json:{name:"x-esri-request-source"}})],c.prototype,"requestSource",void 0),c=(0,n.Cg)([(0,i.$)("esri.rest.support.TranslateParameters")],c)},73272:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(6326),s=r(42553),o=r(46053),i=r(85842);let l=class extends s.o{constructor(e){super(e),this.text=null,this.detectedLanguage="en",this.detectedLanguageScore=-1}};(0,n.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"key",void 0),(0,n.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"text",void 0),(0,n.Cg)([(0,o.MZ)({type:String,json:{read:{source:"detectedLanguage.language"},write:{target:"detectedLanguage.language"}}})],l.prototype,"detectedLanguage",void 0),(0,n.Cg)([(0,o.MZ)({type:Number,json:{read:{source:"detectedLanguage.score"},write:{target:"detectedLanguage.score"}}})],l.prototype,"detectedLanguageScore",void 0),(0,n.Cg)([(0,o.MZ)({type:Object,json:{write:!0}})],l.prototype,"translation",void 0),l=(0,n.Cg)([(0,i.$)("esri.rest.support.TranslateResult")],l)},29067:(e,t,r)=>{r.d(t,{K:()=>n});const n={type:String,json:{read:{source:"token"},write:{target:"token"}}}},7061:(e,t,r)=>{r.d(t,{T:()=>i});var n=r(3825),s=r(54994),o=r(73272);async function i(e,t,r){const i=t.toJSON();i.contents=JSON.stringify(i.contents),i.token=await(0,s.gf)(t.portalUrl,t.apiKey,{signal:r?.signal,prompt:"no-prompt"!==r?.authMode});const l=(0,s.Dl)(e),a=(0,s.jV)(l.query,{...r,query:i,method:"post",authMode:"anonymous"});return(await(0,n.A)(l.path,a)).data.results.map((e=>o.A.fromJSON(e)))}}}]);
//# sourceMappingURL=16695.185435df.chunk.js.map