{"version":3,"sources":["../node_modules/@arcgis/core/tasks/support/GPMessage.js","../node_modules/@arcgis/core/tasks/support/NAMessage.js","../node_modules/@arcgis/core/tasks/support/DirectionsFeatureSet.js","../node_modules/@arcgis/core/core/queryUtils.js","../node_modules/@arcgis/core/tasks/mixins/NAServiceDescription.js","../node_modules/@arcgis/core/tasks/support/RouteResult.js","../node_modules/@arcgis/core/tasks/support/RouteResultsContainer.js","../node_modules/@arcgis/core/rest/networkUtils.js","../node_modules/@arcgis/core/tasks/support/ClosestFacilitySolveResult.js","../node_modules/@arcgis/core/rest/closestFacility.js","../node_modules/@arcgis/core/tasks/ClosestFacilityTask.js"],"names":["p","s","esriJobMessageTypeInformative","esriJobMessageTypeProcessDefinition","esriJobMessageTypeProcessStart","esriJobMessageTypeProcessStop","esriJobMessageTypeWarning","esriJobMessageTypeError","esriJobMessageTypeEmpty","esriJobMessageTypeAbort","i","t","constructor","r","super","this","description","type","e","String","json","write","prototype","read","o","a","0","1","2","3","50","100","101","200","c","u","l","extent","features","geometryType","routeId","routeName","totalDriveTime","totalLength","totalTime","readFeatures","forEach","_decompressFeatureGeometry","summary","envelope","spatialReference","fromJSON","map","m","geometry","strings","events","x","point","y","z","hasZ","attributes","ETA","arriveTimeUTC","get","_mergePolylinesToSinglePath","_decompressGeometry","compressedGeometry","n","g","h","f","d","match","parseInt","indexOf","length","push","paths","hasM","concat","source","readOnly","value","_options","toQueryParams","toJSON","Object","keys","name","getter","Array","isArray","join","JSON","stringify","_serviceDescriptionPromise","_fetchServiceDescription","url","parsedUrl","data","query","token","supportedTravelModes","id","itemId","currentVersion","async","defaultTravelMode","error","substring","owningSystemUrl","test","path","serviceName","results","paramName","parse","TravelMode","_isInputGeometryZAware","_dropZValuesOffInputGeometry","console","log","directions","route","stops","barriers","messages","pointBarriers","polylineBarriers","polygonBarriers","routeResults","readPointBarriers","readPolylineBarriers","readPolygonBarriers","aliasOf","routes","v","Name","RouteName","splice","T","j","facilities","incidents","readFacilities","readIncidents","readRoutes","accumulateAttributes","attributeParameterValues","directionsTimeAttribute","impedanceAttribute","outSpatialReference","wkid","restrictionAttributes","returnPointBarriers","returnRoutes","travelMode","solve","B","then","slice","Promise","resolve","dontCheck"],"mappings":"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","file":"static/js/61.66c5cad7.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";const p=new s({esriJobMessageTypeInformative:\"informative\",esriJobMessageTypeProcessDefinition:\"process-definition\",esriJobMessageTypeProcessStart:\"process-start\",esriJobMessageTypeProcessStop:\"process-stop\",esriJobMessageTypeWarning:\"warning\",esriJobMessageTypeError:\"error\",esriJobMessageTypeEmpty:\"empty\",esriJobMessageTypeAbort:\"abort\"});let i=class extends t{constructor(r){super(r),this.description=null,this.type=null}};r([e({type:String,json:{write:!0}})],i.prototype,\"description\",void 0),r([e({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([o(\"esri.tasks.support.GPMessage\")],i);var a=i;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"./GPMessage.js\";const p=new s({0:\"informative\",1:\"process-definition\",2:\"process-start\",3:\"process-stop\",50:\"warning\",100:\"error\",101:\"empty\",200:\"abort\"});let i=class extends t{constructor(r){super(r),this.type=null}};r([o({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([e(\"esri.tasks.support.NAMessage\")],i);var c=i;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{unwrap as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../geometry/SpatialReference.js\";import p from\"../../geometry/Point.js\";import n from\"../../geometry/Extent.js\";import i from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import m from\"../../Graphic.js\";import l from\"./FeatureSet.js\";let u=class extends l{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType=\"polyline\",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,r){(e||[]).forEach((e=>{this._decompressFeatureGeometry(e,r.summary.envelope.spatialReference)}));const o=a.fromJSON(r.spatialReference);return e.map((e=>{const r=m.fromJSON(e),s=e.geometry&&e.geometry.spatialReference;return r.geometry&&!s&&(t(r.geometry).spatialReference=o),r.strings=e.strings,r.events=(e.events||[]).map((t=>{const r=new m({geometry:new p({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),r}))}get mergedGeometry(){if(!this.features)return null;const e=this.features.map((({geometry:e})=>t(e))),r=this.get(\"extent.spatialReference\");return this._mergePolylinesToSinglePath(e,r)}get strings(){return this.features.map((({strings:e})=>e))}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,o=0,s=0,a=0;const p=[];let n,i,m,l,u,c,y,g,h=0,f=0,d=0;if(u=e.match(/((\\+|\\-)[^\\+\\-\\|]+|\\|)/g),u||(u=[]),0===parseInt(u[h],32)){h=2;const e=parseInt(u[h],32);h++,c=parseInt(u[h],32),h++,1&e&&(f=u.indexOf(\"|\")+1,y=parseInt(u[f],32),f++),2&e&&(d=u.indexOf(\"|\",f)+1,g=parseInt(u[d],32),d++)}else c=parseInt(u[h],32),h++;for(;h<u.length&&\"|\"!==u[h];){n=parseInt(u[h],32)+r,h++,r=n,i=parseInt(u[h],32)+o,h++,o=i;const e=[n/c,i/c];f&&(l=parseInt(u[f],32)+s,f++,s=l,e.push(l/y)),d&&(m=parseInt(u[d],32)+a,d++,a=m,e.push(m/g)),p.push(e)}return{paths:[p],hasZ:f>0,hasM:d>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach((e=>{e.paths.forEach((e=>{r=r.concat(e)}))}));const o=[];let s=[0,0];return r.forEach((e=>{e[0]===s[0]&&e[1]===s[1]||(o.push(e),s=e)})),new i({paths:[o]},t)}};e([r({type:n,json:{read:{source:\"summary.envelope\"}}})],u.prototype,\"extent\",void 0),e([r()],u.prototype,\"features\",void 0),e([o(\"features\")],u.prototype,\"readFeatures\",null),e([r()],u.prototype,\"geometryType\",void 0),e([r({readOnly:!0})],u.prototype,\"mergedGeometry\",null),e([r()],u.prototype,\"routeId\",void 0),e([r()],u.prototype,\"routeName\",void 0),e([r({value:null,readOnly:!0})],u.prototype,\"strings\",null),e([r({json:{read:{source:\"summary.totalDriveTime\"}}})],u.prototype,\"totalDriveTime\",void 0),e([r({json:{read:{source:\"summary.totalLength\"}}})],u.prototype,\"totalLength\",void 0),e([r({json:{read:{source:\"summary.totalTime\"}}})],u.prototype,\"totalTime\",void 0),u=e([s(\"esri.tasks.support.DirectionsFeatureSet\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=t=>{if(!Array.isArray(t))return!1;const[e]=t;return\"number\"==typeof e||\"string\"==typeof e};class e{constructor(t={}){this._options=t}toQueryParams(e){if(!e)return null;const o=e.toJSON(),n={};return Object.keys(o).forEach((e=>{const r=this._options[e];if(r){const s=\"boolean\"!=typeof r&&r.name?r.name:e,i=\"boolean\"!=typeof r&&r.getter?r.getter(o):o[e];null!=i&&(n[s]=t(i)?i.join(\",\"):\"object\"==typeof i?JSON.stringify(i):i)}else n[e]=o[e]}),this),n}}function o(t){return new e(t)}export{o as createQueryParamsHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{getDeepValue as r}from\"../../core/object.js\";import{isSome as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import{urlToObject as i}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../request.js\";import n from\"../Task.js\";async function l(e,r){try{const{data:{supportedTravelModes:t,defaultTravelMode:s}}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\",token:r}});return{supportedTravelModes:t,defaultTravelMode:s}}catch(t){throw new o(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}async function c(e,t){const{data:s}=await a(e.substring(0,e.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\",token:t}});if(!s||!s.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=s.owningSystemUrl;const{data:o}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\",token:t}}),n=r(\"helperServices.routingUtilities.url\",o);if(!n)return{supportedTravelModes:[],defaultTravelMode:null};const l=i(e),c=/\\/solveClosestFacility$/.test(l.path)?\"Route\":/\\/solveClosestFacility$/.test(l.path)?\"ClosestFacility\":\"ServiceAreas\",u=await a(n+(\"/\"===n[n.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:c,token:t}}),p=[];let d=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const r of e)if(\"supportedTravelModes\"===r.paramName){if(r.value&&r.value.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);p.push(r)}}else\"defaultTravelMode\"===r.paramName&&(d=r.value)}return{supportedTravelModes:p,defaultTravelMode:d}}const u=r=>{let i=class extends r{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new o(\"network-service:missing-url\",\"Url to Network service is missing\");const r=this.url,{data:t}=await a(r,{query:{f:\"json\",token:e}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let o=0;o<t.supportedTravelModes.length;o++)t.supportedTravelModes[o].id||(t.supportedTravelModes[o].id=t.supportedTravelModes[o].itemId);const s=t.currentVersion>=10.4?l(r,e):c(r,e),{defaultTravelMode:i,supportedTravelModes:n}=await s;return t.defaultTravelMode=i,t.supportedTravelModes=n,t}_isInputGeometryZAware(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}};return i=e([s(\"esri.tasks.mixins.NAServiceDescription\")],i),i};let p=class extends(u(n)){};p=e([s(\"esri.tasks.mixins.NAServiceDescription\")],p);export{p as NAServiceDescription,u as NAServiceDescriptionMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import e from\"../../Graphic.js\";import p from\"./DirectionsFeatureSet.js\";let i=class extends s{constructor(o){super(o),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};o([r({type:p,json:{write:!0}})],i.prototype,\"directions\",void 0),o([r({type:e,json:{write:!0}})],i.prototype,\"route\",void 0),o([r({type:String,json:{write:!0}})],i.prototype,\"routeName\",void 0),o([r({type:[e],json:{write:!0}})],i.prototype,\"stops\",void 0),i=o([t(\"esri.tasks.support.RouteResult\")],i);var u=i;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as e}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import p from\"../../Graphic.js\";import i from\"./FeatureSet.js\";import a from\"./NAMessage.js\";import l from\"./RouteResult.js\";function n(r){return r&&i.fromJSON(r).features.map((r=>r))}let u=class extends t{constructor(r){super(r),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(r,o){return n(o.barriers||o.pointBarriers)}readPolylineBarriers(r){return n(r)}readPolygonBarriers(r){return n(r)}};r([o({aliasOf:\"pointBarriers\"})],u.prototype,\"barriers\",void 0),r([o({type:[a]})],u.prototype,\"messages\",void 0),r([o({type:[p]})],u.prototype,\"pointBarriers\",void 0),r([e(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],u.prototype,\"readPointBarriers\",null),r([o({type:[p]})],u.prototype,\"polylineBarriers\",void 0),r([e(\"polylineBarriers\")],u.prototype,\"readPolylineBarriers\",null),r([o({type:[p]})],u.prototype,\"polygonBarriers\",void 0),r([e(\"polygonBarriers\")],u.prototype,\"readPolygonBarriers\",null),r([o({type:[l]})],u.prototype,\"routeResults\",void 0),u=r([s(\"esri.tasks.support.RouteResultsContainer\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getDeepValue as e}from\"../core/object.js\";import{isSome as t}from\"../core/maybe.js\";import r from\"../core/Error.js\";import s from\"../request.js\";import{parseUrl as o}from\"./utils.js\";import a from\"../tasks/support/RouteResultsContainer.js\";function l(e,t,r,s){s[r]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}function n(e,t){for(let r=0;r<t.length;r++){const s=e[t[r]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}function i(e){const t=[],r=[],{directions:s=[],routes:{features:o=[],spatialReference:l=null}={},stops:{features:n=[],spatialReference:i=null}={},barriers:u,polygonBarriers:d,polylineBarriers:p,messages:f}=e.data,c=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let v,m,h=!0;const g=o&&l||n&&i||u&&u.spatialReference||d&&d.spatialReference||p&&p.spatialReference;s.forEach((e=>{t.push(v=e.routeName),r[v]={directions:e}})),o.forEach((e=>{-1===t.indexOf(v=e.attributes.Name)&&(t.push(v),r[v]={}),e.geometry&&(e.geometry.spatialReference=g),r[v].route=e})),n.forEach((e=>{m=e.attributes,-1===t.indexOf(v=m.RouteName||c)&&(t.push(v),r[v]={}),v!==c&&(h=!1),e.geometry&&(e.geometry.spatialReference=g),null==r[v].stops&&(r[v].stops=[]),r[v].stops.push(e)})),n.length>0&&!0===h&&(r[t[0]].stops=r[c].stops,delete r[c],t.splice(t.indexOf(c),1));const T=t.map((e=>(r[e].routeName=e===c?null:e,r[e])));return a.fromJSON({routeResults:T,pointBarriers:u,polygonBarriers:d,polylineBarriers:p,messages:f})}function u(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}async function d(e){if(!e)throw new r(\"network-service:missing-url\",\"Url to Network service is missing\");const{data:t}=await s(e,{query:{f:\"json\"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let r=0;r<t.supportedTravelModes.length;r++)t.supportedTravelModes[r].id||(t.supportedTravelModes[r].id=t.supportedTravelModes[r].itemId);const o=t.currentVersion>=10.4?f(e):p(e),{defaultTravelMode:a,supportedTravelModes:l}=await o;return t.defaultTravelMode=a,t.supportedTravelModes=l,t}async function p(t){const{data:r}=await s(t.substring(0,t.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\"}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};t=r.owningSystemUrl;const{data:a}=await s(t+(\"/\"===t[t.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\"}}),l=e(\"helperServices.routingUtilities.url\",a);if(!l)return{supportedTravelModes:[],defaultTravelMode:null};const n=o(t),i=/\\/solve$/.test(n.path)?\"Route\":/\\/solveClosestFacility$/.test(n.path)?\"ClosestFacility\":\"ServiceAreas\",u=await s(l+(\"/\"===l[l.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:i}}),d=[];let p=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const t of e)if(\"supportedTravelModes\"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);d.push(t)}}else\"defaultTravelMode\"===t.paramName&&(p=t.value)}return{supportedTravelModes:d,defaultTravelMode:p}}async function f(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await s(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(t){throw new r(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}export{l as collectGeometries,n as dropZValuesOffInputGeometry,d as fetchServiceDescription,p as fetchTravelModesGP,i as handleSolveResponse,u as isInputGeometryZAware,f as retrieveTravelModes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as e}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as t}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import p from\"../../geometry/SpatialReference.js\";import a from\"../../geometry/Point.js\";import n from\"../../geometry/Polygon.js\";import l from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import u from\"../../Graphic.js\";import m from\"./FeatureSet.js\";import c from\"./NAMessage.js\";import y from\"./DirectionsFeatureSet.js\";function d(r){return r.features.map((o=>{const t=p.fromJSON(r.spatialReference),s=u.fromJSON(o);return e(s.geometry)&&(s.geometry.spatialReference=t),s}))}function f(r){return m.fromJSON(r).features.map((r=>r.geometry))}let j=class extends i{constructor(r){super(r),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}readFacilities(r){return f(r)}readIncidents(r){return f(r)}readPointBarriers(r,e){return f(e.barriers)}readPolylineBarriers(r){return f(r)}readPolygonBarriers(r){return f(r)}readRoutes(r){return d(r)}};r([o({type:[y]})],j.prototype,\"directions\",void 0),r([o({type:[a]})],j.prototype,\"facilities\",void 0),r([t(\"facilities\")],j.prototype,\"readFacilities\",null),r([o({type:[a]})],j.prototype,\"incidents\",void 0),r([t(\"incidents\")],j.prototype,\"readIncidents\",null),r([o({type:[c]})],j.prototype,\"messages\",void 0),r([o({type:[a]})],j.prototype,\"pointBarriers\",void 0),r([t(\"pointBarriers\",[\"barriers\"])],j.prototype,\"readPointBarriers\",null),r([o({type:[l]})],j.prototype,\"polylineBarriers\",void 0),r([t(\"polylineBarriers\")],j.prototype,\"readPolylineBarriers\",null),r([o({type:[n]})],j.prototype,\"polygonBarriers\",void 0),r([t(\"polygonBarriers\")],j.prototype,\"readPolygonBarriers\",null),r([o({type:[u]})],j.prototype,\"routes\",void 0),r([t(\"routes\")],j.prototype,\"readRoutes\",null),j=r([s(\"esri.tasks.support.ClosestFacilitySolveResult\")],j);var g=j;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{normalizeCentralMeridian as r}from\"../geometry/support/normalizeUtils.js\";import{parseUrl as t}from\"./utils.js\";import{createQueryParamsHelper as i}from\"../core/queryUtils.js\";import{collectGeometries as s,isInputGeometryZAware as a,fetchServiceDescription as o,dropZValuesOffInputGeometry as n}from\"./networkUtils.js\";import u from\"../tasks/support/ClosestFacilitySolveResult.js\";const l=i({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},facilities:!0,incidents:!0,outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},returnPointBarriers:{name:\"returnBarriers\"},returnRoutes:{name:\"returnCFRoutes\"},travelMode:!0});async function c(i,c,m){const f=[],p=[],y={},B={},d=t(i);return c.incidents&&c.incidents.features&&s(c.incidents.features,p,\"incidents.features\",y),c.facilities&&c.facilities.features&&s(c.facilities.features,p,\"facilities.features\",y),c.pointBarriers&&c.pointBarriers.features&&s(c.pointBarriers.features,p,\"pointBarriers.features\",y),c.polylineBarriers&&c.polylineBarriers.features&&s(c.polylineBarriers.features,p,\"polylineBarriers.features\",y),c.polygonBarriers&&c.polygonBarriers.features&&s(c.polygonBarriers.features,p,\"polygonBarriers.features\",y),r(p).then((e=>{for(const r in y){const t=y[r];f.push(r),B[r]=e.slice(t[0],t[1])}return a(B,f)?o(d.path):Promise.resolve({dontCheck:!0})})).then((r=>{(\"dontCheck\"in r?r.dontCheck:r.hasZ)||n(B,f);for(const e in B)B[e].forEach(((r,t)=>{c.get(e)[t].geometry=r}));let t={query:{...d.query,f:\"json\",...l.toQueryParams(c)}};return m&&(t={...m,...t}),e(`${d.path}/solveClosestFacility`,t)})).then((e=>u.fromJSON(e.data)))}export{c as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import t from\"./Task.js\";import{solve as e}from\"../rest/closestFacility.js\";import{NAServiceDescriptionMixin as i}from\"./mixins/NAServiceDescription.js\";let p=class extends(i(t)){constructor(r){super(r),this.url=null}solve(r,s){return e(this.url,r,s)}};r([s()],p.prototype,\"url\",void 0),p=r([o(\"esri.tasks.ClosestFacilityTask\")],p);var c=p;export default c;\n"],"sourceRoot":""}